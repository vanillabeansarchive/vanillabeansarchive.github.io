var t4=Object.create;var bh=Object.defineProperty;var r4=Object.getOwnPropertyDescriptor;var i4=Object.getOwnPropertyNames;var n4=Object.getPrototypeOf,o4=Object.prototype.hasOwnProperty;var $=(t,e)=>()=>(t&&(e=t(t=0)),e);var se=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hr=(t,e)=>{for(var r in e)bh(t,r,{get:e[r],enumerable:!0})},J_=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of i4(e))!o4.call(t,n)&&n!==r&&bh(t,n,{get:()=>e[n],enumerable:!(i=r4(e,n))||i.enumerable});return t};var ve=(t,e,r)=>(r=t!=null?t4(n4(t)):{},J_(e||!t||!t.__esModule?bh(r,"default",{value:t,enumerable:!0}):r,t)),Nc=t=>J_(bh({},"__esModule",{value:!0}),t);function xo(t,e){for(var r in e)t[r]=e[r];return t}function _y(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ot(t,e,r){var i,n,o,s={};for(o in e)o=="key"?i=e[o]:o=="ref"?n=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?Lc.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return Oc(t,s,i,n,null)}function Oc(t,e,r,i,n){var o={type:t,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++rE,__i:-1,__u:0};return n==null&&lt.vnode!=null&&lt.vnode(o),o}function _e(){return{current:null}}function de(t){return t.children}function me(t,e){this.props=t,this.context=e}function Fl(t,e){if(e==null)return t.__?Fl(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?Fl(t):null}function lE(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return lE(t)}}function xy(t){(!t.__d&&(t.__d=!0)&&Da.push(t)&&!xh.__r++||Q_!==lt.debounceRendering)&&((Q_=lt.debounceRendering)||iE)(xh)}function xh(){for(var t,e,r,i,n,o,s,a=1;Da.length;)Da.length>a&&Da.sort(nE),t=Da.shift(),a=Da.length,t.__d&&(r=void 0,n=(i=(e=t).__v).__e,o=[],s=[],e.__P&&((r=xo({},i)).__v=i.__v+1,lt.vnode&&lt.vnode(r),Ey(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[n]:null,o,n??Fl(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,dE(o,r,s),r.__e!=n&&lE(r)));xh.__r=0}function uE(t,e,r,i,n,o,s,a,l,p,f){var c,m,v,g,x,_,E=i&&i.__k||aE,L=e.length;for(l=a4(r,e,E,l,L),c=0;c<L;c++)(v=r.__k[c])!=null&&(m=v.__i===-1?Dc:E[v.__i]||Dc,v.__i=c,_=Ey(t,v,m,n,o,s,a,l,p,f),g=v.__e,v.ref&&m.ref!=v.ref&&(m.ref&&Cy(m.ref,null,v),f.push(v.ref,v.__c||g,v)),x==null&&g!=null&&(x=g),4&v.__u||m.__k===v.__k?l=cE(v,l,t):typeof v.type=="function"&&_!==void 0?l=_:g&&(l=g.nextSibling),v.__u&=-7);return r.__e=x,l}function a4(t,e,r,i,n){var o,s,a,l,p,f=r.length,c=f,m=0;for(t.__k=new Array(n),o=0;o<n;o++)(s=e[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(l=o+m,(s=t.__k[o]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Oc(null,s,null,null,null):zc(s)?Oc(de,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?Oc(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,a=null,(p=s.__i=l4(s,r,l,c))!==-1&&(c--,(a=r[p])&&(a.__u|=2)),a==null||a.__v===null?(p==-1&&(n>f?m--:n<f&&m++),typeof s.type!="function"&&(s.__u|=4)):p!=l&&(p==l-1?m--:p==l+1?m++:(p>l?m--:m++,s.__u|=4))):t.__k[o]=null;if(c)for(o=0;o<f;o++)(a=r[o])!=null&&!(2&a.__u)&&(a.__e==i&&(i=Fl(a)),hE(a,a));return i}function cE(t,e,r){var i,n;if(typeof t.type=="function"){for(i=t.__k,n=0;i&&n<i.length;n++)i[n]&&(i[n].__=t,e=cE(i[n],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=Fl(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function So(t,e){return e=e||[],t==null||typeof t=="boolean"||(zc(t)?t.some(function(r){So(r,e)}):e.push(t)),e}function l4(t,e,r,i){var n,o,s=t.key,a=t.type,l=e[r];if(l===null&&t.key==null||l&&s==l.key&&a===l.type&&!(2&l.__u))return r;if(i>(l!=null&&!(2&l.__u)?1:0))for(n=r-1,o=r+1;n>=0||o<e.length;){if(n>=0){if((l=e[n])&&!(2&l.__u)&&s==l.key&&a===l.type)return n;n--}if(o<e.length){if((l=e[o])&&!(2&l.__u)&&s==l.key&&a===l.type)return o;o++}}return-1}function eE(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||s4.test(e)?r:r+"px"}function wh(t,e,r,i,n){var o;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)r&&e in r||eE(t.style,e,"");if(r)for(e in r)i&&r[e]===i[e]||eE(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(oE,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=r,r?i?r.t=i.t:(r.t=Sy,t.addEventListener(e,o?wy:by,o)):t.removeEventListener(e,o?wy:by,o);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function tE(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.u==null)e.u=Sy++;else if(e.u<r.t)return;return r(lt.event?lt.event(e):e)}}}function Ey(t,e,r,i,n,o,s,a,l,p){var f,c,m,v,g,x,_,E,L,O,M,D,P,U,N,F,V,q=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),o=[a=e.__e=r.__e]),(f=lt.__b)&&f(e);e:if(typeof q=="function")try{if(E=e.props,L="prototype"in q&&q.prototype.render,O=(f=q.contextType)&&i[f.__c],M=f?O?O.props.value:f.__:i,r.__c?_=(c=e.__c=r.__c).__=c.__E:(L?e.__c=c=new q(E,M):(e.__c=c=new me(E,M),c.constructor=q,c.render=c4),O&&O.sub(c),c.props=E,c.state||(c.state={}),c.context=M,c.__n=i,m=c.__d=!0,c.__h=[],c._sb=[]),L&&c.__s==null&&(c.__s=c.state),L&&q.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=xo({},c.__s)),xo(c.__s,q.getDerivedStateFromProps(E,c.__s))),v=c.props,g=c.state,c.__v=e,m)L&&q.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),L&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(L&&q.getDerivedStateFromProps==null&&E!==v&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(E,M),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(E,c.__s,M)===!1||e.__v==r.__v)){for(e.__v!=r.__v&&(c.props=E,c.state=c.__s,c.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(J){J&&(J.__=e)}),D=0;D<c._sb.length;D++)c.__h.push(c._sb[D]);c._sb=[],c.__h.length&&s.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(E,c.__s,M),L&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(v,g,x)})}if(c.context=M,c.props=E,c.__P=t,c.__e=!1,P=lt.__r,U=0,L){for(c.state=c.__s,c.__d=!1,P&&P(e),f=c.render(c.props,c.state,c.context),N=0;N<c._sb.length;N++)c.__h.push(c._sb[N]);c._sb=[]}else do c.__d=!1,P&&P(e),f=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++U<25);c.state=c.__s,c.getChildContext!=null&&(i=xo(xo({},i),c.getChildContext())),L&&!m&&c.getSnapshotBeforeUpdate!=null&&(x=c.getSnapshotBeforeUpdate(v,g)),F=f,f!=null&&f.type===de&&f.key==null&&(F=pE(f.props.children)),a=uE(t,zc(F)?F:[F],e,r,i,n,o,s,a,l,p),c.base=e.__e,e.__u&=-161,c.__h.length&&s.push(c),_&&(c.__E=c.__=null)}catch(J){if(e.__v=null,l||o!=null)if(J.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else for(V=o.length;V--;)_y(o[V]);else e.__e=r.__e,e.__k=r.__k;lt.__e(J,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=u4(r.__e,e,r,i,n,o,s,l,p);return(f=lt.diffed)&&f(e),128&e.__u?void 0:a}function dE(t,e,r){for(var i=0;i<r.length;i++)Cy(r[i],r[++i],r[++i]);lt.__c&&lt.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(o){o.call(n)})}catch(o){lt.__e(o,n.__v)}})}function pE(t){return typeof t!="object"||t==null?t:zc(t)?t.map(pE):xo({},t)}function u4(t,e,r,i,n,o,s,a,l){var p,f,c,m,v,g,x,_=r.props,E=e.props,L=e.type;if(L=="svg"?n="http://www.w3.org/2000/svg":L=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),o!=null){for(p=0;p<o.length;p++)if((v=o[p])&&"setAttribute"in v==!!L&&(L?v.localName==L:v.nodeType==3)){t=v,o[p]=null;break}}if(t==null){if(L==null)return document.createTextNode(E);t=document.createElementNS(n,L,E.is&&E),a&&(lt.__m&&lt.__m(e,o),a=!1),o=null}if(L===null)_===E||a&&t.data===E||(t.data=E);else{if(o=o&&Lc.call(t.childNodes),_=r.props||Dc,!a&&o!=null)for(_={},p=0;p<t.attributes.length;p++)_[(v=t.attributes[p]).name]=v.value;for(p in _)if(v=_[p],p!="children"){if(p=="dangerouslySetInnerHTML")c=v;else if(!(p in E)){if(p=="value"&&"defaultValue"in E||p=="checked"&&"defaultChecked"in E)continue;wh(t,p,null,v,n)}}for(p in E)v=E[p],p=="children"?m=v:p=="dangerouslySetInnerHTML"?f=v:p=="value"?g=v:p=="checked"?x=v:a&&typeof v!="function"||_[p]===v||wh(t,p,v,_[p],n);if(f)a||c&&(f.__html===c.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(c&&(t.innerHTML=""),uE(e.type==="template"?t.content:t,zc(m)?m:[m],e,r,i,L=="foreignObject"?"http://www.w3.org/1999/xhtml":n,o,s,o?o[0]:r.__k&&Fl(r,0),a,l),o!=null)for(p=o.length;p--;)_y(o[p]);a||(p="value",L=="progress"&&g==null?t.removeAttribute("value"):g!==void 0&&(g!==t[p]||L=="progress"&&!g||L=="option"&&g!==_[p])&&wh(t,p,g,_[p],n),p="checked",x!==void 0&&x!==t[p]&&wh(t,p,x,_[p],n))}return t}function Cy(t,e,r){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(n){lt.__e(n,r)}}function hE(t,e,r){var i,n;if(lt.unmount&&lt.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Cy(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){lt.__e(o,e)}i.base=i.__P=null}if(i=t.__k)for(n=0;n<i.length;n++)i[n]&&hE(i[n],e,r||typeof t.type!="function");r||_y(t.__e),t.__c=t.__=t.__e=void 0}function c4(t,e,r){return this.constructor(t,r)}function Bs(t,e,r){var i,n,o,s;e==document&&(e=document.documentElement),lt.__&&lt.__(t,e),n=(i=typeof r=="function")?null:r&&r.__k||e.__k,o=[],s=[],Ey(e,t=(!i&&r||e).__k=Ot(de,null,[t]),n||Dc,Dc,e.namespaceURI,!i&&r?[r]:n?null:e.firstChild?Lc.call(e.childNodes):null,o,!i&&r?r:n?n.__e:e.firstChild,i,s),dE(o,t,s)}function Bc(t,e){Bs(t,e,Bc)}function fE(t,e,r){var i,n,o,s,a=xo({},t.props);for(o in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?n=e[o]:a[o]=e[o]===void 0&&s!==void 0?s[o]:e[o];return arguments.length>2&&(a.children=arguments.length>3?Lc.call(arguments,2):r),Oc(t.type,a,i||t.key,n||t.ref,null)}function Tn(t){function e(r){var i,n;return this.getChildContext||(i=new Set,(n={})[e.__c]=this,this.getChildContext=function(){return n},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.forEach(function(s){s.__e=!0,xy(s)})},this.sub=function(o){i.add(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){i&&i.delete(o),s&&s.call(o)}}),r.children}return e.__c="__cC"+sE++,e.__=t,e.Provider=e.__l=(e.Consumer=function(r,i){return r.children(i)}).contextType=e,e}var Lc,lt,rE,Fc,Da,Q_,iE,nE,oE,Sy,by,wy,sE,Dc,aE,s4,zc,ke=$(()=>{Dc={},aE=[],s4=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,zc=Array.isArray;Lc=aE.slice,lt={__e:function(t,e,r,i){for(var n,o,s;e=e.__;)if((n=e.__c)&&!n.__)try{if((o=n.constructor)&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(t)),s=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,i||{}),s=n.__d),s)return n.__E=n}catch(a){t=a}throw t}},rE=0,Fc=function(t){return t!=null&&t.constructor==null},me.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=xo({},this.state),typeof t=="function"&&(t=t(xo({},r),this.props)),t&&xo(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),xy(this))},me.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),xy(this))},me.prototype.render=de,Da=[],iE=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,nE=function(t,e){return t.__v.__b-e.__v.__b},xh.__r=0,oE=/(PointerCapture)$|Capture$/i,Sy=0,by=tE(!1),wy=tE(!0),sE=0});function La(t,e){vr.__h&&vr.__h(ir,t,zl||e),zl=0;var r=ir.__H||(ir.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function wi(t){return zl=1,Hn(EE,t)}function Hn(t,e,r){var i=La(is++,2);if(i.t=t,!i.__c&&(i.__=[r?r(e):EE(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],p=i.t(l,a);l!==p&&(i.__N=[p,i.__[1]],i.__c.setState({}))}],i.__c=ir,!ir.__f)){var n=function(a,l,p){if(!i.__c.__H)return!0;var f=i.__c.__H.__.filter(function(m){return!!m.__c});if(f.every(function(m){return!m.__N}))return!o||o.call(this,a,l,p);var c=i.__c.props!==a;return f.forEach(function(m){if(m.__N){var v=m.__[0];m.__=m.__N,m.__N=void 0,v!==m.__[0]&&(c=!0)}}),o&&o.call(this,a,l,p)||c};ir.__f=!0;var o=ir.shouldComponentUpdate,s=ir.componentWillUpdate;ir.componentWillUpdate=function(a,l,p){if(this.__e){var f=o;o=void 0,n(a,l,p),o=f}s&&s.call(this,a,l,p)},ir.shouldComponentUpdate=n}return i.__N||i.__}function zt(t,e){var r=La(is++,3);!vr.__s&&Ay(r.__H,e)&&(r.__=t,r.u=e,ir.__H.__h.push(r))}function Li(t,e){var r=La(is++,4);!vr.__s&&Ay(r.__H,e)&&(r.__=t,r.u=e,ir.__h.push(r))}function xi(t){return zl=5,Qt(function(){return{current:t}},[])}function Us(t,e,r){zl=6,Li(function(){if(typeof t=="function"){var i=t(e());return function(){t(null),i&&typeof i=="function"&&i()}}if(t)return t.current=e(),function(){return t.current=null}},r==null?r:r.concat(t))}function Qt(t,e){var r=La(is++,7);return Ay(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function qs(t,e){return zl=8,Qt(function(){return t},e)}function Fr(t){var e=ir.context[t.__c],r=La(is++,9);return r.c=t,e?(r.__==null&&(r.__=!0,e.sub(ir)),e.props.value):t.__}function Uc(t,e){vr.useDebugValue&&vr.useDebugValue(e?e(t):t)}function d4(t){var e=La(is++,10),r=wi();return e.__=t,ir.componentDidCatch||(ir.componentDidCatch=function(i,n){e.__&&e.__(i,n),r[1](i)}),[r[0],function(){r[1](void 0)}]}function _h(){var t=La(is++,11);if(!t.__){for(var e=ir.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var r=e.__m||(e.__m=[0,0]);t.__="P"+r[0]+"-"+r[1]++}return t.__}function p4(){for(var t;t=_E.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Sh),t.__H.__h.forEach(Iy),t.__H.__h=[]}catch(e){t.__H.__h=[],vr.__e(e,t.__v)}}function h4(t){var e,r=function(){clearTimeout(i),SE&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(r,100);SE&&(e=requestAnimationFrame(r))}function Sh(t){var e=ir,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),ir=e}function Iy(t){var e=ir;t.__c=t.__(),ir=e}function Ay(t,e){return!t||t.length!==e.length||e.some(function(r,i){return r!==t[i]})}function EE(t,e){return typeof e=="function"?e(t):e}var is,ir,Py,mE,zl,_E,vr,gE,vE,yE,bE,wE,xE,SE,Hs=$(()=>{ke();zl=0,_E=[],vr=lt,gE=vr.__b,vE=vr.__r,yE=vr.diffed,bE=vr.__c,wE=vr.unmount,xE=vr.__;vr.__b=function(t){ir=null,gE&&gE(t)},vr.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),xE&&xE(t,e)},vr.__r=function(t){vE&&vE(t),is=0;var e=(ir=t.__c).__H;e&&(Py===ir?(e.__h=[],ir.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(Sh),e.__h.forEach(Iy),e.__h=[],is=0)),Py=ir},vr.diffed=function(t){yE&&yE(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(_E.push(e)!==1&&mE===vr.requestAnimationFrame||((mE=vr.requestAnimationFrame)||h4)(p4)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Py=ir=null},vr.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Sh),r.__h=r.__h.filter(function(i){return!i.__||Iy(i)})}catch(i){e.some(function(n){n.__h&&(n.__h=[])}),e=[],vr.__e(i,r.__v)}}),bE&&bE(t,e)},vr.unmount=function(t){wE&&wE(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(i){try{Sh(i)}catch(n){e=n}}),r.__H=void 0,e&&vr.__e(e,r.__v))};SE=typeof requestAnimationFrame=="function"});var JE={};hr(JE,{Children:()=>Fa,Component:()=>me,Fragment:()=>de,PureComponent:()=>Mr,StrictMode:()=>XE,Suspense:()=>qc,SuspenseList:()=>Bl,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>HE,cloneElement:()=>jE,createContext:()=>Tn,createElement:()=>Ot,createFactory:()=>WE,createPortal:()=>rt,createRef:()=>_e,default:()=>ze,findDOMNode:()=>KE,flushSync:()=>YE,forwardRef:()=>Fi,hydrate:()=>qE,isElement:()=>ZE,isFragment:()=>VE,isMemo:()=>$E,isValidElement:()=>Hc,lazy:()=>zE,memo:()=>OE,render:()=>UE,startTransition:()=>ky,unmountComponentAtNode:()=>GE,unstable_batchedUpdates:()=>Wc,useCallback:()=>qs,useContext:()=>Fr,useDebugValue:()=>Uc,useDeferredValue:()=>Ny,useEffect:()=>zt,useErrorBoundary:()=>d4,useId:()=>_h,useImperativeHandle:()=>Us,useInsertionEffect:()=>Dy,useLayoutEffect:()=>Li,useMemo:()=>Qt,useReducer:()=>Hn,useRef:()=>xi,useState:()=>wi,useSyncExternalStore:()=>Ry,useTransition:()=>Oy,version:()=>I4});function NE(t,e){for(var r in e)t[r]=e[r];return t}function My(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function Ry(t,e){var r=e(),i=wi({t:{__:r,u:e}}),n=i[0].t,o=i[1];return Li(function(){n.__=r,n.u=e,Ty(n)&&o({t:n})},[t,r,e]),zt(function(){return Ty(n)&&o({t:n}),t(function(){Ty(n)&&o({t:n})})},[t]),r}function Ty(t){var e,r,i=t.u,n=t.__;try{var o=i();return!((e=n)===(r=o)&&(e!==0||1/e==1/r)||e!=e&&r!=r)}catch{return!0}}function ky(t){t()}function Ny(t){return t}function Oy(){return[!1,ky]}function Mr(t,e){this.props=t,this.context=e}function OE(t,e){function r(n){var o=this.props.ref,s=o==n.ref;return!s&&o&&(o.call?o(null):o.current=null),e?!e(this.props,n)||!s:My(this.props,n)}function i(n){return this.shouldComponentUpdate=r,Ot(t,n)}return i.displayName="Memo("+(t.displayName||t.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}function Fi(t){function e(r){var i=NE({},r);return delete i.ref,t(i,r.ref||null)}return e.$$typeof=f4,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}function DE(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),t.__c.__H=null),(t=NE({},t)).__c!=null&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(i){return DE(i,e,r)})),t}function LE(t,e,r){return t&&r&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(i){return LE(i,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=r)),t}function qc(){this.__u=0,this.o=null,this.__b=null}function FE(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function zE(t){var e,r,i;function n(o){if(e||(e=t()).then(function(s){r=s.default||s},function(s){i=s}),i)throw i;if(!r)throw e;return Ot(r,o)}return n.displayName="Lazy",n.__f=!0,n}function Bl(){this.i=null,this.l=null}function g4(t){return this.getChildContext=function(){return t.context},t.children}function v4(t){var e=this,r=t.h;e.componentWillUnmount=function(){Bs(null,e.v),e.v=null,e.h=null},e.h&&e.h!==r&&e.componentWillUnmount(),e.v||(e.h=r,e.v={nodeType:1,parentNode:r,childNodes:[],contains:function(){return!0},appendChild:function(i){this.childNodes.push(i),e.h.appendChild(i)},insertBefore:function(i,n){this.childNodes.push(i),e.h.insertBefore(i,n)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}),Bs(Ot(g4,{context:e.context},t.__v),e.v)}function rt(t,e){var r=Ot(v4,{__v:t,h:e});return r.containerInfo=e,r}function UE(t,e,r){return e.__k==null&&(e.textContent=""),Bs(t,e),typeof r=="function"&&r(),t?t.__c:null}function qE(t,e,r){return Bc(t,e),typeof r=="function"&&r(),t?t.__c:null}function _4(){}function E4(){return this.cancelBubble}function C4(){return this.defaultPrevented}function WE(t){return Ot.bind(null,t)}function Hc(t){return!!t&&t.$$typeof===BE}function VE(t){return Hc(t)&&t.type===de}function $E(t){return!!t&&!!t.displayName&&(typeof t.displayName=="string"||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function jE(t){return Hc(t)?fE.apply(null,arguments):t}function GE(t){return!!t.__k&&(Bs(null,t),!0)}function KE(t){return t&&(t.base||t.nodeType===1&&t)||null}var Dy,CE,f4,PE,Fa,m4,IE,AE,BE,y4,b4,w4,x4,S4,TE,Ly,P4,ME,RE,kE,HE,I4,Wc,YE,XE,ZE,ze,Ze=$(()=>{ke();ke();Hs();Hs();Dy=Li;(Mr.prototype=new me).isPureReactComponent=!0,Mr.prototype.shouldComponentUpdate=function(t,e){return My(this.props,t)||My(this.state,e)};CE=lt.__b;lt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),CE&&CE(t)};f4=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;PE=function(t,e){return t==null?null:So(So(t).map(e))},Fa={map:PE,forEach:PE,count:function(t){return t?So(t).length:0},only:function(t){var e=So(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:So},m4=lt.__e;lt.__e=function(t,e,r,i){if(t.then){for(var n,o=e;o=o.__;)if((n=o.__c)&&n.__c)return e.__e==null&&(e.__e=r.__e,e.__k=r.__k),n.__c(t,e)}m4(t,e,r,i)};IE=lt.unmount;lt.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),IE&&IE(t)},(qc.prototype=new me).__c=function(t,e){var r=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(r);var n=FE(i.__v),o=!1,s=function(){o||(o=!0,r.__R=null,n?n(a):a())};r.__R=s;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=LE(l,l.__c.__P,l.__c.__O)}var p;for(i.setState({__a:i.__b=null});p=i.o.pop();)p.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(s,s)},qc.prototype.componentWillUnmount=function(){this.o=[]},qc.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=DE(this.__b,r,i.__O=i.__P)}this.__b=null}var n=e.__a&&Ot(de,null,t.fallback);return n&&(n.__u&=-33),[Ot(de,null,e.__a?null:t.children),n]};AE=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};(Bl.prototype=new me).__a=function(t){var e=this,r=FE(e.__v),i=e.l.get(t);return i[0]++,function(n){var o=function(){e.props.revealOrder?(i.push(n),AE(e,t,i)):n()};r?r(o):o()}},Bl.prototype.render=function(t){this.i=null,this.l=new Map;var e=So(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},Bl.prototype.componentDidUpdate=Bl.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,r){AE(t,r,e)})};BE=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,y4=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,b4=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,w4=/[A-Z0-9]/g,x4=typeof document<"u",S4=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};me.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(me.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});TE=lt.event;lt.event=function(t){return TE&&(t=TE(t)),t.persist=_4,t.isPropagationStopped=E4,t.isDefaultPrevented=C4,t.nativeEvent=t};P4={enumerable:!1,configurable:!0,get:function(){return this.class}},ME=lt.vnode;lt.vnode=function(t){typeof t.type=="string"&&function(e){var r=e.props,i=e.type,n={},o=i.indexOf("-")===-1;for(var s in r){var a=r[s];if(!(s==="value"&&"defaultValue"in r&&a==null||x4&&s==="children"&&i==="noscript"||s==="class"||s==="className")){var l=s.toLowerCase();s==="defaultValue"&&"value"in r&&r.value==null?s="value":s==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?s="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||S4(r.type)?l==="onfocus"?s="onfocusin":l==="onblur"?s="onfocusout":b4.test(s)&&(s=l):l=s="oninput":o&&y4.test(s)?s=s.replace(w4,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&n[s=l]&&(s="oninputCapture"),n[s]=a}}i=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=So(r.children).forEach(function(p){p.props.selected=n.value.indexOf(p.props.value)!=-1})),i=="select"&&n.defaultValue!=null&&(n.value=So(r.children).forEach(function(p){p.props.selected=n.multiple?n.defaultValue.indexOf(p.props.value)!=-1:n.defaultValue==p.props.value})),r.class&&!r.className?(n.class=r.class,Object.defineProperty(n,"className",P4)):(r.className&&!r.class||r.class&&r.className)&&(n.class=n.className=r.className),e.props=n}(t),t.$$typeof=BE,ME&&ME(t)};RE=lt.__r;lt.__r=function(t){RE&&RE(t),Ly=t.__c};kE=lt.diffed;lt.diffed=function(t){kE&&kE(t);var e=t.props,r=t.__e;r!=null&&t.type==="textarea"&&"value"in e&&e.value!==r.value&&(r.value=e.value==null?"":e.value),Ly=null};HE={ReactCurrentDispatcher:{current:{readContext:function(t){return Ly.__n[t.__c].props.value},useCallback:qs,useContext:Fr,useDebugValue:Uc,useDeferredValue:Ny,useEffect:zt,useId:_h,useImperativeHandle:Us,useInsertionEffect:Dy,useLayoutEffect:Li,useMemo:Qt,useReducer:Hn,useRef:xi,useState:wi,useSyncExternalStore:Ry,useTransition:Oy}}},I4="18.3.1";Wc=function(t,e){return t(e)},YE=function(t,e){return t(e)},XE=de,ZE=Hc,ze={useState:wi,useId:_h,useReducer:Hn,useEffect:zt,useLayoutEffect:Li,useInsertionEffect:Dy,useTransition:Oy,useDeferredValue:Ny,useSyncExternalStore:Ry,startTransition:ky,useRef:xi,useImperativeHandle:Us,useMemo:Qt,useCallback:qs,useContext:Fr,useDebugValue:Uc,version:"18.3.1",Children:Fa,render:UE,hydrate:qE,unmountComponentAtNode:GE,createPortal:rt,createElement:Ot,createContext:Tn,createFactory:WE,cloneElement:jE,createRef:_e,Fragment:de,isValidElement:Hc,isElement:ZE,isFragment:VE,isMemo:$E,findDOMNode:KE,Component:me,PureComponent:Mr,memo:OE,forwardRef:Fi,flushSync:YE,unstable_batchedUpdates:Wc,StrictMode:XE,Suspense:qc,SuspenseList:Bl,lazy:zE,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:HE}});var eC=se((Vue,QE)=>{"use strict";var A4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";QE.exports=A4});var nC=se(($ue,iC)=>{"use strict";var T4=eC();function tC(){}function rC(){}rC.resetWarningCache=tC;iC.exports=function(){function t(i,n,o,s,a,l){if(l!==T4){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:rC,resetWarningCache:tC};return r.PropTypes=r,r}});var Fy=se((Kue,oC)=>{oC.exports=nC()();var jue,Gue});var Mn,Ws=$(()=>{Ze();Mn=ze.createContext(null)});function M4(t){t()}var sC,aC,lC,zy=$(()=>{sC=M4,aC=function(e){return sC=e},lC=function(){return sC}});function R4(){var t=lC(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var n=e;n;)n.callback(),n=n.next})},get:function(){for(var n=[],o=e;o;)n.push(o),o=o.next;return n},subscribe:function(n){var o=!0,s=r={callback:n,next:null,prev:r};return s.prev?s.prev.next=s:e=s,function(){!o||e===null||(o=!1,s.next?s.next.prev=s.prev:r=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}function Vc(t,e){var r,i=uC;function n(c){return l(),i.subscribe(c)}function o(){i.notify()}function s(){f.onStateChange&&f.onStateChange()}function a(){return!!r}function l(){r||(r=e?e.addNestedSub(s):t.subscribe(s),i=R4())}function p(){r&&(r(),r=void 0,i.clear(),i=uC)}var f={addNestedSub:n,notifyNestedSubs:o,handleChangeWrapper:s,isSubscribed:a,trySubscribe:l,tryUnsubscribe:p,getListeners:function(){return i}};return f}var uC,Eh=$(()=>{zy();uC={notify:function(){},get:function(){return[]}}});var $c,Ch=$(()=>{Ze();$c=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Li:zt});function k4(t){var e=t.store,r=t.context,i=t.children,n=Qt(function(){var a=Vc(e);return{store:e,subscription:a}},[e]),o=Qt(function(){return e.getState()},[e]);$c(function(){var a=n.subscription;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),o!==e.getState()&&a.notifyNestedSubs(),function(){a.tryUnsubscribe(),a.onStateChange=null}},[n,o]);var s=r||Mn;return ze.createElement(s.Provider,{value:n},i)}var By,cC=$(()=>{Ze();Ws();Eh();Ch();By=k4});function jt(){return jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},jt.apply(this,arguments)}var za=$(()=>{});function zi(t,e){if(t==null)return{};var r={},i=Object.keys(t),n,o;for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}var Ul=$(()=>{});var pC=se(Gt=>{"use strict";var Gr=typeof Symbol=="function"&&Symbol.for,Uy=Gr?Symbol.for("react.element"):60103,qy=Gr?Symbol.for("react.portal"):60106,Ph=Gr?Symbol.for("react.fragment"):60107,Ih=Gr?Symbol.for("react.strict_mode"):60108,Ah=Gr?Symbol.for("react.profiler"):60114,Th=Gr?Symbol.for("react.provider"):60109,Mh=Gr?Symbol.for("react.context"):60110,Hy=Gr?Symbol.for("react.async_mode"):60111,Rh=Gr?Symbol.for("react.concurrent_mode"):60111,kh=Gr?Symbol.for("react.forward_ref"):60112,Nh=Gr?Symbol.for("react.suspense"):60113,N4=Gr?Symbol.for("react.suspense_list"):60120,Oh=Gr?Symbol.for("react.memo"):60115,Dh=Gr?Symbol.for("react.lazy"):60116,O4=Gr?Symbol.for("react.block"):60121,D4=Gr?Symbol.for("react.fundamental"):60117,L4=Gr?Symbol.for("react.responder"):60118,F4=Gr?Symbol.for("react.scope"):60119;function pn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Uy:switch(t=t.type,t){case Hy:case Rh:case Ph:case Ah:case Ih:case Nh:return t;default:switch(t=t&&t.$$typeof,t){case Mh:case kh:case Dh:case Oh:case Th:return t;default:return e}}case qy:return e}}}function dC(t){return pn(t)===Rh}Gt.AsyncMode=Hy;Gt.ConcurrentMode=Rh;Gt.ContextConsumer=Mh;Gt.ContextProvider=Th;Gt.Element=Uy;Gt.ForwardRef=kh;Gt.Fragment=Ph;Gt.Lazy=Dh;Gt.Memo=Oh;Gt.Portal=qy;Gt.Profiler=Ah;Gt.StrictMode=Ih;Gt.Suspense=Nh;Gt.isAsyncMode=function(t){return dC(t)||pn(t)===Hy};Gt.isConcurrentMode=dC;Gt.isContextConsumer=function(t){return pn(t)===Mh};Gt.isContextProvider=function(t){return pn(t)===Th};Gt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uy};Gt.isForwardRef=function(t){return pn(t)===kh};Gt.isFragment=function(t){return pn(t)===Ph};Gt.isLazy=function(t){return pn(t)===Dh};Gt.isMemo=function(t){return pn(t)===Oh};Gt.isPortal=function(t){return pn(t)===qy};Gt.isProfiler=function(t){return pn(t)===Ah};Gt.isStrictMode=function(t){return pn(t)===Ih};Gt.isSuspense=function(t){return pn(t)===Nh};Gt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ph||t===Rh||t===Ah||t===Ih||t===Nh||t===N4||typeof t=="object"&&t!==null&&(t.$$typeof===Dh||t.$$typeof===Oh||t.$$typeof===Th||t.$$typeof===Mh||t.$$typeof===kh||t.$$typeof===D4||t.$$typeof===L4||t.$$typeof===F4||t.$$typeof===O4)};Gt.typeOf=pn});var Wy=se((cce,hC)=>{"use strict";hC.exports=pC()});var Lh=se((dce,bC)=>{"use strict";var Vy=Wy(),z4={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},B4={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U4={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vC={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$y={};$y[Vy.ForwardRef]=U4;$y[Vy.Memo]=vC;function fC(t){return Vy.isMemo(t)?vC:$y[t.$$typeof]||z4}var q4=Object.defineProperty,H4=Object.getOwnPropertyNames,mC=Object.getOwnPropertySymbols,W4=Object.getOwnPropertyDescriptor,V4=Object.getPrototypeOf,gC=Object.prototype;function yC(t,e,r){if(typeof e!="string"){if(gC){var i=V4(e);i&&i!==gC&&yC(t,i,r)}var n=H4(e);mC&&(n=n.concat(mC(e)));for(var o=fC(t),s=fC(e),a=0;a<n.length;++a){var l=n[a];if(!B4[l]&&!(r&&r[l])&&!(s&&s[l])&&!(o&&o[l])){var p=W4(e,l);try{q4(t,l,p)}catch{}}}}return t}bC.exports=yC});var CC=se(nr=>{"use strict";var Fh=60103,zh=60106,jc=60107,Gc=60108,Kc=60114,Yc=60109,Xc=60110,Zc=60112,Jc=60113,jy=60120,Qc=60115,ed=60116,wC=60121,xC=60122,SC=60117,_C=60129,EC=60131;typeof Symbol=="function"&&Symbol.for&&(Kr=Symbol.for,Fh=Kr("react.element"),zh=Kr("react.portal"),jc=Kr("react.fragment"),Gc=Kr("react.strict_mode"),Kc=Kr("react.profiler"),Yc=Kr("react.provider"),Xc=Kr("react.context"),Zc=Kr("react.forward_ref"),Jc=Kr("react.suspense"),jy=Kr("react.suspense_list"),Qc=Kr("react.memo"),ed=Kr("react.lazy"),wC=Kr("react.block"),xC=Kr("react.server.block"),SC=Kr("react.fundamental"),_C=Kr("react.debug_trace_mode"),EC=Kr("react.legacy_hidden"));var Kr;function Wn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Fh:switch(t=t.type,t){case jc:case Kc:case Gc:case Jc:case jy:return t;default:switch(t=t&&t.$$typeof,t){case Xc:case Zc:case ed:case Qc:case Yc:return t;default:return e}}case zh:return e}}}var $4=Yc,j4=Fh,G4=Zc,K4=jc,Y4=ed,X4=Qc,Z4=zh,J4=Kc,Q4=Gc,e$=Jc;nr.ContextConsumer=Xc;nr.ContextProvider=$4;nr.Element=j4;nr.ForwardRef=G4;nr.Fragment=K4;nr.Lazy=Y4;nr.Memo=X4;nr.Portal=Z4;nr.Profiler=J4;nr.StrictMode=Q4;nr.Suspense=e$;nr.isAsyncMode=function(){return!1};nr.isConcurrentMode=function(){return!1};nr.isContextConsumer=function(t){return Wn(t)===Xc};nr.isContextProvider=function(t){return Wn(t)===Yc};nr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fh};nr.isForwardRef=function(t){return Wn(t)===Zc};nr.isFragment=function(t){return Wn(t)===jc};nr.isLazy=function(t){return Wn(t)===ed};nr.isMemo=function(t){return Wn(t)===Qc};nr.isPortal=function(t){return Wn(t)===zh};nr.isProfiler=function(t){return Wn(t)===Kc};nr.isStrictMode=function(t){return Wn(t)===Gc};nr.isSuspense=function(t){return Wn(t)===Jc};nr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===jc||t===Kc||t===_C||t===Gc||t===Jc||t===jy||t===EC||typeof t=="object"&&t!==null&&(t.$$typeof===ed||t.$$typeof===Qc||t.$$typeof===Yc||t.$$typeof===Xc||t.$$typeof===Zc||t.$$typeof===SC||t.$$typeof===wC||t[0]===xC)};nr.typeOf=Wn});var IC=se((hce,PC)=>{"use strict";PC.exports=CC()});function o$(t,e){var r=t[1];return[e.payload,r+1]}function AC(t,e,r){$c(function(){return t.apply(void 0,e)},r)}function s$(t,e,r,i,n,o,s){t.current=i,e.current=n,r.current=!1,o.current&&(o.current=null,s())}function a$(t,e,r,i,n,o,s,a,l,p){if(t){var f=!1,c=null,m=function(){if(!f){var x=e.getState(),_,E;try{_=i(x,n.current)}catch(L){E=L,c=L}E||(c=null),_===o.current?s.current||l():(o.current=_,a.current=_,s.current=!0,p({type:"STORE_UPDATED",payload:{error:E}}))}};r.onStateChange=m,r.trySubscribe(),m();var v=function(){if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,c)throw c};return v}}function Bh(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,n=i===void 0?function(P){return"ConnectAdvanced("+P+")"}:i,o=r.methodName,s=o===void 0?"connectAdvanced":o,a=r.renderCountProp,l=a===void 0?void 0:a,p=r.shouldHandleStateChanges,f=p===void 0?!0:p,c=r.storeKey,m=c===void 0?"store":c,v=r.withRef,g=v===void 0?!1:v,x=r.forwardRef,_=x===void 0?!1:x,E=r.context,L=E===void 0?Mn:E,O=zi(r,t$);if(0)var M;var D=L;return function(U){var N=U.displayName||U.name||"Component",F=n(N),V=jt({},O,{getDisplayName:n,methodName:s,renderCountProp:l,shouldHandleStateChanges:f,storeKey:m,displayName:F,wrappedComponentName:N,WrappedComponent:U}),q=O.pure;function J(K){return t(K.dispatch,V)}var Y=q?Qt:function(K){return K()};function ie(K){var Q=Qt(function(){var pt=K.reactReduxForwardedRef,Ai=zi(K,r$);return[K.context,pt,Ai]},[K]),te=Q[0],ee=Q[1],ae=Q[2],ue=Qt(function(){return te&&te.Consumer&&(0,TC.isContextConsumer)(ze.createElement(te.Consumer,null))?te:D},[te,D]),le=Fr(ue),xe=!!K.store&&!!K.store.getState&&!!K.store.dispatch,Re=!!le&&!!le.store,be=xe?K.store:le.store,Me=Qt(function(){return J(be)},[be]),We=Qt(function(){if(!f)return n$;var pt=Vc(be,xe?null:le.subscription),Ai=pt.notifyNestedSubs.bind(pt);return[pt,Ai]},[be,xe,le]),Pe=We[0],Ve=We[1],Le=Qt(function(){return xe?le:jt({},le,{subscription:Pe})},[xe,le,Pe]),He=Hn(o$,i$,l$),it=He[0],Je=it[0],st=He[1];if(Je&&Je.error)throw Je.error;var ot=xi(),vt=xi(ae),bt=xi(),je=xi(!1),Lt=Y(function(){return bt.current&&ae===vt.current?bt.current:Me(be.getState(),ae)},[be,Je,ae]);AC(s$,[vt,ot,je,ae,Lt,bt,Ve]),AC(a$,[f,be,Pe,Me,vt,ot,je,bt,Ve,st],[be,Pe,Me]);var Kt=Qt(function(){return ze.createElement(U,jt({},Lt,{ref:ee}))},[ee,U,Lt]),Ir=Qt(function(){return f?ze.createElement(ue.Provider,{value:Le},Kt):Kt},[ue,Kt,Le]);return Ir}var oe=q?ze.memo(ie):ie;if(oe.WrappedComponent=U,oe.displayName=ie.displayName=F,_){var Z=ze.forwardRef(function(Q,te){return ze.createElement(oe,jt({},Q,{reactReduxForwardedRef:te}))});return Z.displayName=F,Z.WrappedComponent=U,(0,Gy.default)(Z,U)}return(0,Gy.default)(oe,U)}}var Gy,TC,t$,r$,i$,n$,l$,Ky=$(()=>{za();Ul();Gy=ve(Lh());Ze();TC=ve(IC());Eh();Ch();Ws();t$=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],r$=["reactReduxForwardedRef"],i$=[],n$=[null,null];l$=function(){return[null,0]}});function MC(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function ql(t,e){if(MC(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(e,r[n])||!MC(t[r[n]],e[r[n]]))return!1;return!0}var Yy=$(()=>{});function Xy(t,e){var r={},i=function(s){var a=t[s];typeof a=="function"&&(r[s]=function(){return e(a.apply(void 0,arguments))})};for(var n in t)i(n);return r}var RC=$(()=>{});var kC=$(()=>{});var Zy=$(()=>{});var Jy=$(()=>{kC();Zy()});function td(t){return function(r,i){var n=t(r,i);function o(){return n}return o.dependsOnOwnProps=!1,o}}function NC(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function Uh(t,e){return function(i,n){var o=n.displayName,s=function(l,p){return s.dependsOnOwnProps?s.mapToProps(l,p):s.mapToProps(l)};return s.dependsOnOwnProps=!0,s.mapToProps=function(l,p){s.mapToProps=t,s.dependsOnOwnProps=NC(t);var f=s(l,p);return typeof f=="function"&&(s.mapToProps=f,s.dependsOnOwnProps=NC(f),f=s(l,p)),f},s}}var Qy=$(()=>{Jy()});function c$(t){return typeof t=="function"?Uh(t,"mapDispatchToProps"):void 0}function d$(t){return t?void 0:td(function(e){return{dispatch:e}})}function p$(t){return t&&typeof t=="object"?td(function(e){return Xy(t,e)}):void 0}var OC,DC=$(()=>{RC();Qy();OC=[c$,d$,p$]});function h$(t){return typeof t=="function"?Uh(t,"mapStateToProps"):void 0}function f$(t){return t?void 0:td(function(){return{}})}var LC,FC=$(()=>{Qy();LC=[h$,f$]});function m$(t,e,r){return jt({},r,t,e)}function g$(t){return function(r,i){var n=i.displayName,o=i.pure,s=i.areMergedPropsEqual,a=!1,l;return function(f,c,m){var v=t(f,c,m);return a?(!o||!s(v,l))&&(l=v):(a=!0,l=v),l}}}function v$(t){return typeof t=="function"?g$(t):void 0}function y$(t){return t?void 0:function(){return m$}}var zC,BC=$(()=>{za();Jy();zC=[v$,y$]});var UC=$(()=>{Zy()});function w$(t,e,r,i){return function(o,s){return r(t(o,s),e(i,s),s)}}function x$(t,e,r,i,n){var o=n.areStatesEqual,s=n.areOwnPropsEqual,a=n.areStatePropsEqual,l=!1,p,f,c,m,v;function g(O,M){return p=O,f=M,c=t(p,f),m=e(i,f),v=r(c,m,f),l=!0,v}function x(){return c=t(p,f),e.dependsOnOwnProps&&(m=e(i,f)),v=r(c,m,f),v}function _(){return t.dependsOnOwnProps&&(c=t(p,f)),e.dependsOnOwnProps&&(m=e(i,f)),v=r(c,m,f),v}function E(){var O=t(p,f),M=!a(O,c);return c=O,M&&(v=r(c,m,f)),v}function L(O,M){var D=!s(M,f),P=!o(O,p,M,f);return p=O,f=M,D&&P?x():D?_():P?E():v}return function(M,D){return l?L(M,D):g(M,D)}}function eb(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,n=e.initMergeProps,o=zi(e,b$),s=r(t,o),a=i(t,o),l=n(t,o),p=o.pure?x$:w$;return p(s,a,l,t,o)}var b$,qC=$(()=>{Ul();UC();b$=["initMapStateToProps","initMapDispatchToProps","initMergeProps"]});function tb(t,e,r){for(var i=e.length-1;i>=0;i--){var n=e[i](t);if(n)return n}return function(o,s){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+s.wrappedComponentName+".")}}function _$(t,e){return t===e}function E$(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?Bh:r,n=e.mapStateToPropsFactories,o=n===void 0?LC:n,s=e.mapDispatchToPropsFactories,a=s===void 0?OC:s,l=e.mergePropsFactories,p=l===void 0?zC:l,f=e.selectorFactory,c=f===void 0?eb:f;return function(v,g,x,_){_===void 0&&(_={});var E=_,L=E.pure,O=L===void 0?!0:L,M=E.areStatesEqual,D=M===void 0?_$:M,P=E.areOwnPropsEqual,U=P===void 0?ql:P,N=E.areStatePropsEqual,F=N===void 0?ql:N,V=E.areMergedPropsEqual,q=V===void 0?ql:V,J=zi(E,S$),Y=tb(v,o,"mapStateToProps"),ie=tb(g,a,"mapDispatchToProps"),oe=tb(x,p,"mergeProps");return i(c,jt({methodName:"connect",getDisplayName:function(K){return"Connect("+K+")"},shouldHandleStateChanges:!!v,initMapStateToProps:Y,initMapDispatchToProps:ie,initMergeProps:oe,pure:O,areStatesEqual:D,areOwnPropsEqual:U,areStatePropsEqual:F,areMergedPropsEqual:q},J))}}var S$,Ue,HC=$(()=>{za();Ul();Ky();Yy();DC();FC();BC();qC();S$=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];Ue=E$()});function rb(){var t=Fr(Mn);return t}var ib=$(()=>{Ze();Ws()});function nb(t){t===void 0&&(t=Mn);var e=t===Mn?rb:function(){return Fr(t)};return function(){var i=e(),n=i.store;return n}}var qh,ob=$(()=>{Ze();Ws();ib();qh=nb()});var WC=$(()=>{Ws();ob()});var VC=$(()=>{Ze();ib();Eh();Ch();Ws()});var $C=$(()=>{cC();Ky();Ws();HC();WC();VC();ob();Yy()});var jC=$(()=>{Ze()});var mt=$(()=>{$C();jC();zy();aC(Wc)});var Hh=se(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.frontloadConnect=Ua.Frontload=void 0;var sb=function(){function t(e,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();Ua.frontloadServerRender=D$;var C$=(Ze(),Nc(JE)),rd=KC(C$),P$=Fy(),GC=KC(P$);function KC(t){return t&&t.__esModule?t:{default:t}}function YC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XC(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ZC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var I$=function(){return typeof window>"u"||!window.document||!window.document.createElement},A$=I$(),Hl=[],Ba={MOUNT:0,UPDATE:1},T$=!1,JC=function(e,r){for(var i=[],n=0;n<e.length;n++)i.push(r(e[n],n));return i};function M$(t,e){var r=e.withLogging,i=e.continueRenderingOnError,n=void 0;return Promise.all(JC(t,function(o){return o.catch(function(s){return n||(n=s),r&&T$("frontloadServerRender info","ERROR:",s),s})})).then(function(){if(i!==!0&&n)throw n})}var R$=Ua.Frontload=function(t){ZC(e,t),sb(e,[{key:"getChildContext",value:function(){var i=this;return{frontload:{isServer:this.isServer,firstClientRenderDone:this.isServer?!0:this.firstClientRenderDone,pushFrontload:function(o,s,a,l,p){var f=a===Ba.MOUNT,c=a===Ba.UPDATE,m=i.props.noServerRender||s.noServerRender;i.isServer&&m||f&&s.onMount===!1||c&&!s.onUpdate||(i.isServer?Hl.unshift({fn:function(){return o(l,{isMount:f,isUpdate:c})},options:s,componentDisplayName:l.displayName}):(m||i.firstClientRenderDone)&&o(l,{isMount:f,isUpdate:c}))}}}}}]);function e(r,i){YC(this,e);var n=XC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,i));return n.isServer=r.isServer===void 0?A$:r.isServer,n.componentDidMount=function(){n.firstClientRenderDone=!0},n}return sb(e,[{key:"render",value:function(){return rd.default.Children.only(this.props.children)}}]),e}(rd.default.Component);R$.childContextTypes={frontload:GC.default.object};var QC=function(t){ZC(e,t);function e(r,i){YC(this,e);var n=XC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,i));return n.pushFrontload=function(o){return function(s){if(o===Ba.UPDATE){var a=n.props.options._experimental_updateFunc;if(a&&!a(s.componentProps,n.props.componentProps))return}var l="for component: ["+(n.props.component.displayName||"anonymous")+"] on ["+(o===Ba.MOUNT?"mount":"update")+"]";n.context.frontload.pushFrontload(n.props.frontload,n.props.options,o,n.props.componentProps,l)}},i.frontload.isServer?n.componentWillMount=n.pushFrontload(Ba.MOUNT):(n.componentDidMount=n.pushFrontload(Ba.MOUNT),n.componentDidUpdate=n.pushFrontload(Ba.UPDATE)),n}return sb(e,[{key:"render",value:function(){return rd.default.createElement(this.props.component,this.props.componentProps)}}]),e}(rd.default.Component);QC.contextTypes={frontload:GC.default.object};var zde=Ua.frontloadConnect=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(i){return function(n){return rd.default.createElement(QC,{frontload:e,component:i,componentProps:n,options:r})}}};function k$(t){t(!0);var e=Hl;return Hl=[],e}function N$(t,e){return M$(JC(t,function(r){return r.fn()}),e)}function O$(t){var e=t(!1);return Hl=[],e}function eP(t,e){var r=e.withLogging,i=e.maxNestedFrontloadComponents,n=e.continueRenderingOnError,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=k$(t),l=a.length+0,p=l-s;if(!p){var f=O$(t);return Promise.resolve(f)}var c=r&&Date.now();return N$(a,{withLogging:r,continueRenderingOnError:n}).then(function(){if(o===i){var m=t(!1),v=Hl.length+0,g=v-l;return Hl=[],m}return eP(t,{withLogging:r,maxNestedFrontloadComponents:i,continueRenderingOnError:n},o+1,l)})}function D$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.maxNestedFrontloadComponents||(e.maxNestedFrontloadComponents=1),eP(t,e)}});function id(t,e){return id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},id(t,e)}var tP=$(()=>{});function Yi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,id(t,e)}var Wh=$(()=>{tP()});function Vh(t){return t.charAt(0)==="/"}function ab(t,e){for(var r=e,i=r+1,n=t.length;i<n;r+=1,i+=1)t[r]=t[i];t.pop()}function L$(t,e){e===void 0&&(e="");var r=t&&t.split("/")||[],i=e&&e.split("/")||[],n=t&&Vh(t),o=e&&Vh(e),s=n||o;if(t&&Vh(t)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";var a;if(i.length){var l=i[i.length-1];a=l==="."||l===".."||l===""}else a=!1;for(var p=0,f=i.length;f>=0;f--){var c=i[f];c==="."?ab(i,f):c===".."?(ab(i,f),p++):p&&(ab(i,f),p--)}if(!s)for(;p--;p)i.unshift("..");s&&i[0]!==""&&(!i[0]||!Vh(i[0]))&&i.unshift("");var m=i.join("/");return a&&m.substr(-1)!=="/"&&(m+="/"),m}var rP,iP=$(()=>{rP=L$});var nP=$(()=>{});function z$(t,e){if(!F$){if(t)return;var r="Warning: "+e;typeof console<"u"&&console.warn(r);try{throw Error(r)}catch{}}}var F$,lb,oP=$(()=>{F$=!0;lb=z$});function Vn(t,e){if(!t){if(B$)throw new Error(ub);var r=typeof e=="function"?e():e,i=r?"".concat(ub,": ").concat(r):ub;throw new Error(i)}}var B$,ub,$h=$(()=>{B$=!0,ub="Invariant failed"});function od(t){return t.charAt(0)==="/"?t:"/"+t}function sP(t){return t.charAt(0)==="/"?t.substr(1):t}function U$(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function pP(t,e){return U$(t,e)?t.substr(e.length):t}function hP(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function q$(t){var e=t||"/",r="",i="",n=e.indexOf("#");n!==-1&&(i=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");return o!==-1&&(r=e.substr(o),e=e.substr(0,o)),{pathname:e,search:r==="?"?"":r,hash:i==="#"?"":i}}function Si(t){var e=t.pathname,r=t.search,i=t.hash,n=e||"/";return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function Bi(t,e,r,i){var n;typeof t=="string"?(n=q$(t),n.state=e):(n=jt({},t),n.pathname===void 0&&(n.pathname=""),n.search?n.search.charAt(0)!=="?"&&(n.search="?"+n.search):n.search="",n.hash?n.hash.charAt(0)!=="#"&&(n.hash="#"+n.hash):n.hash="",e!==void 0&&n.state===void 0&&(n.state=e));try{n.pathname=decodeURI(n.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+n.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return r&&(n.key=r),i?n.pathname?n.pathname.charAt(0)!=="/"&&(n.pathname=rP(n.pathname,i.pathname)):n.pathname=i.pathname:n.pathname||(n.pathname="/"),n}function db(){var t=null;function e(s){return t=s,function(){t===s&&(t=null)}}function r(s,a,l,p){if(t!=null){var f=typeof t=="function"?t(s,a):t;typeof f=="string"?typeof l=="function"?l(f,p):p(!0):p(f!==!1)}else p(!0)}var i=[];function n(s){var a=!0;function l(){a&&s.apply(void 0,arguments)}return i.push(l),function(){a=!1,i=i.filter(function(p){return p!==l})}}function o(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];i.forEach(function(p){return p.apply(void 0,a)})}return{setPrompt:e,confirmTransitionTo:r,appendListener:n,notifyListeners:o}}function mP(t,e){e(window.confirm(t))}function H$(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function W$(){return window.navigator.userAgent.indexOf("Trident")===-1}function V$(){return window.navigator.userAgent.indexOf("Firefox")===-1}function $$(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}function uP(){try{return window.history.state||{}}catch{return{}}}function jh(t){t===void 0&&(t={}),fP||Vn(!1);var e=window.history,r=H$(),i=!W$(),n=t,o=n.forceRefresh,s=o===void 0?!1:o,a=n.getUserConfirmation,l=a===void 0?mP:a,p=n.keyLength,f=p===void 0?6:p,c=t.basename?hP(od(t.basename)):"";function m(te){var ee=te||{},ae=ee.key,ue=ee.state,le=window.location,xe=le.pathname,Re=le.search,be=le.hash,Me=xe+Re+be;return c&&(Me=pP(Me,c)),Bi(Me,ue,ae)}function v(){return Math.random().toString(36).substr(2,f)}var g=db();function x(te){jt(Q,te),Q.length=e.length,g.notifyListeners(Q.location,Q.action)}function _(te){$$(te)||O(m(te.state))}function E(){O(m(uP()))}var L=!1;function O(te){if(L)L=!1,x();else{var ee="POP";g.confirmTransitionTo(te,ee,l,function(ae){ae?x({action:ee,location:te}):M(te)})}}function M(te){var ee=Q.location,ae=P.indexOf(ee.key);ae===-1&&(ae=0);var ue=P.indexOf(te.key);ue===-1&&(ue=0);var le=ae-ue;le&&(L=!0,V(le))}var D=m(uP()),P=[D.key];function U(te){return c+Si(te)}function N(te,ee){var ae="PUSH",ue=Bi(te,ee,v(),Q.location);g.confirmTransitionTo(ue,ae,l,function(le){if(le){var xe=U(ue),Re=ue.key,be=ue.state;if(r)if(e.pushState({key:Re,state:be},null,xe),s)window.location.href=xe;else{var Me=P.indexOf(Q.location.key),We=P.slice(0,Me+1);We.push(ue.key),P=We,x({action:ae,location:ue})}else window.location.href=xe}})}function F(te,ee){var ae="REPLACE",ue=Bi(te,ee,v(),Q.location);g.confirmTransitionTo(ue,ae,l,function(le){if(le){var xe=U(ue),Re=ue.key,be=ue.state;if(r)if(e.replaceState({key:Re,state:be},null,xe),s)window.location.replace(xe);else{var Me=P.indexOf(Q.location.key);Me!==-1&&(P[Me]=ue.key),x({action:ae,location:ue})}else window.location.replace(xe)}})}function V(te){e.go(te)}function q(){V(-1)}function J(){V(1)}var Y=0;function ie(te){Y+=te,Y===1&&te===1?(window.addEventListener(aP,_),i&&window.addEventListener(lP,E)):Y===0&&(window.removeEventListener(aP,_),i&&window.removeEventListener(lP,E))}var oe=!1;function Z(te){te===void 0&&(te=!1);var ee=g.setPrompt(te);return oe||(ie(1),oe=!0),function(){return oe&&(oe=!1,ie(-1)),ee()}}function K(te){var ee=g.appendListener(te);return ie(1),function(){ie(-1),ee()}}var Q={length:e.length,action:"POP",location:D,createHref:U,push:N,replace:F,go:V,goBack:q,goForward:J,block:Z,listen:K};return Q}function gP(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function nd(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function G$(t){window.location.hash=t}function cb(t){window.location.replace(gP(window.location.href)+"#"+t)}function vP(t){t===void 0&&(t={}),fP||Vn(!1);var e=window.history,r=V$(),i=t,n=i.getUserConfirmation,o=n===void 0?mP:n,s=i.hashType,a=s===void 0?"slash":s,l=t.basename?hP(od(t.basename)):"",p=j$[a],f=p.encodePath,c=p.decodePath;function m(){var ae=c(nd());return l&&(ae=pP(ae,l)),Bi(ae)}var v=db();function g(ae){jt(ee,ae),ee.length=e.length,v.notifyListeners(ee.location,ee.action)}var x=!1,_=null;function E(ae,ue){return ae.pathname===ue.pathname&&ae.search===ue.search&&ae.hash===ue.hash}function L(){var ae=nd(),ue=f(ae);if(ae!==ue)cb(ue);else{var le=m(),xe=ee.location;if(!x&&E(xe,le)||_===Si(le))return;_=null,O(le)}}function O(ae){if(x)x=!1,g();else{var ue="POP";v.confirmTransitionTo(ae,ue,o,function(le){le?g({action:ue,location:ae}):M(ae)})}}function M(ae){var ue=ee.location,le=N.lastIndexOf(Si(ue));le===-1&&(le=0);var xe=N.lastIndexOf(Si(ae));xe===-1&&(xe=0);var Re=le-xe;Re&&(x=!0,J(Re))}var D=nd(),P=f(D);D!==P&&cb(P);var U=m(),N=[Si(U)];function F(ae){var ue=document.querySelector("base"),le="";return ue&&ue.getAttribute("href")&&(le=gP(window.location.href)),le+"#"+f(l+Si(ae))}function V(ae,ue){var le="PUSH",xe=Bi(ae,void 0,void 0,ee.location);v.confirmTransitionTo(xe,le,o,function(Re){if(Re){var be=Si(xe),Me=f(l+be),We=nd()!==Me;if(We){_=be,G$(Me);var Pe=N.lastIndexOf(Si(ee.location)),Ve=N.slice(0,Pe+1);Ve.push(be),N=Ve,g({action:le,location:xe})}else g()}})}function q(ae,ue){var le="REPLACE",xe=Bi(ae,void 0,void 0,ee.location);v.confirmTransitionTo(xe,le,o,function(Re){if(Re){var be=Si(xe),Me=f(l+be),We=nd()!==Me;We&&(_=be,cb(Me));var Pe=N.indexOf(Si(ee.location));Pe!==-1&&(N[Pe]=be),g({action:le,location:xe})}})}function J(ae){e.go(ae)}function Y(){J(-1)}function ie(){J(1)}var oe=0;function Z(ae){oe+=ae,oe===1&&ae===1?window.addEventListener(cP,L):oe===0&&window.removeEventListener(cP,L)}var K=!1;function Q(ae){ae===void 0&&(ae=!1);var ue=v.setPrompt(ae);return K||(Z(1),K=!0),function(){return K&&(K=!1,Z(-1)),ue()}}function te(ae){var ue=v.appendListener(ae);return Z(1),function(){Z(-1),ue()}}var ee={length:e.length,action:"POP",location:U,createHref:F,push:V,replace:q,go:J,goBack:Y,goForward:ie,block:Q,listen:te};return ee}function dP(t,e,r){return Math.min(Math.max(t,e),r)}function yP(t){t===void 0&&(t={});var e=t,r=e.getUserConfirmation,i=e.initialEntries,n=i===void 0?["/"]:i,o=e.initialIndex,s=o===void 0?0:o,a=e.keyLength,l=a===void 0?6:a,p=db();function f(N){jt(U,N),U.length=U.entries.length,p.notifyListeners(U.location,U.action)}function c(){return Math.random().toString(36).substr(2,l)}var m=dP(s,0,n.length-1),v=n.map(function(N){return typeof N=="string"?Bi(N,void 0,c()):Bi(N,void 0,N.key||c())}),g=Si;function x(N,F){var V="PUSH",q=Bi(N,F,c(),U.location);p.confirmTransitionTo(q,V,r,function(J){if(J){var Y=U.index,ie=Y+1,oe=U.entries.slice(0);oe.length>ie?oe.splice(ie,oe.length-ie,q):oe.push(q),f({action:V,location:q,index:ie,entries:oe})}})}function _(N,F){var V="REPLACE",q=Bi(N,F,c(),U.location);p.confirmTransitionTo(q,V,r,function(J){J&&(U.entries[U.index]=q,f({action:V,location:q}))})}function E(N){var F=dP(U.index+N,0,U.entries.length-1),V="POP",q=U.entries[F];p.confirmTransitionTo(q,V,r,function(J){J?f({action:V,location:q,index:F}):f()})}function L(){E(-1)}function O(){E(1)}function M(N){var F=U.index+N;return F>=0&&F<U.entries.length}function D(N){return N===void 0&&(N=!1),p.setPrompt(N)}function P(N){return p.appendListener(N)}var U={length:v.length,action:"POP",location:v[m],index:m,entries:v,createHref:g,push:x,replace:_,go:E,goBack:L,goForward:O,canGo:M,block:D,listen:P};return U}var fP,aP,lP,cP,j$,Gh=$(()=>{za();iP();nP();$h();fP=!!(typeof window<"u"&&window.document&&window.document.createElement);aP="popstate",lP="hashchange";cP="hashchange",j$={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+sP(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:sP,decodePath:od},slash:{encodePath:od,decodePath:od}}});function K$(){var t="__global_unique_id__";return bP[t]=(bP[t]||0)+1}function Y$(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function X$(t){var e=[];return{on:function(i){e.push(i)},off:function(i){e=e.filter(function(n){return n!==i})},get:function(){return t},set:function(i,n){t=i,e.forEach(function(o){return o(t,n)})}}}function Z$(t){return Array.isArray(t)?t[0]:t}function J$(t,e){var r,i,n="__create-react-context-"+K$()+"__",o=function(a){Yi(l,a);function l(){var f;return f=a.apply(this,arguments)||this,f.emitter=X$(f.props.value),f}var p=l.prototype;return p.getChildContext=function(){var c;return c={},c[n]=this.emitter,c},p.componentWillReceiveProps=function(c){if(this.props.value!==c.value){var m=this.props.value,v=c.value,g;Y$(m,v)?g=0:(g=typeof e=="function"?e(m,v):pb,g|=0,g!==0&&this.emitter.set(c.value,g))}},p.render=function(){return this.props.children},l}(me);o.childContextTypes=(r={},r[n]=hb.default.object.isRequired,r);var s=function(a){Yi(l,a);function l(){var f;return f=a.apply(this,arguments)||this,f.state={value:f.getValue()},f.onUpdate=function(c,m){var v=f.observedBits|0;v&m&&f.setState({value:f.getValue()})},f}var p=l.prototype;return p.componentWillReceiveProps=function(c){var m=c.observedBits;this.observedBits=m??pb},p.componentDidMount=function(){this.context[n]&&this.context[n].on(this.onUpdate);var c=this.props.observedBits;this.observedBits=c??pb},p.componentWillUnmount=function(){this.context[n]&&this.context[n].off(this.onUpdate)},p.getValue=function(){return this.context[n]?this.context[n].get():t},p.render=function(){return Z$(this.props.children)(this.state.value)},l}(me);return s.contextTypes=(i={},i[n]=hb.default.object,i),{Provider:o,Consumer:s}}var hb,pb,bP,Q$,wP,xP=$(()=>{Ze();Wh();hb=ve(Fy()),pb=1073741823,bP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};Q$=ze.createContext||J$,wP=Q$});var _P=se((rpe,SP)=>{SP.exports=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"}});var IP=se((ipe,Wl)=>{var Yh=_P();Wl.exports=PP;Wl.exports.parse=fb;Wl.exports.compile=t9;Wl.exports.tokensToFunction=EP;Wl.exports.tokensToRegExp=CP;var e9=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function fb(t,e){for(var r=[],i=0,n=0,o="",s=e&&e.delimiter||"/",a;(a=e9.exec(t))!=null;){var l=a[0],p=a[1],f=a.index;if(o+=t.slice(n,f),n=f+l.length,p){o+=p[1];continue}var c=t[n],m=a[2],v=a[3],g=a[4],x=a[5],_=a[6],E=a[7];o&&(r.push(o),o="");var L=m!=null&&c!=null&&c!==m,O=_==="+"||_==="*",M=_==="?"||_==="*",D=a[2]||s,P=g||x;r.push({name:v||i++,prefix:m||"",delimiter:D,optional:M,repeat:O,partial:L,asterisk:!!E,pattern:P?n9(P):E?".*":"[^"+Kh(D)+"]+?"})}return n<t.length&&(o+=t.substr(n)),o&&r.push(o),r}function t9(t,e){return EP(fb(t,e),e)}function r9(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function i9(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function EP(t,e){for(var r=new Array(t.length),i=0;i<t.length;i++)typeof t[i]=="object"&&(r[i]=new RegExp("^(?:"+t[i].pattern+")$",gb(e)));return function(n,o){for(var s="",a=n||{},l=o||{},p=l.pretty?r9:encodeURIComponent,f=0;f<t.length;f++){var c=t[f];if(typeof c=="string"){s+=c;continue}var m=a[c.name],v;if(m==null)if(c.optional){c.partial&&(s+=c.prefix);continue}else throw new TypeError('Expected "'+c.name+'" to be defined');if(Yh(m)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(m)+"`");if(m.length===0){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var g=0;g<m.length;g++){if(v=p(m[g]),!r[f].test(v))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(v)+"`");s+=(g===0?c.prefix:c.delimiter)+v}continue}if(v=c.asterisk?i9(m):p(m),!r[f].test(v))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+v+'"');s+=c.prefix+v}return s}}function Kh(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function n9(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function mb(t,e){return t.keys=e,t}function gb(t){return t&&t.sensitive?"":"i"}function o9(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var i=0;i<r.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return mb(t,e)}function s9(t,e,r){for(var i=[],n=0;n<t.length;n++)i.push(PP(t[n],e,r).source);var o=new RegExp("(?:"+i.join("|")+")",gb(r));return mb(o,e)}function a9(t,e,r){return CP(fb(t,r),e,r)}function CP(t,e,r){Yh(e)||(r=e||r,e=[]),r=r||{};for(var i=r.strict,n=r.end!==!1,o="",s=0;s<t.length;s++){var a=t[s];if(typeof a=="string")o+=Kh(a);else{var l=Kh(a.prefix),p="(?:"+a.pattern+")";e.push(a),a.repeat&&(p+="(?:"+l+p+")*"),a.optional?a.partial?p=l+"("+p+")?":p="(?:"+l+"("+p+"))?":p=l+"("+p+")",o+=p}}var f=Kh(r.delimiter||"/"),c=o.slice(-f.length)===f;return i||(o=(c?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),n?o+="$":o+=i&&c?"":"(?="+f+"|$)",mb(new RegExp("^"+o,gb(r)),e)}function PP(t,e,r){return Yh(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?o9(t,e):Yh(t)?s9(t,e,r):a9(t,e,r)}});function d9(t,e){var r=""+e.end+e.strict+e.sensitive,i=AP[r]||(AP[r]={});if(i[t])return i[t];var n=[],o=(0,kP.default)(t,n,e),s={regexp:o,keys:n};return TP<c9&&(i[t]=s,TP++),s}function qa(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var r=e,i=r.path,n=r.exact,o=n===void 0?!1:n,s=r.strict,a=s===void 0?!1:s,l=r.sensitive,p=l===void 0?!1:l,f=[].concat(i);return f.reduce(function(c,m){if(!m&&m!=="")return null;if(c)return c;var v=d9(m,{end:o,strict:a,sensitive:p}),g=v.regexp,x=v.keys,_=g.exec(t);if(!_)return null;var E=_[0],L=_.slice(1),O=t===E;return o&&!O?null:{path:m,url:m==="/"&&E===""?"/":E,isExact:O,params:x.reduce(function(M,D,P){return M[D.name]=L[P],M},{})}},null)}function p9(t){return ze.Children.count(t)===0}function yb(t){return t.charAt(0)==="/"?t:"/"+t}function h9(t,e){return t?jt({},e,{pathname:yb(t)+e.pathname}):e}function f9(t,e){if(!t)return e;var r=yb(t);return e.pathname.indexOf(r)!==0?e:jt({},e,{pathname:e.pathname.substr(r.length)})}function MP(t){return typeof t=="string"?t:Si(t)}function vb(t){return function(){Vn(!1)}}function RP(){}function $n(t){var e="withRouter("+(t.displayName||t.name)+")",r=function(n){var o=n.wrappedComponentRef,s=zi(n,["wrappedComponentRef"]);return ze.createElement(Vs.Consumer,null,function(a){return a||Vn(!1),ze.createElement(t,jt({},s,a,{ref:o}))})};return r.displayName=e,r.WrappedComponent=t,(0,NP.default)(r,t)}var kP,dpe,NP,OP,l9,Vs,$s,u9,fpe,AP,c9,TP,Rn,m9,Xh,mpe,ns=$(()=>{Wh();Ze();Gh();xP();$h();za();kP=ve(IP()),dpe=ve(Wy());Ul();NP=ve(Lh()),OP=function(e){var r=wP();return r.displayName=e,r},l9=OP("Router-History"),Vs=OP("Router"),$s=function(t){Yi(e,t),e.computeRootMatch=function(n){return{path:"/",url:"/",params:{},isExact:n==="/"}};function e(i){var n;return n=t.call(this,i)||this,n.state={location:i.history.location},n._isMounted=!1,n._pendingLocation=null,i.staticContext||(n.unlisten=i.history.listen(function(o){n._pendingLocation=o})),n}var r=e.prototype;return r.componentDidMount=function(){var n=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(o){n._isMounted&&n.setState({location:o})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return ze.createElement(Vs.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},ze.createElement(l9.Provider,{children:this.props.children||null,value:this.props.history}))},e}(ze.Component),u9=function(t){Yi(e,t);function e(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,i.history=yP(i.props),i}var r=e.prototype;return r.render=function(){return ze.createElement($s,{history:this.history,children:this.props.children})},e}(ze.Component),fpe=function(t){Yi(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},r.componentDidUpdate=function(n){this.props.onUpdate&&this.props.onUpdate.call(this,this,n)},r.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},r.render=function(){return null},e}(ze.Component),AP={},c9=1e4,TP=0;Rn=function(t){Yi(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var n=this;return ze.createElement(Vs.Consumer,null,function(o){o||Vn(!1);var s=n.props.location||o.location,a=n.props.computedMatch?n.props.computedMatch:n.props.path?qa(s.pathname,n.props):o.match,l=jt({},o,{location:s,match:a}),p=n.props,f=p.children,c=p.component,m=p.render;return Array.isArray(f)&&p9(f)&&(f=null),ze.createElement(Vs.Provider,{value:l},l.match?f?typeof f=="function"?f(l):f:c?ze.createElement(c,l):m?m(l):null:typeof f=="function"?f(l):null)})},e}(ze.Component);m9=function(t){Yi(e,t);function e(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,i.handlePush=function(a){return i.navigateTo(a,"PUSH")},i.handleReplace=function(a){return i.navigateTo(a,"REPLACE")},i.handleListen=function(){return RP},i.handleBlock=function(){return RP},i}var r=e.prototype;return r.navigateTo=function(n,o){var s=this.props,a=s.basename,l=a===void 0?"":a,p=s.context,f=p===void 0?{}:p;f.action=o,f.location=h9(l,Bi(n)),f.url=MP(f.location)},r.render=function(){var n=this.props,o=n.basename,s=o===void 0?"":o,a=n.context,l=a===void 0?{}:a,p=n.location,f=p===void 0?"/":p,c=zi(n,["basename","context","location"]),m={createHref:function(g){return yb(s+MP(g))},action:"POP",location:f9(s,Bi(f)),push:this.handlePush,replace:this.handleReplace,go:vb("go"),goBack:vb("goBack"),goForward:vb("goForward"),listen:this.handleListen,block:this.handleBlock};return ze.createElement($s,jt({},c,{history:m,staticContext:l}))},e}(ze.Component),Xh=function(t){Yi(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var n=this;return ze.createElement(Vs.Consumer,null,function(o){o||Vn(!1);var s=n.props.location||o.location,a,l;return ze.Children.forEach(n.props.children,function(p){if(l==null&&ze.isValidElement(p)){a=p;var f=p.props.path||p.props.from;l=f?qa(s.pathname,jt({},p.props,{path:f})):o.match}}),l?ze.cloneElement(a,{location:s,computedMatch:l}):null})},e}(ze.Component);mpe=ze.useContext});var Ie=se((Vl,sd)=>{(function(){var t,e="4.17.21",r=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",p=1,f=2,c=4,m=1,v=2,g=1,x=2,_=4,E=8,L=16,O=32,M=64,D=128,P=256,U=512,N=30,F="...",V=800,q=16,J=1,Y=2,ie=3,oe=1/0,Z=9007199254740991,K=17976931348623157e292,Q=NaN,te=4294967295,ee=te-1,ae=te>>>1,ue=[["ary",D],["bind",g],["bindKey",x],["curry",E],["curryRight",L],["flip",U],["partial",O],["partialRight",M],["rearg",P]],le="[object Arguments]",xe="[object Array]",Re="[object AsyncFunction]",be="[object Boolean]",Me="[object Date]",We="[object DOMException]",Pe="[object Error]",Ve="[object Function]",Le="[object GeneratorFunction]",He="[object Map]",it="[object Number]",Je="[object Null]",st="[object Object]",ot="[object Promise]",vt="[object Proxy]",bt="[object RegExp]",je="[object Set]",Lt="[object String]",Kt="[object Symbol]",Ir="[object Undefined]",pt="[object WeakMap]",Ai="[object WeakSet]",Ti="[object ArrayBuffer]",vn="[object DataView]",Ar="[object Float32Array]",_t="[object Float64Array]",qi="[object Int8Array]",Mi="[object Int16Array]",gl="[object Int32Array]",mr="[object Uint8Array]",lo="[object Uint8ClampedArray]",uo="[object Uint16Array]",Ss="[object Uint32Array]",Qu=/\b__p \+= '';/g,ai=/\b(__p \+=) '' \+/g,xp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vl=/&(?:amp|lt|gt|quot|#39);/g,yl=/[&<>"']/g,av=RegExp(vl.source),lv=RegExp(yl.source),ec=/<%-([\s\S]+?)%>/g,Sp=/<%([\s\S]+?)%>/g,tc=/<%=([\s\S]+?)%>/g,_p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uv=/^\w*$/,cv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rc=/[\\^$.*+?()[\]{}|]/g,Ep=RegExp(rc.source),ti=/^\s+/,zo=/\s/,ma=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ic=/\{\n\/\* \[wrapped with (.+)\] \*/,ga=/,? & /,_s=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dv=/[()=,{}\[\]\/\s]/,Cp=/\\(\\)?/g,nc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oc=/\w*$/,bl=/^[-+]0x[0-9a-f]+$/i,li=/^0b[01]+$/i,Bo=/^\[object .+?Constructor\]$/,ui=/^0o[0-7]+$/i,Wr=/^(?:0|[1-9]\d*)$/,Uo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rn=/($^)/,qo=/['\n\r\u2028\u2029\\]/g,co="\\ud800-\\udfff",Ho="\\u0300-\\u036f",Es="\\ufe20-\\ufe2f",sc="\\u20d0-\\u20ff",Cs=Ho+Es+sc,Ps="\\u2700-\\u27bf",va="a-z\\xdf-\\xf6\\xf8-\\xff",wl="\\xac\\xb1\\xd7\\xf7",ac="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hi="\\u2000-\\u206f",lc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",po="A-Z\\xc0-\\xd6\\xd8-\\xde",ho="\\ufe0e\\ufe0f",ya=wl+ac+Hi+lc,yn="['\u2019]",Ri="["+co+"]",bn="["+ya+"]",ba="["+Cs+"]",uc="\\d+",wt="["+Ps+"]",wn="["+va+"]",ci="[^"+co+ya+uc+Ps+va+po+"]",Vr="\\ud83c[\\udffb-\\udfff]",wa="(?:"+ba+"|"+Vr+")",Wo="[^"+co+"]",Wi="(?:\\ud83c[\\udde6-\\uddff]){2}",xa="[\\ud800-\\udbff][\\udc00-\\udfff]",Fn="["+po+"]",Is="\\u200d",Sa="(?:"+wn+"|"+ci+")",pv="(?:"+Fn+"|"+ci+")",Pp="(?:"+yn+"(?:d|ll|m|re|s|t|ve))?",cc="(?:"+yn+"(?:D|LL|M|RE|S|T|VE))?",xl=wa+"?",dc="["+ho+"]?",hv="(?:"+Is+"(?:"+[Wo,Wi,xa].join("|")+")"+dc+xl+")*",Ip="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",hc=dc+xl+hv,Ap="(?:"+[wt,Wi,xa].join("|")+")"+hc,Tp="(?:"+[Wo+ba+"?",ba,Wi,xa,Ri].join("|")+")",fv=RegExp(yn,"g"),Mp=RegExp(ba,"g"),fo=RegExp(Vr+"(?="+Vr+")|"+Tp+hc,"g"),mv=RegExp([Fn+"?"+wn+"+"+Pp+"(?="+[bn,Fn,"$"].join("|")+")",pv+"+"+cc+"(?="+[bn,Fn+Sa,"$"].join("|")+")",Fn+"?"+Sa+"+"+Pp,Fn+"+"+cc,pc,Ip,uc,Ap].join("|"),"g"),mo=RegExp("["+Is+co+Cs+ho+"]"),Sl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rp=-1,Yt={};Yt[Ar]=Yt[_t]=Yt[qi]=Yt[Mi]=Yt[gl]=Yt[mr]=Yt[lo]=Yt[uo]=Yt[Ss]=!0,Yt[le]=Yt[xe]=Yt[Ti]=Yt[be]=Yt[vn]=Yt[Me]=Yt[Pe]=Yt[Ve]=Yt[He]=Yt[it]=Yt[st]=Yt[bt]=Yt[je]=Yt[Lt]=Yt[pt]=!1;var Xt={};Xt[le]=Xt[xe]=Xt[Ti]=Xt[vn]=Xt[be]=Xt[Me]=Xt[Ar]=Xt[_t]=Xt[qi]=Xt[Mi]=Xt[gl]=Xt[He]=Xt[it]=Xt[st]=Xt[bt]=Xt[je]=Xt[Lt]=Xt[Kt]=Xt[mr]=Xt[lo]=Xt[uo]=Xt[Ss]=!0,Xt[Pe]=Xt[Ve]=Xt[pt]=!1;var gv={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},vv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wv=parseFloat,xv=parseInt,kp=typeof global=="object"&&global&&global.Object===Object&&global,Sv=typeof self=="object"&&self&&self.Object===Object&&self,or=kp||Sv||Function("return this")(),_l=typeof Vl=="object"&&Vl&&!Vl.nodeType&&Vl,Vi=_l&&typeof sd=="object"&&sd&&!sd.nodeType&&sd,Nr=Vi&&Vi.exports===_l,zn=Nr&&kp.process,di=function(){try{var ce=Vi&&Vi.require&&Vi.require("util").types;return ce||zn&&zn.binding&&zn.binding("util")}catch{}}(),Vo=di&&di.isArrayBuffer,Np=di&&di.isDate,xn=di&&di.isMap,pi=di&&di.isRegExp,Op=di&&di.isSet,Dp=di&&di.isTypedArray;function ki(ce,we,ge){switch(ge.length){case 0:return ce.call(we);case 1:return ce.call(we,ge[0]);case 2:return ce.call(we,ge[0],ge[1]);case 3:return ce.call(we,ge[0],ge[1],ge[2])}return ce.apply(we,ge)}function As(ce,we,ge,Ke){for(var gt=-1,Ft=ce==null?0:ce.length;++gt<Ft;){var Dr=ce[gt];we(Ke,Dr,ge(Dr),ce)}return Ke}function ri(ce,we){for(var ge=-1,Ke=ce==null?0:ce.length;++ge<Ke&&we(ce[ge],ge,ce)!==!1;);return ce}function Lp(ce,we){for(var ge=ce==null?0:ce.length;ge--&&we(ce[ge],ge,ce)!==!1;);return ce}function mc(ce,we){for(var ge=-1,Ke=ce==null?0:ce.length;++ge<Ke;)if(!we(ce[ge],ge,ce))return!1;return!0}function ii(ce,we){for(var ge=-1,Ke=ce==null?0:ce.length,gt=0,Ft=[];++ge<Ke;){var Dr=ce[ge];we(Dr,ge,ce)&&(Ft[gt++]=Dr)}return Ft}function _a(ce,we){var ge=ce==null?0:ce.length;return!!ge&&nn(ce,we,0)>-1}function El(ce,we,ge){for(var Ke=-1,gt=ce==null?0:ce.length;++Ke<gt;)if(ge(we,ce[Ke]))return!0;return!1}function Nt(ce,we){for(var ge=-1,Ke=ce==null?0:ce.length,gt=Array(Ke);++ge<Ke;)gt[ge]=we(ce[ge],ge,ce);return gt}function Sn(ce,we){for(var ge=-1,Ke=we.length,gt=ce.length;++ge<Ke;)ce[gt+ge]=we[ge];return ce}function Ea(ce,we,ge,Ke){var gt=-1,Ft=ce==null?0:ce.length;for(Ke&&Ft&&(ge=ce[++gt]);++gt<Ft;)ge=we(ge,ce[gt],gt,ce);return ge}function Cl(ce,we,ge,Ke){var gt=ce==null?0:ce.length;for(Ke&&gt&&(ge=ce[--gt]);gt--;)ge=we(ge,ce[gt],gt,ce);return ge}function $o(ce,we){for(var ge=-1,Ke=ce==null?0:ce.length;++ge<Ke;)if(we(ce[ge],ge,ce))return!0;return!1}var gc=Ca("length");function hi(ce){return ce.split("")}function vc(ce){return ce.match(_s)||[]}function jo(ce,we,ge){var Ke;return ge(ce,function(gt,Ft,Dr){if(we(gt,Ft,Dr))return Ke=Ft,!1}),Ke}function fi(ce,we,ge,Ke){for(var gt=ce.length,Ft=ge+(Ke?1:-1);Ke?Ft--:++Ft<gt;)if(we(ce[Ft],Ft,ce))return Ft;return-1}function nn(ce,we,ge){return we===we?Tr(ce,we,ge):fi(ce,Pl,ge)}function Ts(ce,we,ge,Ke){for(var gt=ge-1,Ft=ce.length;++gt<Ft;)if(Ke(ce[gt],we))return gt;return-1}function Pl(ce){return ce!==ce}function Ms(ce,we){var ge=ce==null?0:ce.length;return ge?Il(ce,we)/ge:Q}function Ca(ce){return function(we){return we==null?t:we[ce]}}function Pa(ce){return function(we){return ce==null?t:ce[we]}}function go(ce,we,ge,Ke,gt){return gt(ce,function(Ft,Dr,rr){ge=Ke?(Ke=!1,Ft):we(ge,Ft,Dr,rr)}),ge}function yc(ce,we){var ge=ce.length;for(ce.sort(we);ge--;)ce[ge]=ce[ge].value;return ce}function Il(ce,we){for(var ge,Ke=-1,gt=ce.length;++Ke<gt;){var Ft=we(ce[Ke]);Ft!==t&&(ge=ge===t?Ft:ge+Ft)}return ge}function Rs(ce,we){for(var ge=-1,Ke=Array(ce);++ge<ce;)Ke[ge]=we(ge);return Ke}function _v(ce,we){return Nt(we,function(ge){return[ge,ce[ge]]})}function on(ce){return ce&&ce.slice(0,an(ce)+1).replace(ti,"")}function Wt(ce){return function(we){return ce(we)}}function R(ce,we){return Nt(we,function(ge){return ce[ge]})}function H(ce,we){return ce.has(we)}function X(ce,we){for(var ge=-1,Ke=ce.length;++ge<Ke&&nn(we,ce[ge],0)>-1;);return ge}function G(ce,we){for(var ge=ce.length;ge--&&nn(we,ce[ge],0)>-1;);return ge}function Se(ce,we){for(var ge=ce.length,Ke=0;ge--;)ce[ge]===we&&++Ke;return Ke}var Te=Pa(gv),De=Pa(vv);function tt(ce){return"\\"+bv[ce]}function ft(ce,we){return ce==null?t:ce[we]}function xt(ce){return mo.test(ce)}function Ge(ce){return Sl.test(ce)}function It(ce){for(var we,ge=[];!(we=ce.next()).done;)ge.push(we.value);return ge}function Vt(ce){var we=-1,ge=Array(ce.size);return ce.forEach(function(Ke,gt){ge[++we]=[gt,Ke]}),ge}function mi(ce,we){return function(ge){return ce(we(ge))}}function Zt(ce,we){for(var ge=-1,Ke=ce.length,gt=0,Ft=[];++ge<Ke;){var Dr=ce[ge];(Dr===we||Dr===l)&&(ce[ge]=l,Ft[gt++]=ge)}return Ft}function Jt(ce){var we=-1,ge=Array(ce.size);return ce.forEach(function(Ke){ge[++we]=Ke}),ge}function pr(ce){var we=-1,ge=Array(ce.size);return ce.forEach(function(Ke){ge[++we]=[Ke,Ke]}),ge}function Tr(ce,we,ge){for(var Ke=ge-1,gt=ce.length;++Ke<gt;)if(ce[Ke]===we)return Ke;return-1}function sn(ce,we,ge){for(var Ke=ge+1;Ke--;)if(ce[Ke]===we)return Ke;return Ke}function gi(ce){return xt(ce)?Or(ce):gc(ce)}function vi(ce){return xt(ce)?ks(ce):hi(ce)}function an(ce){for(var we=ce.length;we--&&zo.test(ce.charAt(we)););return we}var vo=Pa(yv);function Or(ce){for(var we=fo.lastIndex=0;fo.test(ce);)++we;return we}function ks(ce){return ce.match(fo)||[]}function Go(ce){return ce.match(mv)||[]}var Ev=function ce(we){we=we==null?or:$r.defaults(or.Object(),we,$r.pick(or,fc));var ge=we.Array,Ke=we.Date,gt=we.Error,Ft=we.Function,Dr=we.Math,rr=we.Object,Cv=we.RegExp,KB=we.String,_n=we.TypeError,Fp=ge.prototype,YB=Ft.prototype,Al=rr.prototype,zp=we["__core-js_shared__"],Bp=YB.toString,$t=Al.hasOwnProperty,XB=0,uS=function(){var u=/[^.]+$/.exec(zp&&zp.keys&&zp.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Up=Al.toString,ZB=Bp.call(rr),JB=or._,QB=Cv("^"+Bp.call($t).replace(rc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qp=Nr?we.Buffer:t,Ns=we.Symbol,Hp=we.Uint8Array,cS=qp?qp.allocUnsafe:t,Wp=mi(rr.getPrototypeOf,rr),dS=rr.create,pS=Al.propertyIsEnumerable,Vp=Fp.splice,hS=Ns?Ns.isConcatSpreadable:t,bc=Ns?Ns.iterator:t,Ia=Ns?Ns.toStringTag:t,$p=function(){try{var u=ka(rr,"defineProperty");return u({},"",{}),u}catch{}}(),eU=we.clearTimeout!==or.clearTimeout&&we.clearTimeout,tU=Ke&&Ke.now!==or.Date.now&&Ke.now,rU=we.setTimeout!==or.setTimeout&&we.setTimeout,jp=Dr.ceil,Gp=Dr.floor,Pv=rr.getOwnPropertySymbols,iU=qp?qp.isBuffer:t,fS=we.isFinite,nU=Fp.join,oU=mi(rr.keys,rr),Lr=Dr.max,yi=Dr.min,sU=Ke.now,aU=we.parseInt,mS=Dr.random,lU=Fp.reverse,Iv=ka(we,"DataView"),wc=ka(we,"Map"),Av=ka(we,"Promise"),Tl=ka(we,"Set"),xc=ka(we,"WeakMap"),Sc=ka(rr,"create"),Kp=xc&&new xc,Ml={},uU=Na(Iv),cU=Na(wc),dU=Na(Av),pU=Na(Tl),hU=Na(xc),Yp=Ns?Ns.prototype:t,_c=Yp?Yp.valueOf:t,gS=Yp?Yp.toString:t;function W(u){if(wr(u)&&!yt(u)&&!(u instanceof Tt)){if(u instanceof En)return u;if($t.call(u,"__wrapped__"))return v_(u)}return new En(u)}var Rl=function(){function u(){}return function(d){if(!gr(d))return{};if(dS)return dS(d);u.prototype=d;var b=new u;return u.prototype=t,b}}();function Xp(){}function En(u,d){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=t}W.templateSettings={escape:ec,evaluate:Sp,interpolate:tc,variable:"",imports:{_:W}},W.prototype=Xp.prototype,W.prototype.constructor=W,En.prototype=Rl(Xp.prototype),En.prototype.constructor=En;function Tt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function fU(){var u=new Tt(this.__wrapped__);return u.__actions__=$i(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=$i(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=$i(this.__views__),u}function mU(){if(this.__filtered__){var u=new Tt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function gU(){var u=this.__wrapped__.value(),d=this.__dir__,b=yt(u),I=d<0,z=b?u.length:0,j=Aq(0,z,this.__views__),re=j.start,ne=j.end,pe=ne-re,Ee=I?ne:re-1,Ce=this.__iteratees__,Ae=Ce.length,Be=0,et=yi(pe,this.__takeCount__);if(!b||!I&&z==pe&&et==pe)return US(u,this.__actions__);var ct=[];e:for(;pe--&&Be<et;){Ee+=d;for(var Et=-1,dt=u[Ee];++Et<Ae;){var At=Ce[Et],Rt=At.iteratee,cn=At.type,Di=Rt(dt);if(cn==Y)dt=Di;else if(!Di){if(cn==J)continue e;break e}}ct[Be++]=dt}return ct}Tt.prototype=Rl(Xp.prototype),Tt.prototype.constructor=Tt;function Aa(u){var d=-1,b=u==null?0:u.length;for(this.clear();++d<b;){var I=u[d];this.set(I[0],I[1])}}function vU(){this.__data__=Sc?Sc(null):{},this.size=0}function yU(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}function bU(u){var d=this.__data__;if(Sc){var b=d[u];return b===s?t:b}return $t.call(d,u)?d[u]:t}function wU(u){var d=this.__data__;return Sc?d[u]!==t:$t.call(d,u)}function xU(u,d){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=Sc&&d===t?s:d,this}Aa.prototype.clear=vU,Aa.prototype.delete=yU,Aa.prototype.get=bU,Aa.prototype.has=wU,Aa.prototype.set=xU;function Ko(u){var d=-1,b=u==null?0:u.length;for(this.clear();++d<b;){var I=u[d];this.set(I[0],I[1])}}function SU(){this.__data__=[],this.size=0}function _U(u){var d=this.__data__,b=Zp(d,u);if(b<0)return!1;var I=d.length-1;return b==I?d.pop():Vp.call(d,b,1),--this.size,!0}function EU(u){var d=this.__data__,b=Zp(d,u);return b<0?t:d[b][1]}function CU(u){return Zp(this.__data__,u)>-1}function PU(u,d){var b=this.__data__,I=Zp(b,u);return I<0?(++this.size,b.push([u,d])):b[I][1]=d,this}Ko.prototype.clear=SU,Ko.prototype.delete=_U,Ko.prototype.get=EU,Ko.prototype.has=CU,Ko.prototype.set=PU;function Yo(u){var d=-1,b=u==null?0:u.length;for(this.clear();++d<b;){var I=u[d];this.set(I[0],I[1])}}function IU(){this.size=0,this.__data__={hash:new Aa,map:new(wc||Ko),string:new Aa}}function AU(u){var d=uh(this,u).delete(u);return this.size-=d?1:0,d}function TU(u){return uh(this,u).get(u)}function MU(u){return uh(this,u).has(u)}function RU(u,d){var b=uh(this,u),I=b.size;return b.set(u,d),this.size+=b.size==I?0:1,this}Yo.prototype.clear=IU,Yo.prototype.delete=AU,Yo.prototype.get=TU,Yo.prototype.has=MU,Yo.prototype.set=RU;function Ta(u){var d=-1,b=u==null?0:u.length;for(this.__data__=new Yo;++d<b;)this.add(u[d])}function kU(u){return this.__data__.set(u,s),this}function NU(u){return this.__data__.has(u)}Ta.prototype.add=Ta.prototype.push=kU,Ta.prototype.has=NU;function Bn(u){var d=this.__data__=new Ko(u);this.size=d.size}function OU(){this.__data__=new Ko,this.size=0}function DU(u){var d=this.__data__,b=d.delete(u);return this.size=d.size,b}function LU(u){return this.__data__.get(u)}function FU(u){return this.__data__.has(u)}function zU(u,d){var b=this.__data__;if(b instanceof Ko){var I=b.__data__;if(!wc||I.length<r-1)return I.push([u,d]),this.size=++b.size,this;b=this.__data__=new Yo(I)}return b.set(u,d),this.size=b.size,this}Bn.prototype.clear=OU,Bn.prototype.delete=DU,Bn.prototype.get=LU,Bn.prototype.has=FU,Bn.prototype.set=zU;function vS(u,d){var b=yt(u),I=!b&&Oa(u),z=!b&&!I&&zs(u),j=!b&&!I&&!z&&Dl(u),re=b||I||z||j,ne=re?Rs(u.length,KB):[],pe=ne.length;for(var Ee in u)(d||$t.call(u,Ee))&&!(re&&(Ee=="length"||z&&(Ee=="offset"||Ee=="parent")||j&&(Ee=="buffer"||Ee=="byteLength"||Ee=="byteOffset")||Qo(Ee,pe)))&&ne.push(Ee);return ne}function yS(u){var d=u.length;return d?u[Bv(0,d-1)]:t}function BU(u,d){return ch($i(u),Ma(d,0,u.length))}function UU(u){return ch($i(u))}function Tv(u,d,b){(b!==t&&!Un(u[d],b)||b===t&&!(d in u))&&Xo(u,d,b)}function Ec(u,d,b){var I=u[d];(!($t.call(u,d)&&Un(I,b))||b===t&&!(d in u))&&Xo(u,d,b)}function Zp(u,d){for(var b=u.length;b--;)if(Un(u[b][0],d))return b;return-1}function qU(u,d,b,I){return Os(u,function(z,j,re){d(I,z,b(z),re)}),I}function bS(u,d){return u&&bo(d,jr(d),u)}function HU(u,d){return u&&bo(d,Gi(d),u)}function Xo(u,d,b){d=="__proto__"&&$p?$p(u,d,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[d]=b}function Mv(u,d){for(var b=-1,I=d.length,z=ge(I),j=u==null;++b<I;)z[b]=j?t:cy(u,d[b]);return z}function Ma(u,d,b){return u===u&&(b!==t&&(u=u<=b?u:b),d!==t&&(u=u>=d?u:d)),u}function Cn(u,d,b,I,z,j){var re,ne=d&p,pe=d&f,Ee=d&c;if(b&&(re=z?b(u,I,z,j):b(u)),re!==t)return re;if(!gr(u))return u;var Ce=yt(u);if(Ce){if(re=Mq(u),!ne)return $i(u,re)}else{var Ae=bi(u),Be=Ae==Ve||Ae==Le;if(zs(u))return WS(u,ne);if(Ae==st||Ae==le||Be&&!z){if(re=pe||Be?{}:l_(u),!ne)return pe?bq(u,HU(re,u)):yq(u,bS(re,u))}else{if(!Xt[Ae])return z?u:{};re=Rq(u,Ae,ne)}}j||(j=new Bn);var et=j.get(u);if(et)return et;j.set(u,re),F_(u)?u.forEach(function(dt){re.add(Cn(dt,d,b,dt,u,j))}):D_(u)&&u.forEach(function(dt,At){re.set(At,Cn(dt,d,b,At,u,j))});var ct=Ee?pe?Xv:Yv:pe?Gi:jr,Et=Ce?t:ct(u);return ri(Et||u,function(dt,At){Et&&(At=dt,dt=u[At]),Ec(re,At,Cn(dt,d,b,At,u,j))}),re}function WU(u){var d=jr(u);return function(b){return wS(b,u,d)}}function wS(u,d,b){var I=b.length;if(u==null)return!I;for(u=rr(u);I--;){var z=b[I],j=d[z],re=u[z];if(re===t&&!(z in u)||!j(re))return!1}return!0}function xS(u,d,b){if(typeof u!="function")throw new _n(n);return Rc(function(){u.apply(t,b)},d)}function Cc(u,d,b,I){var z=-1,j=_a,re=!0,ne=u.length,pe=[],Ee=d.length;if(!ne)return pe;b&&(d=Nt(d,Wt(b))),I?(j=El,re=!1):d.length>=r&&(j=H,re=!1,d=new Ta(d));e:for(;++z<ne;){var Ce=u[z],Ae=b==null?Ce:b(Ce);if(Ce=I||Ce!==0?Ce:0,re&&Ae===Ae){for(var Be=Ee;Be--;)if(d[Be]===Ae)continue e;pe.push(Ce)}else j(d,Ae,I)||pe.push(Ce)}return pe}var Os=KS(yo),SS=KS(kv,!0);function VU(u,d){var b=!0;return Os(u,function(I,z,j){return b=!!d(I,z,j),b}),b}function Jp(u,d,b){for(var I=-1,z=u.length;++I<z;){var j=u[I],re=d(j);if(re!=null&&(ne===t?re===re&&!un(re):b(re,ne)))var ne=re,pe=j}return pe}function $U(u,d,b,I){var z=u.length;for(b=St(b),b<0&&(b=-b>z?0:z+b),I=I===t||I>z?z:St(I),I<0&&(I+=z),I=b>I?0:B_(I);b<I;)u[b++]=d;return u}function _S(u,d){var b=[];return Os(u,function(I,z,j){d(I,z,j)&&b.push(I)}),b}function ni(u,d,b,I,z){var j=-1,re=u.length;for(b||(b=Nq),z||(z=[]);++j<re;){var ne=u[j];d>0&&b(ne)?d>1?ni(ne,d-1,b,I,z):Sn(z,ne):I||(z[z.length]=ne)}return z}var Rv=YS(),ES=YS(!0);function yo(u,d){return u&&Rv(u,d,jr)}function kv(u,d){return u&&ES(u,d,jr)}function Qp(u,d){return ii(d,function(b){return es(u[b])})}function Ra(u,d){d=Ls(d,u);for(var b=0,I=d.length;u!=null&&b<I;)u=u[wo(d[b++])];return b&&b==I?u:t}function CS(u,d,b){var I=d(u);return yt(u)?I:Sn(I,b(u))}function Ni(u){return u==null?u===t?Ir:Je:Ia&&Ia in rr(u)?Iq(u):Uq(u)}function Nv(u,d){return u>d}function jU(u,d){return u!=null&&$t.call(u,d)}function GU(u,d){return u!=null&&d in rr(u)}function KU(u,d,b){return u>=yi(d,b)&&u<Lr(d,b)}function Ov(u,d,b){for(var I=b?El:_a,z=u[0].length,j=u.length,re=j,ne=ge(j),pe=1/0,Ee=[];re--;){var Ce=u[re];re&&d&&(Ce=Nt(Ce,Wt(d))),pe=yi(Ce.length,pe),ne[re]=!b&&(d||z>=120&&Ce.length>=120)?new Ta(re&&Ce):t}Ce=u[0];var Ae=-1,Be=ne[0];e:for(;++Ae<z&&Ee.length<pe;){var et=Ce[Ae],ct=d?d(et):et;if(et=b||et!==0?et:0,!(Be?H(Be,ct):I(Ee,ct,b))){for(re=j;--re;){var Et=ne[re];if(!(Et?H(Et,ct):I(u[re],ct,b)))continue e}Be&&Be.push(ct),Ee.push(et)}}return Ee}function YU(u,d,b,I){return yo(u,function(z,j,re){d(I,b(z),j,re)}),I}function Pc(u,d,b){d=Ls(d,u),u=p_(u,d);var I=u==null?u:u[wo(In(d))];return I==null?t:ki(I,u,b)}function PS(u){return wr(u)&&Ni(u)==le}function XU(u){return wr(u)&&Ni(u)==Ti}function ZU(u){return wr(u)&&Ni(u)==Me}function Ic(u,d,b,I,z){return u===d?!0:u==null||d==null||!wr(u)&&!wr(d)?u!==u&&d!==d:JU(u,d,b,I,Ic,z)}function JU(u,d,b,I,z,j){var re=yt(u),ne=yt(d),pe=re?xe:bi(u),Ee=ne?xe:bi(d);pe=pe==le?st:pe,Ee=Ee==le?st:Ee;var Ce=pe==st,Ae=Ee==st,Be=pe==Ee;if(Be&&zs(u)){if(!zs(d))return!1;re=!0,Ce=!1}if(Be&&!Ce)return j||(j=new Bn),re||Dl(u)?o_(u,d,b,I,z,j):Cq(u,d,pe,b,I,z,j);if(!(b&m)){var et=Ce&&$t.call(u,"__wrapped__"),ct=Ae&&$t.call(d,"__wrapped__");if(et||ct){var Et=et?u.value():u,dt=ct?d.value():d;return j||(j=new Bn),z(Et,dt,b,I,j)}}return Be?(j||(j=new Bn),Pq(u,d,b,I,z,j)):!1}function QU(u){return wr(u)&&bi(u)==He}function Dv(u,d,b,I){var z=b.length,j=z,re=!I;if(u==null)return!j;for(u=rr(u);z--;){var ne=b[z];if(re&&ne[2]?ne[1]!==u[ne[0]]:!(ne[0]in u))return!1}for(;++z<j;){ne=b[z];var pe=ne[0],Ee=u[pe],Ce=ne[1];if(re&&ne[2]){if(Ee===t&&!(pe in u))return!1}else{var Ae=new Bn;if(I)var Be=I(Ee,Ce,pe,u,d,Ae);if(!(Be===t?Ic(Ce,Ee,m|v,I,Ae):Be))return!1}}return!0}function IS(u){if(!gr(u)||Dq(u))return!1;var d=es(u)?QB:Bo;return d.test(Na(u))}function eq(u){return wr(u)&&Ni(u)==bt}function tq(u){return wr(u)&&bi(u)==je}function rq(u){return wr(u)&&gh(u.length)&&!!Yt[Ni(u)]}function AS(u){return typeof u=="function"?u:u==null?Ki:typeof u=="object"?yt(u)?RS(u[0],u[1]):MS(u):X_(u)}function Lv(u){if(!Mc(u))return oU(u);var d=[];for(var b in rr(u))$t.call(u,b)&&b!="constructor"&&d.push(b);return d}function iq(u){if(!gr(u))return Bq(u);var d=Mc(u),b=[];for(var I in u)I=="constructor"&&(d||!$t.call(u,I))||b.push(I);return b}function Fv(u,d){return u<d}function TS(u,d){var b=-1,I=ji(u)?ge(u.length):[];return Os(u,function(z,j,re){I[++b]=d(z,j,re)}),I}function MS(u){var d=Jv(u);return d.length==1&&d[0][2]?c_(d[0][0],d[0][1]):function(b){return b===u||Dv(b,u,d)}}function RS(u,d){return ey(u)&&u_(d)?c_(wo(u),d):function(b){var I=cy(b,u);return I===t&&I===d?dy(b,u):Ic(d,I,m|v)}}function eh(u,d,b,I,z){u!==d&&Rv(d,function(j,re){if(z||(z=new Bn),gr(j))nq(u,d,re,b,eh,I,z);else{var ne=I?I(ry(u,re),j,re+"",u,d,z):t;ne===t&&(ne=j),Tv(u,re,ne)}},Gi)}function nq(u,d,b,I,z,j,re){var ne=ry(u,b),pe=ry(d,b),Ee=re.get(pe);if(Ee){Tv(u,b,Ee);return}var Ce=j?j(ne,pe,b+"",u,d,re):t,Ae=Ce===t;if(Ae){var Be=yt(pe),et=!Be&&zs(pe),ct=!Be&&!et&&Dl(pe);Ce=pe,Be||et||ct?yt(ne)?Ce=ne:Er(ne)?Ce=$i(ne):et?(Ae=!1,Ce=WS(pe,!0)):ct?(Ae=!1,Ce=VS(pe,!0)):Ce=[]:kc(pe)||Oa(pe)?(Ce=ne,Oa(ne)?Ce=U_(ne):(!gr(ne)||es(ne))&&(Ce=l_(pe))):Ae=!1}Ae&&(re.set(pe,Ce),z(Ce,pe,I,j,re),re.delete(pe)),Tv(u,b,Ce)}function kS(u,d){var b=u.length;if(b)return d+=d<0?b:0,Qo(d,b)?u[d]:t}function NS(u,d,b){d.length?d=Nt(d,function(j){return yt(j)?function(re){return Ra(re,j.length===1?j[0]:j)}:j}):d=[Ki];var I=-1;d=Nt(d,Wt(at()));var z=TS(u,function(j,re,ne){var pe=Nt(d,function(Ee){return Ee(j)});return{criteria:pe,index:++I,value:j}});return yc(z,function(j,re){return vq(j,re,b)})}function oq(u,d){return OS(u,d,function(b,I){return dy(u,I)})}function OS(u,d,b){for(var I=-1,z=d.length,j={};++I<z;){var re=d[I],ne=Ra(u,re);b(ne,re)&&Ac(j,Ls(re,u),ne)}return j}function sq(u){return function(d){return Ra(d,u)}}function zv(u,d,b,I){var z=I?Ts:nn,j=-1,re=d.length,ne=u;for(u===d&&(d=$i(d)),b&&(ne=Nt(u,Wt(b)));++j<re;)for(var pe=0,Ee=d[j],Ce=b?b(Ee):Ee;(pe=z(ne,Ce,pe,I))>-1;)ne!==u&&Vp.call(ne,pe,1),Vp.call(u,pe,1);return u}function DS(u,d){for(var b=u?d.length:0,I=b-1;b--;){var z=d[b];if(b==I||z!==j){var j=z;Qo(z)?Vp.call(u,z,1):Hv(u,z)}}return u}function Bv(u,d){return u+Gp(mS()*(d-u+1))}function aq(u,d,b,I){for(var z=-1,j=Lr(jp((d-u)/(b||1)),0),re=ge(j);j--;)re[I?j:++z]=u,u+=b;return re}function Uv(u,d){var b="";if(!u||d<1||d>Z)return b;do d%2&&(b+=u),d=Gp(d/2),d&&(u+=u);while(d);return b}function Ct(u,d){return iy(d_(u,d,Ki),u+"")}function lq(u){return yS(Ll(u))}function uq(u,d){var b=Ll(u);return ch(b,Ma(d,0,b.length))}function Ac(u,d,b,I){if(!gr(u))return u;d=Ls(d,u);for(var z=-1,j=d.length,re=j-1,ne=u;ne!=null&&++z<j;){var pe=wo(d[z]),Ee=b;if(pe==="__proto__"||pe==="constructor"||pe==="prototype")return u;if(z!=re){var Ce=ne[pe];Ee=I?I(Ce,pe,ne):t,Ee===t&&(Ee=gr(Ce)?Ce:Qo(d[z+1])?[]:{})}Ec(ne,pe,Ee),ne=ne[pe]}return u}var LS=Kp?function(u,d){return Kp.set(u,d),u}:Ki,cq=$p?function(u,d){return $p(u,"toString",{configurable:!0,enumerable:!1,value:hy(d),writable:!0})}:Ki;function dq(u){return ch(Ll(u))}function Pn(u,d,b){var I=-1,z=u.length;d<0&&(d=-d>z?0:z+d),b=b>z?z:b,b<0&&(b+=z),z=d>b?0:b-d>>>0,d>>>=0;for(var j=ge(z);++I<z;)j[I]=u[I+d];return j}function pq(u,d){var b;return Os(u,function(I,z,j){return b=d(I,z,j),!b}),!!b}function th(u,d,b){var I=0,z=u==null?I:u.length;if(typeof d=="number"&&d===d&&z<=ae){for(;I<z;){var j=I+z>>>1,re=u[j];re!==null&&!un(re)&&(b?re<=d:re<d)?I=j+1:z=j}return z}return qv(u,d,Ki,b)}function qv(u,d,b,I){var z=0,j=u==null?0:u.length;if(j===0)return 0;d=b(d);for(var re=d!==d,ne=d===null,pe=un(d),Ee=d===t;z<j;){var Ce=Gp((z+j)/2),Ae=b(u[Ce]),Be=Ae!==t,et=Ae===null,ct=Ae===Ae,Et=un(Ae);if(re)var dt=I||ct;else Ee?dt=ct&&(I||Be):ne?dt=ct&&Be&&(I||!et):pe?dt=ct&&Be&&!et&&(I||!Et):et||Et?dt=!1:dt=I?Ae<=d:Ae<d;dt?z=Ce+1:j=Ce}return yi(j,ee)}function FS(u,d){for(var b=-1,I=u.length,z=0,j=[];++b<I;){var re=u[b],ne=d?d(re):re;if(!b||!Un(ne,pe)){var pe=ne;j[z++]=re===0?0:re}}return j}function zS(u){return typeof u=="number"?u:un(u)?Q:+u}function ln(u){if(typeof u=="string")return u;if(yt(u))return Nt(u,ln)+"";if(un(u))return gS?gS.call(u):"";var d=u+"";return d=="0"&&1/u==-oe?"-0":d}function Ds(u,d,b){var I=-1,z=_a,j=u.length,re=!0,ne=[],pe=ne;if(b)re=!1,z=El;else if(j>=r){var Ee=d?null:_q(u);if(Ee)return Jt(Ee);re=!1,z=H,pe=new Ta}else pe=d?[]:ne;e:for(;++I<j;){var Ce=u[I],Ae=d?d(Ce):Ce;if(Ce=b||Ce!==0?Ce:0,re&&Ae===Ae){for(var Be=pe.length;Be--;)if(pe[Be]===Ae)continue e;d&&pe.push(Ae),ne.push(Ce)}else z(pe,Ae,b)||(pe!==ne&&pe.push(Ae),ne.push(Ce))}return ne}function Hv(u,d){return d=Ls(d,u),u=p_(u,d),u==null||delete u[wo(In(d))]}function BS(u,d,b,I){return Ac(u,d,b(Ra(u,d)),I)}function rh(u,d,b,I){for(var z=u.length,j=I?z:-1;(I?j--:++j<z)&&d(u[j],j,u););return b?Pn(u,I?0:j,I?j+1:z):Pn(u,I?j+1:0,I?z:j)}function US(u,d){var b=u;return b instanceof Tt&&(b=b.value()),Ea(d,function(I,z){return z.func.apply(z.thisArg,Sn([I],z.args))},b)}function Wv(u,d,b){var I=u.length;if(I<2)return I?Ds(u[0]):[];for(var z=-1,j=ge(I);++z<I;)for(var re=u[z],ne=-1;++ne<I;)ne!=z&&(j[z]=Cc(j[z]||re,u[ne],d,b));return Ds(ni(j,1),d,b)}function qS(u,d,b){for(var I=-1,z=u.length,j=d.length,re={};++I<z;){var ne=I<j?d[I]:t;b(re,u[I],ne)}return re}function Vv(u){return Er(u)?u:[]}function $v(u){return typeof u=="function"?u:Ki}function Ls(u,d){return yt(u)?u:ey(u,d)?[u]:g_(Ut(u))}var hq=Ct;function Fs(u,d,b){var I=u.length;return b=b===t?I:b,!d&&b>=I?u:Pn(u,d,b)}var HS=eU||function(u){return or.clearTimeout(u)};function WS(u,d){if(d)return u.slice();var b=u.length,I=cS?cS(b):new u.constructor(b);return u.copy(I),I}function jv(u){var d=new u.constructor(u.byteLength);return new Hp(d).set(new Hp(u)),d}function fq(u,d){var b=d?jv(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}function mq(u){var d=new u.constructor(u.source,oc.exec(u));return d.lastIndex=u.lastIndex,d}function gq(u){return _c?rr(_c.call(u)):{}}function VS(u,d){var b=d?jv(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}function $S(u,d){if(u!==d){var b=u!==t,I=u===null,z=u===u,j=un(u),re=d!==t,ne=d===null,pe=d===d,Ee=un(d);if(!ne&&!Ee&&!j&&u>d||j&&re&&pe&&!ne&&!Ee||I&&re&&pe||!b&&pe||!z)return 1;if(!I&&!j&&!Ee&&u<d||Ee&&b&&z&&!I&&!j||ne&&b&&z||!re&&z||!pe)return-1}return 0}function vq(u,d,b){for(var I=-1,z=u.criteria,j=d.criteria,re=z.length,ne=b.length;++I<re;){var pe=$S(z[I],j[I]);if(pe){if(I>=ne)return pe;var Ee=b[I];return pe*(Ee=="desc"?-1:1)}}return u.index-d.index}function jS(u,d,b,I){for(var z=-1,j=u.length,re=b.length,ne=-1,pe=d.length,Ee=Lr(j-re,0),Ce=ge(pe+Ee),Ae=!I;++ne<pe;)Ce[ne]=d[ne];for(;++z<re;)(Ae||z<j)&&(Ce[b[z]]=u[z]);for(;Ee--;)Ce[ne++]=u[z++];return Ce}function GS(u,d,b,I){for(var z=-1,j=u.length,re=-1,ne=b.length,pe=-1,Ee=d.length,Ce=Lr(j-ne,0),Ae=ge(Ce+Ee),Be=!I;++z<Ce;)Ae[z]=u[z];for(var et=z;++pe<Ee;)Ae[et+pe]=d[pe];for(;++re<ne;)(Be||z<j)&&(Ae[et+b[re]]=u[z++]);return Ae}function $i(u,d){var b=-1,I=u.length;for(d||(d=ge(I));++b<I;)d[b]=u[b];return d}function bo(u,d,b,I){var z=!b;b||(b={});for(var j=-1,re=d.length;++j<re;){var ne=d[j],pe=I?I(b[ne],u[ne],ne,b,u):t;pe===t&&(pe=u[ne]),z?Xo(b,ne,pe):Ec(b,ne,pe)}return b}function yq(u,d){return bo(u,Qv(u),d)}function bq(u,d){return bo(u,s_(u),d)}function ih(u,d){return function(b,I){var z=yt(b)?As:qU,j=d?d():{};return z(b,u,at(I,2),j)}}function kl(u){return Ct(function(d,b){var I=-1,z=b.length,j=z>1?b[z-1]:t,re=z>2?b[2]:t;for(j=u.length>3&&typeof j=="function"?(z--,j):t,re&&Oi(b[0],b[1],re)&&(j=z<3?t:j,z=1),d=rr(d);++I<z;){var ne=b[I];ne&&u(d,ne,I,j)}return d})}function KS(u,d){return function(b,I){if(b==null)return b;if(!ji(b))return u(b,I);for(var z=b.length,j=d?z:-1,re=rr(b);(d?j--:++j<z)&&I(re[j],j,re)!==!1;);return b}}function YS(u){return function(d,b,I){for(var z=-1,j=rr(d),re=I(d),ne=re.length;ne--;){var pe=re[u?ne:++z];if(b(j[pe],pe,j)===!1)break}return d}}function wq(u,d,b){var I=d&g,z=Tc(u);function j(){var re=this&&this!==or&&this instanceof j?z:u;return re.apply(I?b:this,arguments)}return j}function XS(u){return function(d){d=Ut(d);var b=xt(d)?vi(d):t,I=b?b[0]:d.charAt(0),z=b?Fs(b,1).join(""):d.slice(1);return I[u]()+z}}function Nl(u){return function(d){return Ea(K_(G_(d).replace(fv,"")),u,"")}}function Tc(u){return function(){var d=arguments;switch(d.length){case 0:return new u;case 1:return new u(d[0]);case 2:return new u(d[0],d[1]);case 3:return new u(d[0],d[1],d[2]);case 4:return new u(d[0],d[1],d[2],d[3]);case 5:return new u(d[0],d[1],d[2],d[3],d[4]);case 6:return new u(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new u(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var b=Rl(u.prototype),I=u.apply(b,d);return gr(I)?I:b}}function xq(u,d,b){var I=Tc(u);function z(){for(var j=arguments.length,re=ge(j),ne=j,pe=Ol(z);ne--;)re[ne]=arguments[ne];var Ee=j<3&&re[0]!==pe&&re[j-1]!==pe?[]:Zt(re,pe);if(j-=Ee.length,j<b)return t_(u,d,nh,z.placeholder,t,re,Ee,t,t,b-j);var Ce=this&&this!==or&&this instanceof z?I:u;return ki(Ce,this,re)}return z}function ZS(u){return function(d,b,I){var z=rr(d);if(!ji(d)){var j=at(b,3);d=jr(d),b=function(ne){return j(z[ne],ne,z)}}var re=u(d,b,I);return re>-1?z[j?d[re]:re]:t}}function JS(u){return Jo(function(d){var b=d.length,I=b,z=En.prototype.thru;for(u&&d.reverse();I--;){var j=d[I];if(typeof j!="function")throw new _n(n);if(z&&!re&&lh(j)=="wrapper")var re=new En([],!0)}for(I=re?I:b;++I<b;){j=d[I];var ne=lh(j),pe=ne=="wrapper"?Zv(j):t;pe&&ty(pe[0])&&pe[1]==(D|E|O|P)&&!pe[4].length&&pe[9]==1?re=re[lh(pe[0])].apply(re,pe[3]):re=j.length==1&&ty(j)?re[ne]():re.thru(j)}return function(){var Ee=arguments,Ce=Ee[0];if(re&&Ee.length==1&&yt(Ce))return re.plant(Ce).value();for(var Ae=0,Be=b?d[Ae].apply(this,Ee):Ce;++Ae<b;)Be=d[Ae].call(this,Be);return Be}})}function nh(u,d,b,I,z,j,re,ne,pe,Ee){var Ce=d&D,Ae=d&g,Be=d&x,et=d&(E|L),ct=d&U,Et=Be?t:Tc(u);function dt(){for(var At=arguments.length,Rt=ge(At),cn=At;cn--;)Rt[cn]=arguments[cn];if(et)var Di=Ol(dt),dn=Se(Rt,Di);if(I&&(Rt=jS(Rt,I,z,et)),j&&(Rt=GS(Rt,j,re,et)),At-=dn,et&&At<Ee){var Cr=Zt(Rt,Di);return t_(u,d,nh,dt.placeholder,b,Rt,Cr,ne,pe,Ee-At)}var qn=Ae?b:this,rs=Be?qn[u]:u;return At=Rt.length,ne?Rt=qq(Rt,ne):ct&&At>1&&Rt.reverse(),Ce&&pe<At&&(Rt.length=pe),this&&this!==or&&this instanceof dt&&(rs=Et||Tc(rs)),rs.apply(qn,Rt)}return dt}function QS(u,d){return function(b,I){return YU(b,u,d(I),{})}}function oh(u,d){return function(b,I){var z;if(b===t&&I===t)return d;if(b!==t&&(z=b),I!==t){if(z===t)return I;typeof b=="string"||typeof I=="string"?(b=ln(b),I=ln(I)):(b=zS(b),I=zS(I)),z=u(b,I)}return z}}function Gv(u){return Jo(function(d){return d=Nt(d,Wt(at())),Ct(function(b){var I=this;return u(d,function(z){return ki(z,I,b)})})})}function sh(u,d){d=d===t?" ":ln(d);var b=d.length;if(b<2)return b?Uv(d,u):d;var I=Uv(d,jp(u/gi(d)));return xt(d)?Fs(vi(I),0,u).join(""):I.slice(0,u)}function Sq(u,d,b,I){var z=d&g,j=Tc(u);function re(){for(var ne=-1,pe=arguments.length,Ee=-1,Ce=I.length,Ae=ge(Ce+pe),Be=this&&this!==or&&this instanceof re?j:u;++Ee<Ce;)Ae[Ee]=I[Ee];for(;pe--;)Ae[Ee++]=arguments[++ne];return ki(Be,z?b:this,Ae)}return re}function e_(u){return function(d,b,I){return I&&typeof I!="number"&&Oi(d,b,I)&&(b=I=t),d=ts(d),b===t?(b=d,d=0):b=ts(b),I=I===t?d<b?1:-1:ts(I),aq(d,b,I,u)}}function ah(u){return function(d,b){return typeof d=="string"&&typeof b=="string"||(d=An(d),b=An(b)),u(d,b)}}function t_(u,d,b,I,z,j,re,ne,pe,Ee){var Ce=d&E,Ae=Ce?re:t,Be=Ce?t:re,et=Ce?j:t,ct=Ce?t:j;d|=Ce?O:M,d&=~(Ce?M:O),d&_||(d&=~(g|x));var Et=[u,d,z,et,Ae,ct,Be,ne,pe,Ee],dt=b.apply(t,Et);return ty(u)&&h_(dt,Et),dt.placeholder=I,f_(dt,u,d)}function Kv(u){var d=Dr[u];return function(b,I){if(b=An(b),I=I==null?0:yi(St(I),292),I&&fS(b)){var z=(Ut(b)+"e").split("e"),j=d(z[0]+"e"+(+z[1]+I));return z=(Ut(j)+"e").split("e"),+(z[0]+"e"+(+z[1]-I))}return d(b)}}var _q=Tl&&1/Jt(new Tl([,-0]))[1]==oe?function(u){return new Tl(u)}:gy;function r_(u){return function(d){var b=bi(d);return b==He?Vt(d):b==je?pr(d):_v(d,u(d))}}function Zo(u,d,b,I,z,j,re,ne){var pe=d&x;if(!pe&&typeof u!="function")throw new _n(n);var Ee=I?I.length:0;if(Ee||(d&=~(O|M),I=z=t),re=re===t?re:Lr(St(re),0),ne=ne===t?ne:St(ne),Ee-=z?z.length:0,d&M){var Ce=I,Ae=z;I=z=t}var Be=pe?t:Zv(u),et=[u,d,b,I,z,Ce,Ae,j,re,ne];if(Be&&zq(et,Be),u=et[0],d=et[1],b=et[2],I=et[3],z=et[4],ne=et[9]=et[9]===t?pe?0:u.length:Lr(et[9]-Ee,0),!ne&&d&(E|L)&&(d&=~(E|L)),!d||d==g)var ct=wq(u,d,b);else d==E||d==L?ct=xq(u,d,ne):(d==O||d==(g|O))&&!z.length?ct=Sq(u,d,b,I):ct=nh.apply(t,et);var Et=Be?LS:h_;return f_(Et(ct,et),u,d)}function i_(u,d,b,I){return u===t||Un(u,Al[b])&&!$t.call(I,b)?d:u}function n_(u,d,b,I,z,j){return gr(u)&&gr(d)&&(j.set(d,u),eh(u,d,t,n_,j),j.delete(d)),u}function Eq(u){return kc(u)?t:u}function o_(u,d,b,I,z,j){var re=b&m,ne=u.length,pe=d.length;if(ne!=pe&&!(re&&pe>ne))return!1;var Ee=j.get(u),Ce=j.get(d);if(Ee&&Ce)return Ee==d&&Ce==u;var Ae=-1,Be=!0,et=b&v?new Ta:t;for(j.set(u,d),j.set(d,u);++Ae<ne;){var ct=u[Ae],Et=d[Ae];if(I)var dt=re?I(Et,ct,Ae,d,u,j):I(ct,Et,Ae,u,d,j);if(dt!==t){if(dt)continue;Be=!1;break}if(et){if(!$o(d,function(At,Rt){if(!H(et,Rt)&&(ct===At||z(ct,At,b,I,j)))return et.push(Rt)})){Be=!1;break}}else if(!(ct===Et||z(ct,Et,b,I,j))){Be=!1;break}}return j.delete(u),j.delete(d),Be}function Cq(u,d,b,I,z,j,re){switch(b){case vn:if(u.byteLength!=d.byteLength||u.byteOffset!=d.byteOffset)return!1;u=u.buffer,d=d.buffer;case Ti:return!(u.byteLength!=d.byteLength||!j(new Hp(u),new Hp(d)));case be:case Me:case it:return Un(+u,+d);case Pe:return u.name==d.name&&u.message==d.message;case bt:case Lt:return u==d+"";case He:var ne=Vt;case je:var pe=I&m;if(ne||(ne=Jt),u.size!=d.size&&!pe)return!1;var Ee=re.get(u);if(Ee)return Ee==d;I|=v,re.set(u,d);var Ce=o_(ne(u),ne(d),I,z,j,re);return re.delete(u),Ce;case Kt:if(_c)return _c.call(u)==_c.call(d)}return!1}function Pq(u,d,b,I,z,j){var re=b&m,ne=Yv(u),pe=ne.length,Ee=Yv(d),Ce=Ee.length;if(pe!=Ce&&!re)return!1;for(var Ae=pe;Ae--;){var Be=ne[Ae];if(!(re?Be in d:$t.call(d,Be)))return!1}var et=j.get(u),ct=j.get(d);if(et&&ct)return et==d&&ct==u;var Et=!0;j.set(u,d),j.set(d,u);for(var dt=re;++Ae<pe;){Be=ne[Ae];var At=u[Be],Rt=d[Be];if(I)var cn=re?I(Rt,At,Be,d,u,j):I(At,Rt,Be,u,d,j);if(!(cn===t?At===Rt||z(At,Rt,b,I,j):cn)){Et=!1;break}dt||(dt=Be=="constructor")}if(Et&&!dt){var Di=u.constructor,dn=d.constructor;Di!=dn&&"constructor"in u&&"constructor"in d&&!(typeof Di=="function"&&Di instanceof Di&&typeof dn=="function"&&dn instanceof dn)&&(Et=!1)}return j.delete(u),j.delete(d),Et}function Jo(u){return iy(d_(u,t,w_),u+"")}function Yv(u){return CS(u,jr,Qv)}function Xv(u){return CS(u,Gi,s_)}var Zv=Kp?function(u){return Kp.get(u)}:gy;function lh(u){for(var d=u.name+"",b=Ml[d],I=$t.call(Ml,d)?b.length:0;I--;){var z=b[I],j=z.func;if(j==null||j==u)return z.name}return d}function Ol(u){var d=$t.call(W,"placeholder")?W:u;return d.placeholder}function at(){var u=W.iteratee||fy;return u=u===fy?AS:u,arguments.length?u(arguments[0],arguments[1]):u}function uh(u,d){var b=u.__data__;return Oq(d)?b[typeof d=="string"?"string":"hash"]:b.map}function Jv(u){for(var d=jr(u),b=d.length;b--;){var I=d[b],z=u[I];d[b]=[I,z,u_(z)]}return d}function ka(u,d){var b=ft(u,d);return IS(b)?b:t}function Iq(u){var d=$t.call(u,Ia),b=u[Ia];try{u[Ia]=t;var I=!0}catch{}var z=Up.call(u);return I&&(d?u[Ia]=b:delete u[Ia]),z}var Qv=Pv?function(u){return u==null?[]:(u=rr(u),ii(Pv(u),function(d){return pS.call(u,d)}))}:vy,s_=Pv?function(u){for(var d=[];u;)Sn(d,Qv(u)),u=Wp(u);return d}:vy,bi=Ni;(Iv&&bi(new Iv(new ArrayBuffer(1)))!=vn||wc&&bi(new wc)!=He||Av&&bi(Av.resolve())!=ot||Tl&&bi(new Tl)!=je||xc&&bi(new xc)!=pt)&&(bi=function(u){var d=Ni(u),b=d==st?u.constructor:t,I=b?Na(b):"";if(I)switch(I){case uU:return vn;case cU:return He;case dU:return ot;case pU:return je;case hU:return pt}return d});function Aq(u,d,b){for(var I=-1,z=b.length;++I<z;){var j=b[I],re=j.size;switch(j.type){case"drop":u+=re;break;case"dropRight":d-=re;break;case"take":d=yi(d,u+re);break;case"takeRight":u=Lr(u,d-re);break}}return{start:u,end:d}}function Tq(u){var d=u.match(ic);return d?d[1].split(ga):[]}function a_(u,d,b){d=Ls(d,u);for(var I=-1,z=d.length,j=!1;++I<z;){var re=wo(d[I]);if(!(j=u!=null&&b(u,re)))break;u=u[re]}return j||++I!=z?j:(z=u==null?0:u.length,!!z&&gh(z)&&Qo(re,z)&&(yt(u)||Oa(u)))}function Mq(u){var d=u.length,b=new u.constructor(d);return d&&typeof u[0]=="string"&&$t.call(u,"index")&&(b.index=u.index,b.input=u.input),b}function l_(u){return typeof u.constructor=="function"&&!Mc(u)?Rl(Wp(u)):{}}function Rq(u,d,b){var I=u.constructor;switch(d){case Ti:return jv(u);case be:case Me:return new I(+u);case vn:return fq(u,b);case Ar:case _t:case qi:case Mi:case gl:case mr:case lo:case uo:case Ss:return VS(u,b);case He:return new I;case it:case Lt:return new I(u);case bt:return mq(u);case je:return new I;case Kt:return gq(u)}}function kq(u,d){var b=d.length;if(!b)return u;var I=b-1;return d[I]=(b>1?"& ":"")+d[I],d=d.join(b>2?", ":" "),u.replace(ma,`{
/* [wrapped with `+d+`] */
`)}function Nq(u){return yt(u)||Oa(u)||!!(hS&&u&&u[hS])}function Qo(u,d){var b=typeof u;return d=d??Z,!!d&&(b=="number"||b!="symbol"&&Wr.test(u))&&u>-1&&u%1==0&&u<d}function Oi(u,d,b){if(!gr(b))return!1;var I=typeof d;return(I=="number"?ji(b)&&Qo(d,b.length):I=="string"&&d in b)?Un(b[d],u):!1}function ey(u,d){if(yt(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||un(u)?!0:uv.test(u)||!_p.test(u)||d!=null&&u in rr(d)}function Oq(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}function ty(u){var d=lh(u),b=W[d];if(typeof b!="function"||!(d in Tt.prototype))return!1;if(u===b)return!0;var I=Zv(b);return!!I&&u===I[0]}function Dq(u){return!!uS&&uS in u}var Lq=zp?es:yy;function Mc(u){var d=u&&u.constructor,b=typeof d=="function"&&d.prototype||Al;return u===b}function u_(u){return u===u&&!gr(u)}function c_(u,d){return function(b){return b==null?!1:b[u]===d&&(d!==t||u in rr(b))}}function Fq(u){var d=fh(u,function(I){return b.size===a&&b.clear(),I}),b=d.cache;return d}function zq(u,d){var b=u[1],I=d[1],z=b|I,j=z<(g|x|D),re=I==D&&b==E||I==D&&b==P&&u[7].length<=d[8]||I==(D|P)&&d[7].length<=d[8]&&b==E;if(!(j||re))return u;I&g&&(u[2]=d[2],z|=b&g?0:_);var ne=d[3];if(ne){var pe=u[3];u[3]=pe?jS(pe,ne,d[4]):ne,u[4]=pe?Zt(u[3],l):d[4]}return ne=d[5],ne&&(pe=u[5],u[5]=pe?GS(pe,ne,d[6]):ne,u[6]=pe?Zt(u[5],l):d[6]),ne=d[7],ne&&(u[7]=ne),I&D&&(u[8]=u[8]==null?d[8]:yi(u[8],d[8])),u[9]==null&&(u[9]=d[9]),u[0]=d[0],u[1]=z,u}function Bq(u){var d=[];if(u!=null)for(var b in rr(u))d.push(b);return d}function Uq(u){return Up.call(u)}function d_(u,d,b){return d=Lr(d===t?u.length-1:d,0),function(){for(var I=arguments,z=-1,j=Lr(I.length-d,0),re=ge(j);++z<j;)re[z]=I[d+z];z=-1;for(var ne=ge(d+1);++z<d;)ne[z]=I[z];return ne[d]=b(re),ki(u,this,ne)}}function p_(u,d){return d.length<2?u:Ra(u,Pn(d,0,-1))}function qq(u,d){for(var b=u.length,I=yi(d.length,b),z=$i(u);I--;){var j=d[I];u[I]=Qo(j,b)?z[j]:t}return u}function ry(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}var h_=m_(LS),Rc=rU||function(u,d){return or.setTimeout(u,d)},iy=m_(cq);function f_(u,d,b){var I=d+"";return iy(u,kq(I,Hq(Tq(I),b)))}function m_(u){var d=0,b=0;return function(){var I=sU(),z=q-(I-b);if(b=I,z>0){if(++d>=V)return arguments[0]}else d=0;return u.apply(t,arguments)}}function ch(u,d){var b=-1,I=u.length,z=I-1;for(d=d===t?I:d;++b<d;){var j=Bv(b,z),re=u[j];u[j]=u[b],u[b]=re}return u.length=d,u}var g_=Fq(function(u){var d=[];return u.charCodeAt(0)===46&&d.push(""),u.replace(cv,function(b,I,z,j){d.push(z?j.replace(Cp,"$1"):I||b)}),d});function wo(u){if(typeof u=="string"||un(u))return u;var d=u+"";return d=="0"&&1/u==-oe?"-0":d}function Na(u){if(u!=null){try{return Bp.call(u)}catch{}try{return u+""}catch{}}return""}function Hq(u,d){return ri(ue,function(b){var I="_."+b[0];d&b[1]&&!_a(u,I)&&u.push(I)}),u.sort()}function v_(u){if(u instanceof Tt)return u.clone();var d=new En(u.__wrapped__,u.__chain__);return d.__actions__=$i(u.__actions__),d.__index__=u.__index__,d.__values__=u.__values__,d}function Wq(u,d,b){(b?Oi(u,d,b):d===t)?d=1:d=Lr(St(d),0);var I=u==null?0:u.length;if(!I||d<1)return[];for(var z=0,j=0,re=ge(jp(I/d));z<I;)re[j++]=Pn(u,z,z+=d);return re}function Vq(u){for(var d=-1,b=u==null?0:u.length,I=0,z=[];++d<b;){var j=u[d];j&&(z[I++]=j)}return z}function $q(){var u=arguments.length;if(!u)return[];for(var d=ge(u-1),b=arguments[0],I=u;I--;)d[I-1]=arguments[I];return Sn(yt(b)?$i(b):[b],ni(d,1))}var jq=Ct(function(u,d){return Er(u)?Cc(u,ni(d,1,Er,!0)):[]}),Gq=Ct(function(u,d){var b=In(d);return Er(b)&&(b=t),Er(u)?Cc(u,ni(d,1,Er,!0),at(b,2)):[]}),Kq=Ct(function(u,d){var b=In(d);return Er(b)&&(b=t),Er(u)?Cc(u,ni(d,1,Er,!0),t,b):[]});function Yq(u,d,b){var I=u==null?0:u.length;return I?(d=b||d===t?1:St(d),Pn(u,d<0?0:d,I)):[]}function Xq(u,d,b){var I=u==null?0:u.length;return I?(d=b||d===t?1:St(d),d=I-d,Pn(u,0,d<0?0:d)):[]}function Zq(u,d){return u&&u.length?rh(u,at(d,3),!0,!0):[]}function Jq(u,d){return u&&u.length?rh(u,at(d,3),!0):[]}function Qq(u,d,b,I){var z=u==null?0:u.length;return z?(b&&typeof b!="number"&&Oi(u,d,b)&&(b=0,I=z),$U(u,d,b,I)):[]}function y_(u,d,b){var I=u==null?0:u.length;if(!I)return-1;var z=b==null?0:St(b);return z<0&&(z=Lr(I+z,0)),fi(u,at(d,3),z)}function b_(u,d,b){var I=u==null?0:u.length;if(!I)return-1;var z=I-1;return b!==t&&(z=St(b),z=b<0?Lr(I+z,0):yi(z,I-1)),fi(u,at(d,3),z,!0)}function w_(u){var d=u==null?0:u.length;return d?ni(u,1):[]}function eH(u){var d=u==null?0:u.length;return d?ni(u,oe):[]}function tH(u,d){var b=u==null?0:u.length;return b?(d=d===t?1:St(d),ni(u,d)):[]}function rH(u){for(var d=-1,b=u==null?0:u.length,I={};++d<b;){var z=u[d];I[z[0]]=z[1]}return I}function x_(u){return u&&u.length?u[0]:t}function iH(u,d,b){var I=u==null?0:u.length;if(!I)return-1;var z=b==null?0:St(b);return z<0&&(z=Lr(I+z,0)),nn(u,d,z)}function nH(u){var d=u==null?0:u.length;return d?Pn(u,0,-1):[]}var oH=Ct(function(u){var d=Nt(u,Vv);return d.length&&d[0]===u[0]?Ov(d):[]}),sH=Ct(function(u){var d=In(u),b=Nt(u,Vv);return d===In(b)?d=t:b.pop(),b.length&&b[0]===u[0]?Ov(b,at(d,2)):[]}),aH=Ct(function(u){var d=In(u),b=Nt(u,Vv);return d=typeof d=="function"?d:t,d&&b.pop(),b.length&&b[0]===u[0]?Ov(b,t,d):[]});function lH(u,d){return u==null?"":nU.call(u,d)}function In(u){var d=u==null?0:u.length;return d?u[d-1]:t}function uH(u,d,b){var I=u==null?0:u.length;if(!I)return-1;var z=I;return b!==t&&(z=St(b),z=z<0?Lr(I+z,0):yi(z,I-1)),d===d?sn(u,d,z):fi(u,Pl,z,!0)}function cH(u,d){return u&&u.length?kS(u,St(d)):t}var dH=Ct(S_);function S_(u,d){return u&&u.length&&d&&d.length?zv(u,d):u}function pH(u,d,b){return u&&u.length&&d&&d.length?zv(u,d,at(b,2)):u}function hH(u,d,b){return u&&u.length&&d&&d.length?zv(u,d,t,b):u}var fH=Jo(function(u,d){var b=u==null?0:u.length,I=Mv(u,d);return DS(u,Nt(d,function(z){return Qo(z,b)?+z:z}).sort($S)),I});function mH(u,d){var b=[];if(!(u&&u.length))return b;var I=-1,z=[],j=u.length;for(d=at(d,3);++I<j;){var re=u[I];d(re,I,u)&&(b.push(re),z.push(I))}return DS(u,z),b}function ny(u){return u==null?u:lU.call(u)}function gH(u,d,b){var I=u==null?0:u.length;return I?(b&&typeof b!="number"&&Oi(u,d,b)?(d=0,b=I):(d=d==null?0:St(d),b=b===t?I:St(b)),Pn(u,d,b)):[]}function vH(u,d){return th(u,d)}function yH(u,d,b){return qv(u,d,at(b,2))}function bH(u,d){var b=u==null?0:u.length;if(b){var I=th(u,d);if(I<b&&Un(u[I],d))return I}return-1}function wH(u,d){return th(u,d,!0)}function xH(u,d,b){return qv(u,d,at(b,2),!0)}function SH(u,d){var b=u==null?0:u.length;if(b){var I=th(u,d,!0)-1;if(Un(u[I],d))return I}return-1}function _H(u){return u&&u.length?FS(u):[]}function EH(u,d){return u&&u.length?FS(u,at(d,2)):[]}function CH(u){var d=u==null?0:u.length;return d?Pn(u,1,d):[]}function PH(u,d,b){return u&&u.length?(d=b||d===t?1:St(d),Pn(u,0,d<0?0:d)):[]}function IH(u,d,b){var I=u==null?0:u.length;return I?(d=b||d===t?1:St(d),d=I-d,Pn(u,d<0?0:d,I)):[]}function AH(u,d){return u&&u.length?rh(u,at(d,3),!1,!0):[]}function TH(u,d){return u&&u.length?rh(u,at(d,3)):[]}var MH=Ct(function(u){return Ds(ni(u,1,Er,!0))}),RH=Ct(function(u){var d=In(u);return Er(d)&&(d=t),Ds(ni(u,1,Er,!0),at(d,2))}),kH=Ct(function(u){var d=In(u);return d=typeof d=="function"?d:t,Ds(ni(u,1,Er,!0),t,d)});function NH(u){return u&&u.length?Ds(u):[]}function OH(u,d){return u&&u.length?Ds(u,at(d,2)):[]}function DH(u,d){return d=typeof d=="function"?d:t,u&&u.length?Ds(u,t,d):[]}function oy(u){if(!(u&&u.length))return[];var d=0;return u=ii(u,function(b){if(Er(b))return d=Lr(b.length,d),!0}),Rs(d,function(b){return Nt(u,Ca(b))})}function __(u,d){if(!(u&&u.length))return[];var b=oy(u);return d==null?b:Nt(b,function(I){return ki(d,t,I)})}var LH=Ct(function(u,d){return Er(u)?Cc(u,d):[]}),FH=Ct(function(u){return Wv(ii(u,Er))}),zH=Ct(function(u){var d=In(u);return Er(d)&&(d=t),Wv(ii(u,Er),at(d,2))}),BH=Ct(function(u){var d=In(u);return d=typeof d=="function"?d:t,Wv(ii(u,Er),t,d)}),UH=Ct(oy);function qH(u,d){return qS(u||[],d||[],Ec)}function HH(u,d){return qS(u||[],d||[],Ac)}var WH=Ct(function(u){var d=u.length,b=d>1?u[d-1]:t;return b=typeof b=="function"?(u.pop(),b):t,__(u,b)});function E_(u){var d=W(u);return d.__chain__=!0,d}function VH(u,d){return d(u),u}function dh(u,d){return d(u)}var $H=Jo(function(u){var d=u.length,b=d?u[0]:0,I=this.__wrapped__,z=function(j){return Mv(j,u)};return d>1||this.__actions__.length||!(I instanceof Tt)||!Qo(b)?this.thru(z):(I=I.slice(b,+b+(d?1:0)),I.__actions__.push({func:dh,args:[z],thisArg:t}),new En(I,this.__chain__).thru(function(j){return d&&!j.length&&j.push(t),j}))});function jH(){return E_(this)}function GH(){return new En(this.value(),this.__chain__)}function KH(){this.__values__===t&&(this.__values__=z_(this.value()));var u=this.__index__>=this.__values__.length,d=u?t:this.__values__[this.__index__++];return{done:u,value:d}}function YH(){return this}function XH(u){for(var d,b=this;b instanceof Xp;){var I=v_(b);I.__index__=0,I.__values__=t,d?z.__wrapped__=I:d=I;var z=I;b=b.__wrapped__}return z.__wrapped__=u,d}function ZH(){var u=this.__wrapped__;if(u instanceof Tt){var d=u;return this.__actions__.length&&(d=new Tt(this)),d=d.reverse(),d.__actions__.push({func:dh,args:[ny],thisArg:t}),new En(d,this.__chain__)}return this.thru(ny)}function JH(){return US(this.__wrapped__,this.__actions__)}var QH=ih(function(u,d,b){$t.call(u,b)?++u[b]:Xo(u,b,1)});function eW(u,d,b){var I=yt(u)?mc:VU;return b&&Oi(u,d,b)&&(d=t),I(u,at(d,3))}function tW(u,d){var b=yt(u)?ii:_S;return b(u,at(d,3))}var rW=ZS(y_),iW=ZS(b_);function nW(u,d){return ni(ph(u,d),1)}function oW(u,d){return ni(ph(u,d),oe)}function sW(u,d,b){return b=b===t?1:St(b),ni(ph(u,d),b)}function C_(u,d){var b=yt(u)?ri:Os;return b(u,at(d,3))}function P_(u,d){var b=yt(u)?Lp:SS;return b(u,at(d,3))}var aW=ih(function(u,d,b){$t.call(u,b)?u[b].push(d):Xo(u,b,[d])});function lW(u,d,b,I){u=ji(u)?u:Ll(u),b=b&&!I?St(b):0;var z=u.length;return b<0&&(b=Lr(z+b,0)),vh(u)?b<=z&&u.indexOf(d,b)>-1:!!z&&nn(u,d,b)>-1}var uW=Ct(function(u,d,b){var I=-1,z=typeof d=="function",j=ji(u)?ge(u.length):[];return Os(u,function(re){j[++I]=z?ki(d,re,b):Pc(re,d,b)}),j}),cW=ih(function(u,d,b){Xo(u,b,d)});function ph(u,d){var b=yt(u)?Nt:TS;return b(u,at(d,3))}function dW(u,d,b,I){return u==null?[]:(yt(d)||(d=d==null?[]:[d]),b=I?t:b,yt(b)||(b=b==null?[]:[b]),NS(u,d,b))}var pW=ih(function(u,d,b){u[b?0:1].push(d)},function(){return[[],[]]});function hW(u,d,b){var I=yt(u)?Ea:go,z=arguments.length<3;return I(u,at(d,4),b,z,Os)}function fW(u,d,b){var I=yt(u)?Cl:go,z=arguments.length<3;return I(u,at(d,4),b,z,SS)}function mW(u,d){var b=yt(u)?ii:_S;return b(u,mh(at(d,3)))}function gW(u){var d=yt(u)?yS:lq;return d(u)}function vW(u,d,b){(b?Oi(u,d,b):d===t)?d=1:d=St(d);var I=yt(u)?BU:uq;return I(u,d)}function yW(u){var d=yt(u)?UU:dq;return d(u)}function bW(u){if(u==null)return 0;if(ji(u))return vh(u)?gi(u):u.length;var d=bi(u);return d==He||d==je?u.size:Lv(u).length}function wW(u,d,b){var I=yt(u)?$o:pq;return b&&Oi(u,d,b)&&(d=t),I(u,at(d,3))}var xW=Ct(function(u,d){if(u==null)return[];var b=d.length;return b>1&&Oi(u,d[0],d[1])?d=[]:b>2&&Oi(d[0],d[1],d[2])&&(d=[d[0]]),NS(u,ni(d,1),[])}),hh=tU||function(){return or.Date.now()};function SW(u,d){if(typeof d!="function")throw new _n(n);return u=St(u),function(){if(--u<1)return d.apply(this,arguments)}}function I_(u,d,b){return d=b?t:d,d=u&&d==null?u.length:d,Zo(u,D,t,t,t,t,d)}function A_(u,d){var b;if(typeof d!="function")throw new _n(n);return u=St(u),function(){return--u>0&&(b=d.apply(this,arguments)),u<=1&&(d=t),b}}var sy=Ct(function(u,d,b){var I=g;if(b.length){var z=Zt(b,Ol(sy));I|=O}return Zo(u,I,d,b,z)}),T_=Ct(function(u,d,b){var I=g|x;if(b.length){var z=Zt(b,Ol(T_));I|=O}return Zo(d,I,u,b,z)});function M_(u,d,b){d=b?t:d;var I=Zo(u,E,t,t,t,t,t,d);return I.placeholder=M_.placeholder,I}function R_(u,d,b){d=b?t:d;var I=Zo(u,L,t,t,t,t,t,d);return I.placeholder=R_.placeholder,I}function k_(u,d,b){var I,z,j,re,ne,pe,Ee=0,Ce=!1,Ae=!1,Be=!0;if(typeof u!="function")throw new _n(n);d=An(d)||0,gr(b)&&(Ce=!!b.leading,Ae="maxWait"in b,j=Ae?Lr(An(b.maxWait)||0,d):j,Be="trailing"in b?!!b.trailing:Be);function et(Cr){var qn=I,rs=z;return I=z=t,Ee=Cr,re=u.apply(rs,qn),re}function ct(Cr){return Ee=Cr,ne=Rc(At,d),Ce?et(Cr):re}function Et(Cr){var qn=Cr-pe,rs=Cr-Ee,Z_=d-qn;return Ae?yi(Z_,j-rs):Z_}function dt(Cr){var qn=Cr-pe,rs=Cr-Ee;return pe===t||qn>=d||qn<0||Ae&&rs>=j}function At(){var Cr=hh();if(dt(Cr))return Rt(Cr);ne=Rc(At,Et(Cr))}function Rt(Cr){return ne=t,Be&&I?et(Cr):(I=z=t,re)}function cn(){ne!==t&&HS(ne),Ee=0,I=pe=z=ne=t}function Di(){return ne===t?re:Rt(hh())}function dn(){var Cr=hh(),qn=dt(Cr);if(I=arguments,z=this,pe=Cr,qn){if(ne===t)return ct(pe);if(Ae)return HS(ne),ne=Rc(At,d),et(pe)}return ne===t&&(ne=Rc(At,d)),re}return dn.cancel=cn,dn.flush=Di,dn}var _W=Ct(function(u,d){return xS(u,1,d)}),EW=Ct(function(u,d,b){return xS(u,An(d)||0,b)});function CW(u){return Zo(u,U)}function fh(u,d){if(typeof u!="function"||d!=null&&typeof d!="function")throw new _n(n);var b=function(){var I=arguments,z=d?d.apply(this,I):I[0],j=b.cache;if(j.has(z))return j.get(z);var re=u.apply(this,I);return b.cache=j.set(z,re)||j,re};return b.cache=new(fh.Cache||Yo),b}fh.Cache=Yo;function mh(u){if(typeof u!="function")throw new _n(n);return function(){var d=arguments;switch(d.length){case 0:return!u.call(this);case 1:return!u.call(this,d[0]);case 2:return!u.call(this,d[0],d[1]);case 3:return!u.call(this,d[0],d[1],d[2])}return!u.apply(this,d)}}function PW(u){return A_(2,u)}var IW=hq(function(u,d){d=d.length==1&&yt(d[0])?Nt(d[0],Wt(at())):Nt(ni(d,1),Wt(at()));var b=d.length;return Ct(function(I){for(var z=-1,j=yi(I.length,b);++z<j;)I[z]=d[z].call(this,I[z]);return ki(u,this,I)})}),ay=Ct(function(u,d){var b=Zt(d,Ol(ay));return Zo(u,O,t,d,b)}),N_=Ct(function(u,d){var b=Zt(d,Ol(N_));return Zo(u,M,t,d,b)}),AW=Jo(function(u,d){return Zo(u,P,t,t,t,d)});function TW(u,d){if(typeof u!="function")throw new _n(n);return d=d===t?d:St(d),Ct(u,d)}function MW(u,d){if(typeof u!="function")throw new _n(n);return d=d==null?0:Lr(St(d),0),Ct(function(b){var I=b[d],z=Fs(b,0,d);return I&&Sn(z,I),ki(u,this,z)})}function RW(u,d,b){var I=!0,z=!0;if(typeof u!="function")throw new _n(n);return gr(b)&&(I="leading"in b?!!b.leading:I,z="trailing"in b?!!b.trailing:z),k_(u,d,{leading:I,maxWait:d,trailing:z})}function kW(u){return I_(u,1)}function NW(u,d){return ay($v(d),u)}function OW(){if(!arguments.length)return[];var u=arguments[0];return yt(u)?u:[u]}function DW(u){return Cn(u,c)}function LW(u,d){return d=typeof d=="function"?d:t,Cn(u,c,d)}function FW(u){return Cn(u,p|c)}function zW(u,d){return d=typeof d=="function"?d:t,Cn(u,p|c,d)}function BW(u,d){return d==null||wS(u,d,jr(d))}function Un(u,d){return u===d||u!==u&&d!==d}var UW=ah(Nv),qW=ah(function(u,d){return u>=d}),Oa=PS(function(){return arguments}())?PS:function(u){return wr(u)&&$t.call(u,"callee")&&!pS.call(u,"callee")},yt=ge.isArray,HW=Vo?Wt(Vo):XU;function ji(u){return u!=null&&gh(u.length)&&!es(u)}function Er(u){return wr(u)&&ji(u)}function WW(u){return u===!0||u===!1||wr(u)&&Ni(u)==be}var zs=iU||yy,VW=Np?Wt(Np):ZU;function $W(u){return wr(u)&&u.nodeType===1&&!kc(u)}function jW(u){if(u==null)return!0;if(ji(u)&&(yt(u)||typeof u=="string"||typeof u.splice=="function"||zs(u)||Dl(u)||Oa(u)))return!u.length;var d=bi(u);if(d==He||d==je)return!u.size;if(Mc(u))return!Lv(u).length;for(var b in u)if($t.call(u,b))return!1;return!0}function GW(u,d){return Ic(u,d)}function KW(u,d,b){b=typeof b=="function"?b:t;var I=b?b(u,d):t;return I===t?Ic(u,d,t,b):!!I}function ly(u){if(!wr(u))return!1;var d=Ni(u);return d==Pe||d==We||typeof u.message=="string"&&typeof u.name=="string"&&!kc(u)}function YW(u){return typeof u=="number"&&fS(u)}function es(u){if(!gr(u))return!1;var d=Ni(u);return d==Ve||d==Le||d==Re||d==vt}function O_(u){return typeof u=="number"&&u==St(u)}function gh(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=Z}function gr(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}function wr(u){return u!=null&&typeof u=="object"}var D_=xn?Wt(xn):QU;function XW(u,d){return u===d||Dv(u,d,Jv(d))}function ZW(u,d,b){return b=typeof b=="function"?b:t,Dv(u,d,Jv(d),b)}function JW(u){return L_(u)&&u!=+u}function QW(u){if(Lq(u))throw new gt(i);return IS(u)}function e6(u){return u===null}function t6(u){return u==null}function L_(u){return typeof u=="number"||wr(u)&&Ni(u)==it}function kc(u){if(!wr(u)||Ni(u)!=st)return!1;var d=Wp(u);if(d===null)return!0;var b=$t.call(d,"constructor")&&d.constructor;return typeof b=="function"&&b instanceof b&&Bp.call(b)==ZB}var uy=pi?Wt(pi):eq;function r6(u){return O_(u)&&u>=-Z&&u<=Z}var F_=Op?Wt(Op):tq;function vh(u){return typeof u=="string"||!yt(u)&&wr(u)&&Ni(u)==Lt}function un(u){return typeof u=="symbol"||wr(u)&&Ni(u)==Kt}var Dl=Dp?Wt(Dp):rq;function i6(u){return u===t}function n6(u){return wr(u)&&bi(u)==pt}function o6(u){return wr(u)&&Ni(u)==Ai}var s6=ah(Fv),a6=ah(function(u,d){return u<=d});function z_(u){if(!u)return[];if(ji(u))return vh(u)?vi(u):$i(u);if(bc&&u[bc])return It(u[bc]());var d=bi(u),b=d==He?Vt:d==je?Jt:Ll;return b(u)}function ts(u){if(!u)return u===0?u:0;if(u=An(u),u===oe||u===-oe){var d=u<0?-1:1;return d*K}return u===u?u:0}function St(u){var d=ts(u),b=d%1;return d===d?b?d-b:d:0}function B_(u){return u?Ma(St(u),0,te):0}function An(u){if(typeof u=="number")return u;if(un(u))return Q;if(gr(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=gr(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=on(u);var b=li.test(u);return b||ui.test(u)?xv(u.slice(2),b?2:8):bl.test(u)?Q:+u}function U_(u){return bo(u,Gi(u))}function l6(u){return u?Ma(St(u),-Z,Z):u===0?u:0}function Ut(u){return u==null?"":ln(u)}var u6=kl(function(u,d){if(Mc(d)||ji(d)){bo(d,jr(d),u);return}for(var b in d)$t.call(d,b)&&Ec(u,b,d[b])}),q_=kl(function(u,d){bo(d,Gi(d),u)}),yh=kl(function(u,d,b,I){bo(d,Gi(d),u,I)}),c6=kl(function(u,d,b,I){bo(d,jr(d),u,I)}),d6=Jo(Mv);function p6(u,d){var b=Rl(u);return d==null?b:bS(b,d)}var h6=Ct(function(u,d){u=rr(u);var b=-1,I=d.length,z=I>2?d[2]:t;for(z&&Oi(d[0],d[1],z)&&(I=1);++b<I;)for(var j=d[b],re=Gi(j),ne=-1,pe=re.length;++ne<pe;){var Ee=re[ne],Ce=u[Ee];(Ce===t||Un(Ce,Al[Ee])&&!$t.call(u,Ee))&&(u[Ee]=j[Ee])}return u}),f6=Ct(function(u){return u.push(t,n_),ki(H_,t,u)});function m6(u,d){return jo(u,at(d,3),yo)}function g6(u,d){return jo(u,at(d,3),kv)}function v6(u,d){return u==null?u:Rv(u,at(d,3),Gi)}function y6(u,d){return u==null?u:ES(u,at(d,3),Gi)}function b6(u,d){return u&&yo(u,at(d,3))}function w6(u,d){return u&&kv(u,at(d,3))}function x6(u){return u==null?[]:Qp(u,jr(u))}function S6(u){return u==null?[]:Qp(u,Gi(u))}function cy(u,d,b){var I=u==null?t:Ra(u,d);return I===t?b:I}function _6(u,d){return u!=null&&a_(u,d,jU)}function dy(u,d){return u!=null&&a_(u,d,GU)}var E6=QS(function(u,d,b){d!=null&&typeof d.toString!="function"&&(d=Up.call(d)),u[d]=b},hy(Ki)),C6=QS(function(u,d,b){d!=null&&typeof d.toString!="function"&&(d=Up.call(d)),$t.call(u,d)?u[d].push(b):u[d]=[b]},at),P6=Ct(Pc);function jr(u){return ji(u)?vS(u):Lv(u)}function Gi(u){return ji(u)?vS(u,!0):iq(u)}function I6(u,d){var b={};return d=at(d,3),yo(u,function(I,z,j){Xo(b,d(I,z,j),I)}),b}function A6(u,d){var b={};return d=at(d,3),yo(u,function(I,z,j){Xo(b,z,d(I,z,j))}),b}var T6=kl(function(u,d,b){eh(u,d,b)}),H_=kl(function(u,d,b,I){eh(u,d,b,I)}),M6=Jo(function(u,d){var b={};if(u==null)return b;var I=!1;d=Nt(d,function(j){return j=Ls(j,u),I||(I=j.length>1),j}),bo(u,Xv(u),b),I&&(b=Cn(b,p|f|c,Eq));for(var z=d.length;z--;)Hv(b,d[z]);return b});function R6(u,d){return W_(u,mh(at(d)))}var k6=Jo(function(u,d){return u==null?{}:oq(u,d)});function W_(u,d){if(u==null)return{};var b=Nt(Xv(u),function(I){return[I]});return d=at(d),OS(u,b,function(I,z){return d(I,z[0])})}function N6(u,d,b){d=Ls(d,u);var I=-1,z=d.length;for(z||(z=1,u=t);++I<z;){var j=u==null?t:u[wo(d[I])];j===t&&(I=z,j=b),u=es(j)?j.call(u):j}return u}function O6(u,d,b){return u==null?u:Ac(u,d,b)}function D6(u,d,b,I){return I=typeof I=="function"?I:t,u==null?u:Ac(u,d,b,I)}var V_=r_(jr),$_=r_(Gi);function L6(u,d,b){var I=yt(u),z=I||zs(u)||Dl(u);if(d=at(d,4),b==null){var j=u&&u.constructor;z?b=I?new j:[]:gr(u)?b=es(j)?Rl(Wp(u)):{}:b={}}return(z?ri:yo)(u,function(re,ne,pe){return d(b,re,ne,pe)}),b}function F6(u,d){return u==null?!0:Hv(u,d)}function z6(u,d,b){return u==null?u:BS(u,d,$v(b))}function B6(u,d,b,I){return I=typeof I=="function"?I:t,u==null?u:BS(u,d,$v(b),I)}function Ll(u){return u==null?[]:R(u,jr(u))}function U6(u){return u==null?[]:R(u,Gi(u))}function q6(u,d,b){return b===t&&(b=d,d=t),b!==t&&(b=An(b),b=b===b?b:0),d!==t&&(d=An(d),d=d===d?d:0),Ma(An(u),d,b)}function H6(u,d,b){return d=ts(d),b===t?(b=d,d=0):b=ts(b),u=An(u),KU(u,d,b)}function W6(u,d,b){if(b&&typeof b!="boolean"&&Oi(u,d,b)&&(d=b=t),b===t&&(typeof d=="boolean"?(b=d,d=t):typeof u=="boolean"&&(b=u,u=t)),u===t&&d===t?(u=0,d=1):(u=ts(u),d===t?(d=u,u=0):d=ts(d)),u>d){var I=u;u=d,d=I}if(b||u%1||d%1){var z=mS();return yi(u+z*(d-u+wv("1e-"+((z+"").length-1))),d)}return Bv(u,d)}var V6=Nl(function(u,d,b){return d=d.toLowerCase(),u+(b?j_(d):d)});function j_(u){return py(Ut(u).toLowerCase())}function G_(u){return u=Ut(u),u&&u.replace(Uo,Te).replace(Mp,"")}function $6(u,d,b){u=Ut(u),d=ln(d);var I=u.length;b=b===t?I:Ma(St(b),0,I);var z=b;return b-=d.length,b>=0&&u.slice(b,z)==d}function j6(u){return u=Ut(u),u&&lv.test(u)?u.replace(yl,De):u}function G6(u){return u=Ut(u),u&&Ep.test(u)?u.replace(rc,"\\$&"):u}var K6=Nl(function(u,d,b){return u+(b?"-":"")+d.toLowerCase()}),Y6=Nl(function(u,d,b){return u+(b?" ":"")+d.toLowerCase()}),X6=XS("toLowerCase");function Z6(u,d,b){u=Ut(u),d=St(d);var I=d?gi(u):0;if(!d||I>=d)return u;var z=(d-I)/2;return sh(Gp(z),b)+u+sh(jp(z),b)}function J6(u,d,b){u=Ut(u),d=St(d);var I=d?gi(u):0;return d&&I<d?u+sh(d-I,b):u}function Q6(u,d,b){u=Ut(u),d=St(d);var I=d?gi(u):0;return d&&I<d?sh(d-I,b)+u:u}function eV(u,d,b){return b||d==null?d=0:d&&(d=+d),aU(Ut(u).replace(ti,""),d||0)}function tV(u,d,b){return(b?Oi(u,d,b):d===t)?d=1:d=St(d),Uv(Ut(u),d)}function rV(){var u=arguments,d=Ut(u[0]);return u.length<3?d:d.replace(u[1],u[2])}var iV=Nl(function(u,d,b){return u+(b?"_":"")+d.toLowerCase()});function nV(u,d,b){return b&&typeof b!="number"&&Oi(u,d,b)&&(d=b=t),b=b===t?te:b>>>0,b?(u=Ut(u),u&&(typeof d=="string"||d!=null&&!uy(d))&&(d=ln(d),!d&&xt(u))?Fs(vi(u),0,b):u.split(d,b)):[]}var oV=Nl(function(u,d,b){return u+(b?" ":"")+py(d)});function sV(u,d,b){return u=Ut(u),b=b==null?0:Ma(St(b),0,u.length),d=ln(d),u.slice(b,b+d.length)==d}function aV(u,d,b){var I=W.templateSettings;b&&Oi(u,d,b)&&(d=t),u=Ut(u),d=yh({},d,I,i_);var z=yh({},d.imports,I.imports,i_),j=jr(z),re=R(z,j),ne,pe,Ee=0,Ce=d.interpolate||rn,Ae="__p += '",Be=Cv((d.escape||rn).source+"|"+Ce.source+"|"+(Ce===tc?nc:rn).source+"|"+(d.evaluate||rn).source+"|$","g"),et="//# sourceURL="+($t.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Rp+"]")+`
`;u.replace(Be,function(dt,At,Rt,cn,Di,dn){return Rt||(Rt=cn),Ae+=u.slice(Ee,dn).replace(qo,tt),At&&(ne=!0,Ae+=`' +
__e(`+At+`) +
'`),Di&&(pe=!0,Ae+=`';
`+Di+`;
__p += '`),Rt&&(Ae+=`' +
((__t = (`+Rt+`)) == null ? '' : __t) +
'`),Ee=dn+dt.length,dt}),Ae+=`';
`;var ct=$t.call(d,"variable")&&d.variable;if(!ct)Ae=`with (obj) {
`+Ae+`
}
`;else if(dv.test(ct))throw new gt(o);Ae=(pe?Ae.replace(Qu,""):Ae).replace(ai,"$1").replace(xp,"$1;"),Ae="function("+(ct||"obj")+`) {
`+(ct?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ne?", __e = _.escape":"")+(pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ae+`return __p
}`;var Et=Y_(function(){return Ft(j,et+"return "+Ae).apply(t,re)});if(Et.source=Ae,ly(Et))throw Et;return Et}function lV(u){return Ut(u).toLowerCase()}function uV(u){return Ut(u).toUpperCase()}function cV(u,d,b){if(u=Ut(u),u&&(b||d===t))return on(u);if(!u||!(d=ln(d)))return u;var I=vi(u),z=vi(d),j=X(I,z),re=G(I,z)+1;return Fs(I,j,re).join("")}function dV(u,d,b){if(u=Ut(u),u&&(b||d===t))return u.slice(0,an(u)+1);if(!u||!(d=ln(d)))return u;var I=vi(u),z=G(I,vi(d))+1;return Fs(I,0,z).join("")}function pV(u,d,b){if(u=Ut(u),u&&(b||d===t))return u.replace(ti,"");if(!u||!(d=ln(d)))return u;var I=vi(u),z=X(I,vi(d));return Fs(I,z).join("")}function hV(u,d){var b=N,I=F;if(gr(d)){var z="separator"in d?d.separator:z;b="length"in d?St(d.length):b,I="omission"in d?ln(d.omission):I}u=Ut(u);var j=u.length;if(xt(u)){var re=vi(u);j=re.length}if(b>=j)return u;var ne=b-gi(I);if(ne<1)return I;var pe=re?Fs(re,0,ne).join(""):u.slice(0,ne);if(z===t)return pe+I;if(re&&(ne+=pe.length-ne),uy(z)){if(u.slice(ne).search(z)){var Ee,Ce=pe;for(z.global||(z=Cv(z.source,Ut(oc.exec(z))+"g")),z.lastIndex=0;Ee=z.exec(Ce);)var Ae=Ee.index;pe=pe.slice(0,Ae===t?ne:Ae)}}else if(u.indexOf(ln(z),ne)!=ne){var Be=pe.lastIndexOf(z);Be>-1&&(pe=pe.slice(0,Be))}return pe+I}function fV(u){return u=Ut(u),u&&av.test(u)?u.replace(vl,vo):u}var mV=Nl(function(u,d,b){return u+(b?" ":"")+d.toUpperCase()}),py=XS("toUpperCase");function K_(u,d,b){return u=Ut(u),d=b?t:d,d===t?Ge(u)?Go(u):vc(u):u.match(d)||[]}var Y_=Ct(function(u,d){try{return ki(u,t,d)}catch(b){return ly(b)?b:new gt(b)}}),gV=Jo(function(u,d){return ri(d,function(b){b=wo(b),Xo(u,b,sy(u[b],u))}),u});function vV(u){var d=u==null?0:u.length,b=at();return u=d?Nt(u,function(I){if(typeof I[1]!="function")throw new _n(n);return[b(I[0]),I[1]]}):[],Ct(function(I){for(var z=-1;++z<d;){var j=u[z];if(ki(j[0],this,I))return ki(j[1],this,I)}})}function yV(u){return WU(Cn(u,p))}function hy(u){return function(){return u}}function bV(u,d){return u==null||u!==u?d:u}var wV=JS(),xV=JS(!0);function Ki(u){return u}function fy(u){return AS(typeof u=="function"?u:Cn(u,p))}function SV(u){return MS(Cn(u,p))}function _V(u,d){return RS(u,Cn(d,p))}var EV=Ct(function(u,d){return function(b){return Pc(b,u,d)}}),CV=Ct(function(u,d){return function(b){return Pc(u,b,d)}});function my(u,d,b){var I=jr(d),z=Qp(d,I);b==null&&!(gr(d)&&(z.length||!I.length))&&(b=d,d=u,u=this,z=Qp(d,jr(d)));var j=!(gr(b)&&"chain"in b)||!!b.chain,re=es(u);return ri(z,function(ne){var pe=d[ne];u[ne]=pe,re&&(u.prototype[ne]=function(){var Ee=this.__chain__;if(j||Ee){var Ce=u(this.__wrapped__),Ae=Ce.__actions__=$i(this.__actions__);return Ae.push({func:pe,args:arguments,thisArg:u}),Ce.__chain__=Ee,Ce}return pe.apply(u,Sn([this.value()],arguments))})}),u}function PV(){return or._===this&&(or._=JB),this}function gy(){}function IV(u){return u=St(u),Ct(function(d){return kS(d,u)})}var AV=Gv(Nt),TV=Gv(mc),MV=Gv($o);function X_(u){return ey(u)?Ca(wo(u)):sq(u)}function RV(u){return function(d){return u==null?t:Ra(u,d)}}var kV=e_(),NV=e_(!0);function vy(){return[]}function yy(){return!1}function OV(){return{}}function DV(){return""}function LV(){return!0}function FV(u,d){if(u=St(u),u<1||u>Z)return[];var b=te,I=yi(u,te);d=at(d),u-=te;for(var z=Rs(I,d);++b<u;)d(b);return z}function zV(u){return yt(u)?Nt(u,wo):un(u)?[u]:$i(g_(Ut(u)))}function BV(u){var d=++XB;return Ut(u)+d}var UV=oh(function(u,d){return u+d},0),qV=Kv("ceil"),HV=oh(function(u,d){return u/d},1),WV=Kv("floor");function VV(u){return u&&u.length?Jp(u,Ki,Nv):t}function $V(u,d){return u&&u.length?Jp(u,at(d,2),Nv):t}function jV(u){return Ms(u,Ki)}function GV(u,d){return Ms(u,at(d,2))}function KV(u){return u&&u.length?Jp(u,Ki,Fv):t}function YV(u,d){return u&&u.length?Jp(u,at(d,2),Fv):t}var XV=oh(function(u,d){return u*d},1),ZV=Kv("round"),JV=oh(function(u,d){return u-d},0);function QV(u){return u&&u.length?Il(u,Ki):0}function e4(u,d){return u&&u.length?Il(u,at(d,2)):0}return W.after=SW,W.ary=I_,W.assign=u6,W.assignIn=q_,W.assignInWith=yh,W.assignWith=c6,W.at=d6,W.before=A_,W.bind=sy,W.bindAll=gV,W.bindKey=T_,W.castArray=OW,W.chain=E_,W.chunk=Wq,W.compact=Vq,W.concat=$q,W.cond=vV,W.conforms=yV,W.constant=hy,W.countBy=QH,W.create=p6,W.curry=M_,W.curryRight=R_,W.debounce=k_,W.defaults=h6,W.defaultsDeep=f6,W.defer=_W,W.delay=EW,W.difference=jq,W.differenceBy=Gq,W.differenceWith=Kq,W.drop=Yq,W.dropRight=Xq,W.dropRightWhile=Zq,W.dropWhile=Jq,W.fill=Qq,W.filter=tW,W.flatMap=nW,W.flatMapDeep=oW,W.flatMapDepth=sW,W.flatten=w_,W.flattenDeep=eH,W.flattenDepth=tH,W.flip=CW,W.flow=wV,W.flowRight=xV,W.fromPairs=rH,W.functions=x6,W.functionsIn=S6,W.groupBy=aW,W.initial=nH,W.intersection=oH,W.intersectionBy=sH,W.intersectionWith=aH,W.invert=E6,W.invertBy=C6,W.invokeMap=uW,W.iteratee=fy,W.keyBy=cW,W.keys=jr,W.keysIn=Gi,W.map=ph,W.mapKeys=I6,W.mapValues=A6,W.matches=SV,W.matchesProperty=_V,W.memoize=fh,W.merge=T6,W.mergeWith=H_,W.method=EV,W.methodOf=CV,W.mixin=my,W.negate=mh,W.nthArg=IV,W.omit=M6,W.omitBy=R6,W.once=PW,W.orderBy=dW,W.over=AV,W.overArgs=IW,W.overEvery=TV,W.overSome=MV,W.partial=ay,W.partialRight=N_,W.partition=pW,W.pick=k6,W.pickBy=W_,W.property=X_,W.propertyOf=RV,W.pull=dH,W.pullAll=S_,W.pullAllBy=pH,W.pullAllWith=hH,W.pullAt=fH,W.range=kV,W.rangeRight=NV,W.rearg=AW,W.reject=mW,W.remove=mH,W.rest=TW,W.reverse=ny,W.sampleSize=vW,W.set=O6,W.setWith=D6,W.shuffle=yW,W.slice=gH,W.sortBy=xW,W.sortedUniq=_H,W.sortedUniqBy=EH,W.split=nV,W.spread=MW,W.tail=CH,W.take=PH,W.takeRight=IH,W.takeRightWhile=AH,W.takeWhile=TH,W.tap=VH,W.throttle=RW,W.thru=dh,W.toArray=z_,W.toPairs=V_,W.toPairsIn=$_,W.toPath=zV,W.toPlainObject=U_,W.transform=L6,W.unary=kW,W.union=MH,W.unionBy=RH,W.unionWith=kH,W.uniq=NH,W.uniqBy=OH,W.uniqWith=DH,W.unset=F6,W.unzip=oy,W.unzipWith=__,W.update=z6,W.updateWith=B6,W.values=Ll,W.valuesIn=U6,W.without=LH,W.words=K_,W.wrap=NW,W.xor=FH,W.xorBy=zH,W.xorWith=BH,W.zip=UH,W.zipObject=qH,W.zipObjectDeep=HH,W.zipWith=WH,W.entries=V_,W.entriesIn=$_,W.extend=q_,W.extendWith=yh,my(W,W),W.add=UV,W.attempt=Y_,W.camelCase=V6,W.capitalize=j_,W.ceil=qV,W.clamp=q6,W.clone=DW,W.cloneDeep=FW,W.cloneDeepWith=zW,W.cloneWith=LW,W.conformsTo=BW,W.deburr=G_,W.defaultTo=bV,W.divide=HV,W.endsWith=$6,W.eq=Un,W.escape=j6,W.escapeRegExp=G6,W.every=eW,W.find=rW,W.findIndex=y_,W.findKey=m6,W.findLast=iW,W.findLastIndex=b_,W.findLastKey=g6,W.floor=WV,W.forEach=C_,W.forEachRight=P_,W.forIn=v6,W.forInRight=y6,W.forOwn=b6,W.forOwnRight=w6,W.get=cy,W.gt=UW,W.gte=qW,W.has=_6,W.hasIn=dy,W.head=x_,W.identity=Ki,W.includes=lW,W.indexOf=iH,W.inRange=H6,W.invoke=P6,W.isArguments=Oa,W.isArray=yt,W.isArrayBuffer=HW,W.isArrayLike=ji,W.isArrayLikeObject=Er,W.isBoolean=WW,W.isBuffer=zs,W.isDate=VW,W.isElement=$W,W.isEmpty=jW,W.isEqual=GW,W.isEqualWith=KW,W.isError=ly,W.isFinite=YW,W.isFunction=es,W.isInteger=O_,W.isLength=gh,W.isMap=D_,W.isMatch=XW,W.isMatchWith=ZW,W.isNaN=JW,W.isNative=QW,W.isNil=t6,W.isNull=e6,W.isNumber=L_,W.isObject=gr,W.isObjectLike=wr,W.isPlainObject=kc,W.isRegExp=uy,W.isSafeInteger=r6,W.isSet=F_,W.isString=vh,W.isSymbol=un,W.isTypedArray=Dl,W.isUndefined=i6,W.isWeakMap=n6,W.isWeakSet=o6,W.join=lH,W.kebabCase=K6,W.last=In,W.lastIndexOf=uH,W.lowerCase=Y6,W.lowerFirst=X6,W.lt=s6,W.lte=a6,W.max=VV,W.maxBy=$V,W.mean=jV,W.meanBy=GV,W.min=KV,W.minBy=YV,W.stubArray=vy,W.stubFalse=yy,W.stubObject=OV,W.stubString=DV,W.stubTrue=LV,W.multiply=XV,W.nth=cH,W.noConflict=PV,W.noop=gy,W.now=hh,W.pad=Z6,W.padEnd=J6,W.padStart=Q6,W.parseInt=eV,W.random=W6,W.reduce=hW,W.reduceRight=fW,W.repeat=tV,W.replace=rV,W.result=N6,W.round=ZV,W.runInContext=ce,W.sample=gW,W.size=bW,W.snakeCase=iV,W.some=wW,W.sortedIndex=vH,W.sortedIndexBy=yH,W.sortedIndexOf=bH,W.sortedLastIndex=wH,W.sortedLastIndexBy=xH,W.sortedLastIndexOf=SH,W.startCase=oV,W.startsWith=sV,W.subtract=JV,W.sum=QV,W.sumBy=e4,W.template=aV,W.times=FV,W.toFinite=ts,W.toInteger=St,W.toLength=B_,W.toLower=lV,W.toNumber=An,W.toSafeInteger=l6,W.toString=Ut,W.toUpper=uV,W.trim=cV,W.trimEnd=dV,W.trimStart=pV,W.truncate=hV,W.unescape=fV,W.uniqueId=BV,W.upperCase=mV,W.upperFirst=py,W.each=C_,W.eachRight=P_,W.first=x_,my(W,function(){var u={};return yo(W,function(d,b){$t.call(W.prototype,b)||(u[b]=d)}),u}(),{chain:!1}),W.VERSION=e,ri(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){W[u].placeholder=W}),ri(["drop","take"],function(u,d){Tt.prototype[u]=function(b){b=b===t?1:Lr(St(b),0);var I=this.__filtered__&&!d?new Tt(this):this.clone();return I.__filtered__?I.__takeCount__=yi(b,I.__takeCount__):I.__views__.push({size:yi(b,te),type:u+(I.__dir__<0?"Right":"")}),I},Tt.prototype[u+"Right"]=function(b){return this.reverse()[u](b).reverse()}}),ri(["filter","map","takeWhile"],function(u,d){var b=d+1,I=b==J||b==ie;Tt.prototype[u]=function(z){var j=this.clone();return j.__iteratees__.push({iteratee:at(z,3),type:b}),j.__filtered__=j.__filtered__||I,j}}),ri(["head","last"],function(u,d){var b="take"+(d?"Right":"");Tt.prototype[u]=function(){return this[b](1).value()[0]}}),ri(["initial","tail"],function(u,d){var b="drop"+(d?"":"Right");Tt.prototype[u]=function(){return this.__filtered__?new Tt(this):this[b](1)}}),Tt.prototype.compact=function(){return this.filter(Ki)},Tt.prototype.find=function(u){return this.filter(u).head()},Tt.prototype.findLast=function(u){return this.reverse().find(u)},Tt.prototype.invokeMap=Ct(function(u,d){return typeof u=="function"?new Tt(this):this.map(function(b){return Pc(b,u,d)})}),Tt.prototype.reject=function(u){return this.filter(mh(at(u)))},Tt.prototype.slice=function(u,d){u=St(u);var b=this;return b.__filtered__&&(u>0||d<0)?new Tt(b):(u<0?b=b.takeRight(-u):u&&(b=b.drop(u)),d!==t&&(d=St(d),b=d<0?b.dropRight(-d):b.take(d-u)),b)},Tt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Tt.prototype.toArray=function(){return this.take(te)},yo(Tt.prototype,function(u,d){var b=/^(?:filter|find|map|reject)|While$/.test(d),I=/^(?:head|last)$/.test(d),z=W[I?"take"+(d=="last"?"Right":""):d],j=I||/^find/.test(d);z&&(W.prototype[d]=function(){var re=this.__wrapped__,ne=I?[1]:arguments,pe=re instanceof Tt,Ee=ne[0],Ce=pe||yt(re),Ae=function(At){var Rt=z.apply(W,Sn([At],ne));return I&&Be?Rt[0]:Rt};Ce&&b&&typeof Ee=="function"&&Ee.length!=1&&(pe=Ce=!1);var Be=this.__chain__,et=!!this.__actions__.length,ct=j&&!Be,Et=pe&&!et;if(!j&&Ce){re=Et?re:new Tt(this);var dt=u.apply(re,ne);return dt.__actions__.push({func:dh,args:[Ae],thisArg:t}),new En(dt,Be)}return ct&&Et?u.apply(this,ne):(dt=this.thru(Ae),ct?I?dt.value()[0]:dt.value():dt)})}),ri(["pop","push","shift","sort","splice","unshift"],function(u){var d=Fp[u],b=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",I=/^(?:pop|shift)$/.test(u);W.prototype[u]=function(){var z=arguments;if(I&&!this.__chain__){var j=this.value();return d.apply(yt(j)?j:[],z)}return this[b](function(re){return d.apply(yt(re)?re:[],z)})}}),yo(Tt.prototype,function(u,d){var b=W[d];if(b){var I=b.name+"";$t.call(Ml,I)||(Ml[I]=[]),Ml[I].push({name:d,func:b})}}),Ml[nh(t,x).name]=[{name:"wrapper",func:t}],Tt.prototype.clone=fU,Tt.prototype.reverse=mU,Tt.prototype.value=gU,W.prototype.at=$H,W.prototype.chain=jH,W.prototype.commit=GH,W.prototype.next=KH,W.prototype.plant=XH,W.prototype.reverse=ZH,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=JH,W.prototype.first=W.prototype.head,bc&&(W.prototype[bc]=YH),W},$r=Ev();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(or._=$r,define(function(){return $r})):Vi?((Vi.exports=$r)._=$r,_l._=$r):or._=$r}).call(Vl)});var Qe={};hr(Qe,{adjustedBoundingRect:()=>ud,closest:()=>Wa,collapseOptions:()=>ht,constrain:()=>B9,contentIsIndexable:()=>ef,convertDateToISO:()=>Y9,convertToEpoch:()=>j9,convertTransformIntoMatrixStyleString:()=>I9,decompose:()=>Zh,deviceType:()=>Sb,easeInCubic:()=>M9,easeInOutCirc:()=>O9,easeInOutCubic:()=>Cb,easeInOutSine:()=>Pb,easeInQuadratic:()=>k9,easeInSine:()=>T9,easeOutCubic:()=>Ib,easeOutExponential:()=>N9,easeOutQuadratic:()=>R9,easeOutSine:()=>A9,filterZoomLinks:()=>q9,formatDate:()=>$9,formatDate3LetterMonth:()=>K9,getCSSValueAndUnit:()=>ur,getCorrectRenderContextForGivenPID:()=>Tb,getFiletypeAndOembedFromURL:()=>D9,getHeight:()=>z9,getWidth:()=>F9,handleHomePageScrollLock:()=>V9,isAdminEdit:()=>zr,isAlphanumeric:()=>G9,isChrome:()=>Eb,isDateInFuture:()=>W9,isDevEnv:()=>g9,isEdge:()=>x9,isFirefox:()=>w9,isIE:()=>zP,isIE8:()=>S9,isIOS:()=>ld,isIOSWebView:()=>_9,isInDocumentOrShadowRoot:()=>Ab,isInstagram:()=>_b,isLocalEnv:()=>bb,isMac:()=>ad,isMobile:()=>y9,isMobileWindowSize:()=>C9,isProduction:()=>Qh,isProductionTestingAcct:()=>wb,isPromoCodeTransitionPeriod:()=>U9,isSafari:()=>Ui,isServer:()=>he,isServerRendered:()=>v9,isSitePreview:()=>Ha,mergeRefs:()=>L9,parseMatrixStyleString:()=>P9,sitePreviewHostname:()=>xb,stringReplaceMultiple:()=>E9,stripTLD:()=>H9,viewportOrientation:()=>b9});var Jh,bb,g9,Qh,wb,he,v9,DP,zr,LP,FP,Ha,xb,y9,b9,Sb,ad,w9,_b,Ui,Eb,zP,x9,S9,ld,_9,E9,ef,C9,P9,I9,Zh,ud,ur,Cb,A9,T9,Pb,Ib,M9,R9,k9,N9,O9,ht,D9,L9,F9,z9,Wa,Ab,B9,U9,q9,H9,W9,Tb,V9,$9,j9,G9,K9,Y9,Fe=$(()=>{Jh=ve(Ie()),bb=/^local.*/.test("production"),g9=/^dev.*/.test("production"),Qh=!0,wb=(t,e)=>{let r=[1,15139111,12,14494300,14502618,18,39,75,13933487,14497410,14065331,14229062,14313249];return e==="newsletter"&&(r=[13933487,39]),r.includes(t)||!1},he=!(typeof window<"u"&&window.document&&window.document.createElement),v9=!he&&window.hasOwnProperty("__PRELOADED_STATE__"),DP=!1;try{window.parent!==window&&window.location.host===window.parent.location.host&&window.parent.location.pathname.startsWith("/edit")&&(DP=!0)}catch{}zr=DP,LP=!1;try{if(typeof window<"u"&&window.location.pathname.match("site.preview")!==null){let t=window.location.pathname.match(/^\/site\.preview\/(?<hostname>[^\/]+)/i);t?.groups?.hostname&&(FP=t.groups?.hostname,LP=!0)}}catch{}Ha=LP,xb=FP,y9=function(){if(he)return!1;var t=!1,e=window.navigator.userAgent||window.navigator.vendor||window.opera;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0)}(e),t=t||!t&&/(android)/i.test(e.substr(0,40)),t}(),b9=()=>he?!1:window.matchMedia("(max-aspect-ratio: 1:1)")?"portrait":"landscape",Sb=()=>{if(he)return"mouse";let t=window.matchMedia("(hover:hover)"),e=window.matchMedia("(any-pointer:fine)");return t.matches&&e.matches?"mouse":"touch"},ad=()=>he?!1:navigator?.userAgent?.includes("Mac"),w9=()=>he?!1:/Firefox\/\d+\.\d+/.test(navigator.userAgent),_b=()=>he?!1:navigator.userAgent.indexOf("Instagram")!=-1,Ui=()=>he?!1:navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1,Eb=()=>he?!1:window.chrome!==null&&navigator.userAgent.indexOf("Chrome")!=-1&&navigator.vendor==="Google Inc."&&typeof window.opr>"u"&&navigator.userAgent.indexOf("Edg")==-1,zP=()=>he?!1:/MSIE (\d+\.\d+);/.test(navigator.userAgent),x9=()=>he?!1:/Edge/.test(navigator.userAgent),S9=()=>{if(he)return!1;var t=-1;if(zP()){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");e.exec(navigator.userAgent)!=null&&(t=parseFloat(RegExp.$1))}return t<9&&t>0},ld=()=>he?!1:!!navigator.userAgent.match(/i(Phone|Pod|Pad)/i),_9=()=>{if(he)return!1;var t=window.navigator.standalone,e=window.navigator.userAgent.toLowerCase(),r=/safari/.test(e),i=/iphone|ipod|ipad/.test(e);if(i){if(!t&&r)return!1;if(t&&!r)return!1;if(!t&&!r)return!0}return!1},E9=(t,e)=>{for(var r in e)t=t.replace(new RegExp(r,"g"),e[r]);return t},ef=t=>t?t.page_type==="set"?!0:!(t.display===!1||t.pin||t.overlay):!1,C9=t=>t<770,P9=t=>{let e=t.indexOf("matrix(")>-1,r=t.indexOf("matrix3d(")>-1,i,n;return e?(i=t.replace("matrix(","").replace(")").split(", ").map(o=>parseFloat(o)),n=Zh(i[0],i[1],i[2],i[3],i[4],i[5],!1)):r?(i=t.replace("matrix3d(","").replace(")").split(", ").map(o=>parseFloat(o)),n=Zh(i[0],i[1],i[4],i[5],i[12],i[13],!1),n.translate.z=i[14]):n=Zh(0,0,0,0,0,0,!1),n},I9=t=>{let e=t.hasOwnProperty("translate"),r=t.hasOwnProperty("scale"),i=r&&t.scale.x||1,n=r&&t.scale.y||1,o=e&&t.translate.x||0,s=e&&t.translate.y||0,a=e&&t.translate.z||0,l=t.rotation||0,p=e&&t.translate.hasOwnProperty("z"),f;if(p){let c=[Math.cos(l)/i,-Math.sin(l),0,o,Math.sin(l),Math.cos(l)/n,0,s,0,0,1,a,0,0,0,1];f=`matrix3d(${c[0]}, ${c[4]}, ${c[8]}, ${c[12]}, ${c[1]}, ${c[5]}, ${c[9]}, ${c[13]}, ${c[2]}, ${c[6]}, ${c[10]}, ${c[14]}, ${c[3]}, ${c[7]}, ${c[11]}, ${c[15]})`}else{let c=[Math.cos(l)/i,-Math.sin(l),o,Math.sin(l),Math.cos(l)/n,s,0,0,1];f=`matrix(${c[0]}, ${c[3]}, ${c[1]}, ${c[4]}, ${c[2]}, ${c[5]})`}return f},Zh=(t=0,e=0,r=0,i=0,n=0,o=0,s=!1)=>{var a=Math.acos,l=Math.atan,p=Math.sqrt,f=Math.PI,c={x:n,y:o},m=0,v={x:1,y:1},g={x:0,y:0},x=t*i-e*r;if(s)t?(g={x:l(r/t),y:l(e/t)},v={x:t,y:x/t}):e?(m=f*.5,v={x:e,y:x/e},g.x=l(i/e)):(v={x:r,y:i},g.x=f*.25);else if(t||e){var _=p(t*t+e*e);m=e>0?a(t/_):-a(t/_),v={x:_,y:x/_},g.x=l((t*r+e*i)/(_*_))}else if(r||i){var E=p(r*r+i*i);m=f*.5-(i>0?a(-r/E):-a(r/E)),v={x:x/E,y:E},g.y=l((t*r+e*i)/(E*E))}else v={x:0,y:0};return{scale:v,translate:c,rotation:m,skew:g}},ud=t=>{var e=t.getBoundingClientRect(),r=getComputedStyle(t),i=r.transform;if(i){var n,o,s,a;if(i.startsWith("matrix3d(")){var l=i.slice(9,-1).split(/, /);n=+l[0],o=+l[5],s=+l[12],a=+l[13]}else if(i.startsWith("matrix(")){var l=i.slice(7,-1).split(/, /);n=+l[0],o=+l[3],s=+l[4],a=+l[5]}else return e;var p=r.transformOrigin,f=e.x-s-(1-n)*parseFloat(p),c=e.y-a-(1-o)*parseFloat(p.slice(p.indexOf(" ")+1)),m=n?e.width/n:t.offsetWidth,v=o?e.height/o:t.offsetHeight;return{x:f,y:c,width:m,height:v,top:c,right:f+m,bottom:c+v,left:f}}else return e},ur=(t,e)=>{t=t?.toString()||"",t=t.replace(/^\.(\d+)/,"0.$1");let r=t.replace(/[^\d.-]/g,""),i=t.replace(r+"","").trim();return r=parseFloat(r),i===""&&e!==void 0?i=e:(i.indexOf("var(")>-1||i.indexOf("calc(")>-1)&&(r="",i=t),[r,i]},Cb=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,A9=t=>Math.sin(t*Math.PI/2),T9=t=>1-Math.cos(t*Math.PI/2),Pb=t=>t>=1?1:-(Math.cos(Math.PI*t)-1)/2,Ib=t=>1-Math.pow(-1*t+1,3),M9=t=>Math.pow(t,3),R9=t=>1-Math.pow(-1*t+1,4),k9=t=>Math.pow(t,4),N9=t=>t===1?1:1-Math.pow(2,-10*t),O9=t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,ht=t=>{let e={},r=i=>{i.forEach(n=>{if(n.type=="color"&&n.tabs?n.tabs.forEach(o=>{e[o.name]=o.value}):n.type=="checkbox-color"&&r([n.checkbox,n.color]),n.value!=null&&n.value!=null){e[n.name]={value:n.value},n.values&&(n.type==="radio"||n.type==="select")&&(e[n.name].values=n.values.map(s=>s.value)),e[n.name].type=n.type,n.excludeFromShuffle!==void 0&&(e[n.name].excludeFromShuffle=n.excludeFromShuffle);let o;n.defaultUnit!==void 0&&(o=e.unit=n.defaultUnit),n.min!==void 0&&(typeof n.min=="object"?e[n.name].min=n.min[o]??n.min.etc??0:e[n.name].min=n.min),n.max!==void 0&&(typeof n.max=="object"?e[n.name].max=n.max[o]??n.max.etc??0:e[n.name].max=n.max),typeof n.step=="object"?e[n.name].step=n.step[o]??n.step.etc??1:e[n.name].step=n.step,n.inheritsFrom&&(e[n.name].inheritsFrom=n.inheritsFrom),n.unit&&(e[n.name].unit=n.unit)}n.toggle&&r([n.toggle]),n.children&&r(n.children)})};return r(t),e},D9=(t,e={width:250})=>{let r=null,i=null,n=t.toLowerCase();if(n.endsWith(".mov")||n.endsWith(".mp4")||n.endsWith(".webm"))return{fileType:"video",oembedURL:null,id:null};if(n.endsWith(".png")||n.endsWith(".webp")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".gif")||n.endsWith(".avif")||n.endsWith(".apng")||n.endsWith(".svg"))return{fileType:"image",oembedURL:null,id:null};r="url";var o="",s="",a="",l=/(?:<iframe [^>]*src=")?(?:https?:\/\/(?:[\w]+\.)*vimeo\.com(?:[\/\w:]*(?:\/videos)?)?\/([0-9]+)[^\s]*)"?(?:[^>]*><\/iframe>)?(?:<p>.*<\/p>)?/,c=t.match(l);if(c&&c[0]){let m=c[0].split(/\/|\?h=|&|\?/);for(var p=0;p<m.length;p++)!m[p].includes(":")&&!m[p].includes(".")&&!m[p].includes("vimeo")&&!m[p].includes("=")&&!m[p].includes("video")&&!m[p].includes("showcase")&&!m[p].includes("player")&&m[p].length>3&&(o.length==0?o=m[p]:o+="/"+m[p]);r="vimeo",i="https://vimeo.com/api/oembed.json?url=https://vimeo.com/"+o+"&width="+e.width}var f=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(shorts\/)|(watch\?))\??v?=?([^#\&\?]*).*/,c=t.match(f);return c&&(c[7]&&c[7].length==11?(o=c[7],i="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v="+o):c[8]&&c[8].length==11?(o=c[8],i="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url=https://www.youtube.com/shorts/"+o):i="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+(t.indexOf("?")>-1?t.split("?")[0]:t),r="youtube"),{fileType:r,oembedURL:i,id:o}},L9=(...t)=>{let e=t.filter(Boolean);return e.length?e.length===0?e[0]:r=>{for(let i of e)typeof i=="function"?i(r):i&&(i.current=r)}:null},F9=t=>{var e=getComputedStyle(t,null);return e.getPropertyValue("box-sizing")==="border-box"?parseFloat(e.width)-((parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0)+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0)):parseFloat(e.width)},z9=t=>{var e=getComputedStyle(t,null);return e.getPropertyValue("box-sizing")==="border-box"?parseFloat(e.height)-((parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0)+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)):parseFloat(e.height)},Wa=(t,e)=>{var r=t&&(e(t)?t:Wa(t.parentNode,e));return r||null},Ab=t=>{for(var e=t;e&&e.parentNode;){if(e.parentNode===document)return!0;e.parentNode instanceof DocumentFragment?e=e.parentNode.host:e=e.parentNode}return!1},B9=(t,e,r)=>t>r?r:t<e?e:t,U9=t=>{let e=new Date,r=new Date(t);if(isNaN(r.getTime()))return!1;let i=r.getTime()-e.getTime();return Math.floor(i/(1e3*60*60*24))<=15},q9=t=>(t=Jh.default.filter(t,e=>{var r=e.getAttribute("href");return!(r&&(r===""||r=="#"||r.indexOf("mailto:")==0||r.indexOf("tel:")==0))}),t),H9=t=>{if(!t)return[null,null];let e=/(\.[^.]+)$/,r=t.match(e);if(r){let i=r[1],n=t.slice(0,-i.length);return[i,n]}else return[null,t]},W9=t=>{if(!t)return!0;let e=new Date(t),r=Math.floor(e.getTime()/1e3),n=Math.floor(Date.now()/1e3)-15*24*60*60;return r>=n},Tb=(t,e,r)=>{let i=t.pages.byId[r],n=e.getHomepageId(t),o=e.getHiddenHomepageId(t),s=t.sets.byId[Jh.default.findKey(t.structure.byParent,p=>p.includes(n))],a=t.sets.byId[Jh.default.findKey(t.structure.byParent,p=>p.includes(r))],l=r;if(t.sets.byId.root?.stack===!0)i?.display===!1?l=i.id:l=a?.id||"root";else if(i){if(i.pin||i.overlay||a?.stack)if(l=a?.id,(i.pin||i.overlay)&&a?.stack===!1){if(a?.id===s?.id&&(l="root"),a.page_count>=1){let p=t.structure.byParent[a.id]?.filter(f=>t.structure.indexById[f]!==null&&t.sets.byId[f]===void 0&&t.pages.byId[f]?.password_enabled!==!0&&f!==o).sort((f,c)=>t.structure.bySort[f]-t.structure.bySort[c]);p.length>0&&(p.includes(n)?l=n:l=p[0])}}else i?.display===!1&&a?.stack===!0&&(l=i.id);else l=i.id;l==="root"&&n&&(l=n)}return l},V9=(t=!0,e=!1)=>{if(he)return;document.querySelectorAll("html, body, #templates, #siteslist").forEach(i=>{if(i.scrollHeight>i.clientHeight)if(t){if(e&&(i.dataset.scrollPos=i.scrollTop),i.style.overflow==="hidden")return;!i.dataset.originalOverflow&&i.style.overflow!==""&&(i.dataset.originalOverflow=i.style.overflow),i.style.overflow="hidden"}else{if(i.dataset.originalOverflow!==void 0)i.style.overflow=i.dataset.originalOverflow,delete i.dataset.originalOverflow;else{if(i.style.overflow!=="hidden")return;i.style.removeProperty("overflow")}e||delete i.dataset.scrollPos,i.dataset.scrollPos!==void 0&&requestAnimationFrame(()=>{i.scrollTop=i.dataset.scrollPos})}else i.style.overflow=="hidden"&&!t&&(i.style.overflow=null)})},$9=(t,e=!0)=>{let r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(!t)return;let i=new Date(t),n=i.getDate(),o=parseInt(i.getMonth()),s=r[o],a=i.getFullYear(),l=i.getHours()%12===0?12:i.getHours()%12,p=i.getMinutes().toString().match(/\d/g).length===1?"0"+i.getMinutes():i.getMinutes(),f="0"+i.getSeconds(),c=i.getHours()>=12?"pm":"am",m=new Date().setHours(0,0,0,0),v=m-864e5,g=null;return t>=m&&(g="today"),t<=m&&t>=v&&(g="yesterday"),e?g!==null?g+", "+l+":"+p+c:s+" "+n+" "+a+", "+l+":"+p+c:(a=a.toString().slice(2),s+" "+n+" \u2018"+a)},j9=t=>{if(!isNaN(Number(t))&&Number(t)>1e9)return Math.floor(Number(t));typeof t=="string"&&t.includes(".")&&(t=t.split(".")[0]+"Z");let e=new Date(t);return isNaN(e.getTime())?(console.warn("Invalid timestamp format"),0):Math.floor(e.getTime()/1e3)},G9=t=>/^(?=.*[a-z0-9])[a-z0-9\s]+$/i.test(t),K9=t=>{if(t==null)return null;let e=new Date(t);return isNaN(e.getTime())?(console.error("Invalid date format:",t),t):`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getDate()} ${e.getFullYear()}`},Y9=t=>{let e={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},[r,i,n]=t.split(" ");if(!e[r])throw new Error(`Invalid month abbreviation: "${r}"`);let o=i.padStart(2,"0"),s=parseInt(n,10);return`${n.length===2?2e3+s:s}-${e[r]}-${o}`}});var Mb=se((vpe,BP)=>{"use strict";BP.exports=function(e,r){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(r,n)}}});var Yr=se((ype,HP)=>{"use strict";var X9=Mb(),kb=Object.prototype.toString,Nb=function(t){return function(e){var r=kb.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Va(t){return t=t.toLowerCase(),function(r){return Nb(r)===t}}function Ob(t){return Array.isArray(t)}function rf(t){return typeof t>"u"}function Z9(t){return t!==null&&!rf(t)&&t.constructor!==null&&!rf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var UP=Va("ArrayBuffer");function J9(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&UP(t.buffer),e}function Q9(t){return typeof t=="string"}function e8(t){return typeof t=="number"}function qP(t){return t!==null&&typeof t=="object"}function tf(t){if(Nb(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var t8=Va("Date"),r8=Va("File"),i8=Va("Blob"),n8=Va("FileList");function Db(t){return kb.call(t)==="[object Function]"}function o8(t){return qP(t)&&Db(t.pipe)}function s8(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||kb.call(t)===e||Db(t.toString)&&t.toString()===e)}var a8=Va("URLSearchParams");function l8(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function u8(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Lb(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ob(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function Rb(){var t={};function e(n,o){tf(t[o])&&tf(n)?t[o]=Rb(t[o],n):tf(n)?t[o]=Rb({},n):Ob(n)?t[o]=n.slice():t[o]=n}for(var r=0,i=arguments.length;r<i;r++)Lb(arguments[r],e);return t}function c8(t,e,r){return Lb(e,function(n,o){r&&typeof n=="function"?t[o]=X9(n,r):t[o]=n}),t}function d8(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function p8(t,e,r,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function h8(t,e,r){var i,n,o,s={};e=e||{};do{for(i=Object.getOwnPropertyNames(t),n=i.length;n-- >0;)o=i[n],s[o]||(e[o]=t[o],s[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function f8(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var i=t.indexOf(e,r);return i!==-1&&i===r}function m8(t){if(!t)return null;var e=t.length;if(rf(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var g8=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));HP.exports={isArray:Ob,isArrayBuffer:UP,isBuffer:Z9,isFormData:s8,isArrayBufferView:J9,isString:Q9,isNumber:e8,isObject:qP,isPlainObject:tf,isUndefined:rf,isDate:t8,isFile:r8,isBlob:i8,isFunction:Db,isStream:o8,isURLSearchParams:a8,isStandardBrowserEnv:u8,forEach:Lb,merge:Rb,extend:c8,trim:l8,stripBOM:d8,inherits:p8,toFlatObject:h8,kindOf:Nb,kindOfTest:Va,endsWith:f8,toArray:m8,isTypedArray:g8,isFileList:n8}});var Fb=se((bpe,VP)=>{"use strict";var $l=Yr();function WP(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}VP.exports=function(e,r,i){if(!r)return e;var n;if(i)n=i(r);else if($l.isURLSearchParams(r))n=r.toString();else{var o=[];$l.forEach(r,function(l,p){l===null||typeof l>"u"||($l.isArray(l)?p=p+"[]":l=[l],$l.forEach(l,function(c){$l.isDate(c)?c=c.toISOString():$l.isObject(c)&&(c=JSON.stringify(c)),o.push(WP(p)+"="+WP(c))}))}),n=o.join("&")}if(n){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}});var jP=se((wpe,$P)=>{"use strict";var v8=Yr();function nf(){this.handlers=[]}nf.prototype.use=function(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};nf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};nf.prototype.forEach=function(e){v8.forEach(this.handlers,function(i){i!==null&&e(i)})};$P.exports=nf});var KP=se((xpe,GP)=>{"use strict";var y8=Yr();GP.exports=function(e,r){y8.forEach(e,function(n,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=n,delete e[o])})}});var $a=se((Spe,JP)=>{"use strict";var YP=Yr();function jl(t,e,r,i,n){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}YP.inherits(jl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var XP=jl.prototype,ZP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){ZP[t]={value:t}});Object.defineProperties(jl,ZP);Object.defineProperty(XP,"isAxiosError",{value:!0});jl.from=function(t,e,r,i,n,o){var s=Object.create(XP);return YP.toFlatObject(t,s,function(l){return l!==Error.prototype}),jl.call(s,t.message,e,r,i,n),s.name=t.name,o&&Object.assign(s,o),s};JP.exports=jl});var zb=se((_pe,QP)=>{"use strict";QP.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var Bb=se((Epe,eI)=>{"use strict";var jn=Yr();function b8(t,e){e=e||new FormData;var r=[];function i(o){return o===null?"":jn.isDate(o)?o.toISOString():jn.isArrayBuffer(o)||jn.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function n(o,s){if(jn.isPlainObject(o)||jn.isArray(o)){if(r.indexOf(o)!==-1)throw Error("Circular reference detected in "+s);r.push(o),jn.forEach(o,function(l,p){if(!jn.isUndefined(l)){var f=s?s+"."+p:p,c;if(l&&!s&&typeof l=="object"){if(jn.endsWith(p,"{}"))l=JSON.stringify(l);else if(jn.endsWith(p,"[]")&&(c=jn.toArray(l))){c.forEach(function(m){!jn.isUndefined(m)&&e.append(f,i(m))});return}}n(l,f)}}),r.pop()}else e.append(s,i(o))}return n(t),e}eI.exports=b8});var rI=se((Cpe,tI)=>{"use strict";var Ub=$a();tI.exports=function(e,r,i){var n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):r(new Ub("Request failed with status code "+i.status,[Ub.ERR_BAD_REQUEST,Ub.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}});var nI=se((Ppe,iI)=>{"use strict";var of=Yr();iI.exports=of.isStandardBrowserEnv()?function(){return{write:function(r,i,n,o,s,a){var l=[];l.push(r+"="+encodeURIComponent(i)),of.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),of.isString(o)&&l.push("path="+o),of.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var sI=se((Ipe,oI)=>{"use strict";oI.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var lI=se((Ape,aI)=>{"use strict";aI.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var qb=se((Tpe,uI)=>{"use strict";var w8=sI(),x8=lI();uI.exports=function(e,r){return e&&!w8(r)?x8(e,r):r}});var dI=se((Mpe,cI)=>{"use strict";var Hb=Yr(),S8=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];cI.exports=function(e){var r={},i,n,o;return e&&Hb.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),i=Hb.trim(a.substr(0,o)).toLowerCase(),n=Hb.trim(a.substr(o+1)),i){if(r[i]&&S8.indexOf(i)>=0)return;i==="set-cookie"?r[i]=(r[i]?r[i]:[]).concat([n]):r[i]=r[i]?r[i]+", "+n:n}}),r}});var fI=se((Rpe,hI)=>{"use strict";var pI=Yr();hI.exports=pI.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function n(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(s){var a=pI.isString(s)?n(s):s;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}()});var cd=se((kpe,gI)=>{"use strict";var Wb=$a(),_8=Yr();function mI(t){Wb.call(this,t??"canceled",Wb.ERR_CANCELED),this.name="CanceledError"}_8.inherits(mI,Wb,{__CANCEL__:!0});gI.exports=mI});var yI=se((Npe,vI)=>{"use strict";vI.exports=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}});var Vb=se((Ope,bI)=>{"use strict";var dd=Yr(),E8=rI(),C8=nI(),P8=Fb(),I8=qb(),A8=dI(),T8=fI(),M8=zb(),os=$a(),R8=cd(),k8=yI();bI.exports=function(e){return new Promise(function(i,n){var o=e.data,s=e.headers,a=e.responseType,l;function p(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}dd.isFormData(o)&&dd.isStandardBrowserEnv()&&delete s["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(c+":"+m)}var v=I8(e.baseURL,e.url);f.open(e.method.toUpperCase(),P8(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout;function g(){if(f){var E="getAllResponseHeaders"in f?A8(f.getAllResponseHeaders()):null,L=!a||a==="text"||a==="json"?f.responseText:f.response,O={data:L,status:f.status,statusText:f.statusText,headers:E,config:e,request:f};E8(function(D){i(D),p()},function(D){n(D),p()},O),f=null}}if("onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(g)},f.onabort=function(){f&&(n(new os("Request aborted",os.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new os("Network Error",os.ERR_NETWORK,e,f,f)),f=null},f.ontimeout=function(){var L=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",O=e.transitional||M8;e.timeoutErrorMessage&&(L=e.timeoutErrorMessage),n(new os(L,O.clarifyTimeoutError?os.ETIMEDOUT:os.ECONNABORTED,e,f)),f=null},dd.isStandardBrowserEnv()){var x=(e.withCredentials||T8(v))&&e.xsrfCookieName?C8.read(e.xsrfCookieName):void 0;x&&(s[e.xsrfHeaderName]=x)}"setRequestHeader"in f&&dd.forEach(s,function(L,O){typeof o>"u"&&O.toLowerCase()==="content-type"?delete s[O]:f.setRequestHeader(O,L)}),dd.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),a&&a!=="json"&&(f.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&f.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(E){f&&(n(!E||E&&E.type?new R8:E),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),o||(o=null);var _=k8(v);if(_&&["http","https","file"].indexOf(_)===-1){n(new os("Unsupported protocol "+_+":",os.ERR_BAD_REQUEST,e));return}f.send(o)})}});var xI=se((Dpe,wI)=>{wI.exports=null});var af=se((Lpe,CI)=>{"use strict";var Xr=Yr(),SI=KP(),_I=$a(),N8=zb(),O8=Bb(),D8={"Content-Type":"application/x-www-form-urlencoded"};function EI(t,e){!Xr.isUndefined(t)&&Xr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function L8(){var t;return typeof XMLHttpRequest<"u"?t=Vb():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=Vb()),t}function F8(t,e,r){if(Xr.isString(t))try{return(e||JSON.parse)(t),Xr.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}var sf={transitional:N8,adapter:L8(),transformRequest:[function(e,r){if(SI(r,"Accept"),SI(r,"Content-Type"),Xr.isFormData(e)||Xr.isArrayBuffer(e)||Xr.isBuffer(e)||Xr.isStream(e)||Xr.isFile(e)||Xr.isBlob(e))return e;if(Xr.isArrayBufferView(e))return e.buffer;if(Xr.isURLSearchParams(e))return EI(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i=Xr.isObject(e),n=r&&r["Content-Type"],o;if((o=Xr.isFileList(e))||i&&n==="multipart/form-data"){var s=this.env&&this.env.FormData;return O8(o?{"files[]":e}:e,s&&new s)}else if(i||n==="application/json")return EI(r,"application/json"),F8(e);return e}],transformResponse:[function(e){var r=this.transitional||sf.transitional,i=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,o=!i&&this.responseType==="json";if(o||n&&Xr.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?_I.from(s,_I.ERR_BAD_RESPONSE,this,null,this.response):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xI()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Xr.forEach(["delete","get","head"],function(e){sf.headers[e]={}});Xr.forEach(["post","put","patch"],function(e){sf.headers[e]=Xr.merge(D8)});CI.exports=sf});var II=se((Fpe,PI)=>{"use strict";var z8=Yr(),B8=af();PI.exports=function(e,r,i){var n=this||B8;return z8.forEach(i,function(s){e=s.call(n,e,r)}),e}});var $b=se((zpe,AI)=>{"use strict";AI.exports=function(e){return!!(e&&e.__CANCEL__)}});var RI=se((Bpe,MI)=>{"use strict";var TI=Yr(),jb=II(),U8=$b(),q8=af(),H8=cd();function Gb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new H8}MI.exports=function(e){Gb(e),e.headers=e.headers||{},e.data=jb.call(e,e.data,e.headers,e.transformRequest),e.headers=TI.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),TI.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var r=e.adapter||q8.adapter;return r(e).then(function(n){return Gb(e),n.data=jb.call(e,n.data,n.headers,e.transformResponse),n},function(n){return U8(n)||(Gb(e),n&&n.response&&(n.response.data=jb.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})}});var Kb=se((Upe,kI)=>{"use strict";var hn=Yr();kI.exports=function(e,r){r=r||{};var i={};function n(f,c){return hn.isPlainObject(f)&&hn.isPlainObject(c)?hn.merge(f,c):hn.isPlainObject(c)?hn.merge({},c):hn.isArray(c)?c.slice():c}function o(f){if(hn.isUndefined(r[f])){if(!hn.isUndefined(e[f]))return n(void 0,e[f])}else return n(e[f],r[f])}function s(f){if(!hn.isUndefined(r[f]))return n(void 0,r[f])}function a(f){if(hn.isUndefined(r[f])){if(!hn.isUndefined(e[f]))return n(void 0,e[f])}else return n(void 0,r[f])}function l(f){if(f in r)return n(e[f],r[f]);if(f in e)return n(void 0,e[f])}var p={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return hn.forEach(Object.keys(e).concat(Object.keys(r)),function(c){var m=p[c]||o,v=m(c);hn.isUndefined(v)&&m!==l||(i[c]=v)}),i}});var Yb=se((qpe,NI)=>{NI.exports={version:"0.27.2"}});var LI=se((Hpe,DI)=>{"use strict";var W8=Yb().version,js=$a(),Xb={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Xb[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var OI={};Xb.transitional=function(e,r,i){function n(o,s){return"[Axios v"+W8+"] Transitional option '"+o+"'"+s+(i?". "+i:"")}return function(o,s,a){if(e===!1)throw new js(n(s," has been removed"+(r?" in "+r:"")),js.ERR_DEPRECATED);return r&&!OI[s]&&(OI[s]=!0,console.warn(n(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function V8(t,e,r){if(typeof t!="object")throw new js("options must be an object",js.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),n=i.length;n-- >0;){var o=i[n],s=e[o];if(s){var a=t[o],l=a===void 0||s(a,o,t);if(l!==!0)throw new js("option "+o+" must be "+l,js.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new js("Unknown option "+o,js.ERR_BAD_OPTION)}}DI.exports={assertOptions:V8,validators:Xb}});var HI=se((Wpe,qI)=>{"use strict";var BI=Yr(),$8=Fb(),FI=jP(),zI=RI(),lf=Kb(),j8=qb(),UI=LI(),Gl=UI.validators;function Kl(t){this.defaults=t,this.interceptors={request:new FI,response:new FI}}Kl.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=lf(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&UI.assertOptions(i,{silentJSONParsing:Gl.transitional(Gl.boolean),forcedJSONParsing:Gl.transitional(Gl.boolean),clarifyTimeoutError:Gl.transitional(Gl.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(o=o&&v.synchronous,n.unshift(v.fulfilled,v.rejected))});var s=[];this.interceptors.response.forEach(function(v){s.push(v.fulfilled,v.rejected)});var a;if(!o){var l=[zI,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(s),a=Promise.resolve(r);l.length;)a=a.then(l.shift(),l.shift());return a}for(var p=r;n.length;){var f=n.shift(),c=n.shift();try{p=f(p)}catch(m){c(m);break}}try{a=zI(p)}catch(m){return Promise.reject(m)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};Kl.prototype.getUri=function(e){e=lf(this.defaults,e);var r=j8(e.baseURL,e.url);return $8(r,e.params,e.paramsSerializer)};BI.forEach(["delete","get","head","options"],function(e){Kl.prototype[e]=function(r,i){return this.request(lf(i||{},{method:e,url:r,data:(i||{}).data}))}});BI.forEach(["post","put","patch"],function(e){function r(i){return function(o,s,a){return this.request(lf(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Kl.prototype[e]=r(),Kl.prototype[e+"Form"]=r(!0)});qI.exports=Kl});var VI=se((Vpe,WI)=>{"use strict";var G8=cd();function Yl(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var r=this;this.promise.then(function(i){if(r._listeners){var n,o=r._listeners.length;for(n=0;n<o;n++)r._listeners[n](i);r._listeners=null}}),this.promise.then=function(i){var n,o=new Promise(function(s){r.subscribe(s),n=s}).then(i);return o.cancel=function(){r.unsubscribe(n)},o},t(function(n){r.reason||(r.reason=new G8(n),e(r.reason))})}Yl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Yl.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Yl.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Yl.source=function(){var e,r=new Yl(function(n){e=n});return{token:r,cancel:e}};WI.exports=Yl});var jI=se(($pe,$I)=>{"use strict";$I.exports=function(e){return function(i){return e.apply(null,i)}}});var KI=se((jpe,GI)=>{"use strict";var K8=Yr();GI.exports=function(e){return K8.isObject(e)&&e.isAxiosError===!0}});var ZI=se((Gpe,Zb)=>{"use strict";var YI=Yr(),Y8=Mb(),uf=HI(),X8=Kb(),Z8=af();function XI(t){var e=new uf(t),r=Y8(uf.prototype.request,e);return YI.extend(r,uf.prototype,e),YI.extend(r,e),r.create=function(n){return XI(X8(t,n))},r}var Xi=XI(Z8);Xi.Axios=uf;Xi.CanceledError=cd();Xi.CancelToken=VI();Xi.isCancel=$b();Xi.VERSION=Yb().version;Xi.toFormData=Bb();Xi.AxiosError=$a();Xi.Cancel=Xi.CanceledError;Xi.all=function(e){return Promise.all(e)};Xi.spread=jI();Xi.isAxiosError=KI();Zb.exports=Xi;Zb.exports.default=Xi});var kn=se((Kpe,JI)=>{JI.exports=ZI()});function Gs(t){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gs(t)}var Jb=$(()=>{});function Qb(t,e){if(Gs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(Gs(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QI=$(()=>{Jb()});function e0(t){var e=Qb(t,"string");return Gs(e)=="symbol"?e:String(e)}var eA=$(()=>{Jb();QI()});function t0(t,e,r){return e=e0(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var tA=$(()=>{eA()});function rA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function cf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rA(Object(r),!0).forEach(function(i){t0(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rA(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var iA=$(()=>{tA()});var sA={};hr(sA,{__DO_NOT_USE__ActionTypes:()=>pd,applyMiddleware:()=>i0,bindActionCreators:()=>Bt,combineReducers:()=>Gn,compose:()=>df,createStore:()=>hd,legacy_createStore:()=>Q8});function oi(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}function J8(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function hd(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(oi(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(oi(1));return r(hd)(t,e)}if(typeof t!="function")throw new Error(oi(2));var n=t,o=e,s=[],a=s,l=!1;function p(){a===s&&(a=s.slice())}function f(){if(l)throw new Error(oi(3));return o}function c(x){if(typeof x!="function")throw new Error(oi(4));if(l)throw new Error(oi(5));var _=!0;return p(),a.push(x),function(){if(_){if(l)throw new Error(oi(6));_=!1,p();var L=a.indexOf(x);a.splice(L,1),s=null}}}function m(x){if(!J8(x))throw new Error(oi(7));if(typeof x.type>"u")throw new Error(oi(8));if(l)throw new Error(oi(9));try{l=!0,o=n(o,x)}finally{l=!1}for(var _=s=a,E=0;E<_.length;E++){var L=_[E];L()}return x}function v(x){if(typeof x!="function")throw new Error(oi(10));n=x,m({type:pd.REPLACE})}function g(){var x,_=c;return x={subscribe:function(L){if(typeof L!="object"||L===null)throw new Error(oi(11));function O(){L.next&&L.next(f())}O();var M=_(O);return{unsubscribe:M}}},x[nA]=function(){return this},x}return m({type:pd.INIT}),i={dispatch:m,subscribe:c,getState:f,replaceReducer:v},i[nA]=g,i}function ej(t){Object.keys(t).forEach(function(e){var r=t[e],i=r(void 0,{type:pd.INIT});if(typeof i>"u")throw new Error(oi(12));if(typeof r(void 0,{type:pd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(oi(13))})}function Gn(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++){var n=e[i];typeof t[n]=="function"&&(r[n]=t[n])}var o=Object.keys(r),s,a;try{ej(r)}catch(l){a=l}return function(p,f){if(p===void 0&&(p={}),a)throw a;if(0)var c;for(var m=!1,v={},g=0;g<o.length;g++){var x=o[g],_=r[x],E=p[x],L=_(E,f);if(typeof L>"u"){var O=f&&f.type;throw new Error(oi(14))}v[x]=L,m=m||L!==E}return m=m||o.length!==Object.keys(p).length,m?v:p}}function oA(t,e){return function(){return e(t.apply(this,arguments))}}function Bt(t,e){if(typeof t=="function")return oA(t,e);if(typeof t!="object"||t===null)throw new Error(oi(16));var r={};for(var i in t){var n=t[i];typeof n=="function"&&(r[i]=oA(n,e))}return r}function df(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,n){return function(){return i(n.apply(void 0,arguments))}})}function i0(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var n=i.apply(void 0,arguments),o=function(){throw new Error(oi(15))},s={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=e.map(function(l){return l(s)});return o=df.apply(void 0,a)(n.dispatch),cf(cf({},n),{},{dispatch:o})}}}var nA,r0,pd,Q8,xr=$(()=>{iA();nA=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),r0=function(){return Math.random().toString(36).substring(7).split("").join(".")},pd={INIT:"@@redux/INIT"+r0(),REPLACE:"@@redux/REPLACE"+r0(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+r0()}};Q8=hd});var n0=se(Kn=>{"use strict";Kn.__esModule=!0;Kn.createDynamicMiddlewares=Kn.resetMiddlewares=Kn.removeMiddleware=Kn.addMiddleware=void 0;var tj=(xr(),Nc(sA)),aA=function(){var e=[],r=[],i=void 0,n=function(p){return i=p,function(f){return function(c){return tj.compose.apply(void 0,r)(f)(c)}}},o=function(){for(var p,f,c=arguments.length,m=Array(c),v=0;v<c;v++)m[v]=arguments[v];(p=r).push.apply(p,m.map(function(g){return g(i)})),(f=e).push.apply(f,m)},s=function(p){var f=e.findIndex(function(c){return c===p});if(f===-1){console.error("Middleware does not exist!",p);return}e=e.filter(function(c,m){return m!==f}),r=r.filter(function(c,m){return m!==f})},a=function(){r=[],e=[]};return{enhancer:n,addMiddleware:o,removeMiddleware:s,resetMiddlewares:a}},pf=aA();Kn.default=pf.enhancer;var rj=pf.addMiddleware,ij=pf.removeMiddleware,nj=pf.resetMiddlewares;Kn.addMiddleware=rj;Kn.removeMiddleware=ij;Kn.resetMiddlewares=nj;Kn.createDynamicMiddlewares=aA});function lA(t){var e=function(i){var n=i.dispatch,o=i.getState;return function(s){return function(a){return typeof a=="function"?a(n,o,t):s(a)}}};return e}var uA,cA,dA=$(()=>{uA=lA();uA.withExtraArgument=lA;cA=uA});var hA=se((lhe,pA)=>{function oj(){this.__data__=[],this.size=0}pA.exports=oj});var Xl=se((uhe,fA)=>{function sj(t,e){return t===e||t!==t&&e!==e}fA.exports=sj});var fd=se((che,mA)=>{var aj=Xl();function lj(t,e){for(var r=t.length;r--;)if(aj(t[r][0],e))return r;return-1}mA.exports=lj});var vA=se((dhe,gA)=>{var uj=fd(),cj=Array.prototype,dj=cj.splice;function pj(t){var e=this.__data__,r=uj(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():dj.call(e,r,1),--this.size,!0}gA.exports=pj});var bA=se((phe,yA)=>{var hj=fd();function fj(t){var e=this.__data__,r=hj(e,t);return r<0?void 0:e[r][1]}yA.exports=fj});var xA=se((hhe,wA)=>{var mj=fd();function gj(t){return mj(this.__data__,t)>-1}wA.exports=gj});var _A=se((fhe,SA)=>{var vj=fd();function yj(t,e){var r=this.__data__,i=vj(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}SA.exports=yj});var md=se((mhe,EA)=>{var bj=hA(),wj=vA(),xj=bA(),Sj=xA(),_j=_A();function Zl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Zl.prototype.clear=bj;Zl.prototype.delete=wj;Zl.prototype.get=xj;Zl.prototype.has=Sj;Zl.prototype.set=_j;EA.exports=Zl});var PA=se((ghe,CA)=>{var Ej=md();function Cj(){this.__data__=new Ej,this.size=0}CA.exports=Cj});var AA=se((vhe,IA)=>{function Pj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}IA.exports=Pj});var MA=se((yhe,TA)=>{function Ij(t){return this.__data__.get(t)}TA.exports=Ij});var kA=se((bhe,RA)=>{function Aj(t){return this.__data__.has(t)}RA.exports=Aj});var o0=se((whe,NA)=>{var Tj=typeof global=="object"&&global&&global.Object===Object&&global;NA.exports=Tj});var Yn=se((xhe,OA)=>{var Mj=o0(),Rj=typeof self=="object"&&self&&self.Object===Object&&self,kj=Mj||Rj||Function("return this")();OA.exports=kj});var gd=se((She,DA)=>{var Nj=Yn(),Oj=Nj.Symbol;DA.exports=Oj});var BA=se((_he,zA)=>{var LA=gd(),FA=Object.prototype,Dj=FA.hasOwnProperty,Lj=FA.toString,vd=LA?LA.toStringTag:void 0;function Fj(t){var e=Dj.call(t,vd),r=t[vd];try{t[vd]=void 0;var i=!0}catch{}var n=Lj.call(t);return i&&(e?t[vd]=r:delete t[vd]),n}zA.exports=Fj});var qA=se((Ehe,UA)=>{var zj=Object.prototype,Bj=zj.toString;function Uj(t){return Bj.call(t)}UA.exports=Uj});var ja=se((Che,VA)=>{var HA=gd(),qj=BA(),Hj=qA(),Wj="[object Null]",Vj="[object Undefined]",WA=HA?HA.toStringTag:void 0;function $j(t){return t==null?t===void 0?Vj:Wj:WA&&WA in Object(t)?qj(t):Hj(t)}VA.exports=$j});var _o=se((Phe,$A)=>{function jj(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}$A.exports=jj});var hf=se((Ihe,jA)=>{var Gj=ja(),Kj=_o(),Yj="[object AsyncFunction]",Xj="[object Function]",Zj="[object GeneratorFunction]",Jj="[object Proxy]";function Qj(t){if(!Kj(t))return!1;var e=Gj(t);return e==Xj||e==Zj||e==Yj||e==Jj}jA.exports=Qj});var KA=se((Ahe,GA)=>{var e7=Yn(),t7=e7["__core-js_shared__"];GA.exports=t7});var ZA=se((The,XA)=>{var s0=KA(),YA=function(){var t=/[^.]+$/.exec(s0&&s0.keys&&s0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function r7(t){return!!YA&&YA in t}XA.exports=r7});var a0=se((Mhe,JA)=>{var i7=Function.prototype,n7=i7.toString;function o7(t){if(t!=null){try{return n7.call(t)}catch{}try{return t+""}catch{}}return""}JA.exports=o7});var eT=se((Rhe,QA)=>{var s7=hf(),a7=ZA(),l7=_o(),u7=a0(),c7=/[\\^$.*+?()[\]{}|]/g,d7=/^\[object .+?Constructor\]$/,p7=Function.prototype,h7=Object.prototype,f7=p7.toString,m7=h7.hasOwnProperty,g7=RegExp("^"+f7.call(m7).replace(c7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v7(t){if(!l7(t)||a7(t))return!1;var e=s7(t)?g7:d7;return e.test(u7(t))}QA.exports=v7});var rT=se((khe,tT)=>{function y7(t,e){return t?.[e]}tT.exports=y7});var Ks=se((Nhe,iT)=>{var b7=eT(),w7=rT();function x7(t,e){var r=w7(t,e);return b7(r)?r:void 0}iT.exports=x7});var ff=se((Ohe,nT)=>{var S7=Ks(),_7=Yn(),E7=S7(_7,"Map");nT.exports=E7});var yd=se((Dhe,oT)=>{var C7=Ks(),P7=C7(Object,"create");oT.exports=P7});var lT=se((Lhe,aT)=>{var sT=yd();function I7(){this.__data__=sT?sT(null):{},this.size=0}aT.exports=I7});var cT=se((Fhe,uT)=>{function A7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}uT.exports=A7});var pT=se((zhe,dT)=>{var T7=yd(),M7="__lodash_hash_undefined__",R7=Object.prototype,k7=R7.hasOwnProperty;function N7(t){var e=this.__data__;if(T7){var r=e[t];return r===M7?void 0:r}return k7.call(e,t)?e[t]:void 0}dT.exports=N7});var fT=se((Bhe,hT)=>{var O7=yd(),D7=Object.prototype,L7=D7.hasOwnProperty;function F7(t){var e=this.__data__;return O7?e[t]!==void 0:L7.call(e,t)}hT.exports=F7});var gT=se((Uhe,mT)=>{var z7=yd(),B7="__lodash_hash_undefined__";function U7(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=z7&&e===void 0?B7:e,this}mT.exports=U7});var yT=se((qhe,vT)=>{var q7=lT(),H7=cT(),W7=pT(),V7=fT(),$7=gT();function Jl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Jl.prototype.clear=q7;Jl.prototype.delete=H7;Jl.prototype.get=W7;Jl.prototype.has=V7;Jl.prototype.set=$7;vT.exports=Jl});var xT=se((Hhe,wT)=>{var bT=yT(),j7=md(),G7=ff();function K7(){this.size=0,this.__data__={hash:new bT,map:new(G7||j7),string:new bT}}wT.exports=K7});var _T=se((Whe,ST)=>{function Y7(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}ST.exports=Y7});var bd=se((Vhe,ET)=>{var X7=_T();function Z7(t,e){var r=t.__data__;return X7(e)?r[typeof e=="string"?"string":"hash"]:r.map}ET.exports=Z7});var PT=se(($he,CT)=>{var J7=bd();function Q7(t){var e=J7(this,t).delete(t);return this.size-=e?1:0,e}CT.exports=Q7});var AT=se((jhe,IT)=>{var eG=bd();function tG(t){return eG(this,t).get(t)}IT.exports=tG});var MT=se((Ghe,TT)=>{var rG=bd();function iG(t){return rG(this,t).has(t)}TT.exports=iG});var kT=se((Khe,RT)=>{var nG=bd();function oG(t,e){var r=nG(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}RT.exports=oG});var mf=se((Yhe,NT)=>{var sG=xT(),aG=PT(),lG=AT(),uG=MT(),cG=kT();function Ql(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Ql.prototype.clear=sG;Ql.prototype.delete=aG;Ql.prototype.get=lG;Ql.prototype.has=uG;Ql.prototype.set=cG;NT.exports=Ql});var DT=se((Xhe,OT)=>{var dG=md(),pG=ff(),hG=mf(),fG=200;function mG(t,e){var r=this.__data__;if(r instanceof dG){var i=r.__data__;if(!pG||i.length<fG-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new hG(i)}return r.set(t,e),this.size=r.size,this}OT.exports=mG});var gf=se((Zhe,LT)=>{var gG=md(),vG=PA(),yG=AA(),bG=MA(),wG=kA(),xG=DT();function eu(t){var e=this.__data__=new gG(t);this.size=e.size}eu.prototype.clear=vG;eu.prototype.delete=yG;eu.prototype.get=bG;eu.prototype.has=wG;eu.prototype.set=xG;LT.exports=eu});var l0=se((Jhe,FT)=>{var SG=Ks(),_G=function(){try{var t=SG(Object,"defineProperty");return t({},"",{}),t}catch{}}();FT.exports=_G});var vf=se((Qhe,BT)=>{var zT=l0();function EG(t,e,r){e=="__proto__"&&zT?zT(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}BT.exports=EG});var u0=se((efe,UT)=>{var CG=vf(),PG=Xl();function IG(t,e,r){(r!==void 0&&!PG(t[e],r)||r===void 0&&!(e in t))&&CG(t,e,r)}UT.exports=IG});var HT=se((tfe,qT)=>{function AG(t){return function(e,r,i){for(var n=-1,o=Object(e),s=i(e),a=s.length;a--;){var l=s[t?a:++n];if(r(o[l],l,o)===!1)break}return e}}qT.exports=AG});var VT=se((rfe,WT)=>{var TG=HT(),MG=TG();WT.exports=MG});var XT=se((wd,tu)=>{var RG=Yn(),KT=typeof wd=="object"&&wd&&!wd.nodeType&&wd,$T=KT&&typeof tu=="object"&&tu&&!tu.nodeType&&tu,kG=$T&&$T.exports===KT,jT=kG?RG.Buffer:void 0,GT=jT?jT.allocUnsafe:void 0;function NG(t,e){if(e)return t.slice();var r=t.length,i=GT?GT(r):new t.constructor(r);return t.copy(i),i}tu.exports=NG});var c0=se((ife,ZT)=>{var OG=Yn(),DG=OG.Uint8Array;ZT.exports=DG});var eM=se((nfe,QT)=>{var JT=c0();function LG(t){var e=new t.constructor(t.byteLength);return new JT(e).set(new JT(t)),e}QT.exports=LG});var rM=se((ofe,tM)=>{var FG=eM();function zG(t,e){var r=e?FG(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}tM.exports=zG});var nM=se((sfe,iM)=>{function BG(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}iM.exports=BG});var aM=se((afe,sM)=>{var UG=_o(),oM=Object.create,qG=function(){function t(){}return function(e){if(!UG(e))return{};if(oM)return oM(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();sM.exports=qG});var d0=se((lfe,lM)=>{function HG(t,e){return function(r){return t(e(r))}}lM.exports=HG});var yf=se((ufe,uM)=>{var WG=d0(),VG=WG(Object.getPrototypeOf,Object);uM.exports=VG});var bf=se((cfe,cM)=>{var $G=Object.prototype;function jG(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||$G;return t===r}cM.exports=jG});var pM=se((dfe,dM)=>{var GG=aM(),KG=yf(),YG=bf();function XG(t){return typeof t.constructor=="function"&&!YG(t)?GG(KG(t)):{}}dM.exports=XG});var Ys=se((pfe,hM)=>{function ZG(t){return t!=null&&typeof t=="object"}hM.exports=ZG});var mM=se((hfe,fM)=>{var JG=ja(),QG=Ys(),eK="[object Arguments]";function tK(t){return QG(t)&&JG(t)==eK}fM.exports=tK});var wf=se((ffe,yM)=>{var gM=mM(),rK=Ys(),vM=Object.prototype,iK=vM.hasOwnProperty,nK=vM.propertyIsEnumerable,oK=gM(function(){return arguments}())?gM:function(t){return rK(t)&&iK.call(t,"callee")&&!nK.call(t,"callee")};yM.exports=oK});var Eo=se((mfe,bM)=>{var sK=Array.isArray;bM.exports=sK});var xf=se((gfe,wM)=>{var aK=9007199254740991;function lK(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=aK}wM.exports=lK});var xd=se((vfe,xM)=>{var uK=hf(),cK=xf();function dK(t){return t!=null&&cK(t.length)&&!uK(t)}xM.exports=dK});var _M=se((yfe,SM)=>{var pK=xd(),hK=Ys();function fK(t){return hK(t)&&pK(t)}SM.exports=fK});var CM=se((bfe,EM)=>{function mK(){return!1}EM.exports=mK});var Sf=se((Sd,ru)=>{var gK=Yn(),vK=CM(),AM=typeof Sd=="object"&&Sd&&!Sd.nodeType&&Sd,PM=AM&&typeof ru=="object"&&ru&&!ru.nodeType&&ru,yK=PM&&PM.exports===AM,IM=yK?gK.Buffer:void 0,bK=IM?IM.isBuffer:void 0,wK=bK||vK;ru.exports=wK});var RM=se((wfe,MM)=>{var xK=ja(),SK=yf(),_K=Ys(),EK="[object Object]",CK=Function.prototype,PK=Object.prototype,TM=CK.toString,IK=PK.hasOwnProperty,AK=TM.call(Object);function TK(t){if(!_K(t)||xK(t)!=EK)return!1;var e=SK(t);if(e===null)return!0;var r=IK.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&TM.call(r)==AK}MM.exports=TK});var NM=se((xfe,kM)=>{var MK=ja(),RK=xf(),kK=Ys(),NK="[object Arguments]",OK="[object Array]",DK="[object Boolean]",LK="[object Date]",FK="[object Error]",zK="[object Function]",BK="[object Map]",UK="[object Number]",qK="[object Object]",HK="[object RegExp]",WK="[object Set]",VK="[object String]",$K="[object WeakMap]",jK="[object ArrayBuffer]",GK="[object DataView]",KK="[object Float32Array]",YK="[object Float64Array]",XK="[object Int8Array]",ZK="[object Int16Array]",JK="[object Int32Array]",QK="[object Uint8Array]",eY="[object Uint8ClampedArray]",tY="[object Uint16Array]",rY="[object Uint32Array]",cr={};cr[KK]=cr[YK]=cr[XK]=cr[ZK]=cr[JK]=cr[QK]=cr[eY]=cr[tY]=cr[rY]=!0;cr[NK]=cr[OK]=cr[jK]=cr[DK]=cr[GK]=cr[LK]=cr[FK]=cr[zK]=cr[BK]=cr[UK]=cr[qK]=cr[HK]=cr[WK]=cr[VK]=cr[$K]=!1;function iY(t){return kK(t)&&RK(t.length)&&!!cr[MK(t)]}kM.exports=iY});var DM=se((Sfe,OM)=>{function nY(t){return function(e){return t(e)}}OM.exports=nY});var FM=se((_d,iu)=>{var oY=o0(),LM=typeof _d=="object"&&_d&&!_d.nodeType&&_d,Ed=LM&&typeof iu=="object"&&iu&&!iu.nodeType&&iu,sY=Ed&&Ed.exports===LM,p0=sY&&oY.process,aY=function(){try{var t=Ed&&Ed.require&&Ed.require("util").types;return t||p0&&p0.binding&&p0.binding("util")}catch{}}();iu.exports=aY});var _f=se((_fe,UM)=>{var lY=NM(),uY=DM(),zM=FM(),BM=zM&&zM.isTypedArray,cY=BM?uY(BM):lY;UM.exports=cY});var h0=se((Efe,qM)=>{function dY(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}qM.exports=dY});var f0=se((Cfe,HM)=>{var pY=vf(),hY=Xl(),fY=Object.prototype,mY=fY.hasOwnProperty;function gY(t,e,r){var i=t[e];(!(mY.call(t,e)&&hY(i,r))||r===void 0&&!(e in t))&&pY(t,e,r)}HM.exports=gY});var VM=se((Pfe,WM)=>{var vY=f0(),yY=vf();function bY(t,e,r,i){var n=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(r[a],t[a],a,r,t):void 0;l===void 0&&(l=t[a]),n?yY(r,a,l):vY(r,a,l)}return r}WM.exports=bY});var jM=se((Ife,$M)=>{function wY(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}$M.exports=wY});var Cd=se((Afe,GM)=>{var xY=9007199254740991,SY=/^(?:0|[1-9]\d*)$/;function _Y(t,e){var r=typeof t;return e=e??xY,!!e&&(r=="number"||r!="symbol"&&SY.test(t))&&t>-1&&t%1==0&&t<e}GM.exports=_Y});var m0=se((Tfe,KM)=>{var EY=jM(),CY=wf(),PY=Eo(),IY=Sf(),AY=Cd(),TY=_f(),MY=Object.prototype,RY=MY.hasOwnProperty;function kY(t,e){var r=PY(t),i=!r&&CY(t),n=!r&&!i&&IY(t),o=!r&&!i&&!n&&TY(t),s=r||i||n||o,a=s?EY(t.length,String):[],l=a.length;for(var p in t)(e||RY.call(t,p))&&!(s&&(p=="length"||n&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||AY(p,l)))&&a.push(p);return a}KM.exports=kY});var XM=se((Mfe,YM)=>{function NY(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}YM.exports=NY});var JM=se((Rfe,ZM)=>{var OY=_o(),DY=bf(),LY=XM(),FY=Object.prototype,zY=FY.hasOwnProperty;function BY(t){if(!OY(t))return LY(t);var e=DY(t),r=[];for(var i in t)i=="constructor"&&(e||!zY.call(t,i))||r.push(i);return r}ZM.exports=BY});var Ef=se((kfe,QM)=>{var UY=m0(),qY=JM(),HY=xd();function WY(t){return HY(t)?UY(t,!0):qY(t)}QM.exports=WY});var tR=se((Nfe,eR)=>{var VY=VM(),$Y=Ef();function jY(t){return VY(t,$Y(t))}eR.exports=jY});var aR=se((Ofe,sR)=>{var rR=u0(),GY=XT(),KY=rM(),YY=nM(),XY=pM(),iR=wf(),nR=Eo(),ZY=_M(),JY=Sf(),QY=hf(),eX=_o(),tX=RM(),rX=_f(),oR=h0(),iX=tR();function nX(t,e,r,i,n,o,s){var a=oR(t,r),l=oR(e,r),p=s.get(l);if(p){rR(t,r,p);return}var f=o?o(a,l,r+"",t,e,s):void 0,c=f===void 0;if(c){var m=nR(l),v=!m&&JY(l),g=!m&&!v&&rX(l);f=l,m||v||g?nR(a)?f=a:ZY(a)?f=YY(a):v?(c=!1,f=GY(l,!0)):g?(c=!1,f=KY(l,!0)):f=[]:tX(l)||iR(l)?(f=a,iR(a)?f=iX(a):(!eX(a)||QY(a))&&(f=XY(l))):c=!1}c&&(s.set(l,f),n(f,l,i,o,s),s.delete(l)),rR(t,r,f)}sR.exports=nX});var cR=se((Dfe,uR)=>{var oX=gf(),sX=u0(),aX=VT(),lX=aR(),uX=_o(),cX=Ef(),dX=h0();function lR(t,e,r,i,n){t!==e&&aX(e,function(o,s){if(n||(n=new oX),uX(o))lX(t,e,s,r,lR,i,n);else{var a=i?i(dX(t,s),o,s+"",t,e,n):void 0;a===void 0&&(a=o),sX(t,s,a)}},cX)}uR.exports=lR});var Cf=se((Lfe,dR)=>{function pX(t){return t}dR.exports=pX});var hR=se((Ffe,pR)=>{function hX(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}pR.exports=hX});var gR=se((zfe,mR)=>{var fX=hR(),fR=Math.max;function mX(t,e,r){return e=fR(e===void 0?t.length-1:e,0),function(){for(var i=arguments,n=-1,o=fR(i.length-e,0),s=Array(o);++n<o;)s[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=r(s),fX(t,this,a)}}mR.exports=mX});var yR=se((Bfe,vR)=>{function gX(t){return function(){return t}}vR.exports=gX});var xR=se((Ufe,wR)=>{var vX=yR(),bR=l0(),yX=Cf(),bX=bR?function(t,e){return bR(t,"toString",{configurable:!0,enumerable:!1,value:vX(e),writable:!0})}:yX;wR.exports=bX});var _R=se((qfe,SR)=>{var wX=800,xX=16,SX=Date.now;function _X(t){var e=0,r=0;return function(){var i=SX(),n=xX-(i-r);if(r=i,n>0){if(++e>=wX)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}SR.exports=_X});var CR=se((Hfe,ER)=>{var EX=xR(),CX=_R(),PX=CX(EX);ER.exports=PX});var IR=se((Wfe,PR)=>{var IX=Cf(),AX=gR(),TX=CR();function MX(t,e){return TX(AX(t,e,IX),t+"")}PR.exports=MX});var TR=se((Vfe,AR)=>{var RX=Xl(),kX=xd(),NX=Cd(),OX=_o();function DX(t,e,r){if(!OX(r))return!1;var i=typeof e;return(i=="number"?kX(r)&&NX(e,r.length):i=="string"&&e in r)?RX(r[e],t):!1}AR.exports=DX});var RR=se(($fe,MR)=>{var LX=IR(),FX=TR();function zX(t){return LX(function(e,r){var i=-1,n=r.length,o=n>1?r[n-1]:void 0,s=n>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(n--,o):void 0,s&&FX(r[0],r[1],s)&&(o=n<3?void 0:o,n=1),e=Object(e);++i<n;){var a=r[i];a&&t(e,a,i,o)}return e})}MR.exports=zX});var NR=se((jfe,kR)=>{var BX=cR(),UX=RR(),qX=UX(function(t,e,r){BX(t,e,r)});kR.exports=qX});function Ga(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}var g0=$(()=>{});function v0(t={}){let e=t.promiseTypeSuffixes||HX,r=t.promiseTypeDelimiter||"_";return i=>{let{dispatch:n}=i;return o=>s=>{let a,l;if(s.payload){let E=s.payload;if(Ga(E))a=E;else if(Ga(E.promise))a=E.promise,l=E.data;else if(typeof E=="function"||typeof E.promise=="function"){if(a=E.promise?E.promise():E(),l=E.promise?E.data:void 0,!Ga(a))return o({...s,payload:a})}else return o(s)}else return o(s);let p=s.type,f=s.meta,[c,m,v]=e,g=(E,L)=>({type:[p,L?v:m].join(r),...E===null||typeof E>"u"?{}:{payload:E},...f!==void 0?{meta:f}:{},...L?{error:!0}:{}}),x=E=>{let L=g(E,!0);n(L)},_=(E=null)=>{let L=g(E,!1);return n(L),{value:E,action:L}};return o({type:[p,c].join(r),...l!==void 0?{payload:l}:{},...f!==void 0?{meta:f}:{}}),a.then(_,x).catch(E=>{if(he&&E.response)console.error("Request to",E.response.config.url,"failed with code",E.response.status);else{if(E&&E.response&&E.response.status===401){console.warn("No auth for request to",E.response.config.url);return}console.error(E)}}),a}}}var Pf,If,Af,HX,y0=$(()=>{g0();Fe();Pf="PENDING",If="FULFILLED",Af="REJECTED",HX=[Pf,If,Af]});var Ka,Tf,nu,sr,Mf,Xs,Rf,kf,Nf,Of,WX,OR=$(()=>{Ka="cargo.site",Tf="wss://w.s.cargo.site",nu="https://cargo.site",sr="https://api.cargo.site/v1",Mf="https://cargo.site/_api",Xs="https://cargo.site",Rf="https://cargo.site/_api/v1-p",kf="yjhpd2ug",Nf="https://admin.workspace.cargo.site",Of="https://admin.cargo.site",WX=typeof window<"u"?"production":process?.env?.CARGO_ENV;switch(WX){case"localhost":case"local-ssr":Ka="local.dev.cargo.site",Tf="wss://ws.dev.cargo.site",nu="https://local.dev.cargo.site",sr="https://api.dev.cargo.site/v1",Mf="https://dev.cargo.site/_api",Xs="https://dev.cargo.site",Rf="https://dev.cargo.site/_api/v1-p",kf="na91uuyv",Nf="https://workspace.local.dev.cargo.site",Of="https://admin.local.dev.cargo.site";break;case"local-crdt":Ka="local.dev.cargo.site",Tf="wss://ws.local.dev.cargo.site:4443",nu="https://local.dev.cargo.site",sr="https://api.dev.cargo.site/v1",Mf="https://dev.cargo.site/_api",Xs="https://dev.cargo.site",Rf="https://dev.cargo.site/_api/v1-p",kf="na91uuyv",Nf="https://workspace.local.dev.cargo.site",Of="https://admin.local.dev.cargo.site";break;case"dev":Ka="dev.cargo.site",Tf="wss://ws.dev.cargo.site",nu="https://dev.cargo.site",sr="https://api.dev.cargo.site/v1",Mf="https://dev.cargo.site/_api",Xs="https://dev.cargo.site",Rf="https://dev.cargo.site/_api/v1-p",kf="na91uuyv",Nf="https://admin.workspace.dev.cargo.site",Of="https://admin.dev.cargo.site";break;case"qa":Ka="qa.cargo.site",Tf="wss://ws.dev.cargo.site",nu="https://qa.cargo.site",sr="https://api.qa.cargo.site/v1",Mf="https://qa.cargo.site/_api",Xs="https://qa.cargo.site",Rf="https://qa.cargo.site/_api/v1-p",kf="na91uuyv",Nf="https://admin.workspace.qa.cargo.site",Of="https://admin.qa.cargo.site";break}});var Zs=$(()=>{OR()});function VX(t){var e;return{get:function(i){return e&&t(e.key,i)?e.value:Df},put:function(i,n){e={key:i,value:n}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function $X(t,e){var r=[];function i(a){var l=r.findIndex(function(f){return e(a,f.key)});if(l>-1){var p=r[l];return l>0&&(r.splice(l,1),r.unshift(p)),p.value}return Df}function n(a,l){i(a)===Df&&(r.unshift({key:a,value:l}),r.length>t&&r.pop())}function o(){return r}function s(){r=[]}return{get:i,put:n,getEntries:o,clear:s}}function jX(t){return function(r,i){if(r===null||i===null||r.length!==i.length)return!1;for(var n=r.length,o=0;o<n;o++)if(!t(r[o],i[o]))return!1;return!0}}function LR(t,e){var r=typeof e=="object"?e:{equalityCheck:e},i=r.equalityCheck,n=i===void 0?DR:i,o=r.maxSize,s=o===void 0?1:o,a=r.resultEqualityCheck,l=jX(n),p=s===1?VX(l):$X(s,l);function f(){var c=p.get(arguments);if(c===Df){if(c=t.apply(null,arguments),a){var m=p.getEntries(),v=m.find(function(g){return a(g.value,c)});v&&(c=v.value)}p.put(arguments,c)}return c}return f.clearCache=function(){return p.clear()},f}var Df,DR,FR=$(()=>{Df="NOT_FOUND";DR=function(e,r){return e===r}});function GX(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(i){return typeof i=="function"})){var r=e.map(function(i){return typeof i=="function"?"function "+(i.name||"unnamed")+"()":typeof i}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return e}function b0(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var n=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];var p=0,f,c={memoizeOptions:void 0},m=a.pop();if(typeof m=="object"&&(c=m,m=a.pop()),typeof m!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof m+"]");var v=c,g=v.memoizeOptions,x=g===void 0?r:g,_=Array.isArray(x)?x:[x],E=GX(a),L=t.apply(void 0,[function(){return p++,m.apply(null,arguments)}].concat(_)),O=t(function(){for(var D=[],P=E.length,U=0;U<P;U++)D.push(E[U].apply(null,arguments));return f=L.apply(null,D),f});return Object.assign(O,{resultFunc:m,memoizedResultFunc:L,dependencies:E,lastResult:function(){return f},recomputations:function(){return p},resetRecomputations:function(){return p=0}}),O};return n}var zR,BR=$(()=>{FR();zR=b0(LR)});var w0={};hr(w0,{ADMIN_FRAME:()=>ye,CRDTState:()=>er,FRONTEND_DATA:()=>Lf});var ye,Lf,er,Dt=$(()=>{ye={adminWindow:null},Lf={},er=Object.freeze({New:0,Published:1,Draft:2,Deleted:3})});var Pr,ut,Sr,$e,_r=$(()=>{BR();Pr=ve(Ie(),1);Fe();Dt();ut={};he?Sr=b0(t=>t):Sr=function(){return zR.apply(this,[...arguments,{memoizeOptions:{maxSize:10}}])};ut.getItemParentId=(t,e)=>ut.flatByParentList(t)[e];ut.getHomepageId=t=>t.frontendState.isMobile?t.site?.mobile_homepage_id:t.site?.homepage_id;ut.getHomepagePurl=t=>ut.getContentById(t,ut.getHomepageId(t))?.purl?.toLowerCase();ut.getHiddenHomepageId=t=>{let e=t.site?.mobile_homepage_id,r=t.site?.homepage_id;return e===r?null:t.frontendState.isMobile?r:e};ut.flatByParentList=Sr(t=>t.structure.byParent,t=>{let e={};for(let r in t)for(let i in t[r])e[t[r][i]]=r;return e});ut.getSetsByParent=Sr(t=>t.structure.byParent,t=>t.sets.byId,(t,e)=>{let r={};for(let i in t)r[i]=t[i].filter(n=>e.hasOwnProperty(n));return r});ut.getPagesByParent=Sr(t=>t.structure.byParent,t=>t.pages.byId,(t,e)=>{let r={};for(let i in t)r[i]=t[i].filter(n=>e.hasOwnProperty(n));return r});ut.getParentSetList=Sr(ut.getItemParentId,ut.flatByParentList,(t,e)=>{let r=[];for(;t;)r.push(t),t=t!==e[t]?e[t]:null;return r});ut.getSetContents=Sr((t,e)=>e,ut.getHomepageId,(t,e,r)=>r,(t,e,r)=>t.structure.bySort,(t,e)=>t.structure.byParent[e],t=>t.pages.byId,t=>t.sets.byId,(t,e,r={},i,n=[],o,s)=>{let a;return Pr.default.without(n.map(l=>{if(a=o[l]||s[l],r.includeNotIndexable===!0||a&&(a.id===e||ef(a)))return a}).sort((l,p)=>i[l.id]-i[p.id]),void 0)});ut.getSetContentsByIndex=Sr(ut.getSetContents,(t,e,r)=>t.structure.indexById,(t,e)=>t.reduce((r,i)=>(r[e[i.id]]=i,r),{}));ut.getSetDepthsById=Sr(t=>t.sets.byId,ut.flatByParentList,(t,e)=>{let r={};return Object.keys(t).forEach(i=>{let n=0,o=i;for(;e[o];)n++,o=e[o];r[i]=n}),r});ut.getPinsForSet=Sr(ut.getParentSetList,ut.getSetDepthsById,(t,e,r,i)=>e,(t,e,r,i)=>r,(t,e,r,i)=>i,(t,e,r,i)=>t.structure.bySort,(t,e,r,i)=>t.pages.byId,ut.getPagesByParent,t=>t.frontendState.isMobile,(t,e,r,i,n,o,s={},a={},l)=>{if(!r)return[];let p=r,f=0,c={},m=[];return t.concat([r]).forEach(g=>{a[g]&&a[g].forEach(x=>{if(s[x]&&s[x].pin&&s[x].pin_options&&s[x].pin_options.position===i){if(x!==n&&(s[x].pin_options.screen_visibility==="mobile"&&!l||s[x].pin_options.screen_visibility==="desktop"&&l))return;m.push(s[x]),c[x]=s[x].pin_options.fixed?0:e[g]}})}),m.sort((g,x)=>{let _=o[g.id],E=o[x.id];return g.pin_options.fixed?_+=i==="bottom"?9e9:-9e9:g.pin_options.overlay&&(_+=i==="bottom"?9e5:-9e5),x.pin_options.fixed?E+=i==="bottom"?9e9:-9e9:x.pin_options.overlay&&(E+=i==="bottom"?9e5:-9e5),_-E}),m.sort((g,x)=>i==="bottom"?c[x.id]-c[g.id]:c[g.id]-c[x.id]),m});ut.getAutoRenderableOverlaysForSet=Sr(ut.getParentSetList,ut.getSetDepthsById,(t,e,r)=>e,(t,e,r)=>r,(t,e,r)=>t.pages.byId,(t,e,r)=>t.frontendState.PIDToEdit,ut.getPagesByParent,(t,e,r,i,n={},o,s={})=>{if(!r||he)return[];let a=r,l=0,p=[];return t.concat([r]).forEach(c=>{s[c]&&s[c].forEach(m=>{n[m]&&n[m].overlay&&(n[m].id===o||n[m].overlay_options?.openOnLoad||n[m].purl?.toLowerCase()===i?.toLowerCase())&&p.push(n[m])})}),p});ut.getContentById=Sr((t,e)=>e,(t,e)=>t.pages.byId[e]||t.sets.byId[e],(t,e)=>e);ut.getContentByPurl=Sr((t,e)=>e?.replace("#",""),(t,e)=>(e=e?.replace("#",""),t.pages.byId[ut.getPagesByUrl(t)[e?.toLowerCase()]]||t.sets.byId[ut.getSetsByUrl(t)[e?.toLowerCase()]]),(t,e)=>e);ut.getLoadedIndexesForSet=Sr(ut.getSetContents,t=>t.structure.indexById,(t,e)=>Pr.default.without(t.map(r=>{if(ef(r))return e[r.id]}),void 0));ut.getMissingIndexesForSet=Sr((t,e)=>t.sets.byId[e],ut.getLoadedIndexesForSet,(t,e)=>t?Pr.default.difference([...Array(Math.max(t.page_count||0,0)).keys()],e):[]);ut.getSortedListOfIndexPairs=Sr(t=>t,(t,e)=>e,(t,e)=>t.sets.byId,(t,e)=>t.structure.indexById,ut.getSetsByParent,(t,e,r,i,n)=>{let o=s=>{let a=ut.getContentById(t,s);if(!a)return[];let l=[...Array(Math.max(a.page_count||0,0)).keys()].map(p=>[a.id,p]);return n[a.id]&&(n[a.id]||[]).map(p=>r[p]).forEach(p=>{let f=l.findIndex(([c,m])=>m===i[p.id]);l.splice(f+1,0,o(p.id))}),l};return Pr.default.chunk(Pr.default.flattenDeep(o(e)),2)});ut.getSortedListOfMissingIndexPairs=Sr(t=>t,ut.getSortedListOfIndexPairs,(t,e)=>t.sets.byId,ut.getSetsByParent,(t,e,r,i)=>{let n=[];return Pr.default.uniq(e.map(o=>o[0])).forEach(o=>{n=n.concat(ut.getLoadedIndexesForSet(t,o).map(s=>[o,s]))}),Pr.default.differenceWith(e,n,Pr.default.isEqual)});ut.getGappedSetMap=Sr(t=>t,ut.getSortedListOfIndexPairs,ut.getSortedListOfMissingIndexPairs,(t,e,r)=>{let i=r[0];if(i){let n=Pr.default.uniq(e.map(a=>a[0])).reduce((a,l)=>(a[l]=0,a),{}),o=Pr.default.findIndex(e,a=>Pr.default.isEqual(a,i)),s=Pr.default.fromPairs(e.slice(0,o));return Pr.default.merge(n,s)}return{}});ut.getPagesByUrl=Sr(t=>t.pages.byId,t=>Pr.default.transform(Pr.default.omitBy(t,e=>e.crdt_state===er.Deleted),function(e,r){e[r.purl?.toLowerCase()]=r.id},{}));ut.getSetsByUrl=Sr(t=>t.sets.byId,t=>Pr.default.transform(Pr.default.omitBy(t,e=>e.crdt_state===er.Deleted),function(e,r){e[r.purl?.toLowerCase()]=r.id},{}));ut.getMediaByHash=t=>{let e={};return Pr.default.each(t.pages.byId,r=>{Pr.default.each(r.media,i=>{i.crdt_state!==er.Deleted&&(e[i.hash]=i)})}),e};ut.getMediaByParent=Sr(t=>t.pages.byId,t=>{let e={};return Pr.default.each(t,r=>{e[r.id]=r.media?.filter(i=>i.crdt_state!==er.Deleted)}),e});ut.getRenderedPageModels=Sr(t=>t.pages.byId,t=>t.frontendState.renderedPages,(t,e)=>e.map(r=>t[r.id]).filter(r=>r!==void 0));$e=ut});var _0={};hr(_0,{actionTypes:()=>Ne,actions:()=>Ye});var fn,Za,S0,Ye,KX,UR,Ne,Ff,x0,Ya,Xa,tr=$(()=>{fn=ve(kn(),1),Za=ve(Ie(),1);y0();Fe();Zs();_r();S0=ve(Ie(),1),Ye={},KX=he?3e4:1e4,UR={AUTHENTICATE_USER:"AUTHENTICATE_USER",FETCH_SITEDESIGN_MODEL:"FETCH_SITEDESIGN_MODEL",FETCH_SCAFFOLDING:"FETCH_SCAFFOLDING",FETCH_SITE_PACKAGE:"FETCH_SITE_PACKAGE",FETCH_SITE_MODEL:"FETCH_SITE_MODEL",FETCH_SITE_CSS:"FETCH_SITE_CSS",FETCH_MEDIA:"FETCH_MEDIA",FETCH_CONTENT:"FETCH_CONTENT",DELETE_CONTENT:"DELETE_CONTENT",FETCH_COMMERCE_PRODUCTS:"FETCH_COMMERCE_PRODUCTS",FETCH_SHOP_MODEL:"FETCH_SHOP_MODEL"};(0,Za.each)(UR,function(t,e,r){r[t+"_"+If]=e+"_"+If,r[t+"_"+Pf]=e+"_"+Pf,r[t+"_"+Af]=e+"_"+Af});Ne=(0,Za.merge)({ADD_COMMERCE_PRODUCT_TO_CART:"ADD_COMMERCE_PRODUCT_TO_CART",RESET_COMMERCE_CART:"RESET_COMMERCE_CART",SET_INITIAL_AUTH:"SET_INITIAL_AUTH",PAGES_MOUNTED:"PAGES_MOUNTED",PAGES_UNMOUNTED:"PAGES_UNMOUNTED",UPDATE_FRONTEND_STATE:"UPDATE_FRONTEND_STATE",UPDATE_SITE_DESIGN:"UPDATE_SITE_DESIGN",COMMERCE_PRODUCT_DESTROYED:"COMMERCE_PRODUCT_DESTROYED",COMMERCE_PRODUCT_UPDATED:"COMMERCE_PRODUCT_UPDATED",SHOP_MODEL_UPDATED:"SHOP_MODEL_UPDATED"},UR);Ye.getAuthToken=function(t={}){let e=new Promise((r,i)=>{let n="https://cargo.site/accesstoken";if(t.reverse_bounce_jwt){parent.location.href=n+"/bounce?jwt="+t.reverse_bounce_jwt;return}if(t.bounce){parent.location.href=n+"/bounce?site_url="+t.site_url;return}let o={};t.site_url&&(o.site_url=t.site_url),t.site_id&&(o.site_id=t.site_id),t.jwt&&(o.jwt=t.jwt);let s={};t.nonce&&(s["x-cargo-access-token-nonce"]=t.nonce),fn.default.get(n,{use_auth:!1,withCredentials:!0,params:o,headers:s,timeout:t?.timeout||KX}).then(function(a){if(!a||a.token===null)return i("No token found.");r(a)}).catch(a=>{i(a)})});return{type:Ne.AUTHENTICATE_USER,payload:e}};Ye.setAuthentication=t=>({type:Ne.AUTHENTICATE_USER_FULFILLED,payload:t});Ye.rejectAuthentication=()=>({type:Ne.AUTHENTICATE_USER_REJECTED,payload:{}});Ye.fetchScaffolding=function(){return function(t,e){let i=`/pages/${e().site.id}/scaffolding`;return t({type:Ne.FETCH_SCAFFOLDING,payload:fn.default.get(sr+i)})}};Ye.fetchFiles=function(){return function(t,e){let i=`/sites/${e().site.id}/media/files`;return t({type:Ne.FETCH_MEDIA,payload:fn.default.get(sr+i)})}};Ye.fetchCommerceProducts=function(t={}){return t=S0.default.defaults(t,{orderBy:"date_added",orderDir:"asc",idArray:null,onlyNew:!0}),function(e,r){let i=r(),n=`/commerce/${i.site.id}/products`,o;if(t.idArray){n+="/list";let s=new FormData;if(t.idArray){let a=t.idArray.filter(l=>!(t.onlyNew===!0&&i.commerce.products.hasOwnProperty(l)));if(a.length===0)return Promise.resolve();a.forEach(l=>{s.append("ids[]",l)})}o=fn.default.post(sr+n,s,{use_auth:!1})}else o=fn.default.get(sr+n,{use_auth:!1,params:{order_by:t.orderBy,order_dir:t.orderDir,limit:t.limit}});return e({type:Ne.FETCH_COMMERCE_PRODUCTS,payload:o,meta:{options:t}})}};Ye.fetchShopModel=function(t={}){return function(e,r){let i=r();if(!i.site.shop_id)return Promise.resolve();let n=`/commerce/${i.site.id}/shop/${i.site.shop_id}`;return e({type:Ne.FETCH_SHOP_MODEL,payload:fn.default.get(sr+n,{use_cache:t.force!==!0})})}};Ye.resetCommerceCart=function(){return{type:Ne.RESET_COMMERCE_CART,payload:{}}};Ye.addCommerceProductToCart=function(t,e,r={}){return function(i,n){let o=n(),s=o.commerce.products[t],a=s?.variants.find(l=>l.variant_id==e);if(!s||!a){r.failureCallback?.("Product not found");return}if((r.amount===void 0||isNaN(r.amount))&&(r.amount=1),a.inventory!==null&&r.amount>a.inventory)if(a.inventory<=0){r.failureCallback?.("Product is out of stock");return}else r.amount=a.inventory;return typeof r.callback=="function"&&r.callback(),i({type:Ne.ADD_COMMERCE_PRODUCT_TO_CART,payload:{product_id:a.product_id,variant_id:a.variant_id,quantity:r.amount},meta:{is_template:o.site.is_template}})}};Ff=null,x0=!1,Ya=[],Xa=[];Ye.pageMounted=function(t){if(Xa.includes(t)&&(Xa=Xa.filter(e=>e!==t)),!Ya.includes(t))return(e,r)=>(Ya.push(t),Ff||(Ff=new Promise(i=>{requestAnimationFrame(()=>{e({type:Ne.PAGES_MOUNTED,payload:{pages:[...Ya]}}),i(),Ff=null,Ya=[]})})),Ff)};Ye.pageUnMounted=function(t){if(Ya.includes(t)&&(Ya=Ya.filter(e=>e!==t)),!Xa.includes(t))return(e,r)=>{if(r().frontendState.PIDBeingEdited===t?.id)return e({type:Ne.PAGES_UNMOUNTED,payload:{pages:[t]}});Xa.push(t),x0||(x0=!0,requestAnimationFrame(()=>{e({type:Ne.PAGES_UNMOUNTED,payload:{pages:[...Xa]}}),x0=!1,Xa=[]}))}};Ye.fetchSiteModel=function(){return function(t,e){let i=`/sites/${e().site.id}`,n=fn.default.get(sr+i);return t({type:Ne.FETCH_SITE_MODEL,payload:n})}};Ye.fetchSiteCSS=function(){return function(t,e){let i=`/sites/${e().site.id}/css`,n=fn.default.get(sr+i);return t({type:Ne.FETCH_SITE_CSS,payload:n})}};Ye.fetchSitePackage=function(){return function(t,e){let r=e(),i;he?i=r.frontendState.hostname:i=Ha?xb:window.location.hostname,bb&&(i=i.replace("local.dev.cargo.site","dev.cargo.site"));let n=fn.default.get(sr+`/package/${i}`);return t({type:Ne.FETCH_SITE_PACKAGE,payload:n})}};Ye.fetchSiteDesignModel=function(){return function(t,e){let i=`/sites/${e().site.id}/design`,n=fn.default.get(sr+i);return t({type:Ne.FETCH_SITEDESIGN_MODEL,payload:n})}};Ye.fetchPagesByTag=function(t,e={}){return function(r,i){let n=store.getState(),o=fn.default.get(sr+`/pages/${n.site.id}/tag/${t}`,{withCredentials:!0,use_cache:e.force!==!0});return r({type:Ne.FETCH_CONTENT,payload:o})}};Ye.fetchContent=function(t,e={}){return e.idType||(e.idType="pid"),function(r,i){let n=i(),o;if(e.indexes&&n.frontendState.inAdminFrame===!0){let f=n.structure.byParent[t]?.reduce((c,m)=>(c[n.structure.indexById[m]]=m,c),{});f&&(o={},e.indexes.forEach(c=>{let m=f[c],v=n.structure.liveIndexes[m];if(v){let[g,x]=v.split("/");o[g]||(o[g]=[]),o[g].push(parseInt(x))}}),o=S0.default.map(o,(c,m)=>({set_id:m,index:c})))}if(e.force!==!0&&(e.idType==="purl"?$e.getContentByPurl(n,t):$e.getContentById(n,t)||t==="root")&&(e.indexes===void 0||e.indexes.length===0)&&e.prev!==!0&&e.next!==!0)return r({type:Ne.FETCH_CONTENT,payload:Promise.resolve()});let s=`/pages/${n.site.id}/url/${t}`;e.next===!0?s=`/pages/${n.site.id}/next/${t}`:e.prev===!0?s=`/pages/${n.site.id}/prev/${t}`:e.idType==="pid"&&(s=`/pages/${n.site.id}/id/${t}`);let a={};(0,Za.isArray)(e.indexes)&&(s=`/pages/${n.site.id}/filter/`,o&&Object.keys(o).length>0?a.indexBySet=JSON.stringify(o):a.indexBySet=JSON.stringify([{set_id:t,index:e.indexes}]));let l=fn.default.get(sr+s,{withCredentials:!0,use_cache:e.force!==!0,params:a,validateStatus:function(f){return f>=200&&f<300&&f!==204},contentIdentifier:{idType:e.idType,id:t}}),p=new Promise((f,c)=>{l.then(m=>{(0,Za.isArray)(m.data)||(m.data=[m.data]),e.cb?.(m),f(m)}).catch(c)});return r({type:Ne.FETCH_CONTENT,payload:p})}};Ye.updateFrontendState=function(t){return function(e,r){return e({type:Ne.UPDATE_FRONTEND_STATE,payload:t})}};Ye.deleteContent=function(t){return function(e,r){let i=new Promise().resolve({id:t});return{type:Ne.DELETE_CONTENT,payload:i}}};he||(window.actions=Ye)});function E0(){return t=>e=>(Ga(e.payload)&&e.payload.catch(function(r){if(he&&r.response)console.error("Request to",r.response.config.url,"failed with code",r.response.status);else{if(r&&r.response&&r.response.status===401){console.warn("No auth for request to",r.response.config.url);return}console.error(r)}return r}),t(e))}var ume,qR=$(()=>{g0();ume=ve(Ie(),1);Fe()});function HR(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SITE_MODEL_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.site),r){if(Ha&&(r.domain_active=!1),!he)try{localStorage.setItem("c3-site",JSON.stringify({id:r.id,host:window.location.host}))}catch(i){console.error(i)}return{...t,...r,crdt_state:er.Published}}break}return t}var fme,WR=$(()=>{tr();Fe();Dt();fme=ve(Ie(),1)});function YX(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SCAFFOLDING_FULFILLED:case Ne.FETCH_ADMIN_LIST_FULFILLED:case Ne.FETCH_CONTENT_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.scaffolding),r)return zf.default.isArray(r)||(r=[r]),{...t,...r.reduce((i,n)=>(n.page_type!=="page"||he&&n.access_level!=="public"||(n={...n},delete n.index,delete n.sort,delete n.set_id,delete n.is_homepage,n.purl&&(n.purl=n.purl.toLowerCase()),n.crdt_state=er.Published,i[n.id]=n),i),{})};break;case Ne.DELETE_CONTENT:if(t[e.payload.id]){let i={...t};return delete i[e.payload.id],i}break;case Ne.UPDATE_PAGE:return{...t,[e.meta.id]:zf.default.merge({},zf.default.cloneDeep(t[e.meta.id]),e.payload)}}return t}var zf,C0,VR,$R=$(()=>{tr();xr();Dt();zf=ve(Ie(),1);Fe();C0={byId:YX},VR=Gn(C0)});function XX(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SCAFFOLDING_FULFILLED:case Ne.FETCH_ADMIN_LIST_FULFILLED:case Ne.FETCH_CONTENT_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.scaffolding),r)return{...t,...r.reduce((i,n)=>(n.page_type!=="set"||he&&n.access_level!=="public"||(n={...n},delete n.index,delete n.sort,delete n.set_id,delete n.is_homepage,n.purl&&(n.purl=n.purl.toLowerCase()),n.crdt_state=er.Published,i[n.id]=n),i),{})};break}return t}var P0,jR,GR=$(()=>{tr();xr();Dt();Fe();P0={byId:XX},jR=Gn(P0)});function ZX(t=YR,e){switch(e.type){case Ne.RESET_COMMERCE_CART:try{localStorage.removeItem("cargo-commerce-cart")}catch(n){console.error("Unable to store cart",n)}return{};case Ne.ADD_COMMERCE_PRODUCT_TO_CART:let r=e.payload,i;r.quantity===null?(i={...t},delete i[r.variant_id]):(t[r.variant_id]&&(r={...t[r.variant_id],quantity:Math.max(0,(t[r.variant_id].quantity||0)+r.quantity)}),i={...t,[r.variant_id]:r});try{e.meta?.is_template!==!0&&localStorage.setItem("cargo-commerce-cart",JSON.stringify(i))}catch(n){console.error("Unable to store cart",n)}return i}return t}function JX(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_COMMERCE_PRODUCTS_FULFILLED:let r=e.meta?.options||{},i=(e.payload.data?.data||[]).reduce((o,s,a)=>{let l=t[s?.product_id];return r.onlyNew&&l?(r.idArray===null&&l.sort_index===void 0&&(l.sort_index=a),o):(r.idArray===null&&(s.sort_index=a),KR(s),{...o,[s.product_id]:s})},{});return{...t,...i};case Ne.COMMERCE_PRODUCT_UPDATED:return KR(e.payload),{...t,[e.payload.product_id]:e.payload};break;case Ne.COMMERCE_PRODUCT_DESTROYED:let n={...t};return delete n[e.payload.product_id],n;break}return t}function QX(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SHOP_MODEL_FULFILLED:return{...t,...e.payload.data};case Ne.SHOP_MODEL_UPDATED:return{...t,...e.payload}}return t}var Js,YR,KR,I0,XR,ZR=$(()=>{Js=ve(Ie(),1);xr();tr();Fe();YR={};if(!he)try{YR=JSON.parse(localStorage.getItem("cargo-commerce-cart"))||{},window.__PRELOADED_STATE__&&window.__PRELOADED_STATE__.commerce&&window.__PRELOADED_STATE__.commerce.cart&&delete window.__PRELOADED_STATE__.commerce.cart}catch{}KR=t=>{t.name&&(t.name=Js.default.unescape(t.name)),t.variants?.forEach(e=>{Js.default.each(e.attributes,(r,i)=>{let n=Js.default.unescape(r);delete e.attributes[i],e.attributes[Js.default.unescape(i)]=n})}),Js.default.each(t.attributes,(e,r)=>{let i=e.map(n=>Js.default.unescape(n));delete t.attributes[r],t.attributes[Js.default.unescape(r)]=i})};I0={products:JX,cart:ZX,shop:QX},XR=Gn(I0)});function QR(t=eZ,e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_MEDIA_FULFILLED:let r=e.payload.data;if(r)return{...t,data:JR.default.uniqBy([...t.data,...r],"id")};break}return t}var JR,eZ,ek=$(()=>{tr();Dt();JR=ve(Ie(),1),eZ={data:[],crdt_state:er.Published}});function tk(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SITE_CSS_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.css),r)return{...t,...r,crdt_state:er.Published};break}return t}var Dme,rk=$(()=>{tr();Dt();Dme=ve(Ie(),1)});function A0(t=tZ,e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SCAFFOLDING_FULFILLED:case Ne.FETCH_ADMIN_LIST_FULFILLED:case Ne.FETCH_CONTENT_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.scaffolding),r){let i={...t},n={};return(0,Qs.each)(r,function(o){o.page_type==="set"&&(n.hasOwnProperty(o.id)||(n[o.id]=[])),o.id!=="root"&&o.hasOwnProperty("set_id")&&(n.hasOwnProperty(o.set_id)||(n[o.set_id]=[]),n[o.set_id].push(o.id))}),i.byParent=(0,Qs.mergeWith)({},t.byParent,n,(o,s)=>{if((0,Qs.isArray)(o))return(0,Qs.uniq)(o.concat(s))}),i.bySort={...t.bySort,...r.reduce((o,s)=>(s.id!=="root"&&s.hasOwnProperty("sort")&&(o[s.id]=s.sort),o),{})},i.indexById={...t.indexById,...r.reduce((o,s)=>(s.id!=="root"&&s.hasOwnProperty("index")&&(o[s.id]=s.index),o),{})},i}break}return t}var Qs,tZ,ik=$(()=>{tr();Qs=ve(Ie(),1);Dt();tZ={byParent:{root:[]},bySort:{},indexById:{},liveIndexes:{},crdt_state:er.Published}});function iZ(t=rZ,e){switch(e.type){case Ne.AUTHENTICATE_USER_PENDING:return{...t,authenticating:!0};case Ne.AUTHENTICATE_USER_FULFILLED:if(e.payload?.data?.access_token){if(!he)try{localStorage.setItem("c3-auth",JSON.stringify(e.payload.data))}catch(r){console.error(r)}return{...t,authenticating:!1,authenticated:!0,data:e.payload.data}}else{if(!he)try{localStorage.removeItem("c3-auth")}catch(r){console.error(r)}return{...t,authenticating:!1,authenticated:!1}}case Ne.AUTHENTICATE_USER_REJECTED:if(!he)try{localStorage.removeItem("c3-auth")}catch(r){console.error(r)}return{...t,authenticating:!1,authenticated:!1}}return t}var qme,rZ,nk,ok=$(()=>{qme=ve(Ie(),1);Fe();tr();rZ={authenticating:!1,authenticated:!1};nk=iZ});function nZ(t=sk,e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SITEDESIGN_MODEL_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.design),r)return Bf.default.merge(Bf.default.cloneDeep(t),r.site_design);break;case Ne.UPDATE_SITE_DESIGN:let i=Bf.default.mergeWith({},sk,t,e.payload,(n,o,s,a,l)=>{o===void 0&&l.hasOwnProperty(s)&&delete a[s]});return console.log(">>>>",t,i),i;break}return t}var Bf,sk,ak,lk=$(()=>{tr();Bf=ve(Ie(),1);Dt();sk={images:{},quick_view:{},site:{enableColorFilter:!1,enableHomeLinkActiveStates:!1},cart:{theme:"light"},contact_form:{theme:"light"},crdt_state:er.Published};ak=nZ});function ck(t=uk,e){if(!e.payload)return t;let r;switch(e.type){case Ne.UPDATE_FRONTEND_STATE:return T0.default.mergeWith({},uk,t,e.payload,(i,n,o,s,a)=>{n===void 0&&a.hasOwnProperty(o)&&delete s[o]});case Ne.FETCH_SITE_PACKAGE_FULFILLED:return{...t,hasSiteModel:!0,hasScaffolding:!0,hasSiteDesign:!0,hasSiteCSS:!0,hasSitePackage:!0};case Ne.FETCH_SCAFFOLDING_FULFILLED:return{...t,hasScaffolding:!0};case Ne.FETCH_SITE_MODEL_FULFILLED:return{...t,hasSiteModel:!0};case Ne.FETCH_SHOP_MODEL_FULFILLED:return{...t,hasShopModel:!0};case Ne.FETCH_SITE_CSS_FULFILLED:return{...t,hasSiteCSS:!0};case Ne.FETCH_SITEDESIGN_MODEL_FULFILLED:return{...t,hasSiteDesign:!0};case Ne.PAGES_MOUNTED:return r=[...t.renderedPages,...e.payload.pages],{...t,renderedPages:r};case Ne.PAGES_UNMOUNTED:return{...t,renderedPages:T0.default.difference(t.renderedPages,e.payload.pages)};case Ne.FETCH_CONTENT_REJECTED:return{...t,networkErrors:[...t.networkErrors,{...e.payload.config?.contentIdentifier,code:e.payload.response?.status}]}}return t}var T0,Xme,uk,dk=$(()=>{tr();Fe();Fe();T0=ve(Ie(),1),Xme=Sb(),uk={hasSiteModel:!1,hasScaffolding:!1,hasSiteDesign:!1,hasSiteCSS:!1,hasShopModel:!1,hasSitePackage:!1,quickView:{mode:"default",inited:!1,autoScrolling:!1,elementArray:!1,activeIndex:0,startingIndex:0},contactForm:{transition:!1,inited:!1},adminMode:zr,inAdminFrame:zr,renderedPages:[],networkErrors:[],pageNotFound:!1,fontsLoaded:[],activeHashPurl:"",lastVisiblePid:null}});var R0={};hr(R0,{default:()=>M0,rawReducers:()=>oZ});var M0,oZ,k0=$(()=>{WR();$R();GR();ZR();ek();rk();ik();ok();lk();dk();tr();M0={structure:A0,site:HR,pages:VR,sets:jR,media:QR,css:tk,auth:nk,siteDesign:ak,frontendState:ck,commerce:XR},oZ={pages:C0,sets:P0,commerce:I0}});var pk,pge,hk,fk=$(()=>{pk=ve(n0(),1);xr();dA();pge=ve(NR(),1);tr();qR();y0();k0();Fe();hk=()=>{let t=[],e=(0,pk.createDynamicMiddlewares)(),r=[cA,E0,v0(),e.enhancer],i=df(i0(...r),...t),n=he?{}:window.__PRELOADED_STATE__||{},o=hd(Gn(M0),n,i);return he||(window.store=o,delete window.__PRELOADED_STATE__),{store:o}}});function S(t,e,r,i,n,o){e||(e={});var s,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?s=e[a]:l[a]=e[a];var p={type:t,props:l,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--sZ,__i:-1,__u:0,__source:n,__self:o};if(typeof t=="function"&&(s=t.defaultProps))for(a in s)l[a]===void 0&&(l[a]=s[a]);return lt.vnode&&lt.vnode(p),p}var sZ,xge,fe=$(()=>{ke();ke();sZ=0,xge=Array.isArray});var mk=$(()=>{ke();fe()});var gk=$(()=>{});var ss,Uf=$(()=>{Ze();gk();fe();ss=({customStyle:t,className:e})=>S("div",{style:t,className:`caution-processing${e?" "+e:""}`})});var vk=$(()=>{});var yk,bk,N0,wk,xk=$(()=>{Ze();mt();xr();Zs();Uf();vk();fe();yk=0,bk=!(typeof window<"u"&&window.document&&window.document.createElement),N0=class extends me{constructor(e){if(super(e),bk)return;let r=new URLSearchParams(window.location.search.replace(/\+/g,"%2B")),i=["cargo.site","local.dev.cargo.site","local.dev.cargo.site","dev.cargo.site"];this.state={error:null,loading:!1,checkingAutomatedAuth:!0,formView:"login",resetEmail:null,prevFormState:null,prefilledEmail:r.get("email"),isHomePageLogin:i.includes(window.location.hostname)},e.canCreateNewAccount?this.state.formView="newAcct":e.magicEmailLogin&&(this.state.formView="magicEmail"),this.containerRef=ze.createRef();let n=r.get("t");if(this.redirectURL=r.get("rd"),r.has("t")){r.delete("t");let o=r.toString();o.length>0&&(o="?"+o),window.history.replaceState({},document.title,window.location.origin+window.location.pathname+o)}if(this.props.loginToUdotCargoOnly){this.state.checkingAutomatedAuth=!1;return}if(yk>=1){this.state.checkingAutomatedAuth=!1;return}if(n==="")this.state.checkingAutomatedAuth=!1;else if(r.has("c")&&r.has("signature"))fetch(`${sr}/auth/verify?${r.toString()}`,{method:"get"}).then(async s=>{let a=await s.json();a.access_token&&a.id?(this.props.setAuthData(a.access_token,a.id),this.props.onLoginSuccess?.(a),window.history.replaceState({},document.title,window.location.origin+window.location.pathname)):this.setState({checkingAutomatedAuth:!1,error:"Something went wrong. Please try again later."}),requestAnimationFrame(()=>{this.setState({checkingAutomatedAuth:!1})})}).catch(s=>{console.log(s),this.setState({checkingAutomatedAuth:!1,error:"Something went wrong. Please try again later."})});else{let s=!1;this.props.domain_active&&n===null&&(s=!0);let a={timeout:3e3,jwt:n,bounce:s};this.props.site_url&&(a.site_url=this.props.site_url),this.props.site_id&&(a.site_id=this.props.site_id),this.props.getAuthToken(a).catch(l=>{console.log("Failed to fetch auth token.")}).finally(()=>{yk++,!s&&requestAnimationFrame(()=>{this.props.onCookieAuthComplete?.(),this.setState({checkingAutomatedAuth:!1})})})}}handleInitialTab=e=>{if(e.key!=="Tab")return;let r=this.containerRef.current;if(!r||r.contains(document.activeElement))return;let i=r.querySelector('input, select, textarea, button, [tabindex]:not([tabindex="-1"])');i&&(e.preventDefault(),i.focus())};ForgotButton=()=>{let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"};return this.state.formView==="newAcct"?null:S("button",{className:"forgot",style:e,type:"button",onClick:r=>{r.preventDefault(),this.setState({formView:"forgot",error:null,prevFormState:"login"})},children:"Forgot?"})};createOrLogin=()=>{if(!this.state.isHomePageLogin)return this.ForgotButton();let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"};return S("button",{className:"account",type:"button",style:e,onClick:r=>{r.preventDefault(),this.state.formView==="login"&&this.setState({formView:"newAcct",error:null,prevFormState:"login"}),this.state.formView==="newAcct"&&this.setState({formView:"login",error:null,prevFormState:"newAcct"})},children:[this.state.formView==="newAcct"?"Login to an existing account":null,this.state.formView==="login"?"New Account":null]})};render(){if(bk||this.state.checkingAutomatedAuth||this.props.cookieAuthOnly)return null;let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"},r="Cargo Login";return this.state.formView==="newAcct"?r="New Account":this.state.formView==="forgot"&&(r="Reset Password"),S("div",{id:"login",className:`login-window${this.props.noOverlay===!0?" not-overlaid":""}`,ref:this.containerRef,onMouseUp:i=>{if(this.props.canClickout&&!i.target.closest(".login-modal")){let n=new CustomEvent("remove-login-form");document.dispatchEvent(n),this.props.onClickout&&!this.state.loading&&this.props.onClickout()}},children:S("div",{className:"login-modal custom login-frame",children:[S("div",{className:"login-header",children:[S("div",{className:"logo-box"}),S("div",{className:"title",children:r})]}),this.state.formView==="newAcct"?S("form",{children:[S("div",{className:"input-fields new",children:[this.state.prefilledEmail?null:S("div",{className:"text-input bars",children:S("input",{type:"text",name:"email",id:"email",placeholder:"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),S("div",{className:"text-input bars",children:S("input",{type:"password",name:"password",placeholder:"Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?S("div",{className:"under-input-row",children:S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),this.state.formView==="newAcct"?S("div",{className:"terms",children:["By creating an account, you agree to our ",S("a",{href:"https://cargo.site/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"}),S("br",{}),"and ",S("a",{href:"https://cargo.site/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),"."]}):null,S("div",{className:"login-options",children:[S("button",{className:"login",type:"submit",style:e,onClick:i=>{i.preventDefault(),this.setState({error:null,loading:!0});let n=new FormData(this.containerRef.current.querySelector("form"));this.validateLogin(n)&&this.login(n)},children:[this.state.loading&&S(ss,{className:"accent default-border-radius"}),"OK"]}),this.createOrLogin()]})]}):null,this.state.formView==="login"||this.state.formView==="magicEmail"?S("form",{children:[S("div",{className:"input-fields",children:[this.state.prefilledEmail?null:S("div",{className:"text-input bars",children:this.state.formView==="magicEmail"?S("input",{type:"text",name:"cargoMagicField",id:"cargoMagicField",autoComplete:"email",placeholder:"Enter your e\u200Cma\u200Cil a\u200Cdd\u200Cres\u200Cs",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}}):S("input",{type:"text",name:"email",id:"email",placeholder:this.state.formView==="magicEmail"?"Enter your e\u200Cma\u200Cil address":"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.formView!=="magicEmail"&&S("div",{className:"text-input bars",children:S("input",{type:"password",name:"password",placeholder:"Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.isHomePageLogin?S("div",{className:"under-input-row",children:[this.state.error?S(de,{children:S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null,S("span",{children:this.ForgotButton()})]}):S(de,{children:this.state.error?S("div",{className:"under-input-row",children:[S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:this.state.error}),S("span",{})]}):null})]}),S("div",{className:"login-options",children:[S("button",{className:"login",type:"submit",style:e,onClick:i=>{i.preventDefault(),this.setState({error:null,loading:!0});let n=!0,o=new FormData(this.containerRef.current.querySelector("form"));this.state.formView==="magicEmail"&&(n=this.validateMagicLogin(o)),n&&this.login(o)},children:[this.state.loading&&S(ss,{className:"accent default-border-radius"}),"OK"]}),this.state.formView!=="magicEmail"&&this.createOrLogin()]})]}):null,this.state.formView==="forgot"?S(de,{children:S("form",{children:[S("div",{className:"enter-email",children:"Enter an email address associated with your Cargo Account:"}),S("div",{className:"input-fields",children:[S("div",{className:"text-input bars",children:S("input",{type:"text",name:"email",id:"email",placeholder:"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?S("div",{className:"under-input-row",children:S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),S("div",{className:"login-options",children:[S("button",{className:"login",type:"submit",style:e,onClick:i=>{i.preventDefault(),this.setState({error:null,loading:!0});let n=new FormData(this.containerRef.current.querySelector("form"));this.forgot(n)},children:[this.state.loading&&S(ss,{className:"accent default-border-radius"}),"Submit"]}),S("button",{className:"forgot",style:e,type:"button",onClick:i=>{i.preventDefault(),this.setState({formView:this.state.prevFormState?this.state.prevFormState:"login",error:null})},children:"Cancel"})]})]})}):null,this.state.formView==="reset"?S(de,{children:S("form",{children:[S("div",{className:"enter-email",children:[this.state.resetEmail?S(de,{children:["We\u2019ve sent a reset code to ",S("br",{}),this.state.resetEmail]}):S(de,{children:"We\u2019ve sent a reset code to the email associated with your Cargo Account:"})," 							"]}),S("div",{className:"input-fields",children:[S("div",{className:"text-input bars",children:S("input",{type:"text",name:"pwreset",placeholder:"Enter Reset Code",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),S("div",{className:"text-input bars",children:S("input",{type:"password",name:"password",autoComplete:"new-password",placeholder:"Enter a new Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),S("div",{className:"text-input bars",children:S("input",{type:"password",name:"password_reset_confirm",autoComplete:"new-password",placeholder:"Confirm new Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?S("div",{className:"under-input-row",children:S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),S("div",{className:"login-options",children:[S("button",{className:"login",type:"submit",style:e,onClick:i=>{i.preventDefault();let n=new FormData(this.containerRef.current.querySelector("form")),o=this.validateForm(n);o&&(this.setState({error:null,loading:!0}),this.forgot(n)),o||this.setState({loading:!1})},children:[this.state.loading&&S(ss,{className:"accent default-border-radius"}),"OK"]}),S("button",{className:"forgot",type:"button",style:e,onClick:i=>{i.preventDefault(),this.setState({formView:"login",error:null})},children:"Cancel"})]})]})}):null,this.state.formView==="magicEmailSent"?S("form",{children:[S("div",{className:"input-fields",children:S("div",{className:"field-message",style:{paddingTop:"20px"},children:S("span",{children:"We\u2019ve emailed you a login link"})})}),S("div",{className:"login-options",children:S("button",{className:"login",type:"submit",style:{visibility:"hidden"},onClick:i=>{i.preventDefault(),i.target.closest(".login-modal").style.display="none"},children:"OK"})})]}):null]})})}login=e=>{if(this.props.site_url&&e.append("site_url",this.props.site_url),this.props.templateID&&e.append("site_id",this.props.templateID),this.state.prefilledEmail&&e.append("email",this.state.prefilledEmail),this.state.formView==="magicEmail"){let n=e.get("cargoMagicField");e.append("email",n),e.delete("cargoMagicField"),fetch(`${sr}/auth/send`,{method:"post",body:e,credentials:"include"}).then(async o=>{if(o.ok)this.setState({formView:"magicEmailSent",loading:!1});else{let s=await o.json();this.setState({error:s.message||"Something went wrong. Please try again later.",loading:!1})}}).catch(o=>{console.log(o),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.setState({loading:!1})});return}let i=this.state.formView==="newAcct"?"/dispatch/admin/loginCreate":"/dispatch/admin/login";if(e.append("network","c3"),!this.props.site_url&&!this.props.templateID&&this.state.formView==="newAcct"){let n=window.store.getState(),o=Xs==="https://cargo.site"?1597765:1791886;if(n){let s=n.templates?n.templates.flatMap(a=>a.sites):[];if(s.length>0){let a=s.length-1,l=Math.floor(Math.random()*a),p=s[l];p&&(o=p?.id?p.id:o)}}e.append("site_id",o)}fetch(Xs+i,{method:"post",body:e,credentials:"include"}).then(async n=>{let o=await n.json(),{access_token:s,id:a,bounce_jwt:l}=o.jdata||{};s&&a?(this.props.loginToUdotCargoOnly!==!0&&this.props.setAuthData(s,a),this.props.domain_active&&l?this.props.getAuthToken({reverse_bounce_jwt:l}).then(()=>{this.redirectURL?window.location.href=this.redirectURL:this.props.onLoginSuccess?.(o.jdata)}):this.redirectURL?window.location.href=this.redirectURL:this.props.onLoginSuccess?.(o.jdata)):this.setState({error:o?.error||"Something went wrong. Please try again later.",loading:!1})}).catch(n=>{console.log(n),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.props.loadingTillFormRemoval!==!0&&this.setState({loading:!1})})};forgot=e=>{e.append("network","c3"),this.props.site_url&&e.append("site_url",this.props.site_url),fetch(Xs+"/dispatch/auth/handleResetFormPost",{method:"post",body:e,credentials:"include"}).then(async r=>{let i=await r.json();if(i.error&&i.error?.[0]?.length>0)this.setState({error:i.error[0],loading:!1});else if(this.state.formView==="forgot")this.setState({formView:"reset",resetEmail:e.get("email")});else{let n=new FormData;n.set("email",this.state.resetEmail),n.set("password",e.get("password")),this.login(n)}}).catch(r=>{console.log(r),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.setState({loading:!1})})};validateMagicLogin(e){let r=null;for(let i of e.entries()){let[n,o]=i;n==="cargoMagicField"&&(o===""||!o)&&this.state.formView==="magicEmail"&&(o===""||!o)&&(r="Field cannot be empty.")}return r?(this.setState({error:r,loading:!1}),!1):!0}validateLogin(e){let r=null;for(let i of e.entries()){let[n,o]=i;n==="email"&&(o===""||!o)&&!this.state.prefilledEmail&&(this.state.formView==="newAcct"&&(o===""||!o)?r="Fields cannot be empty.":r="Incorrect Username or Password."),n==="password"&&(o===""||!o)&&r===null&&(r="Fields cannot be empty.")}return r?(this.setState({error:r,loading:!1}),!1):!0}validateForm(e){var r=e.get("pwreset").trim(),i=e.get("password").trim(),n=e.get("password_reset_confirm").trim();return r==""?(this.setState({error:"Reset code cannot be empty."}),!1):i==""||n==""?(this.setState({error:"Password cannot be empty."}),!1):i!=n?(this.setState({error:"Passwords do not match."}),!1):!0}componentDidMount=()=>{this.animateContainer(),document.addEventListener("keydown",this.handleInitialTab,!0)};componentDidUpdate=()=>{this.animateContainer()};componentWillUnmount(){document.removeEventListener("keydown",this.handleInitialTab,!0)}animateContainer=()=>{this.props.animateIn===!1?requestAnimationFrame(()=>{this.containerRef.current&&this.containerRef.current?.classList?.add("active-immediate")}):this.containerRef.current&&!this.containerRef.current.classList.contains("active")&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.containerRef?.current&&this.containerRef?.current?.classList.add("active")})})}},wk=Ue(t=>({site_url:t.site?.site_url,site_id:t.site?.id,domain_active:t.site?.domain_active}),(t,e)=>Bt({getAuthToken:e.getAuthTokenAction,setAuthData:(r,i)=>({type:"AUTHENTICATE_USER_FULFILLED",payload:{data:{access_token:r,id:i}}})},t))(N0)});var Nn,Ja=$(()=>{mt();fe();Nn=t=>e=>S(t,{store:qh(),...e})});function aZ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cZ(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.filter(function(i){return i}).join(" ")}var ave,lve,O0,D0,L0,ou,lZ,uZ,Sk,qf,uve,_k=$(()=>{ns();ns();Wh();Ze();Gh();za();Ul();$h();ave=function(t){Yi(e,t);function e(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,i.history=jh(i.props),i}var r=e.prototype;return r.render=function(){return ze.createElement($s,{history:this.history,children:this.props.children})},e}(ze.Component),lve=function(t){Yi(e,t);function e(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,i.history=vP(i.props),i}var r=e.prototype;return r.render=function(){return ze.createElement($s,{history:this.history,children:this.props.children})},e}(ze.Component),O0=function(e,r){return typeof e=="function"?e(r):e},D0=function(e,r){return typeof e=="string"?Bi(e,null,null,r):e},L0=function(e){return e},ou=ze.forwardRef;typeof ou>"u"&&(ou=L0);lZ=ou(function(t,e){var r=t.innerRef,i=t.navigate,n=t.onClick,o=zi(t,["innerRef","navigate","onClick"]),s=o.target,a=jt({},o,{onClick:function(p){try{n&&n(p)}catch(f){throw p.preventDefault(),f}!p.defaultPrevented&&p.button===0&&(!s||s==="_self")&&!aZ(p)&&(p.preventDefault(),i())}});return L0!==ou?a.ref=e||r:a.ref=r,ze.createElement("a",a)}),uZ=ou(function(t,e){var r=t.component,i=r===void 0?lZ:r,n=t.replace,o=t.to,s=t.innerRef,a=zi(t,["component","replace","to","innerRef"]);return ze.createElement(Vs.Consumer,null,function(l){l||Vn(!1);var p=l.history,f=D0(O0(o,l.location),l.location),c=f?p.createHref(f):"",m=jt({},a,{href:c,navigate:function(){var g=O0(o,l.location),x=Si(l.location)===Si(D0(g)),_=n||x?p.replace:p.push;_(g)}});return L0!==ou?m.ref=e||s:m.innerRef=s,ze.createElement(i,m)})}),Sk=function(e){return e},qf=ze.forwardRef;typeof qf>"u"&&(qf=Sk);uve=qf(function(t,e){var r=t["aria-current"],i=r===void 0?"page":r,n=t.activeClassName,o=n===void 0?"active":n,s=t.activeStyle,a=t.className,l=t.exact,p=t.isActive,f=t.location,c=t.sensitive,m=t.strict,v=t.style,g=t.to,x=t.innerRef,_=zi(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return ze.createElement(Vs.Consumer,null,function(E){E||Vn(!1);var L=f||E.location,O=D0(O0(g,L),L),M=O.pathname,D=M&&M.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),P=D?qa(L.pathname,{path:D,exact:l,sensitive:c,strict:m}):null,U=!!(p?p(P,L):P),N=typeof a=="function"?a(U):a,F=typeof v=="function"?v(U):v;U&&(N=cZ(N,o),F=jt({},F,s));var V=jt({"aria-current":U&&i||null,className:N,style:F,to:O},_);return Sk!==qf?V.ref=e||x:V.innerRef=x,ze.createElement(uZ,V)})})});var On,Pt,Mt,kt,Br=$(()=>{On=new Map;typeof window<"u"&&(window.listeners=On);Pt=(t,e,r,i={})=>{let n=t;for(;n&&(On.has(n)&&On.get(n).has(e)&&(On.get(n).get(e)&&On.get(n).get(e)[0]==null&&console.trace(t,e,r,i),On.get(n).get(e).forEach(o=>o(r))),i.bubbles!==!1);)n=n.parentNode||n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&n.host},Mt=(t,e,r)=>{if(!t){console.error("Unable to subscribe to non-existing element");return}On.has(t)||On.set(t,new Map);let i=On.get(t);i.has(e)||i.set(e,[]);let n=i.get(e);n.includes(r)||n.push(r)},kt=(t,e,r)=>{if(!On.has(t))return;let i=On.get(t);if(i.has(e)){if(!r){i.delete(e);return}i.set(e,i.get(e).filter(n=>n!==r)),i.get(e).length===0&&i.delete(e),i.size===0&&On.delete(t)}}});function Vf(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;let r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(let n=0;n<r.length;n++)if(!hasOwnProperty.call(e,r[n])||!Object.is(t[r[n]],e[r[n]]))return!1;return!0}function mn(t){if(he)return t;let e,r,i,n=()=>{e={primitiveResults:null,referenceResults:null,primitiveArgs:null,referenceArgs:null},r=!1,i=void 0};n();let o=function(){let a=arguments.length-1;if(a===-1)return r===!1&&(i=t.call(this),r=!0),i;let l=e;for(let v=0;v<a;v+=1){let g=arguments[v],x=g===null||typeof g!="object"&&typeof g!="function",_;x?l.primitiveArgs===null?_=l.primitiveArgs=new Map:_=l.primitiveArgs:l.referenceArgs===null?_=l.referenceArgs=new WeakMap:_=l.referenceArgs,_.has(g)===!1?(l={primitiveResults:null,referenceResults:null,primitiveArgs:null,referenceArgs:null},_.set(g,l)):l=_.get(g)}let p,f=arguments[a],c=f===null||typeof f!="object"&&typeof f!="function",m;return c?l.primitiveResults===null?m=l.primitiveResults=new Map:m=l.primitiveResults:l.referenceResults===null?m=l.referenceResults=new WeakMap:m=l.referenceResults,m.has(f)?p=m.get(f):(p=t.apply(this,arguments),m.set(f,p)),p};return o.clear=function(){let a=arguments.length-1;if(a===-1){n();return}let l=e;for(let c=0;c<a;c+=1){let m=arguments[c],g=m===null||typeof m!="object"&&typeof m!="function"?l.primitiveArgs:l.referenceArgs;if(g===null)return;l=g.get(m)}let p=arguments[a];p===null||typeof p!="object"&&typeof p!="function"?(l.primitiveArgs!==null&&l.primitiveArgs.delete(p),l.primitiveResults!==null&&l.primitiveResults.delete(p)):(l.referenceArgs!==null&&l.referenceArgs.delete(p),l.referenceResults!==null&&l.referenceResults.delete(p))},o}var ea,ls,dZ,F0,as,pZ,hZ,Hf,Ck,Pk,Wf,Ek,Ik,su,_i=$(()=>{ea=ve(Ie(),1);_r();Fe();ke();Br();ls=(t={},e)=>{let r={retina:window.devicePixelRatio?window.devicePixelRatio>=1.2:!1,square:!1,url:"",webgl:t.hasOwnProperty("t")&&t.t=="webgl"};t=ea.default.extend(r,t),t.t==="original"&&(t.retina=!1),t.retina===!0&&!t.webgl&&(t.q==null&&(t.q=75),t.hasOwnProperty("w")&&t.w!=null&&t.w!=null&&(t.w=Math.min(t.w*2,e.width)),t.hasOwnProperty("h")&&t.h!=null&&t.h!=null&&(t.h=Math.min(t.h*2,e.height))),t.w&&t.w>e.width&&(t.w=e.width),t.h&&t.h>e.height&&(t.h=e.height);var i=dZ(t.w,t.h,e);t.w!==void 0&&(t.w=i.w),t.h!==void 0&&(t.h=i.h);var n=["t","w","h","q","c"],o=[];return ea.default.each(t,function(s,a){n.indexOf(a)===-1||s===""||(a==="c"?o.push("c/"+s.x+"/"+s.y+"/"+s.w+"/"+s.h):o.push(a+"/"+s))},void 0),e.hash!==void 0&&e.name!==void 0&&i.w>0?t.url="https://freight.cargo.site/"+o.join("/")+"/i/"+e.hash+"/"+e.name:t.url="",t},dZ=(t,e,r)=>{let i=t,n=e,o=parseInt(r.width),s=parseInt(r.height);if(o==s)i=t||e||o,n=i;else if(t&&!e){let a=o/t;n=Math.floor(s/a),i=t}else if(e&&!t){let a=s/e;i=Math.floor(o/a),n=e}else{let a=Math.min(s/e,o/t);i=Math.floor(o/a),n=Math.floor(s/a)}return{w:i,h:n}},F0=(t=1,e)=>{!t||t<1||requestAnimationFrame(()=>{e?.(),F0(--t,e)})};as=(t,e,r,i,n=0,o={})=>{o.context=o.context||{};let s=(t.byParent[i.id]||[]).reduce((a,l)=>(a[t.indexById[l]]=l,a),{});for(;n>=0&&n<i.page_count&&o.context.hasBreak!==!0;){let a=s[n],l=a&&(e.byId[a]||r.byId[a]);if(!(l?.page_type==="set"&&o.includeSets!==!0)&&o.callback?.(i.id,n,l)==="break"){o.context.hasBreak=!0;break}l?.page_type==="set"&&as(t,e,r,l,o.reverse===!0?l.page_count-1:0,{...o,traverseUp:!1}),o.reverse===!0?n--:n++}if(o.traverseUp!==!1&&(o.reverse===!0&&n<0||o.reverse===!1&&n>i.page_count-1)){let a=r.byId[ea.default.findKey(t.byParent,p=>p.includes(i.id))],l=t.indexById[i.id];if(a&&l!==void 0){if(o.includeSets&&o.callback?.(a.id,l,i)==="break"){o.context.hasBreak=!0;return}as(t,e,r,a,l+(o.reverse===!0?-1:1),o)}}};pZ=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout;lt.debounceRendering=t=>{pZ(()=>{Pt(document,"preact-render-start"),t(),Pt(document,"preact-render-complete")})};hZ=lt.debounceRendering,Hf=null,Ck=()=>{lt.debounceRendering=t=>{Hf=t}},Pk=t=>{Hf&&!t&&(Pt(document,"preact-render-start"),Hf(),Pt(document,"preact-render-complete")),Hf=null,lt.debounceRendering=hZ},Wf=new WeakMap,Ek=lt.diffed;lt.diffed=t=>{Wf.has(t)&&Wf.get(t)(t.__e),Ek&&Ek(t)};Ik=(t,e)=>(Wf.set(t,e),()=>{Wf.delete(t)}),su=(t,e)=>{if(!t)return null;let r="",i=(o,s)=>{let a=s.style?.getPropertyValue(o);return a!==""&&a!==void 0?a:null},n=[];return ea.default.each(t.rules,o=>{let s=o.selectorText,a={},l=!1,p=!1,f=!1;o.cssText&&o.cssText.includes("--text-style")&&(p=!0,n.push(s+" a"),n.push(s+" a:hover")),o.cssText&&ea.default.each(n,v=>{o.cssText.includes(v)&&(p=!0)}),o?.selectorText?.includes(".mobile")&&(f=!0),ea.default.each(e,v=>{let g=!1;Array.isArray(v.denyList)&&v.denyList.forEach(_=>{_.includes("match:")&&s?.match(_.replace("match:",""))&&(g=!0),s&&s===_&&(g=!0)});let x=!1;Array.isArray(v.allowList)?v.allowList.forEach(_=>{_.includes("match:")&&s?.match(_.replace("match:",""))&&(x=!0),s&&s===_&&(x=!0)}):x=!0,(p||f)&&(g=!0),!(g===!0||x===!1)&&(a=v.properties.reduce((_,E)=>(E&&(_[E]=i(E,o)),_),a))});let c=".mobile "+s,m=Array.from(t.rules).find(v=>v.selectorText===c);m&&Object.keys(a).forEach(v=>{i(v,m)&&(a[v]=null)}),!(Object.values(a).every(v=>v===null)||Object.values(a).length===0)&&(r+=c+" { ",ea.default.each(a,(v,g)=>{if(v){let x=v.split(" ").reduce((_,E,L)=>_+` calc(${E} * var(--mobile-padding-offset))`,"");r+=`${g}: ${x};`}}),r+=" } ")}),r}});function vZ(t,e){let r=gZ(t.pages.byId,au),i=mZ(r,t.structure.bySort),n=fZ(r);return{renderedPages:r,renderedPins:i,nestingMap:n,sortMap:t.structure.bySort,adminMode:t.frontendState.adminMode}}var yr,us,B0,au,z0,fZ,mZ,gZ,Ak,Pd=$(()=>{ke();Ze();_r();yr=ve(Ie(),1);mt();_i();fe();us=Tn(),B0=()=>{},au=[],z0=class extends Mr{constructor(e){super(e),this.state={adjustPairs:[],levelData:{},pageHeights:{},renderedPins:[],renderedPages:[],nestingMap:{},onPageMount:r=>{au=[...au,r]},onPageUnmount:r=>{au=au.filter(i=>i!==r)}},B0=this.updateHeights}updateHeights=e=>{this.setState(r=>({pageHeights:{...r.pageHeights,...e}}))};getTallestOfAdjusterCandidates=e=>{let r=null,i=[];yr.default.each(e,o=>{i.push({pageID:o.id,pageName:o.title,pageHeight:this.getHeightById(o.id)})});let n=yr.default.maxBy(i,o=>o.pageHeight);return n!==void 0?yr.default.filter(e,o=>o.id===n.pageID)[0]:!1};componentDidUpdate=(e,r)=>{this.makePinAdjustments(e,r)};findTallestOverlayAdjusterPageInLevel=(e,r)=>{let i=e.filter(n=>n.pin_options?.overlay===!0&&n.pin_options.adjust===!0);return i.length>0?this.getTallestOfAdjusterCandidates(i):null};getAdjustOnlyPageHeights=(e,r)=>{let i=yr.default.filter(this.props.nestingMap[r][e],o=>o.pin_options?.adjust&&!o.pin_options?.overlay),n=0;return yr.default.each(i,o=>{n+=this.getHeightById(o.id)}),n};getAdjustOnlyPinsByLevel=(e,r)=>yr.default.filter(this.props.nestingMap[r][e],i=>!i?.pin_options?.overlay);getOverlayPinsByLevel=(e,r)=>yr.default.filter(this.props.nestingMap[r][e],i=>i?.pin_options?.overlay);getClosestPageByProximity=(e,r)=>e.sort((i,n)=>r==="top"?this.props.sortMap[i.id]-this.props.sortMap[n.id]:this.props.sortMap[n.id]-this.props.sortMap[i.id])[0];getPagesToAdjust=(e,r)=>{let i=[],n=null,o=this.getAdjustOnlyPinsByLevel(e,r);if(o.length>0?i.push(this.getClosestPageByProximity(o,e)):yr.default.each(this.props.nestingMap,(s,a)=>{if(parseInt(a)>r&&s[e].length>0){let l=s[e].filter(f=>f.pin_options?.overlay===!0),p=s[e].filter(f=>f.pin_options?.overlay===!1);if(i=l.length>0?l:[],i.length===0&&p?.length>0&&i.push(this.getClosestPageByProximity(p,e)),n=a,i.length>0)return!1}}),i[0]===void 0){let s=this.props.renderedPages.filter(l=>l.pin===!1).sort((l,p)=>this.props.sortMap[l.id]-this.props.sortMap[p.id]),a=e==="top"?0:s.length-1;s.length>0&&i.push(s[a])}return{adjustedPages:i,adjustedLevel:n}};getHeightById=e=>this.state.pageHeights[e]??au.find(r=>r.id===e)?.getBoundingClientRect().height;makePinAdjustments=(e,r)=>{if(!this.props.renderedPages||this.props.renderedPages.length===0||yr.default.isEqual(this.props.renderedPins,e.renderedPins)&&yr.default.isEqual(this.state.pageHeights,r.pageHeights)&&yr.default.isEqual(this.props.renderedPages,e.renderedPages)&&yr.default.isEqual(this.props.sortMap,e.sortMap))return;let i=[],n={levels:{},locations:{top:{totalHeight:0},bottom:{totalHeight:0}}};yr.default.each(this.props.nestingMap,(l,p)=>{let f={};p=parseInt(p),f.level=p,yr.default.each(l,(c,m)=>{if(m==="center")return;f[m]={adjustsSelf:!1,totalHeight:0,startingHeight:null,adjusterId:null,adjusterHeight:null,adjustedLevel:null,adjusteeIDs:null,hasOverlayPins:null};let v=f[m];v.hasOverlayPins=this.getOverlayPinsByLevel(m,p).length>0;let g=this.findTallestOverlayAdjusterPageInLevel(c,m);if(g){v.adjusterId=g.id,v.adjusterHeight=this.getHeightById(g.id),v.adjustsSelf=this.getAdjustOnlyPinsByLevel(m,p).length>0;let L=this.getPagesToAdjust(m,p).adjustedPages;L?.length>0&&(v.adjustedLevel=this.props.renderedPins[L[0].id]?.depth??"content",v.adjusteeIDs=yr.default.map(L,"id"),i[g.id]={adjusts:yr.default.map(L,"id"),location:m,adjustedHeight:this.getHeightById(g.id)})}let x=0,_=g?this.getHeightById(g.id):0,E=!0;v.totalHeight=(E?_:0)+this.getAdjustOnlyPageHeights(m,p),yr.default.each(n.levels,function(L,O){O<p&&(x+=L[m].totalHeight)}),v.startingHeight=x===0?null:x}),n.levels[p]=f});let s=(this.props.nestingMap[0]?.top||[]).filter(l=>{let p=l.pin_options;return p?.fixed===!0&&p?.adjust===!0}),a=s.length>0?this.getHeightById(this.getTallestOfAdjusterCandidates(s)?.id):null;(!yr.default.isEqual(r.adjustPairs,i)||!yr.default.isEqual(r.renderedPins,this.props.renderedPins)||!yr.default.isEqual(r.levelData,n))&&this.setState({adjustPairs:i,renderedPins:this.props.renderedPins,levelData:n,totalTopFixedPinsHeight:a})};getAdjustingLevelHeight=(e,r,i)=>{let n=null;return yr.default.each(e.levels,o=>{o[i].adjustedLevel===r&&(n=o[i].totalHeight)}),n};render(){return S(us.Provider,{value:this.state,children:this.props.children||null})}},fZ=mn(t=>{let e=store.getState();return t.reduceRight((r,i)=>{let n=$e.getParentSetList(e,i.id).length-1;i.pin===!0&&i.pin_options.fixed===!0&&(n=0),r[n]||(r[n]={top:[],bottom:[],center:[]});let o=r[n],s=i.pin?i.pin_options.position:"center",a=o[s];return a.push(i),a.sort((l,p)=>e.structure.bySort[l.id]-e.structure.bySort[p.id]),r},{})}),mZ=mn((t,e)=>{let r=store.getState(),i=t.map(n=>({depth:$e.getParentSetList(r,n.id).length-1,pageListSort:e[n.id],id:n.id,fixed:n.pin_options?.fixed&&n.pin_options?.fixed===!0})).sort((n,o)=>n.pageListSort-o.pageListSort).sort((n,o)=>{if(n.fixed||o.fixed)return n.depth-o.depth});return t.reduceRight((n,o,s)=>{if(o.pin===!0&&yr.default.isPlainObject(o.pin_options)){let a=$e.getParentSetList(r,o.id).length-1;n[o.id]={depth:o.pin_options.fixed?0:$e.getParentSetList(r,o.id).length-1,originalDepth:a,location:o.pin_options?.position,type:o.pin_options.fixed?"fixed":o.pin_options.overlay?"overlay":"adjust",adjusts:o.pin_options?.adjust,sort:e[o.id],pinSort:i.findIndex(l=>l.id===o.id)+1}}return n},{})}),gZ=mn((t,e)=>e.map(r=>t[r.id]).filter(r=>r!==void 0&&r.overlay!==!0));Ak=Ue(vZ)(z0)});function qt(t){class e extends me{constructor(i){super(i)}render(i){return S(t,{...this.props,pageInfo:this.context})}}return e.contextType=Tk,e}var $f,Tk,U0,jf,Ur=$(()=>{ke();mt();fe();$f=new Map,Tk=Tn({isEditing:!1,pid:null,filterIndexes:[],setPageData:()=>!1,getPageData:()=>!1},"PageInfoContext"),U0=class extends me{constructor(e){super(e)}setPageData=(e={},r)=>{if(!this.props.pageRef.current)return;let n=Array.from(this.props.pageRef.current.querySelectorAll(r.tagName)).indexOf(r);if(n!==-1){let o=$f.get(this.props.value.pid+"-"+r.tagName+"-"+n);o?o={...o,...e}:o=e,$f.set(this.props.value.pid+"-"+r.tagName+"-"+n,o)}};getPageData=e=>{if(!this.props.pageRef.current)return null;let i=Array.from(this.props.pageRef.current.querySelectorAll(e.tagName)).indexOf(e);return i!==-1?$f.get(this.props.value.pid+"-"+e.tagName+"-"+i)||{}:{}};getContextObject=()=>(this.props.value!==this.lastProps?.value&&(this.currentContextValue={...this.props.value,setPageData:this.setPageData,getPageData:this.getPageData}),this.lastProps=this.props,this.currentContextValue);render(e){return S(Tk.Provider,{value:this.getContextObject(),children:e.children})}componentDidUpdate(e){e.adminMode!==this.props.adminMode&&$f.clear()}};jf=Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(U0)});var Gf,Mk,Rk=$(()=>{Gf=()=>new Map,Mk=(t,e,r)=>{let i=t.get(e);return i===void 0&&t.set(e,i=r()),i}});var kk,Nk=$(()=>{kk=()=>new Set});var Ok,Rve,Dk=$(()=>{Ok=Array.from,Rve=Array.isArray});var Kf,Lk=$(()=>{Rk();Nk();Dk();Kf=class{constructor(){this._observers=Gf()}on(e,r){Mk(this._observers,e,kk).add(r)}once(e,r){let i=(...n)=>{this.off(e,i),r(...n)};this.on(e,i)}off(e,r){let i=this._observers.get(e);i!==void 0&&(i.delete(r),i.size===0&&this._observers.delete(e))}emit(e,r){return Ok((this._observers.get(e)||Gf()).values()).forEach(i=>i(...r))}destroy(){this._observers=Gf()}}});var zk,lu,Fk,q0,nt,H0=$(()=>{zk=ve(Ie());Lk();Fe();q0=class extends Kf{constructor(){super(),this.data={baseUnit:-1,mobile:{portrait:!0,active:!1,chrome:0,maxHeight:720,minHeight:720},window:{w:1280,h:720}},he||(this.isInstagram=_b(),this.SvhSupported=CSS.supports("height","100svh"),this.SvhSupported&&(this.minHeightMeasuringStick=document.createElement("div"),this.minHeightMeasuringStick.setAttribute("style","position: fixed; top: 0;left: 0;z-index: -99; visibility: hidden; height: 100svh;"),this.minHeightMeasuringStick.setAttribute("tabindex",-1),this.minHeightMeasuringStick.setAttribute("aria-hidden",!0),document.body.appendChild(this.minHeightMeasuringStick)),this.maxHeightMeasuringStick=document.createElement("div"),this.maxHeightMeasuringStick.setAttribute("style","position: fixed; top: 0;left: 0;z-index: -99; visibility: hidden; height: 100vh;"),this.maxHeightMeasuringStick.setAttribute("tabindex",-1),this.maxHeightMeasuringStick.setAttribute("aria-hidden",!0),document.body.appendChild(this.maxHeightMeasuringStick),this.mobilePortraitMediaQuery=window.matchMedia("(max-aspect-ratio: 4/5)"),this.mobileLandscapeMediaQuery=window.matchMedia("(min-aspect-ratio: 2/3) and (max-height: 500px)"),this.setupMobileListener(),this.onWindowResize(),window._windowInfo=this,window.addEventListener("resize",this.onWindowResize,{passive:!0}))}setupStore(e){e.subscribe(()=>{let r=e.getState();r.frontendState&&r.frontendState.adminMode!==Fk&&(setTimeout(()=>{this.onWindowResize()},150),Fk=r.frontendState.adminMode),r.adminState&&r.adminState.viewport!==lu&&(lu=r.adminState.viewport,this.onMobileChange())})}setupMobileListener(){this.mobilePortraitMediaQuery.removeEventListener("change",this.onMobileChange),this.mobileLandscapeMediaQuery.removeEventListener("change",this.onMobileChange),this.onMobileChange(),this.mobilePortraitMediaQuery.addEventListener("change",this.onMobileChange),this.mobileLandscapeMediaQuery.addEventListener("change",this.onMobileChange)}onMobileChange=()=>{let e;lu?e=lu==="mobile":e=this.mobilePortraitMediaQuery.matches||this.mobileLandscapeMediaQuery.matches;let r=this.mobilePortraitMediaQuery.matches||lu&&lu==="mobile"||!1;(e!==this.data.mobile.active||e&&r!==this.data.mobile.portrait)&&(this.data.mobile.active=e,this.data.mobile.portrait=r,this.onWindowResize(),this.emit("mobile-change",[e]))};getBaseUnit(e){e=e||{};var r=0;return e=zk.default.extend(!0,{height:this.data.window.h,width:this.data.window.w,min:11,max:!1,weight:5},e),r=e.width<e.height?e.width:e.height,r/=100/e.weight,e.min&&r<e.min&&(r=e.min),e.max&&r>e.max&&(r=e.max),r}onWindowResize=()=>{let{data:e}=this,r=document.documentElement.clientWidth,i=window.innerHeight,n=0,o=0,s=this.maxHeightMeasuringStick.getBoundingClientRect().height;if(this.SvhSupported)o=this.minHeightMeasuringStick.getBoundingClientRect().height;else{let m=100;o=0;let v;for(;;){let g=window.matchMedia.call(window,"(min-height:"+o+"px)").matches;if(v!==void 0&&g!==v&&(m/=2,m*=-1),o+=m,v=g,Math.abs(m)<.01){o=Math.round(o);break}}}n=s-o;let a=0,l=5,p=0,f=9;o+n>r&&(a=(o+n)/r-1),a=a/.777777778,a>1&&(a=1),e.mobile.active&&!e.mobile.portrait&&(f=18),p=this.getBaseUnit({weight:f+l*a,min:20,width:r,height:o+n});let c=!this.isInstagram;if(!c){let m=e.window.w,v=e.window.h;switch(!0){case m!=r:case Math.abs(v-i)>150:c=!0;break;default:c=!1;break}}c&&(e.window.h=i,e.window.w=r,e.mobile.minHeight=o,e.mobile.maxHeight=s,e.mobile.chrome=e.mobile.maxHeight-e.window.h,e.baseUnit=p,p!==e.size&&(document.documentElement.style.setProperty("--base-size",p*.16+"px"),document.documentElement.style.setProperty("--viewport-height",i+"px"),document.documentElement.style.setProperty("--min-viewport-height",o+"px")),this.data=e),this.emit("window-resize",[])};applyGrid=e=>{e==null&&(e=this.data.mobile.active);let r=this.data.window.w,i=this.data.window.h;e&&(i=this.data.mobile.minHeight);let n=Math.max(Math.round(r*(40/1920)),15),o=Math.max(Math.round(r*(25/1920)),15),s=15,a=e?4:8,l=8,p=4,f=4,c=r-s*2,m=i-s*2,v=c/2,g=(c-(a-1)*n)/a;v=Math.floor(v/f)*f;let x=c-v;document.documentElement.style.setProperty("--grid-width",c+"px"),document.documentElement.style.setProperty("--grid-height",m+"px"),document.documentElement.style.setProperty("--grid-cell-height",m/l+"px"),document.documentElement.style.setProperty("--grid-cell-height-rounded",Math.round(m/l)+"px"),document.documentElement.style.setProperty("--grid-subcell-height",m/(l*3)+"px"),document.documentElement.style.setProperty("--grid-leftPanel-width",x+"px"),document.documentElement.style.setProperty("--grid-rightPanel-width",v+"px"),document.documentElement.style.setProperty("--grid-cell-width",g+"px"),document.documentElement.style.setProperty("--grid-subcell-width",(g-o*2)/3+"px"),document.documentElement.style.setProperty("--grid-column-gap",n+"px"),document.documentElement.style.setProperty("--grid-subcolumn-gap",o+"px")}},nt=new q0});var qr=$(()=>{H0();H0()});function Co(t){class e extends me{constructor(i){super(i),this.lastScrollUIDRef=_e()}render(){return S(t,{...this.props,scrollContext:this.context})}componentDidMount(){this.context&&this.props.baseNode&&(this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid),this.props.baseNode}refreshScrollContext=i=>{i.element==this.props.baseNode&&this.props.baseNode&&(this.context.removeElementFromScrollContext(this.props.baseNode,this.context.scrollUid),setTimeout(()=>{this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid},0))};componentWillUnmount(){this.props.baseNode&&this.context&&this.context.removeElementFromScrollContext(this.props.baseNode,this.context.scrollUid)}componentDidUpdate(i,n){this.props.baseNode!==i.baseNode?(i.baseNode&&this.context.removeElementFromScrollContext(i.baseNode,this.context.scrollUid),this.props.baseNode&&this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid):this.lastScrollUIDRef.current!==this.context.scrollUid&&this.props.baseNode&&(this.lastScrollUIDRef.current&&this.context.removeElementFromScrollContext(this.props.baseNode,this.lastScrollUIDRef.current),this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid)}}return e.contextType=V0,e}function SZ(t){return Bt({updateFrontendState:Ye.updateFrontendState},t)}var W0,xZ,V0,uu,cu,Qa,el,Bk,Yf,du,Po=$(()=>{ke();W0=ve(Ie(),1);Fe();tr();ke();Ze();xr();mt();qr();Br();fe();xZ={scrollUid:"default",scrollingElement:null,getScrollPosition:()=>({scrollHeight:0,scrollWidth:0,x:0,y:0,w:0,h:0}),scrollIntoView:()=>{},removeElementFromScrollContext:()=>{},addElementToScrollContext:()=>{},updateScrollPosition:()=>{}},V0=Tn(W0.default.cloneDeep(xZ)),uu={},cu={},Qa={default:new Set};he||(el=new ResizeObserver(function(t){t.forEach(function(e){Pt(e.target,"elementResize",null,{bubbles:!1})})}));Bk=(t,e)=>{t.forEach(function(r){let i="inside";r.boundingClientRect.bottom<0&&!r.isIntersecting?i="above":r.boundingClientRect.top>=0&&!r.isIntersecting&&(i="below"),Pt(r.target,e,{hasLayout:r.boundingClientRect.width>0&&r.boundingClientRect.height>0,visible:r.isIntersecting,position:i},{bubbles:!1})})},Yf=class extends Mr{constructor(e){super(e),this.state={scrollUid:"default",scrollingElement:null,getScrollPosition:this.getScrollPosition,scrollIntoView:this.scrollIntoView,updateScrollPosition:this.updateScrollPosition,addElementToScrollContext:this.addElementToScrollContext,removeElementFromScrollContext:this.removeElementFromScrollContext},this.scrollData={x:0,y:0,w:0,h:0}}addElementToScrollContext=(e,r)=>{if(r=="default")return;let i=e.classList.contains("quick-view-item"),n=e.parentNode?.nodeName==="GALLERY-SLIDESHOW",o=e.parentNode?.nodeName==="MARQUEE-INNER",s=e.hasAttribute("uses")&&e.getAttribute("uses").includes("flying-object");i||n||o||s?(i||s)&&(Pt(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1}),Pt(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})):Qa[r].has(e)||(Qa[r].add(e),cu[r].observe(e),uu[r].observe(e))};removeElementFromScrollContext=(e,r)=>{cu[r]?.unobserve(e),uu[r]?.unobserve(e),Qa[r]?.delete(e)};updateScrollPosition=e=>{if(he||!this.state.scrollingElement)return;let r=e.x||this.scrollData.x,i=e.y||this.scrollData.y;this.state.scrollingElement===window?document.scrollingElement.scrollTo({top:i,left:r,behavior:"instant"}):this.state.scrollingElement.scrollTo({top:i,left:r,behavior:"instant"})};onScrollRequest=e=>{if(e.defaultPrevented)return;e.stopPropagation(),e.preventDefault();let r={...e.detail};this.scrollIntoView(e.target,r)};scrollIntoView=(e=null,r={})=>{this.onScroll(),this.onResize();let{transitionTime:i=1e3,preventQuickViewClose:n=!0,lazyScroll:o=!1,callback:s=null,verticalAlign:a="center",windowAlign:l="center",easing:p="easeInOutCubic",offset:f={x:0,y:0}}=r;if(!(this.state.scrollingElement===window?document.scrollingElement:this.state.scrollingElement).contains(e)||!e){s&&s();return}let m=e.getBoundingClientRect();for(;m.width===0&&m.height==0&&e;)e=e.parentElement,m=e.getBoundingClientRect();let v=m.left+m.width*.5,g=m.top,x=0;switch(a){case"center":x=m.height*.5;break;case"bottom":x=m.height;break;case"top":x=0;break}let _=document.documentElement.clientWidth,E=document.documentElement.clientHeight,L=0;switch(l){case"top":L=0;break;case"bottom":L=-E;break;case"center":default:L=-E+.5;break}if(o&&m.bottom>=20&&m.right>=20&&m.top<=E-20&&m.left<=_-20){s&&s();return}let O=this.getScrollPosition(),M={...O},D=O.x,P=O.y,U=Math.max(0,Math.min(O.scrollWidth-_,D-(_*.5-v)));U+=f.x;let N=Math.max(0,Math.min(O.scrollHeight-E,P+g+x+L+f.y)),F=0,V=0;cancelAnimationFrame(this.scrollAnimationFrame);var q=()=>{cancelAnimationFrame(this.scrollAnimationFrame),this.state.scrollingElement.removeEventListener("mousewheel",q),this.props.updateFrontendState({quickView:{autoScrolling:!1}}),s&&s()};this.state.scrollingElement.addEventListener("mousewheel",q);let J=Y=>{let ie=V===0?0:Y-V;V=Y,F=F+ie;let oe=0;if(Qe[p])oe=Qe[p](F/i);else if(typeof p=="function")oe=p(F/i);else switch(p){case"linear":oe=F/i;break;default:oe=Cb(F/i);break}let Z=this.getScrollPosition(),Q=e.getBoundingClientRect().top,ee=Math.max(0,Math.min(Z.scrollHeight-E,Z.y+Q+x+L+f.y))-N;ee!==0&&(N+=ee,P+=ee),F<=i?(this.updateScrollPosition({x:D+(U-D)*oe,y:P+(N-P)*oe}),this.scrollAnimationFrame=requestAnimationFrame(J)):(this.updateScrollPosition({x:U,y:N}),q())};this.props.updateFrontendState({quickView:{autoScrolling:n}}),i==0?(this.updateScrollPosition({x:U,y:N}),q()):this.scrollAnimationFrame=requestAnimationFrame(J)};render(){return S(V0.Provider,{value:this.props.passthrough?this.context:this.state,children:this.props.children})}componentDidUpdate(e,r,i){he||(this.checkScrollElement(),this.state.scrollingElement!=r.scrollingElement&&this.removeListeners(r))}setNewElement=e=>{let r=W0.default.uniqueId();if(Qa[r]=new Set,e==window)Mt(document.scrollingElement,"elementResize",this.onResize),el.observe(document.scrollingElement),window.addEventListener("scroll",this.onScroll,{passive:!1}),window.addEventListener("request-scroll",this.onScrollRequest,{passive:!1});else{Mt(e,"elementResize",this.onResize),e.addEventListener("request-scroll",this.onScrollRequest,{passive:!1});let i=e.querySelector("bodycopy");i&&(el.observe(i),Mt(i,"elementResize",this.onResize)),el.observe(e),e.addEventListener("scroll",this.onScroll,{passive:!1})}cu[r]=new IntersectionObserver(i=>Bk(i,"viewportIntersectionChange"),{root:e==window?document:e,rootMargin:"0px",threshold:0}),uu[r]=new IntersectionObserver(i=>Bk(i,"lazyLoadIntersectionChange"),{root:e==window?document:e,rootMargin:window.screen.height*1.5+"px "+window.screen.width*1.5+"px",threshold:0}),this.setState({scrollUid:r,scrollingElement:e},()=>{this.onResize()})};removeListeners=e=>{if(e.scrollingElement){if(e.scrollingElement==window)window.removeEventListener("resize",this.onResize),window.removeEventListener("scroll",this.onScroll,{passive:!0}),el.unobserve(document.scrollingElement),window.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1});else{kt(e.scrollingElement,"elementResize",this.onResize),e.scrollingElement.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1}),e.scrollingElement.removeEventListener("scroll",this.onScroll,{passive:!0});let r=e.scrollingElement.querySelector("bodycopy");r&&(el.unobserve(r),kt(r,"elementResize",this.onResize)),el.unobserve(e.scrollingElement)}Object.keys(Qa[e.scrollUid]).forEach(r=>{uu[e.scrollUid].unobserve(r),cu[e.scrollUid].unobserve(r),Qa[e.scrollUid].delete(r)})}e.scrollUid!="default"&&(uu[e.scrollUid].disconnect(),cu[e.scrollUid].disconnect(),delete uu[e.scrollUid],delete cu[e.scrollUid],delete Qa[e.scrollUid])};checkScrollElement=()=>{!he&&this.props.scrollingElement.current&&this.props.scrollingElement.current!=this.state.scrollingElement&&!this.props.passthrough?this.setNewElement(this.props.scrollingElement.current):this.state.scrollingElement!==null&&this.props.passthrough&&this.setState({scrollingElement:null,scrollUid:"default"})};componentDidMount(){he||this.checkScrollElement()}componentWillUnmount(){he||(cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.onScrollFrame),this.removeListeners(this.state))}onResize=e=>{he||!this.state.scrollingElement||(e&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()),this.state.scrollingElement===window?(this.scrollData.scrollHeight=document.scrollingElement.scrollHeight,this.scrollData.scrollWidth=document.scrollingElement.scrollWidth,this.scrollData.h=document.documentElement.clientHeight,this.scrollData.w=document.documentElement.clientWidth):(this.scrollData.scrollHeight=this.state.scrollingElement.scrollHeight,this.scrollData.scrollWidth=this.state.scrollingElement.scrollWidth,this.scrollData.h=this.state.scrollingElement.clientHeight,this.scrollData.w=this.state.scrollingElement.clientWidth),this.onScroll())};onScroll=()=>{he||!this.state.scrollingElement||this.props.passthrough||(this.state.scrollingElement===window?(this.scrollData.x=window.pageXOffset||document.scrollingElement.scrollLeft||document.documentElement.scrollLeft||0,this.scrollData.y=window.pageYOffset||document.scrollingElement.scrollTop||document.documentElement.scrollTop||0):(this.scrollData.x=this.state.scrollingElement.scrollLeft,this.scrollData.y=this.state.scrollingElement.scrollTop))};getScrollPosition=()=>({...this.scrollData})};Yf.contextType=V0;du=Ue((t,e)=>({quickView:t.frontendState.quickView}),SZ)(Yf)});function _Z(t,e,r,i){if(he)return;r=r||t.observedAttributes||Object.keys(t.propTypes||{});function n(){let s=Reflect.construct(HTMLElement,[],n);s.__observedAttributes=r,s._editorProperties={},s._vdomComponent=t,s.attachShadow({mode:"open",delegatesFocus:i&&i.delegatesFocus}),s._customSlots=i&&i.customSlots?i.customSlots:[],s._replaceChild=i&&i.replaceChild,s._props={},s._uid=pu.default.uniqueId(),s._initialMount=!0;let a=l=>{let p=new WeakMap;l.forEach(f=>{switch(f.type){case"childList":s._customElementComponent&&(p.has(s.children)||p.set(s.children,Array.from(s.children)),s._customElementComponent.setState({childArray:p.get(s.children)}));break;case"attributes":let c=f.target.getAttribute(f.attributeName);f.attributeName!=="style"&&f.attributeName!=="class"&&c!==s[f.attributeName]&&(c==null&&(c=void 0),s.__observedAttributes?.indexOf(f.attributeName)>-1?s[f.attributeName]=c:s._customElementComponent&&s._customElementComponent.setState(m=>{let v={...m.baseNodeProps};if(v[f.attributeName]!==c)return v[f.attributeName]=c,{baseNodeProps:v}}),s._props[f.attributeName]=c);break}})};return s.__observer=new MutationObserver(a),s.flushMutationQueue=function(){let l=s.__observer.takeRecords();l.length>0&&a(l)},r.forEach(l=>{let p=pu.default.camelCase(l),f=function(){return s._customElementComponent?s._customElementComponent.state.baseNodeProps[l]:s._props?.[l]??void 0},c=function(m){let v=m;v=v==null||v===""?void 0:v,v=v==="true"?!0:v,v=v==="false"?!1:v;let g=!1,x=typeof v;if((v==null||x==="string"||x==="boolean"||x==="number")&&(g=!0),s._customElementComponent&&s._customElementComponent.setState(_=>{let E={..._.baseNodeProps};if(E[l]!==v)return E[l]=v,{baseNodeProps:E}}),s._props[l]=v,g){let _=l.toLowerCase();m===""||m===void 0||m==null?s._customElementComponent.props?.baseNode?.hasAttribute(_)&&_!=="tag-text"&&s.removeAttribute(_):m!==""&&m!==s.getAttribute(_)&&s.setAttribute(_,m)}};Object.defineProperty(s,l,{get:f,set:c,configurable:!0}),Object.defineProperty(s,p,{get:f,set:c,configurable:!0})}),s}n.prototype=Object.create(HTMLElement.prototype),n.prototype.constructor=n,n.prototype.connectedCallback=EZ,n.prototype.disconnectedCallback=PZ,n.prototype.adoptedCallback=CZ;let o=e||t.tagName||t.displayName||t.name;return i?.extends?customElements.get(o)||customElements.define(o,n,{extends:i.extends}):customElements.get(o)||customElements.define(o,n)}function EZ(){if(this.ownerDocument?.defaultView?.frameElement?.id=="contentEditableStyleTester"||this.hasAttribute("no-component"))return;let t=this.nodeName=="TEXT-ICON";if(this._initialMount){let r=document.createElement("style");r.id="space-filler",t?r.innerHTML=`:host {
				height: 1.2em;
				width: 1.2em;
				contain: layout;
				cursor: text;

				margin-top: -1em;
				margin-bottom: -.25em;
				display: inline-block;
				vertical-align: baseline;
			
				position: relative;
			}`:r.innerText=":host { display: block; opacity: 0; }",this.shadowRoot.appendChild(r)}delete this._initialMount,this.__observer.observe(this,{attributes:!0,childList:!0,subtree:!1});let e={element:this,portalHost:null};t?e.component=S(Xf,{baseNode:this,customElementComponent:this._vdomComponent,observedAttributes:this.__observedAttributes},"custom-element-"+this._uid):e.component=S(IZ,{baseNode:this,customElementComponent:this._vdomComponent,observedAttributes:this.__observedAttributes},"custom-element-"+this._uid),Pt(this,"custom-element-connected",e),this._portalHost=e.portalHost,this._portalHost===null&&$0.push(this)}function CZ(){}function PZ(){this.ownerDocument?.defaultView?.frameElement?.id=="contentEditableStyleTester"||this.hasAttribute("no-component")||(this.__observer.disconnect(),this._portalHost&&Pt(this._portalHost,"custom-element-disconnected",{component:null,element:this}),this._portalHost=null,this._selectState=null)}var pu,$0,Xf,IZ,Io,ar,Zr=$(()=>{ke();Ze();_i();pu=ve(Ie(),1);Fe();mt();Po();Br();fe();$0=[];Xf=class extends me{constructor(e){super(e);let r=this.getPropsFromAttributes();this.state={baseNodeProps:{...r,...e.baseNode._props},childArray:Array.from(e.baseNode.children)},e.baseNode._customElementComponent=this}getPropsFromAttributes=()=>{let e=this.props.baseNode.attributes,r=0,i={};for(r=e.length;r--;){let n=e[r].value==="true"?!0:e[r].value;n=n==="false"?!1:n,i[e[r].name]=n}return{...i,...this.props.baseNode._props}};componentDidMount(){if(he)return;let e=this.getPropsFromAttributes();this.setState(r=>pu.default.isEqual(e,this.state.baseNodeProps)?null:{baseNodeProps:e}),Mt(this.props.baseNode,"custom-element-connected",this.refreshAttributes)}componentWillUnmount(){kt(this.props.baseNode,"custom-element-connected",this.refreshAttributes)}refreshAttributes=e=>{if(e.element==this.props.baseNode){let r=this.getPropsFromAttributes();this.setState(i=>pu.default.isEqual(r,this.state.baseNodeProps)?null:{baseNodeProps:r})}};render(e,r){let{baseNodeProps:i,childArray:n}=r;return Ot(this.props.customElementComponent,{...e,...i,childArray:n})}},IZ=Co(Xf),Io=class extends Mr{constructor(e){super(e),this.state={portals:[]},!he&&(Fc(this.props.portalHost)?this.stopListeningToVnodeDiff=Ik(this.props.portalHost,this.onPortalHostMounted):this.props.portalHost instanceof Node&&this.onPortalHostMounted(this.props.portalHost))}render(e){return S(de,{children:this.state.portals.map(([r,i],n)=>r&&i?rt(r,i):rt(null,null))},"portal-map")}addPortal=e=>{if(e.portalHost)return;let{component:r,element:i}=e;if(!r||!i)return;e.portalHost=this.portalHostElement;let n=!1;this.setState(o=>{let s=[...o.portals],a=s.findIndex(([l,p])=>p===i&&l!==null);return a===-1?s.push([r,i]):(s[a]=[null,null],n=!0),{portals:s}},()=>{n&&this.addPortal(e)})};removePortal=e=>{e.element&&this.setState(r=>{let i=[...r.portals],n=i.findIndex(([o,s])=>s===e.element);return n!==-1?(i[n]=[i[n][0],null],{portals:i}):null},()=>{})};onElementHostConnected=e=>{let r=e.element,i=[];this.setState(n=>{let o=[...n.portals];return o.forEach(([s,a],l)=>{r.contains(a)&&(i.push(a),o[l]=[null,null])}),{portals:o}},()=>{i.forEach(n=>{n.connectedCallback()})})};onPortalHostMounted=e=>{this.portalHostElement!==e&&(this.portalHostElement=e,Pt(this.portalHostElement,"element-host-connected",{element:this.portalHostElement}),Mt(this.portalHostElement,"custom-element-connected",this.addPortal),Mt(this.portalHostElement,"custom-element-disconnected",this.removePortal),Mt(this.portalHostElement,"element-host-connected",this.onElementHostConnected));let r=$0.filter(i=>this.portalHostElement.contains(i));r.forEach(i=>i.connectedCallback()),pu.default.pullAll($0,r)};componentDidMount(){this.clearSpaceFillersFromElements()}clearSpaceFillersFromElements=()=>{this.state.portals.forEach(e=>{if(e[1]?.shadowRoot?.children){let r=Array.from(e[1].shadowRoot.children).find(i=>i.id==="space-filler");r&&r.remove()}})};componentDidUpdate(e,r){this.clearSpaceFillersFromElements()}componentWillUnmount(){this.portalHostElement&&(kt(this.portalHostElement,"element-host-connected",this.onElementHostConnected),kt(this.portalHostElement,"custom-element-disconnected",this.removePortal),kt(this.portalHostElement,"custom-element-connected",this.addPortal),delete this.portalHostElement),this.stopListeningToVnodeDiff?.()}},ar=_Z});var Uk,j0,qk,Hk=$(()=>{ke();Fe();Dt();Rr();Po();_r();_i();Br();Uk=ve(Ie(),1);fe();j0=class extends me{constructor(e){super(e),this.state={dragPos:{x:0,y:0},referenceDragPos:{x:0,y:0},swapTarget:null},this.onDragOver=Uk.default.throttle(this.onDragOver,33)}render(e,r){return null}onDragEnd=(e,r,i)=>{this.onDragOver.cancel(),this.setState({swapTarget:null})};onDragDrop=async(e,r,i)=>{if(this.setState({dropping:!0}),this.onDragOver.cancel(),this.state.swapTarget!==i.customDropTarget||!this.state.swapTarget||i.inAdmin){this.setState({swapTarget:null});return}let n=!!this.state.swapTarget.getRootNode()?.host?.parentElement?.classList?.contains("backdrop-contents"),o=this.state.swapTarget.closest(".page[id]")?.getAttribute("id");n&&(o=this.state.swapTarget.getRootNode().host.parentElement.closest(".page[id]")?.getAttribute("id"));let s=window.store.getState(),a=this.state.swapTarget,l=i.draggedMediaItems[0],p=a.getAttribute("hash"),f=l?.getAttribute?.("hash"),c=a.closest("[thumbnail-index]"),m=[],v=[];if(f==="placeholder"||i.fromOutside)return;let x=a.closest(".page[id]")?.getAttribute("id");if(x!==CargoEditor.getActiveEditor().pid){o=x;let O=!!ye.adminWindow.document.querySelector('[window-id="media-window"]');window?.parent.navigateAdmin("/"+o,{preserveScroll:!0}),window.parent.document.dispatchEvent(new CustomEvent("open-remote-message",{detail:{message:"Switched to Page",duration:1e3}})),await new Promise((D,P)=>{CargoEditor.events.once("editor-instanciated",(U,N,F)=>{setTimeout(()=>{D()},150)})});let M=ye.adminWindow.document.querySelector('button[name="images"]')?.getBoundingClientRect();if(O){let D=ye.adminWindow.document.querySelector('button[name="images"]')?.getBoundingClientRect();ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"media",id:"media-window",positionRect:M,uiWindowType:"popover",props:{pidBeingEdited:o,positionType:"center-under-button",acceptDrops:!0,closeOnSingleClickout:!0,shouldPreventClickout:(P,U)=>{let N=CargoEditor.getActiveEditor()?.pid===o,F=P.tagName==="MEDIA-ITEM"&&P?._isPlaceholder?.()===!0;if(N&&F){let q=P.shadowRoot.elementFromPoint(U.clientX,U.clientY);if(!!(q.closest(".placeholder-ui button")||q.tagName==="BUTTON"&&q.closest(".placeholder-ui")))return!0}}}})}}let _=a?.parentNode?.nodeName.startsWith("GALLERY-"),E=a?.parentNode;if(i.draggedMediaItems.length>1&&_){i.draggedMediaItems.forEach(P=>{v.push(P)});let O=Array.from(a.parentNode.children),M=O.indexOf(a);O.slice(M).forEach((P,U)=>{if(U==0&&m.length<v.length){m.push(P);return}P._isPlaceholder?.()&&m.length<v.length&&m.push(P)})}else m.push(a),v.push(...i.draggedMediaItems);let L="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";CargoEditor.mutationManager.execute(()=>{if(m.forEach((O,M)=>{let D=v[M],P=O.closest(".page[id]")?.getAttribute("id");if(n)P=O.getRootNode().host.parentElement.closest(".page[id]")?.getAttribute("id");else if(c){let J=O.getAttribute("href");P=$e.getContentByPurl(s,J)?.id||null}if(f=D.getAttribute("hash"),!P||!f)return;let U=$e.getMediaByHash(s)[f]||null,N=$e.getMediaByHash(s)[p]||null;if(c&&(N=O?.model??N,p=N?.hash??p),!U)return;let{CRDTItem:F}=ye.getCRDTItem({reducer:"pages.byId",item:P});if(!(s.pages.byId[P].media||[]).find(J=>J.hash==U.hash)){if(!(F.get("media")instanceof ye.adminWindow.Y.Array)){let Y=new ye.adminWindow.Y.Array;Y.insert(0,F.get("media")||[]),F.set("media",Y)}let J=ye.convertStateToSharedType(U,new ye.adminWindow.Y.Map);F.get("media").push([J])}if(n&&F.get("backdrops").get("activeBackdrop")&&ye.applyChangesToYType(F,{backdrops:{backdropSettings:{[F.get("backdrops").get("activeBackdrop")]:{activeImage:f}}}}),!n){let J=U&&N&&(U.is_video!==N.is_video||U.is_image!==N.is_image||U.is_video!==N.is_video);N&&J&&!c&&(O.removeAttribute("autoplay"),O.removeAttribute("loop"),O.removeAttribute("muted"),O.removeAttribute("poster"),O.removeAttribute("browser-default"),U.is_video?(!U.has_audio_track||U.duration<15?(O.setAttribute("autoplay",!0),O.setAttribute("muted",!0),O.setAttribute("loop",!0)):(O.setAttribute("browser-default",!0),O.setAttribute("disable-zoom",!0),U.duration<20&&O.setAttribute("loop",!0)),O.setAttribute("autoplay",!0),O.setAttribute("loop",!0),O.setAttribute("muted",!0)):U.is_url&&(U.url_type=="vimeo"||U.url_type=="youtube")&&(O.setAttribute("browser-default",!0),O.setAttribute("disable-zoom",!0),O.setAttribute("muted",!1),O.setAttribute("loop",!1))),O.removeAttribute("dynamic-src"),O.removeAttribute("src"),O.removeAttribute("dynamic-hash");let Y=O.shadowRoot?.querySelector('img[part*="media"]');if(Y&&f!==p&&U.is_image){let ie=()=>{O._setPlaceholderUIState?.({is_target:!0,visible:!0,skipOpacityTransition:!0}),oe=requestAnimationFrame(ie)},oe=requestAnimationFrame(ie);Promise.race([new Promise(async Z=>{let K=document.createElement("img"),Q=ls({w:6,retina:!1},U).url;K.src=Q,await K.decode(),Z(K)}),new Promise(async(Z,K)=>{let Q=ye.adminWindow.document.querySelectorAll('[data-hash="'+U.hash+'"]'),te=Array.from(Q).map(ue=>ue.getAttribute("data-image-src")).filter(ue=>!!ue).map(ue=>parseInt(ue.split("w/")[1].split("/")[0])).sort((ue,le)=>ue-le);if(te.length==0)return;let ee=document.createElement("img"),ae=ls({w:te[0]||274,retina:!1},U);ee.src=ae.url,await ee.decode(),Z(ee)})]).then(async Z=>{Y.src=Z.src;let K=!1;if(await Y.decode().catch(()=>{K=!0}),cancelAnimationFrame(oe),K){CargoEditor.mutationManager.execute(()=>{c?(ye.applyChangesToYType(F,{thumb_media_id:U.id}),O.model=U):O.setAttribute("hash",f)});return}let Q=getComputedStyle(Y),te=parseFloat(Q.paddingTop)+parseFloat(Q.borderTopWidth)+"px "+(parseFloat(Q.paddingRight)+parseFloat(Q.borderRightWidth))+"px "+(parseFloat(Q.paddingBottom)+parseFloat(Q.borderBottomWidth))+"px "+(parseFloat(Q.paddingRight)+parseFloat(Q.borderRightWidth))+"px",ee=Q.borderRadius;O._setFXFrame(S("div",{className:"blur-frame",style:{inset:"-.2px",position:"absolute",borderWidth:te,borderColor:"transparent",borderStyle:"solid",borderRadius:ee,overflow:"hidden",zIndex:3},children:S("div",{className:"blur-frame-inner",style:{inset:0,position:"absolute",backdropFilter:"blur(48px)"}})})),await new Promise(async(le,xe)=>{CargoEditor.mutationManager.execute(()=>{c?(ye.applyChangesToYType(F,{thumb_media_id:U.id}),O.model=U):O.setAttribute("hash",f),Promise.resolve().then(()=>{O._setPlaceholderUIState?.({is_target:O._isPlaceholder(),visible:O._isPlaceholder(),skipOpacityTransition:!0}),le(!0)})})});let ae=()=>{O._setPlaceholderUIState?.({is_target:!1,visible:O._isPlaceholder(),skipOpacityTransition:!0}),O._setFXFrame(null),this.setState({swapTarget:null,dropping:!1})},ue=async()=>{let le=O.shadowRoot?.querySelector('img[part*="media"]');if(!le){ae();return}le.src==Z.src?requestAnimationFrame(ue):(le.decoding="sync",await le.decode().catch(()=>{ae()}),ae())};ue()})}else c?ye.applyChangesToYType(F,{thumb_media_id:U.id}):O.setAttribute("hash",f),O.setAttribute("hash",f),this.setState({swapTarget:null,dropping:!1})}}),v.length>m.length&&!n&&!c){let O=v.slice(m.length),M=m[m.length-1];O.forEach(D=>{M.after(D),M=D})}})};componentDidUpdate(e,r){r.swapTarget!=this.state.swapTarget&&!this.state.dropping&&(this.state.swapTarget&&this.state.swapTarget._setPlaceholderUIState?.({skipOpacityTransition:!0,visible:!0,is_target:!0}),r.swapTarget&&r.swapTarget._setPlaceholderUIState?.({skipOpacityTransition:!0,visible:!!r.swapTarget?._isPlaceholder(),is_target:!1}))}onBeforeDrop=(e,r,i)=>{!i.fromAdmin&&!i.fromOutside||this.state.swapTarget&&this.state.swapTarget?.nodeName==="MEDIA-ITEM"&&i.draggedMediaItems.length===1&&(ye.globalDragEventController.releaseCustomDropTarget(i.customDropTarget),ye.globalDragEventController.setCustomDropTarget(this.state.swapTarget))};onDragOver=(e,r,i)=>{this.setState({dropping:!1});let n=r?.target??i.dropTarget;n.tagName!="MEDIA-ITEM"&&(n=null);let{x:o,y:s}=ye.globalDragEventController;if(!n){let f=Array.from(document.elementsFromPoint?.(o,s)??[]),c=0,m=f.find(v=>{if(v.tagName!=="MEDIA-ITEM"){let g=window.getComputedStyle(v,null),x=g.getPropertyValue("background-color"),_=x.match("rgba")?parseFloat(x.replace(/^.*,(.+)\)/,"$1")):1;return c+=_||0,!1}return v._isPlaceholder?.()});c<.5&&(n=m)}let a=n?n.parentElement?.tagName=="GALLERY-FREEFORM"?n.getBoundingClientRect():ud(n):null;if(a){let v=Math.sqrt(a.width*a.width+a.height*a.height),g=Math.max(5,Math.min(60,v*.05));n?._isPlaceholder()&&a.width<50&&(g=0),a.left+g<o&&a.right-g>o&&a.top+g<s&&a.bottom-g>s||(n=null)}let l=i.draggedMediaItems.length>=1&&i.draggedMediaItems[0]!==n&&(i.draggedMediaItems[0]?.getAttribute("hash")!==n?.getAttribute("hash")||n?._isPlaceholder())||i.fromOutside,p=!i.inAdmin&&(i.fromAdmin||i.fromOutside);n&&p&&l?this.setState(f=>(ye.globalDragEventController.customDropTarget!==n&&(ye.globalDragEventController.releaseCustomDropTarget(ye.globalDragEventController.customDropTarget),ye.globalDragEventController.setCustomDropTarget(n)),{dragPos:{...i.cursorPosition},referenceDragPos:{...i.cursorPosition},swapTarget:n})):(this.state.swapTarget&&ye.globalDragEventController.releaseCustomDropTarget(this.state.swapTarget),this.setState({swapTarget:null,dragPos:{...i.cursorPosition}}))};componentDidMount(){this.findDragController().then(()=>{ye.globalDragEventController.on("dragover",this.onDragOver),ye.globalDragEventController.on("drop",this.onDragDrop),ye.globalDragEventController.on("dragend",this.onDragEnd),ye.globalDragEventController.on("before-drop",this.onBeforeDrop)})}componentWillUnmount(){this.onDragOver.cancel(),ye.globalDragEventController.off("dragover",this.onDragOver),ye.globalDragEventController.off("drop",this.onDragDrop),ye.globalDragEventController.off("dragend",this.onDragEnd),ye.globalDragEventController.off("before-drop",this.onBeforeDrop)}findDragController=()=>new Promise((e,r)=>{let i=0,n=null,o=()=>{let s=ye.globalDragEventController||null;s?(clearInterval(n),e(s)):i++,i>200&&(clearInterval(n),r())};n=setInterval(o,300),o()})},qk=Co(j0)});var Zf,G0,Wk,Vk=$(()=>{ke();Hs();Dt();Rr();Po();Fe();Zf=ve(Ie(),1);fe();G0=class extends me{constructor(e){super(e),this.state={rect:{top:null,left:null},initialRect:{top:null,left:null},initialScrollY:0,isClickable:!0,visible:!1,parentFontInfo:{fontSize:null,lineHeight:null}},this.maxButtonHeight=20,this.minButtonHeight=10,this.clonedRange=null,this.ticking=!1,this.isDebug=!1,Lf.contentWindow?.CargoEditor&&Object.keys(Lf.contentWindow?.CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents)}componentWillUnmcount(){CargoEditor&&(CargoEditor.events.off("cursor-activity",this.onSelectionChange),CargoEditor.events.off("editor-keydown",this.onEditorKeydown)),window.removeEventListener("insert-context-menu-closed",this.restoreTextCursorPosition),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("selectionchange",this.onSelectionChange),window.removeEventListener("blur",this.onEditorBlur),this.props?.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll)}bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),window.addEventListener("insert-context-menu-closed",this.restoreTextCursorPosition),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousedown",this.onMouseDown),document.addEventListener("selectionchange",this.onSelectionChange),window.addEventListener("blur",this.onEditorBlur),CargoEditor.events.on("cursor-activity",this.onSelectionChange),CargoEditor.events.on("editor-keydown",this.onEditorKeydown),this.props?.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)};componentDidUpdate(e,r){this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement&&(this.props.scrollContext.scrollingElement?this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),this.onScroll())}onScroll=e=>{if(!this.state.visible||this.ticking)return;let r=window.pageYOffset,i=window.pageYOffset-this.state.initialScrollY,n=Math.round(this.state.initialRect.top-i);this.setState({rect:{top:n,left:this.state.initialRect.left}})};onEditorBlur=()=>{this.setState({visible:!1})};onEditorKeydown=()=>{this.setState({visible:!1})};onMouseUp=e=>{this.setState({clickable:!0}),e.target.closest("[editing]")&&this.checkAndSetVisiblity()};onMouseDown=()=>{this.setState({visible:!1,clickable:!0})};onSelectionChange=Zf.default.debounce(e=>{if(this.ticking)return;if(this.ticking=!0,this.setState({visible:!1}),!CargoEditor.getActiveRange())return null;let i=document.querySelector('[editing="true"] bodycopy');if(!i)return null;let n,o=window.getComputedStyle(i);n=o.getPropertyValue("font-size"),n=Number(n.match(/[\d\.]+/));let s=o.getPropertyValue("line-height");s=Number(s.match(/[\d\.]+/)),this.setState({parentFontInfo:{fontSize:n,lineHeight:s}},()=>{this.setButtonPosition()})},50);checkAndSetVisiblity=Zf.default.debounce((e,r)=>{e=CargoEditor.getActiveRange(),r=CargoEditor?.getActiveEditor();let i=r?.checkIfEmpty(),n=this.isEligibleEmptyLine(e),o=!!(i||n);this.isDebug&&console.log("checkAndSetVisible",o),this.setVisible(o)},400);setVisible=e=>{this.isDebug&&console.log("set visible",e),this.setState({initialScrollY:window.pageYOffset,visible:e},()=>{this.ticking=!1})};isEligibleEmptyLine=e=>{if(!e)return!1;let r=e.endContainer.childNodes[e.endOffset-1],i=e.endContainer.childNodes[e.endOffset],n=e.endContainer.childNodes[e.endOffset-2];for(;r&&CargoEditor.helpers.isWhitespaceNode(r);)r=r.previousSibling;for(;i&&CargoEditor.helpers.isWhitespaceNode(i);)i=i.nextSibling;for(;n&&CargoEditor.helpers.isWhitespaceNode(n);)n=n.previousSibling;return!!(e.collapsed&&e.endContainer&&e.endContainer.nodeType==Node.ELEMENT_NODE&&(e.endContainer.nodeName==="BODYCOPY"||e.endContainer.nodeName==="COLUMN-UNIT")&&(e.endOffset===0&&e.endContainer.childNodes.length==0||this.checkNodeContent(r)&&this.checkNodeContent(n)||this.checkNodeContent(i)&&!r))};restoreTextCursorPosition=e=>{e.detail.cachedRange&&window.requestAnimationFrame(()=>{CargoEditor.helpers.setActiveRange(e.detail.cachedRange),CargoEditor?.getActiveEditor().getElement().focus()})};checkNodeContent=e=>!!(e&&e.nodeName==="BR"||e?.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(e)?.getPropertyValue("display")==="block");getTextCursorRect=(e,r,i)=>{if(!e)return!1;if(this.clonedRange===e)return null;this.clonedRange=e.cloneRange();let n=Ui(),o=i.fontSize*.15*-1,s=i.lineHeight*.15*-1,a=document.createElement("input");a.style.display="inline-block",a.style.fontSize=i.fontSize+"px",a.style.border="0",a.style.background="blue",a.style.outline="none",a.style.width="2px",n?(a.style.height=i.lineHeight+"px",a.style.lineHeight=i.lineHeight+"px",a.style.margin=`${s}px 0 0 0`,a.style.padding="0",a.style.verticalAlign="text-bottom"):(a.style.height=i.fontSize+"px",a.style.verticalAlign="middle",a.style.margin=`${o}px 0 0 0`,a.style.padding="0"),a.setAttribute("data-ignore-changes",""),a.setAttribute("data-prevent-copy",""),a.setAttribute("disabled",""),a.setAttribute("readonly",""),a.setAttribute("test-delete-visible",""),a.setSaveable(!1),e.insertNode(a);let l=CargoEditor?.getActiveEditor()?.getElement?.()?.getBoundingClientRect(),p=a.getBoundingClientRect();a.nextSibling&&a.nextSibling.nodeType===Node.TEXT_NODE&&a.nextSibling.setSaveable(!0),a.remove();let f=l.height-r.height;return this.clonedRange&&CargoEditor.helpers.setActiveRange(this.clonedRange),{bottom:p.bottom-f,height:p.height,center:p.bottom-f-(p.top-f),left:p.left,right:p.right,top:p.top-f,width:p.width,x:p.x-f,y:p.y}};setButtonPosition=()=>{this.isDebug&&console.log("set button position");let e=CargoEditor.getActiveRange(),r=!1,i=!1,n=null,o=null,s=null,a=null,l=null,p=null,f=0,c=0,m=this.state.parentFontInfo?.fontSize;if(!this.state.parentFontInfo){this.ticking=!1;return}if(m>20&&(m=20),m<10&&(m=10),!Zf.default.isEmpty(CargoEditor)&&(n=CargoEditor?.getActiveEditor(),n&&(o=n.getElement()),r=n?.checkIfEmpty(),i=this.isEligibleEmptyLine(e)),p=o?o.getBoundingClientRect():null,i||r){let g=this.getTextCursorRect(e,p,this.state.parentFontInfo),x=0,_=0;if(!g){this.ticking=!1;return}let E=this.state.parentFontInfo,L=1-E.fontSize/E.lineHeight,O=E.lineHeight,M=E.fontSize;Ui()?x=g.bottom-E.lineHeight*.5:x=g.bottom-g.height*.5,a=x,l=Math.ceil(g.left)}c=l?4:0,l=l+c,this.isDebug&&console.log("coordinate state set..."),this.setState({initialRect:{top:a,left:l},rect:{top:a,left:l}},()=>{this.checkAndSetVisiblity()})};callContextMenu=e=>{e.preventDefault(),e.stopPropagation(),this.setState({visible:!1});let r=CargoEditor.getActiveRange().nativeRange;document.activeElement.blur(),ye.adminWindow.ContextMenuOpener.openContextMenu(e,"insert-content",{cachedRange:r})};render(){let e=this.state.parentFontInfo.fontSize?this.state.parentFontInfo.fontSize:20,r=e>20?20:e;r=r<10?10:r;let i=r/2,n={frame:{transform:`translate3d(${this.state.rect.left}px, ${this.state.rect.top}px, 0px)`,zIndex:999,display:"flex",position:"fixed",top:0,left:0,pointerEvents:"none",height:0,width:0},button:{display:"flex",visibility:this.state.visible&&this.state.rect.top!==0&&this.state.rect.left!==0?"visible":"hidden",position:"relative",top:"unset",left:"unset",height:r+"px",width:r+"px",pointerEvents:this.state.isClickable?"all":"none",transform:`translate(0, -${i}px)`},svg:{pointerEvents:"none",height:r+"px",width:r+"px",maxHeight:this.maxButtonHeight+"px",maxWidth:this.maxButtonHeight+"px",minHeight:this.minButtonHeight+"px",minWidth:this.minButtonHeight+"px"}};return S("div",{style:n.frame,children:S("button",{className:"insert-content-button",style:n.button,onContextMenu:o=>{o.preventDefault(),this.callContextMenu(o)},onMouseDown:o=>{this.callContextMenu(o)},children:S("svg",{style:n.svg,id:"insert-ineditor",className:"plus-icon",width:r+"px",height:r+"px",viewBox:"0 0 20 20",fill:"none",children:[S("circle",{cx:"10",cy:"10",r:"8"}),S("g",{children:[S("line",{x1:"10",y1:"5",x2:"10",y2:"15"}),S("line",{x1:"5",y1:"10",x2:"15",y2:"10"})]})]})})})}},Wk=Co(G0)});var Ao,Xe,K0,$k,Rr=$(()=>{ke();Ze();mt();Ao=ve(Ie(),1);Dt();Fe();Hk();Vk();_i();fe();Xe={},K0=class extends me{constructor(e){super(e),this.sR=document.createElement("div"),this.testHover=Ao.default.throttle(this.testHover,60),this.lockedElements=[],this.state={selecting:!1,unattachedOverlayContainer:null,active:!1,locked:!1,loaded:!1,hoveredElements:[]},this.onContentChange=Ao.default.throttle(this.onContentChange,80,{leading:!0,tailing:!0}),window.addEventListener("scroll",this.onScroll),this.resizeObserver=new ResizeObserver(r=>{r.forEach(i=>{this.updateElementRect(i.target)})}),this.dragController=null,this.portalMap=new Map,this.noPointerEventsArray=[],this.editorOverlayRef=_e(),CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents),this.findDragController().then(r=>{this.dragController=r,this.dragController.on("dragstart",this.onDragStart),this.dragController.on("dragend",this.unlock),this.dragController.on("drop",this.unlock)}).catch(r=>{console.warn("Editor overlay failed to find drag controller.",r)}),Xe.lock=this.lock,Xe.unlock=this.unlock,Xe.lockItem=this.lockItem,Xe.unlockItem=this.unlockItem,Xe.setHoveredElements=this.setHoveredElements,Xe.deactivateHoverElement=this.deactivateHoverElement,Xe.activateHoverElement=this.activateHoverElement,Xe.getPortal=this.getPortal,Xe.removePortal=this.removePortal,Xe.portalMap=this.portalMap,Xe.testHover=this.testHover,Xe.updateElementRect=this.updateElementRect,this.pointerPosition={x:-9e9,y:-9e9}}render(){var e=localStorage.getItem("c3-plus-button")==="true";return S("div",{className:`${this.state.selecting?"selecting":""}${this.props.darkMode?" dark":""}`,id:"editor-overlay",ref:this.editorOverlayRef,style:{display:this.state.loaded?"":"none"},children:this.state.unattachedOverlayContainer&&rt(S(de,{children:[S(qk,{}),e?S(Wk,{}):null]}),this.state.unattachedOverlayContainer)})}componentDidMount(){if(!this.editorOverlayRef.current.shadowRoot){this.editorOverlayRef.current.attachShadow({mode:"open"}),this.editorOverlayRef.current.shadowRoot.innerHTML='<link rel="stylesheet" href="https://build.cargo.site/frontend/da62ba/css/front-end/editor-ui.css"><div id="unattached-editor-overlays"></div>',Array.from(this.sR.children).forEach(i=>{this.editorOverlayRef.current.shadowRoot.appendChild(i)}),this.editorOverlayRef.current.shadowRoot.querySelector("link").addEventListener("load",()=>{this.setState({loaded:!0})});let r=this.editorOverlayRef.current.shadowRoot.querySelector("#unattached-editor-overlays");this.setState({unattachedOverlayContainer:r})}this.sR=this.editorOverlayRef.current.shadowRoot,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("mousedown",this.onPointerDown),window.addEventListener("mouseup",this.onPointerUp),window.addEventListener("mouseup",this.onPointerUp),document.body.addEventListener("pointerleave",this.onPointerLeave),this.findAdminWindow().then(e=>{ye.adminWindow.addEventListener("pointermove",this.onAdminPointerMove)}).catch(e=>{console.warn("Editor Overlay failed to find Editor.",e)})}componentDidUpdate(e,r){let{hoveredElements:i}=r,{hoveredElements:n}=this.state,o=Ao.default.difference(n,i);Ao.default.difference(i,n).forEach(a=>{let l=this.portalMap.get(a);l&&l.portalHosts.forEach((p,f)=>{p?.pointerOut?.()})}),o.forEach(a=>{let l=this.portalMap.get(a);l&&l.portalHosts.forEach((p,f)=>{p?.pointerIn?.()})}),this.updatePageButtonPositions(),this.props.adminMode!==e.adminMode&&(this.props.adminMode?(this.unlock(),this.afterAdminTimeout=setTimeout(()=>{this.testHover()},80)):(this.setHoveredElements([]),this.lock()))}componentWillUnmount(){clearTimeout(this.afterAdminTimeout),this.onContentChange.cancel(),this.dragController&&(this.dragController.off("dragstart",this.onDragStart),this.dragController.off("dragend",this.unlock),this.dragController.off("drop",this.unlock)),this.CargoEditor&&(this.CargoEditor.events.off("mutation-start",this.onMutationStart),this.CargoEditor.events.off("mutation-end",this.onMutationEnd),this.CargoEditor.events.off("editor-keyup",this.onContentChange),this.CargoEditor.events.off("editor-summary-created",this.onContentChange)),this.portalMap.forEach((e,r,i)=>{this.removePortal(r)}),this.noPointerEventsArray=[],window.removeEventListener("mousedown",this.onPointerDown),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerleave",this.onPointerLeave),ye.adminWindow?.removeEventListener("pointermove",this.onAdminPointerMove)}findAdminWindow=()=>new Promise((e,r)=>{let i=0,n=null,o=()=>{let s=ye.adminWindow;s?(clearInterval(n),e(s)):i++,i>200&&(clearInterval(n),r("not found."))};n=setInterval(o,300),o()});onMutationStart=()=>{Ck()};onMutationEnd=()=>{this.ticking||(this.ticking=!0,requestAnimationFrame(()=>{Pk(),this.ticking=!1}))};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.CargoEditor=CargoEditor,this.CargoEditor.events.on("mutation-start",this.onMutationStart),this.CargoEditor.events.on("mutation-end",this.onMutationEnd),this.CargoEditor.events.on("editor-keyup",this.onContentChange),this.CargoEditor.events.on("editor-summary-created",this.onContentChange)};findDragController=()=>new Promise((e,r)=>{let i=0,n=null,o=()=>{let s=ye.globalDragEventController||null;s?(clearInterval(n),e(s)):i++,i>200&&(clearInterval(n),r())};n=setInterval(o,300),o()});updateElementRect=e=>{let i=this.portalMap.get(e);if(i){let n={x:0,y:0,top:0,left:0,right:0,bottom:0,width:0,height:0},o=e.getBoundingClientRect();Object.keys(n).forEach(s=>{n[s]=Math.round(o[s])}),n.height<10&&(n.height=10,n.bottom=n.top+10),i.extraMargins.forEach((s,a)=>{if(!(s===void 0||s===0))switch(a){case 0:n.top=n.y=n.top-s,n.height=n.height+s;break;case 1:n.right=n.right+s,n.width=n.width+s;break;case 2:n.height=n.height+s,n.bottom=n.bottom+s;break;case 3:n.left=n.x=n.left-s,n.width=n.width+s;break}}),this.portalMap.set(e,{portalHosts:i.portalHosts,rect:n,extraMargins:i.extraMargins}),i.portalHosts.forEach((s,a)=>{s?.updatePosition?.(n)})}};onContentChange=(e,r)=>{this.state.hoveredElements.forEach(i=>{this.updateElementRect(i)})};onScroll=()=>{this.noPointerEventsArray.forEach(this.updateElementRect),this.updatePageButtonPositions()};updatePageButtonPositions=()=>{let r=Array.from(this.portalMap).map(([a,l])=>{let p=null,f=Array.from(l?.portalHosts??[]).find(([g,x])=>x.props?.name=="EditPageButton"&&!x.props.isEditingPage?(p=g,!0):!1);if(!p?.querySelector("button.edit-page"))return!1;let c=p.querySelector("button.edit-page").getBoundingClientRect(),v=c.top<l.rect.top?{left:c.left+-f[1].state.shiftButtonX,width:c.width+1,top:c.top,height:c.height*2+1}:{left:c.left+-f[1].state.shiftButtonX,width:c.width+1,top:c.top-c.height+-2,height:c.height*2+1};return{mapRect:l.rect,portalHost:p,proposedRect:v,rect:v,component:f[1]}}).filter(a=>!!a),i=Ao.default.sortBy(r,a=>a.mapRect.left),n=!0,o=4,s=0;for(;n&&s<o;)n=!1,i.forEach((a,l,p)=>{if(l===0)return;let f=a.rect,c=p.filter(m=>{if(m==a)return!1;let v=m.proposedRect;return f.left<v.left+v.width&&f.left+f.width>v.left&&f.top<v.top+v.height&&f.top+f.height>v.top});if(c.length>0){n=!0;let m=p[l-1],v=Ao.default.sortBy(c,g=>-(g.proposedRect.left+g.proposedRect.width))[0];a.proposedRect={left:v.proposedRect.left+v.proposedRect.width,width:f.width,top:f.top,height:f.height},a.component.setState({shifted:!0,shiftButtonX:a.proposedRect.left-f.left}),l==1&&i[0].component.setState({shifted:!0,shiftButtonX:0})}else a.component.setState({shifted:!1,shiftButtonX:0}),l==1&&i[0].component.setState({shifted:!1,shiftButtonX:0})}),s++};onDragStart=()=>{this.setState({hoveredElements:[],locked:!0}),this.dragContentChangeTimeout=setTimeout(()=>{this.onContentChange()},30)};getPortal=(e,r={})=>{if(e)if(this.portalMap.has(e)){var i=this.portalMap.get(e),n=null;if(i.portalHosts.forEach((o,s)=>{r.component===o&&(n=s)}),n)return n;{let o=document.createElement("div");return this.sR.appendChild(o),i.portalHosts.set(o,r.component),o}}else{let o=document.createElement("div");this.sR.appendChild(o);let s={portalHosts:new Map,rect:{width:0,height:0,top:0,left:0,bottom:0,right:0},extraMargins:r.extraMargins||[]};return o.setAttribute("editor-overlay-tag-name",e.tagName),o._editorBaseNode=e,s.portalHosts.set(o,r.component),this.portalMap.set(e,s),r.trackResize&&this.resizeObserver.observe(e),r.noPointerEvents&&this.noPointerEventsArray.indexOf(e)===-1&&this.noPointerEventsArray.push(e),r.extraMargins&&this.noPointerEventsArray.indexOf(e)===-1&&this.noPointerEventsArray.push(e),o}};removePortal=(e,r)=>{if(this.portalMap.has(e)){let i=this.portalMap.get(e);i.portalHosts.has(r)&&(i.portalHosts.delete(r),r.parentNode.removeChild(r)),i.portalHosts.size===0&&(this.resizeObserver.unobserve(e),this.noPointerEventsArray.indexOf(e)>-1&&this.noPointerEventsArray.splice(this.noPointerEventsArray.indexOf(e),1),this.portalMap.delete(e))}};lock=()=>{this.setState({locked:!0})};unlock=()=>{this.setState({locked:!1})};lockItem=e=>{this.lockedElements.indexOf(e)===-1&&this.lockedElements.push(e)};unlockItem=e=>{let r=this.lockedElements.indexOf(e);r>-1&&this.lockedElements.splice(r,1)};deactivateHoverElement=e=>{e&&this.setState(r=>{let{hoveredElements:i}=r,n=[...i],o=i.indexOf(e);if(o>-1)n=n.splice(o,1);else return null;return{...r,hoveredElements:n}})};activateHoverElement=e=>{e&&this.setState(r=>{let{hoveredElements:i}=r,n=[...i];if(n.indexOf(e)==-1)n.push(e);else return null;return{...r,hoveredElements:n}})};setHoveredElements=e=>{let r=Array.isArray(e)?e:[e];r=r.filter(i=>!!i),Ao.default.isEqual(this.state.hoveredElements,r)||this.setState({hoveredElements:r})};testHover=()=>{let{locked:e}=this.state;if(e)return;let r=Array.from(document.elementsFromPoint(this.pointerPosition.x,this.pointerPosition.y))||[],i=Array.from(this.editorOverlayRef.current.shadowRoot.elementsFromPoint(this.pointerPosition.x,this.pointerPosition.y))||[];i=i.map(l=>l.closest("[editor-overlay-tag-name]")?._editorBaseNode).filter(l=>!!l),i=Ao.default.difference(i,r),i.forEach(l=>{l&&r.indexOf(l)==-1&&r.push(l)}),this.noPointerEventsArray.forEach(l=>{let p=this.portalMap.get(l);p&&p.rect&&this.pointerPosition.x<=p.rect.left+p.rect.width&&this.pointerPosition.x>=p.rect.left&&this.pointerPosition.y<=p.rect.top+p.rect.height&&this.pointerPosition.y>=p.rect.top&&r.indexOf(l)==-1&&r.push(l)}),r=Ao.default.uniq(r);let n=[...this.state.hoveredElements];this.lockedElements.forEach(l=>{let p=n.indexOf(l),f=r.indexOf(l);f===-1&&p>-1?r.push(l):p===-1&&f>-1&&r.splice(f,1)});let o=CargoEditor?.getActiveEditor?.()?.getElement(),s=o?o.closest(".overlay-content"):null,a=s&&r.some(l=>l.tagName==="BODYCOPY"&&s.contains(l));o&&s&&a&&(r=r.filter(l=>s.contains(l))),this.setHoveredElements(r)};onAdminPointerMove=e=>{e.target.tagName==="IFRAME"?(this.pointerPosition.x=e.clientX,this.pointerPosition.y=e.clientY+-40):(this.pointerPosition.x=-9e9,this.pointerPosition.y=-9e9),this.testHover()};onPointerLeave=e=>{this.setState({selecting:!1}),setTimeout(()=>{this.setHoveredElements([])},100)};onFirstSelectionChange=()=>{this.setState({selecting:!0})};onPointerDown=e=>{this.selectionWaitTimeout=setTimeout(()=>{document.addEventListener("selectionchange",this.onFirstSelectionChange,{once:!0})},60)};onPointerUp=e=>{clearTimeout(this.selectionWaitTimeout),document.removeEventListener("selectionchange",this.onFirstSelectionChange,{once:!0}),this.setState({selecting:!1})};onPointerMove=e=>{this.pointerPosition.x=e.clientX,this.pointerPosition.y=e.clientY,this.testHover()}},$k=Ue((t,e)=>({adminMode:t.frontendState.adminMode,darkMode:t.adminState?.darkMode||!1}))(K0)});var X0,hu,Y0,Jf,Jr,Xn=$(()=>{ke();Rr();X0=ve(Ie(),1);fe();hu=[],Y0=X0.default.debounce(()=>{if(window.removeEventListener("CargoEditor-load",Y0),CargoEditor&&Object.keys(CargoEditor).length>0){var t=CargoEditor.getActiveRange(),e=CargoEditor.helpers.normalizeRangeAroundShadowDom(t);let i=[],n=[];if(t&&!t.collapsed){var r=CargoEditor.helpers.getAllEffectivelyContainedNodes(t);r=r.filter(o=>o.shadowRoot),hu.forEach(o=>{r.includes(o.props.baseNode)?i.push(o):n.push(o)})}else n=hu;if(n.forEach(o=>{o.setState({selected:!1})}),i.forEach(o=>{o.setState({selected:!0}),CargoEditor.plugins.shadowDom.shadowDomSelectedElements.indexOf(o.props.baseNode)==-1&&CargoEditor.plugins.shadowDom.shadowDomSelectedElements.push(o.props.baseNode)}),e.shadowDomElementAdjacentToCollapsedRange){let o=hu.find(s=>s.props.baseNode===e.shadowDomElementAdjacentToCollapsedRange);o&&o.setState({selected:!0,collapseDirection:e.collapseDirection})}hu.length=0}},30),Jf=class extends me{constructor(e){super(e),this.state={resetAnimation:!1,selected:!1,collapseDirection:!1,currentColor:"black"},this.uniqueClassName=this.props.overlayMode?"selection-status-"+X0.default.uniqueId():"selection-status"}render(e,r){let i=r.collapseDirection?" "+r.collapseDirection+" collapsed-range":"";return S(de,{children:[S("style",{id:"selection-status",children:`
		${this.state.selected&&!this.props.onlyAllowCollapsedRange?`
		::slotted(*) {
			--selection-color: transparent;
		}
		`:""}

		${this.props.onlyAllowCollapsedRange?"":`:host(::selection) {
			background-color:transparent;
		}`}

		.${this.uniqueClassName} {
			${this.props.overlayMode?`
				transform: translate3d(${this.props.overlayPosition.x}px, ${this.props.overlayPosition.y}px, 0);
				width: ${this.props.overlayPosition.width}px;
				height: ${this.props.overlayPosition.height}px;
				position: fixed;
				top: 0;
				left: 0;
			`:`
				inset: 0px;
				position: absolute;
			`}
			padding: 0;
			margin: 0;
			opacity: 1;
		    background-color: var(--selection-color);
			overflow:hidden;

			z-index: ${this.props.inFront?"99999":"-1"};
			pointer-events:none;
			display:none;
		}

		.${this.uniqueClassName}.selected {
			display:block;
		}

      
		@keyframes blink-animation {
			0%, 49.99% {
			  visibility: visible;
			}
			50%, 100% {
				visibility: hidden;
			}
		}
		@-webkit-keyframes blink-animation {
			0%, 49.99% {
			  visibility: visible;
			}
			50%, 100% {
				visibility: hidden;
			}			
		}		

		.${this.uniqueClassName}.collapsed-range {
			width: 1px;
		    mix-blend-mode: unset;
			background-color: ${this.props.overlayMode?this.state.currentColor:"currentColor"};

		    ${this.state.resetAnimation?`
		    visibility: visible;
		    -webkit-animation:none;
		    animation: none;`:`-webkit-animation: blink-animation 1s steps(4, start) infinite;
	        animation: blink-animation 1s steps(4, start) infinite;`}
	        z-index: 9999;
		}

		.${this.uniqueClassName}.before.collapsed-range {
			${this.props.overlayMode?`
			transform: translate3d(${this.props.overlayPosition.x+-1}px, ${this.props.overlayPosition.y}px, 0);			
			`:`
			inset: 0 auto 0 -1px;
			`}
				
		}
		.${this.uniqueClassName}.after.collapsed-range {
			${this.props.overlayMode?`
			transform: translate3d(${this.props.overlayPosition.x+this.props.overlayPosition.width+1}px, ${this.props.overlayPosition.y}px, 0);			
			`:`
			inset: 0 -1px 0 auto;
			`}
		}		

		`}),S("div",{className:`${this.uniqueClassName}${this.state.selected?" selected":""}${i}`})]},"selection-status-fragment")}componentDidMount(){CargoEditor?.getActiveEditor?.()?(hu.push(this),Y0()):(hu.push(this),window.addEventListener("CargoEditor-load",Y0)),this.props.baseNode.__shadow_selection=!0,this.props.baseNode.addEventListener("selected-in-editor",this.select),this.props.baseNode.addEventListener("unselected-in-editor",this.unselect)}componentDidUpdate(e,r){this.state.collapseDirection!==r.collapseDirection&&this.setState({resetAnimation:!0},()=>{this.resetTimeout=setTimeout(()=>{this.setState({resetAnimation:!1})},100)})}componentWillUnmount(){clearTimeout(this.resetTimeout),delete this.props.baseNode.__shadow_selection,this.props.baseNode.removeEventListener("unselected-in-editor",this.unselect),this.props.baseNode.removeEventListener("selected-in-editor",this.select)}select=e=>{if(e.target!==this.props.baseNode)return;this.props.overlayMode&&!this.state.selected&&(Xe.updateElementRect(this.props.baseNode),this.updateCurrentColor());let r=e?.detail?.collapsed||!1,i=!0;this.props.onlyAllowCollapsedRange&&(i=r),this.setState({selected:i,collapseDirection:r}),this.props.onSelectionChange&&(r?this.props.onSelectionChange(!1):this.props.onSelectionChange(!0))};unselect=()=>{this.setState(e=>({selected:!1,collapseDirection:!1})),this.props.onSelectionChange&&this.props.onSelectionChange(!1)};updateCurrentColor=()=>{if(this.props.baseNode.shadowRoot){let e=document.createElement("span");e.style.color="currentColor",e.style.position="absolute",this.props.baseNode.shadowRoot.appendChild(e);let i=window.getComputedStyle(e).getPropertyValue("color");e.remove(),this.setState({currentColor:i})}}};Jf.defaultProps={inFront:!0,overlayMode:!1};Jr=Jf});var Qf,Id,jk,Ad,Gk,Kk=$(()=>{ke();Qf=ve(Ie(),1);fe();Id=new Map,jk=t=>{let e=[],r=[],i=[];Id.forEach((o,s)=>{o.locateEyeball();let{rect:a}=o.state;if(o.props["roll-independently"]==!0){let l=Math.atan2(t.clientY-(a.top+a.height*.5),t.clientX-(a.left+a.width*.5))*(180/Math.PI)+90;o.setState({eyeRotation:l})}else r.push(a.left+a.width*.5),i.push(a.top+a.height*.5),e.push(o)});let n={x:Qf.default.mean(r),y:Qf.default.mean(i)};e.forEach(o=>{let s=Math.atan2(t.clientY-n.y,t.clientX-n.x)*(180/Math.PI)+90;o.setState({eyeRotation:s})})},Ad=class extends me{constructor(e){super(e),this.state={eyeRotation:0,rect:{top:0,left:0,width:0,height:0},centerPoint:{x:0,y:0}},this.locateEyeball=Qf.default.debounce(this.locateEyeball,120,{leading:!0,trailing:!1})}render(e,r){return S(de,{children:[e.children,S("style",{children:`
					:host { 
						pointerEvents: ${e.lowestLevel?"auto":"none"};
						transformOrigin: center center;
						--rotate-transform: rotate( ${this.state.eyeRotation}deg);
					}
				`})]})}locateEyeball=()=>{this.setState({rect:this.props.baseNode.getBoundingClientRect()})};componentDidMount(){Id.size==0&&window.addEventListener("pointermove",jk),Id.set(this.props.baseNode,this)}componentWillUnmount(){Id.delete(this.props.baseNode),Id.size===0&&window.removeEventListener("pointermove",jk)}};Ad.defaultProps={"roll-independently":!0};Ad.transformSlot="--rotate-transform";Gk=Ad});var Yk,Td,Xk,Zk=$(()=>{ke();Yk=ve(Ie(),1);fe();Td=class extends me{constructor(e){super(e),this.state={suppressTransition:!1,rotation:parseFloat(this.props.rotation)}}render(e,r){let{animate:i}=e,n=Number(i)!==0,o=n?50/Number(i):1,s="var(--base-translate, translate(0))",a=s;return e.transformSlots.forEach(l=>{l==="--rotate-transform"?(s+=` rotate(${parseFloat(e.rotation)}deg)`,a+=` rotate(${parseFloat(e.rotation)+360}deg)`):(s+=` var(${l}, translate(0))`,a+=` var(${l}, translate(0))`)}),S(de,{children:[e.children,S("style",{id:"rotating-item",children:n?`
				@keyframes rotate {
                    from {
                        transform: ${s};
                    }
                    to {
                        transform: ${a};
                    }
                }

                :host {
                	animation: rotate ${Math.abs(o)}s linear ${Math.sign(Number(i))===-1?"reverse":""} infinite;
					will-change: transform;
                }
				`:`
				:host { 
					--rotate-transform: rotate( ${e.rotation}deg);
                }
            `})]})}allowTransition=Yk.default.debounce(()=>{this.setState({suppressTransition:!1},()=>{})},120);componentDidUpdate(e){(this.props.animate!==e.animate||this.props.rotation!==e.rotation)&&this.setState({suppressTransition:!0},()=>{this.allowTransition()})}componentWillUnmount(){this.allowTransition.cancel()}};Td.defaultProps={rotation:0,animate:0};Td.transformSlot="--rotate-transform";Xk=Td});var Jk,Qk=$(()=>{Jk={speed:"90",rotation:"66",scale:"18.4vmax","flight-path":"387",delay:"2"}});var eN,Zn,Z0,em,tN,rN=$(()=>{eN=ve(Ie(),1);ke();Ze();Qk();Br();fe();Z0=new Set,em=class extends me{constructor(e){super(e),this.flierID="-"+(0,eN.uniqueId)(),this.flierRef=_e();let r=this.generateRandomIntInclusive(1,1e4);this.state={portalElement:null,currentAnimation:"fly1",flightCount:r,calculatedAnimations:{fly1:this.calculateFlyAnimation(r,1),fly2:this.calculateFlyAnimation(r,2),fly3:this.calculateFlyAnimation(r,3),fly4:this.calculateFlyAnimation(r,4)}}}generateRandomIntInclusive(e,r){return e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e+1))+e}calculateDuration(e){return 100*(Math.max(100-Math.abs(e),5)*.01)}generateRandomIntFromSeed(e){var r=Math.sin(e)*1e4;return r-Math.floor(r)}shuffleFromSeed(e,r){for(var i=e.length,n,o;i;)o=Math.floor(this.generateRandomIntFromSeed(r)*i--),n=e[i],e[i]=e[o],e[o]=n,++r;return e}calculateFlyAnimation(e,r){let i=e%2==0,n=this.shuffleFromSeed(["ltr","rtl","ttb","btt"],e),o=Number(this.props.scale.replace("vmax","")),s=this.props.rotation/5*180,a=[{x:`calc(0vw - ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(i?0-1.4*o:60,i?40:100+1.4*o)}vh`},{x:`calc(100vw + ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(i?60:0-1.4*o,i?100+1.4*o:40)}vh`}],l=[{x:`calc(100vw + ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(i?60:0-1.4*o,i?100+1.4*o:40)}vh`},{x:`calc(0vw - ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(i?0:60,i?40:100+1.4*o)}vh`}],p=[{x:`${this.generateRandomIntInclusive(i?0-1.4*o:60,i?40:100+1.4*o)}vw`,y:`calc(0vh - ${1.4*o}vmax)`},{x:`${this.generateRandomIntInclusive(i?60:0-1.4*o,i?100+1.4*o:40)}vw`,y:`calc(100vh + ${1.4*o}vmax)`}],f=[{x:`${this.generateRandomIntInclusive(i?60:0-1.4*o,i?100+1.4*o:40)}vw`,y:`calc(100vh + ${1.4*o}vmax)`},{x:`${this.generateRandomIntInclusive(i?0-1.4*o:60,i?40:100+1.4*o)}vw`,y:`calc(0vh - ${1.4*o}vmax)`}],c=n.reduce((m,v)=>{switch(v){case"ltr":return m.concat(a);case"rtl":return m.concat(l);case"ttb":return m.concat(p);case"btt":return m.concat(f);default:return m}},[]);switch(r){case 1:return`
					0% {
						transform: translateX(${c[0].x}) translateY(${c[0].y});
						opacity: 0;
					}
					0.001% {
						transform: translateX(${c[0].x}) translateY(${c[0].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${c[1].x}) translateY(${c[1].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${c[1].x}) translateY(${c[1].y});
						opacity: 0;
					}
				`;case 2:return`
					0% {
						transform: translateX(${c[2].x}) translateY(${c[2].y});
						opacity: 0;
					}
				
					0.001% {
						transform: translateX(${c[2].x}) translateY(${c[2].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${c[3].x}) translateY(${c[3].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${c[3].x}) translateY(${c[3].y});
						opacity: 0;
					}
				`;case 3:return`
					0% {
						transform: translateX(${c[4].x}) translateY(${c[4].y});
						opacity: 0;
					}
		
					0.001% {
						transform: translateX(${c[4].x}) translateY(${c[4].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${c[5].x}) translateY(${c[5].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${c[5].x}) translateY(${c[5].y});
						opacity: 0;
					}
				`;case 4:return`
					0% {
						transform: translateX(${c[6].x}) translateY(${c[6].y});
						opacity: 0;
					}
		
					0.001% {
						transform: translateX(${c[6].x}) translateY(${c[6].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${c[7].x}) translateY(${c[7].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${c[7].x}) translateY(${c[7].y});
						opacity: 0;
					}
				`}}onAnimationEnd(e){let r=Number(e.animationName.substr(3,1)),i=r<4?r+1:1;this.setState({currentAnimation:`fly${i}`,...i===1&&{flightCount:this.state.flightCount+1,calculatedAnimations:{fly1:this.calculateFlyAnimation(this.state.flightCount+1,1),fly2:this.calculateFlyAnimation(this.state.flightCount+1,2),fly3:this.calculateFlyAnimation(this.state.flightCount+1,3),fly4:this.calculateFlyAnimation(this.state.flightCount+1,4)}}})}componentDidMount(){if(Zn||(Zn=document.createElement("media-item"),Zn.setAttribute("no-component",""),Zn.shadowRoot||Zn.attachShadow({mode:"open"}),Zn.shadowRoot.innerHTML=`
			<style>
				:host {
					all:unset!important;
					border:none!important;
					padding: 0!important;
					position: fixed!important;
					z-index: 5000!important;
					pointer-events:none!important;
					background:none!important;
					inset: 0!important;
					overflow: hidden!important;
				}

				.spinner [part="media"] {
					pointer-events: none;
					border-radius:0!important;
					padding: 0!important;
					border: none !important;
					position: absolute;
					width: 100%;
					height: 100%;
					inset: 0;
				}

				.spinner img,
				.spinner video {
					object-fit: contain;
				}
				.spinner .frame,
				.spinner .sizing-frame {
					display: contents;
				}				
			</style>
			`,document.body.appendChild(Zn)),!this.state.portalElement){let e=document.createElement("div");e.style.display="contents",Zn.shadowRoot.appendChild(e),this.setState({portalElement:e},()=>{this.flierRef.current&&this.flierRef.current.addEventListener("animationend",r=>this.onAnimationEnd(r))})}Z0.add(this)}componentWillUnmount(){this.flierRef.current&&this.flierRef.current.removeEventListener("animationend",e=>this.onAnimationEnd(e)),this.state.portalElement&&this.state.portalElement.remove(),Z0.delete(this),Z0.size==0&&Zn&&(Zn.remove(),Zn=null)}render(e,r){let{speed:i,rotation:n,scale:o,delay:s,adminMode:a}=e,{currentAnimation:l,flightCount:p,calculatedAnimations:f,portalElement:c}=r;return c?S(de,{children:[S("style",{children:":host {display:none!important;}"}),rt(S(de,{children:[S("style",{children:`

					.flier${this.flierID} {
						pointer-events: none !important;
						top: 0;
						left: 0;
						position: absolute;
						z-index:9995;
						transform: translateX(-100%) translateY(-100%);
						animation-delay: ${s}s;
						animation-duration: ${this.calculateDuration(i)/4}s;
						animation-timing-function: linear;
						animation-direction: ${Math.sign(i)===1?"normal":"reverse"};
					}

					.fly1${this.flierID} {
						animation-name: fly1${this.flierID};
					}

					.fly2${this.flierID} {
						animation-name: fly2${this.flierID};
					}

					.fly3${this.flierID} {
						animation-name: fly3${this.flierID};
					}

					.fly4${this.flierID} {
						animation-name: fly4${this.flierID};
					}

					.flier${this.flierID} .spinner {
						${Number(n)!==0?`animation: spin ${this.calculateDuration(n)}s ${Math.sign(Number(n))===-1?"reverse":"normal"} linear infinite;`:""}
						width: ${o};
						height: ${o};
						display: flex;
						align-items: center;
						justify-content: center;
					}

					.flier${this.flierID} .spinner figure {
						padding: 0;
						margin: 0;
						width: ${o};
						height: ${o};
					}

				
					/* Keyframe values control where the element will begin
						and end its trajectory across the screen. Each rule
						represents a path the element follows across the screen. */
					
				
					@keyframes fly1${this.flierID} {
						${f.fly1}
					}

					@keyframes fly2${this.flierID} {
						${f.fly2}
					}

					@keyframes fly3${this.flierID} {
						${f.fly3}
					}

					@keyframes fly4${this.flierID} {
						${f.fly4}
					}

					@keyframes spin {
						0% {
							transform: rotateZ(0deg);
						}
						100% {
							transform: rotateZ(3600deg);
						}
					}
				`}),S("div",{className:`flier${this.flierID} ${l}${this.flierID}`,ref:this.flierRef,children:S("div",{className:"spinner",children:e.children})})]}),c)]}):null}};em.defaultProps=Jk;tN=em});function AZ(t){var e=t.getBoundingClientRect(),r=getComputedStyle(t),i=r.transform;if(i){var n;if(i.startsWith("matrix3d(")){var o=i.slice(9,-1).split(/, /);n=+o[13]}else if(i.startsWith("matrix(")){var o=i.slice(7,-1).split(/, /);n=+o[5]}else return 0;return n}else return 0}var Jn,fu,tm,im,J0,Q0,rm,cs,iN,ew,nN,oN=$(()=>{ke();Ze();Jn=ve(Ie(),1);Br();mt();qr();Fe();fe();fu=new Map,tm=new WeakMap,im=.5,J0=!1,Q0=.5;rm=null,cs=!1;if(!he){Object.defineProperty(window,"__viewportKeyframeInsertion",{get:()=>im,set:e=>{im=e,cs=!0},configurable:!0}),Object.defineProperty(window,"__viewportKeyframeInterpolationArea",{get:()=>Q0,set:e=>{Q0=e,cs=!0},configurable:!0}),Object.defineProperty(window,"__forceOverlayInteraction",{get:()=>J0,set:e=>{J0=e,cs=!0},configurable:!0}),Object.defineProperty(window,"__forceRefreshMediaItems",{get:()=>cs,set:e=>{cs=e}});let t=new MutationObserver((e,r)=>{let i=!1;if(e.forEach(n=>{n.type==="childList"&&n.target.tagName==="STYLE"&&(i=!0)}),i){for(let[n,o]of fu.entries())o.updateKeyframesNextAnimationLoop=!0;cs=!0}});nt.on("window-resize",()=>{cs=!0}),t.observe(document.body,{subtree:!0,childList:!0,characterData:!0})}iN=()=>{tm=new WeakMap;for(let[t,e]of fu.entries())e.animateScrollProgress(cs);cs=!1,rm=requestAnimationFrame(iN)},ew=class extends Mr{constructor(e){super(e),this.uid=Jn.default.uniqueId(),this.state={isOverFlowing:!0,viewportIntersection:"neutral",isVisible:!1,hasLayout:!1,allScrollAnimationVariables:{},initialScrollProgress:void 0,scrollProgress:void 0,customJSX:null},this.isInSlideshow=this.props.baseNode.parentElement.tagName==="GALLERY-SLIDESHOW",this.isSlideshow=this.props.baseNode.tagName==="GALLERY-SLIDESHOW",this.props.baseNode._updateScrollTransition=r=>{this.processTransitionAnimation(r)},this.props.baseNode._setCustomScrollJSX=r=>{this.setState(i=>i.customJSX===r?null:{forceRefresh:Math.random(),customJSX:r})}}render(e,r){if(this.isInSlideshow)return S(de,{children:[e.children,this.state.customJSX]});let i=this.state.viewportIntersection,n=this.state.scrollProgress||0,{initialScrollProgress:o,allScrollAnimationVariables:s,isOverFlowing:a,prevScrollProgress:l}=this.state,p=s["--scroll-animation-transition-duration"]||"3000",f=s["--scroll-animation-mode"],c="neutral";l!=null&&(l<n?c="up":l>n&&(c="down"));let m=this.state.isVisible||this.state.viewportIntersection.position=="below"&&c=="up"||this.state.viewportIntersection.position=="above"&&c=="down",v=a&&!e["disable-scroll-animation"]?S("style",{id:"scroll-transition",children:`
			
			${this.state.onlyTranslateKeyframes||""}
			${this.state.sansTranslateKeyframes||""}

				:host {
					${this.isSlideshow?`
						${Object.entries(s).filter(([g,x])=>g!=="--scroll-animation").map(([g,x])=>g+": "+x+";").join(`
`)}
					`:""}					
					--scroll-progress: ${n};
				}

				figure {
					animation: scrollAnimation-onlyTranslate ${f=="transition"?p*3:"3000"}ms both paused; /* Holds both the starting and ending states */
					animation-timing-function: var(--scroll-animation-timing, ease);
					${s["--scroll-animation-mode"]=="transition"?"":`animation-delay: -${n+1}s;`}
					${m?"will-change: transform, opacity, animation-delay;":""}
				}
				.sizing-frame {
					backface-visibility: hidden;
					animation: scrollAnimation-sansTranslate ${f=="transition"?p*3:"3000"}ms both paused; /* Holds both the starting and ending states */
					animation-timing-function: var(--scroll-animation-timing, ease);
					${m?"will-change: transform, opacity, animation-delay;":""}
					${s["--scroll-animation-mode"]=="transition"?"":`animation-delay: -${n+1}s;`}
				}


		`}):null;return this.isSlideshow?(this.props.baseNode.thumbnailsVisible?Array.from(this.props.baseNode.children).filter(g=>g.tagName=="MEDIA-ITEM").forEach(g=>{g._setCustomScrollJSX?.(null)}):Array.from(this.props.baseNode.children).filter(g=>g.tagName=="MEDIA-ITEM").forEach(g=>{g._setCustomScrollJSX?.(v),g._disableScrollTransition?.(!1),f=="transition"&&g._updateScrollTransition?.(n)}),S(de,{children:e.children})):S(de,{children:[e.children,v]})}onViewportIntersectionChange=e=>{this.setState({isVisible:e.visible,viewportIntersection:e.position,hasLayout:e.hasLayout})};onResize=e=>{(this.cachedHeight==null||Math.abs(this.cachedHeight-e.height)>10)&&this.state.needsKeyFrameUpdateOnResize&&(this.cachedHeight=e.height,this.updateKeyframesNextAnimationLoop=!0)};calculateScrollProgress=e=>{let r=this.state.allScrollAnimationVariables["--scroll-animation-mode"],i=this.props.scrollContext.getScrollPosition(),n=0,o=this.props.scrollContext.scrollingElement,s=o&&o.classList?.contains("overlay-content"),a=0,l=this.props.baseNode.getBoundingClientRect();if(l.height==0)return this._lastScrollProgress=void 0,{scrollProgress:void 0,initialScrollProgress:void 0};let p=l.top,f=l.height,c=l.bottom;if(r=="transition"){let E=this.isSlideshow?this.props.baseNode.getActiveSlide()?.[1]?.shadowRoot.querySelector("figure"):this.props.figureElement;E||(E=this.props.baseNode);let L=E.getBoundingClientRect();p=L.top,f=L.height,c=L.bottom}else{let E=this.isSlideshow?this.props.baseNode.getActiveSlide()?.[1]?.shadowRoot.querySelector(".sizing-frame"):this.props.sizingFrameElement;E||(E=this.props.baseNode),f=E.offsetHeight;let L=l.height-f;p=l.top+L/2,c=l.bottom+-L/2}if(J0&&s)if(tm.has(o))n=tm.get(o);else{let E=o.querySelector(".page-content");n=Math.floor(Math.abs(AZ(E))*100)/100,tm.set(o,n)}let m=i.h,v=m+f+n*2;a=(m-p)/v,a=Math.max(-.5,Math.min(1.5,a)),a=Math.round(a*1e4)/1e4;let g,x=1-(p+i.y+f)/v,_=(i.scrollHeight-(p+i.y))/v;return x>=1-im&&x>=-.1?g=x:_<=im&&_>=-.1&&(g=_),g!=null&&(g=Math.round(g*1e4)/1e4),this._lastScrollProgress={scrollProgress:a,initialScrollProgress:g},{scrollProgress:a,initialScrollProgress:g}};getKeyframesFromStyleSheets=e=>{let r=Array.from(document.styleSheets).reverse(),i=null,n=r.some(o=>{let s;try{s=o.cssRules}catch{return!1}if(s){let a=Array.from(o.cssRules).reverse().find(l=>l.type===window.CSSRule.KEYFRAMES_RULE&&l.name===e);return a?(i=a,!0):!1}});return i};getScaleAnimationOffsets=()=>{let e=l=>.004112*l*l-.85196*l+50,r=0,i=this.props.scrollContext.getScrollPosition();if(this.props.baseNode._size&&this.props.baseNode._size.mediaSize.height!=0){let l=this.props.baseNode._size;r=l.mediaSize.height+l.mediaSize.vertPadSize}else r=this.props.baseNode.getBoundingClientRect().height;let n=r/i.h*100,s=(50-e(n)).toFixed(1),a=(50+(50-s)).toFixed(1);return[s,a]};getScrollAnimationVariables=()=>{let{isUsingOldScrollTransition:e,scrollAnimationDefinedInSettings:r}=this.props,i=this.isSlideshow?this.props.baseNode.querySelector("media-item")||this.props.baseNode:this.props.baseNode,n=window.getComputedStyle(i),o=n.getPropertyValue("--scroll-animation-transition-duration").trim()||"1000ms",s=o.endsWith("s")&&!o.endsWith("ms"),a=o.endsWith("ms")||!s;return!n.getPropertyValue("--scroll-animation").trim()&&(e||r=="fade-up-2")?{"--scroll-animation":"scrollTransitionFadeUp-2","--scroll-animation-mode":"transition","--scroll-animation-timing":"cubic-bezier(0.45,0.05,0.33,1)","--scroll-animation-transition-duration":1e3,"--scroll-animation-neutral-keyframes":"false"}:{"--scroll-animation":n.getPropertyValue("--scroll-animation").trim(),"--scroll-animation-mode":n.getPropertyValue("--scroll-animation-mode").trim()||"animation","--scroll-animation-timing":n.getPropertyValue("--scroll-animation-timing").trim(),"--scroll-animation-transition-duration":parseInt(a?o:(parseFloat(o)||0)*1e3),"--scroll-animation-neutral-keyframes":n.getPropertyValue("--scroll-animation-neutral-keyframes").trim()||"true"}};getKeyframeCss=(e,r)=>{let i=r["--scroll-animation"],n=r["--scroll-animation-mode"],o=r["--scroll-animation-neutral-keyframes"]!="false",s=parseInt(r["--scroll-animation-transition-duration"]),a=i.startsWith("scrollAnimationScaleInOut-")||i.startsWith("scrollAnimationScaleIn-")||i.startsWith("scrollAnimationScaleOut-");if(!i)return{translateOnlyKeyframeCSS:"",nonTranslateKeyframeCSS:""};let l=this.getKeyframesFromStyleSheets(i);if(!l)return{translateOnlyKeyframeCSS:"",nonTranslateKeyframeCSS:""};let p=new Set,f="initial",c=Array.from(l).map(O=>{let M={key:O.keyText=="from"?0:O.keyText=="to"?100:parseFloat(O.keyText),style:{}};for(var D=0;D<O.style.length;D++)if(O.style[D]){p.add(O.style[D]);let P=O.style.getPropertyValue(O.style[D]);if(O.style[D]=="clip-path")switch(!0){case P.includes("inset"):f="inset(0%)";break;case P.includes("rect"):f="rect(0% 100% 100% 0%)";break;case P.includes("xywh"):f="xywh(0px 0px 100% 100%)";break}M.style[O.style[D]]=P}return M});if(n=="transition"){let O=Jn.default.cloneDeep(c[0]),M=Jn.default.cloneDeep(c[c.length-1]),D={key:50,style:{transform:"rotate(0deg) scale(1) skew(0deg) translateX(0px) translateY(0px) translateZ(0px)",opacity:1,filter:"initial"}};p.has("clip-path")&&(D.style["clip-path"]=f),O.key<100&&M.key<100?M=Jn.default.cloneDeep(D):O.key>0&&M.key>0&&(O=Jn.default.cloneDeep(D)),c=[Jn.default.cloneDeep(O),Jn.default.cloneDeep(D),Jn.default.cloneDeep(M)],c[0].key=0,c[1].key=50,c[2].key=100}let m=a?this.getScaleAnimationOffsets():[],v=Q0;if(m.length==2&&c.length>=3&&n!="transition"){let O=c[0],M=c[1],D={key:Number(m[0]),style:{}};D.style["transform-origin"]=O.style["transform-origin"],D.style.transform=M.style.transform;let P=c.findIndex((q,J,Y)=>{let ie=Y[J+1]?.key??9e9;return q.key>D.key&&D.key<ie});c.splice(P,0,D);let U=c[c.length-2],N=c[c.length-1],F={key:Number(m[1]),style:{}};F.style["transform-origin"]=N.style["transform-origin"],F.style.transform=U.style.transform;let V=c.findIndex((q,J,Y)=>{let ie=Y[J+1]?.key??9e9;return q.key>F.key&&F.key<ie});c.splice(V,0,F),v=Math.min(100-m[1],m[0])/100}if(n!="transition"&&o&&e>=-v&&e<=1+v){let O=e,M=Array.from(c).map(K=>({offset:K.key/100,...K.style})),D=this.isSlideshow?this.props.baseNode.getActiveSlide()?.[1]?.shadowRoot.querySelector(".sizing-frame"):this.props.sizingFrameElement;D||(D=this.props.baseNode);let P=null;try{P=D.animate(M,{duration:s,easing:r["--scroll-animation-timing"]||"ease",fill:"both"})}catch{P=D.animate(M,{duration:s,easing:"ease-in-out",fill:"both"})}let U="cubic-bezier(0.83, 0, 0.17, 1)",N="cubic-bezier(0.83, 0, 0.17, 1)";P.pause(),P.currentTime=0;let F=parseFloat((O-v).toFixed(4)),V="";P.currentTime=F*1e3;let q=window.getComputedStyle(D);V=Array.from(p).map(K=>K+": "+q.getPropertyValue(K)+";").join(" ")+" easing: "+U+";";let J=parseFloat((O+v).toFixed(4)),Y="";P.currentTime=J*1e3;let ie=window.getComputedStyle(D);Y=Array.from(p).map(K=>K+": "+ie.getPropertyValue(K)+";").join(" "),P.cancel(),D.removeAttribute("style"),c.unshift(Jn.default.cloneDeep(c[0])),c.push(Jn.default.cloneDeep(c[c.length-1])),c[0].key=-100,c[c.length-1].key=200,c=c.filter(K=>!(K.key/100>=F&&K.key/100<=J));let oe=c.findIndex((K,Q,te)=>{let ee=te[Q+1]?.key??9e9;return K.key>O*100&&O*100<ee}),Z=K=>K.split(";").reduce((Q,te)=>{let[ee,ae]=te.split(":").map(ue=>ue.trim());return!ee||!ae?Q:{...Q,[ee]:ae}},{});c.splice(oe,0,{key:F*100,style:Z(V)},{key:O*100,style:{transform:"rotate(0deg) scale(1) skew(0deg) translateX(0px) translateY(0px) translateZ(0px)",opacity:1,easing:U,"clip-path":p.has("clip-path")?f:null,filter:"initial"}},{key:J*100,style:Z(Y)})}else n=="transition"&&(c=[{...c[0],key:-100},{...c[1],style:{...c[1].style,"transform-origin":c[0].style?.["transform-origin"]},key:0},{...c[1],style:{...c[1].style,"transform-origin":"50% 50%"},key:49.5},{...c[2],style:{...c[2].style,"transform-origin":"50% 50%"},key:50.5},{...c[2],key:100},{...c[1],style:{...c[1].style,"transform-origin":c[2].style?.["transform-origin"]},key:200}]);let g=[],x=[];c.forEach((O,M,D)=>{let P={key:O.key,style:{...O.style}},U={key:O.key,style:{...O.style}};Object.entries(O.style||{}).forEach(([N,F])=>{switch(N){case"transform":let V=[],q=[],J=F.match(/[a-zA-Z3]*\([^)]*\)/g)||[],Y,ie=[],oe=[];J.forEach(Z=>{switch(Z=Z.trim(),!0){case Z.startsWith("matrix3d("):Y=Z.replace("matrix3d(","").replace(")","").split(", ").map(te=>parseFloat(te)),ie=[1,0,0,0,0,1,0,0,0,0,1,0,0,Y[13],0,1],V.push("matrix3d("+ie.join(", ")+")"),oe=[...Y],oe[13]=0,q.push("matrix3d("+oe.join(", ")+")");break;case Z.startsWith("matrix("):Y=Z.replace("matrix(","").replace(")","").split(", ").map(te=>parseFloat(te)),ie=[1,0,0,1,0,Y[5]],V.push("matrix("+ie.join(", ")+")"),oe=[...Y],oe[5]=0,q.push("matrix("+oe.join(", ")+")");break;case Z.startsWith("translate("):let K=Z.replace("translate(","").replace(")","").split(",").map(te=>te);q.push("translateX("+K[0]+")"),V.push("translateY("+K[1]+")");break;case Z.startsWith("translate3d("):let Q=Z.replace("translate3d(","").replace(")","").split(",").map(te=>te);q.push("translate3d("+Q[0]+", 0px,"+Q[2]+")"),V.push("translateY("+Q[1]+")");break;case Z.startsWith("translateY("):V.push(Z);break;case Z.startsWith("perspective("):V.push(Z),q.push(Z);break;default:q.push(Z);break}}),P.style.transform=V.join(" "),P.style.transform||(P.style.transform="translateY(0px)"),U.style.transform=q.join(" "),U.style.transform||(U.style.transform="scale(1)");break;default:delete P.style[N];break}}),g.push(P),x.push(U)});let _=(O,M)=>{let D="@keyframes "+(M||l.name)+` {
`;return D=D+O.map((P,U,N)=>{let F=Object.entries(P.style).map(([q,J])=>q+": "+J+";").join(" ");return Math.max(0,P.key/3+33.33333).toFixed(3)+"% {"+F+"}"}).join(`
`),D+=`
}`,D},E=_(g,"scrollAnimation-onlyTranslate"),L=_(x,"scrollAnimation-sansTranslate");return{translateOnlyKeyframeCSS:E,nonTranslateKeyframeCSS:L}};regenerateKeyframes=e=>{let r=this.getScrollAnimationVariables(),i=r["--scroll-animation"],{translateOnlyKeyframeCSS:n,nonTranslateKeyframeCSS:o}=this.getKeyframeCss(e,r);if(!o){this.setState({allScrollAnimationVariables:r,needsKeyFrameUpdateOnResize:!1,onlyTranslateKeyframes:"",sansTranslateKeyframes:""});return}let s=!1;(i.startsWith("scrollAnimationScaleInOut-")||i.startsWith("scrollAnimationScaleIn-")||i.startsWith("scrollAnimationScaleOut-"))&&(s=!0),this.setState({allScrollAnimationVariables:r,needsKeyFrameUpdateOnResize:s,onlyTranslateKeyframes:n,sansTranslateKeyframes:o})};processTransitionAnimation=e=>{if(this.isSlideshow)return;let{sizingFrameElement:r,figureElement:i}=this.props,n=r.getAnimations().find(f=>f.animationName=="scrollAnimation-sansTranslate"),o=i.getAnimations().find(f=>f.animationName=="scrollAnimation-onlyTranslate");if(!n||!o)return;let s=this.state.allScrollAnimationVariables["--scroll-animation-transition-duration"]*3||3e3,a=null,l=null,p=null;this.state.viewportIntersection=="below"||e<=0?(a="paused",l=1,p=0):e>0&&e<1?!this.firstTransitionCalculated||this.state.viewportIntersection=="outside"||n.currentTime>=s/3&&n.currentTime<s/2||n.currentTime>=s?(p=s/3,a="paused"):a="running":(this.state.viewportIntersection=="above"||e>=1)&&(a="paused",l=1,p=s*(2/3)),l!=null&&n.playbackRate!=l&&(n.playbackRate=l,o.playbackRate=l),p!=null&&n.currentTime!=p&&(n.currentTime=p,o.currentTime=p),n.playState!="running"&&a=="running"?(n.play(),o.play()):n.playState!="paused"&&a=="paused"&&(n.pause(),o.pause()),this.firstTransitionCalculated=!0};animateScrollProgress=e=>{if(!this.props.isLazyLoadable){this._lastScrollHeight=null,this._lastScrollProgress=void 0;return}let r=this.props.scrollContext.getScrollPosition(),i=r.scrollHeight,n=r.h<=r.scrollHeight-1,{scrollProgress:o,initialScrollProgress:s}=this.calculateScrollProgress(e||this._lastScrollHeight!=i);this.setState(a=>((s!=a.initialScrollProgress||this.updateKeyframesNextAnimationLoop||e===!0)&&(this.regenerateKeyframes(s),this.updateKeyframesNextAnimationLoop=!1,e=!1),{isOverFlowing:n,initialScrollProgress:s,scrollProgress:o,prevScrollProgress:a.scrollProgress}),()=>{this.state.allScrollAnimationVariables["--scroll-animation-mode"]=="transition"&&this.processTransitionAnimation(o)}),this._lastScrollHeight=i};componentDidMount(){this.firstTransitionCalculated=!1,fu.size==0&&(cancelAnimationFrame(rm),rm=requestAnimationFrame(iN)),fu.set(this.props.baseNode,this),Mt(this.props.baseNode,"elementResize",this.onResize),Mt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),this.updateKeyframesNextAnimationLoop=!0}componentDidUpdate(e,r){if(this.state.allScrollAnimationVariables["--scroll-animation-mode"]!=r.allScrollAnimationVariables["--scroll-animation-mode"]||this.state.allScrollAnimationVariables["--scroll-animation"]!=r.allScrollAnimationVariables["--scroll-animation"]){if(this.firstTransitionCalculated=!1,this.props.sizingFrameElement&&this.props.figureElement)if(this.state.allScrollAnimationVariables["--scroll-animation-mode"]=="animation"){let i=this.props.sizingFrameElement.getAnimations().find(o=>o.animationName=="scrollAnimation-sansTranslate"),n=this.props.figureElement.getAnimations().find(o=>o.animationName=="scrollAnimation-onlyTranslate");i&&(i.playbackRate=1,i.currentTime=0,i.pause()),n&&(n.playbackRate=1,n.currentTime=0,n.pause())}else this.state.scrollProgress!=null&&this.state.allScrollAnimationVariables["--scroll-animation-mode"]=="transition"&&this.processTransitionAnimation(this.state.scrollProgress);this.updateKeyframesNextAnimationLoop=!0}}componentWillUnmount(){clearTimeout(this.initTimeout),fu.delete(this.props.baseNode),kt(this.props.baseNode,"elementResize",this.onResize),kt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),fu.size==0&&cancelAnimationFrame(rm)}},nN=Ue((t,e)=>{let r=t.siteDesign.images.scroll_animation==!0,i=typeof t.siteDesign.images.scroll_animation=="string"?t.siteDesign.images.scroll_animation:"";return{isUsingOldScrollTransition:r,scrollAnimationDefinedInSettings:i}},null)(ew)});var Obe,Md,nm,TZ,sN,aN=$(()=>{ke();mt();Ur();Obe=ve(Ie(),1);fe();Md=new Map,nm=class extends me{constructor(e){switch(super(e),this.state={z:0,x:0,y:0,interacted:!1,dragging:!1},this.props.baseNode.tagName){case"DIV":case"SPAN":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"H7":case"H8":case"H9":this.displayInlineBlock=!0;break;default:this.displayInlineBlock=!1;break}this.preventClick=!1,this.inSlideshow=this.props.baseNode.parentElement.tagName==="GALLERY-SLIDESHOW"}render(e,r){if(e.adminMode)return e.children;let{x:i,y:n,z:o}=r;return S(de,{children:[e.children,this.inSlideshow?null:S("style",{id:"draggable-item",children:`
				:host {
					${this.props.adminMode?"":`
						pointer-events: auto!important;
						-webkit-user-select: none; 
						-webkit-touch-callout: none;
					`}
					${r.dragging?"--scroll-transition: 0s all!important; cursor: grabbing;":"cursor: grab;"}
					${this.displayInlineBlock?"display: inline-block;":""}
					--drag-transform: ${r.interacted?`translate3d(${i}px, ${n}px, ${o+100}px)`:`translate(${i}px, ${n}px)`};
					${!this.props.adminMode&&r.interacted?`z-index: ${o+100};`:""}					
				}
			`})]})}onDragStart=e=>{e.preventDefault(),e.stopPropagation()};onTouchMove=e=>{e.preventDefault()};onPointerDown=e=>{if(this.props.adminMode||e.button==2||this.inSlideshow)return;this.preventClick=!1;let r=this.state.z;Md.forEach((i,n)=>{n!==this.props.baseNode&&i.state.z>r&&i.setState(o=>({z:o.z-1}))}),this.setState({x:this.state.x,y:this.state.y,z:Md.size+10,interacted:!0,dragging:!0}),this.initialPosition={x:e.clientX+-this.state.x,y:e.clientY+-this.state.y},this.mousePosition={x:e.clientX,y:e.clientY},this.accumulatedDelta=0,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)};onPointerMove=e=>{e.preventDefault();let r=e.clientX,i=e.clientY,n=Math.sqrt(Math.pow(this.mousePosition.x-r,2)+Math.pow(this.mousePosition.y-i,2));this.accumulatedDelta+=n,this.accumulatedDelta>4&&(this.preventClick=!0),this.mousePosition={x:e.clientX,y:e.clientY},this.setState({x:e.clientX-this.initialPosition.x,y:e.clientY-this.initialPosition.y})};onPointerUp=e=>{this.setState({dragging:!1}),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp)};onClickCapture=e=>{this.preventClick&&(e.preventDefault(),e.stopPropagation())};bindListeners=()=>{this.props.adminMode||(this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.props.baseNode.addEventListener("pointerdown",this.onPointerDown),this.props.baseNode.addEventListener("touchmove",this.onTouchMove),this.props.baseNode.addEventListener("click",this.onClickCapture,{capture:!0}))};unbindListeners=()=>{this.props.baseNode.removeEventListener("dragstart",this.onDragStart),this.props.baseNode.removeEventListener("pointerdown",this.onPointerDown),this.props.baseNode.removeEventListener("touchmove",this.onTouchMove),this.props.baseNode.removeEventListener("click",this.onClickCapture,{capture:!0})};componentDidMount(){this.bindListeners(),Md.set(this.props.baseNode,this),this.setState({z:Md.size+10})}componentDidUpdate(e,r){e.adminMode!==this.props.adminMode&&(this.setState({x:0,y:0,z:0,interacted:!1}),this.unbindListeners(),this.bindListeners())}componentWillUnmount(){this.unbindListeners(),Md.delete(this.props.baseNode)}};nm.transformSlot="--drag-transform";TZ=Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(nm),sN=TZ});var lN,tw=$(()=>{lN={"dropshadow-offset":"0rem","dropshadow-color":"rgba(0,0,0,.85)","dropshadow-blur-radius":"0rem"}});var Ube,om,uN,cN=$(()=>{ke();Ube=ve(Ie(),1);tw();fe();om=class extends me{constructor(e){super(e)}render(e,r){let i=this.props["dropshadow-offset"].split(" "),n=i[0],o=i.length>1?i[1]:i[0];return S(de,{children:[e.baseNode.tagName==="MEDIA-ITEM"?S("style",{children:`
                        img {
                            filter: drop-shadow(${o} ${n} ${this.props["dropshadow-blur-radius"]} ${this.props["dropshadow-color"]});
                        }
                    `}):S("style",{children:`
                        :host {
                            filter: drop-shadow(${o} ${n} ${this.props["dropshadow-blur-radius"]} ${this.props["dropshadow-color"]});
                        }
                    `}),e.children]})}};om.defaultProps=lN;uN=om});var jbe,sm,dN,pN=$(()=>{ke();jbe=ve(Ie(),1);fe();sm=class extends me{constructor(e){super(e)}render(e,r){return S(de,{children:[e.baseNode.tagName==="MEDIA-ITEM"?S("style",{children:`
                        img {
                            background-color: ${this.props["background-color"]};
                        }
                    `}):S("style",{children:`
                        :host {
                            background-color: ${this.props["background-color"]};
                        }
                    `}),e.children]})}};sm.defaultProps={"background-color":"rgba(0,0,0,0)"};dN=sm});var Zbe,am,hN,fN=$(()=>{ke();Zbe=ve(Ie(),1);tw();fe();am=class extends me{constructor(e){super(e)}render(e,r){let i=Object.keys(e).reduce((n,o)=>{if(o.includes("-style")){let s=o.replace("-style","");n.push({part:s,styles:e[o]?e[o].replaceAll(";","!important;"):""})}return n},[]);return S(de,{children:[S("style",{children:i.map(({part:n,styles:o})=>`[part*="${n}"] { ${o} }`)}),e.children]})}};am.defaultProps={};hN=am});var mN=$(()=>{});var o0e,lm,gN,vN=$(()=>{ke();o0e=ve(Ie(),1);mN();fe();lm=class extends me{constructor(e){super(e)}calculateDuration(e){return 5*(Math.max(100-Math.abs(e),5)*.01)}render(e,r){let i=this.calculateDuration(Number(this.props["blink-speed"])),n=Math.max(99.9-this.props["blink-pulse"],.1),o="steps(1)";switch(!0){case(isNaN(Number(this.props["blink-transition"]))&&this.props["blink-transition"]=="linear"):o="linear";break;case(isNaN(Number(this.props["blink-transition"]))&&this.props["blink-transition"]=="ease"):o="ease";break;case Number(this.props["blink-transition"])>0:o="ease";break}return S(de,{children:[e.children,S("style",{children:`
					:host {
						animation: ${i}s infinite ${o} blink!important;
						-webkit-animation: ${i}s infinite ${o} blink!important;
					}
					
					@keyframes blink {
						0% {
							opacity: 0;
						}
						50% {
							opacity: 1;
						}
						100% {
							opacity: 0;
						}
					}
				`})]})}};lm.defaultProps={"blink-transition":"0","blink-speed":"75","blink-pulse":"50"};gN=lm});function RZ(t){return!!t&&typeof t=="object"}function kZ(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||DZ(t)}function DZ(t){return t.$$typeof===OZ}function LZ(t){return Array.isArray(t)?[]:{}}function um(t,e){return e.clone!==!1&&e.isMergeableObject(t)?cm(LZ(t),t,e):t}function FZ(t,e,r){return t.concat(e).map(function(i){return um(i,r)})}function zZ(t,e,r){var i={};return r.isMergeableObject(t)&&Object.keys(t).forEach(function(n){i[n]=um(t[n],r)}),Object.keys(e).forEach(function(n){!r.isMergeableObject(e[n])||!t[n]?i[n]=um(e[n],r):i[n]=cm(t[n],e[n],r)}),i}function cm(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||FZ,r.isMergeableObject=r.isMergeableObject||MZ;var i=Array.isArray(e),n=Array.isArray(t),o=i===n;return o?i?r.arrayMerge(t,e,r):zZ(t,e,r):um(e,r)}var MZ,NZ,OZ,yN=$(()=>{MZ=function(e){return RZ(e)&&!kZ(e)};NZ=typeof Symbol=="function"&&Symbol.for,OZ=NZ?Symbol.for("react.element"):60103;cm.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,n){return cm(i,n,r)},{})}});var BZ,dm,rw=$(()=>{BZ=typeof global=="object"&&global&&global.Object===Object&&global,dm=BZ});var UZ,qZ,kr,Qn=$(()=>{rw();UZ=typeof self=="object"&&self&&self.Object===Object&&self,qZ=dm||UZ||Function("return this")(),kr=qZ});var HZ,Dn,Rd=$(()=>{Qn();HZ=kr.Symbol,Dn=HZ});function $Z(t){var e=WZ.call(t,kd),r=t[kd];try{t[kd]=void 0;var i=!0}catch{}var n=VZ.call(t);return i&&(e?t[kd]=r:delete t[kd]),n}var bN,WZ,VZ,kd,wN,xN=$(()=>{Rd();bN=Object.prototype,WZ=bN.hasOwnProperty,VZ=bN.toString,kd=Dn?Dn.toStringTag:void 0;wN=$Z});function KZ(t){return GZ.call(t)}var jZ,GZ,SN,_N=$(()=>{jZ=Object.prototype,GZ=jZ.toString;SN=KZ});function ZZ(t){return t==null?t===void 0?XZ:YZ:EN&&EN in Object(t)?wN(t):SN(t)}var YZ,XZ,EN,eo,mu=$(()=>{Rd();xN();_N();YZ="[object Null]",XZ="[object Undefined]",EN=Dn?Dn.toStringTag:void 0;eo=ZZ});function JZ(t,e){return function(r){return t(e(r))}}var pm,iw=$(()=>{pm=JZ});var QZ,hm,nw=$(()=>{iw();QZ=pm(Object.getPrototypeOf,Object),hm=QZ});function eJ(t){return t!=null&&typeof t=="object"}var Ln,tl=$(()=>{Ln=eJ});var AN=se((A0e,IN)=>{"use strict";var CN=Array.isArray,PN=Object.keys,tJ=Object.prototype.hasOwnProperty,rJ=typeof Element<"u";function ow(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=CN(t),i=CN(e),n,o,s;if(r&&i){if(o=t.length,o!=e.length)return!1;for(n=o;n--!==0;)if(!ow(t[n],e[n]))return!1;return!0}if(r!=i)return!1;var a=t instanceof Date,l=e instanceof Date;if(a!=l)return!1;if(a&&l)return t.getTime()==e.getTime();var p=t instanceof RegExp,f=e instanceof RegExp;if(p!=f)return!1;if(p&&f)return t.toString()==e.toString();var c=PN(t);if(o=c.length,o!==PN(e).length)return!1;for(n=o;n--!==0;)if(!tJ.call(e,c[n]))return!1;if(rJ&&t instanceof Element&&e instanceof Element)return t===e;for(n=o;n--!==0;)if(s=c[n],!(s==="_owner"&&t.$$typeof)&&!ow(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}IN.exports=function(e,r){try{return ow(e,r)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}}});function iJ(){this.__data__=[],this.size=0}var TN,MN=$(()=>{TN=iJ});function nJ(t,e){return t===e||t!==t&&e!==e}var fm,sw=$(()=>{fm=nJ});function oJ(t,e){for(var r=t.length;r--;)if(fm(t[r][0],e))return r;return-1}var ta,Nd=$(()=>{sw();ta=oJ});function lJ(t){var e=this.__data__,r=ta(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():aJ.call(e,r,1),--this.size,!0}var sJ,aJ,RN,kN=$(()=>{Nd();sJ=Array.prototype,aJ=sJ.splice;RN=lJ});function uJ(t){var e=this.__data__,r=ta(e,t);return r<0?void 0:e[r][1]}var NN,ON=$(()=>{Nd();NN=uJ});function cJ(t){return ta(this.__data__,t)>-1}var DN,LN=$(()=>{Nd();DN=cJ});function dJ(t,e){var r=this.__data__,i=ta(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}var FN,zN=$(()=>{Nd();FN=dJ});function gu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var ra,Od=$(()=>{MN();kN();ON();LN();zN();gu.prototype.clear=TN;gu.prototype.delete=RN;gu.prototype.get=NN;gu.prototype.has=DN;gu.prototype.set=FN;ra=gu});function pJ(){this.__data__=new ra,this.size=0}var BN,UN=$(()=>{Od();BN=pJ});function hJ(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var qN,HN=$(()=>{qN=hJ});function fJ(t){return this.__data__.get(t)}var WN,VN=$(()=>{WN=fJ});function mJ(t){return this.__data__.has(t)}var $N,jN=$(()=>{$N=mJ});function gJ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var To,vu=$(()=>{To=gJ});function xJ(t){if(!To(t))return!1;var e=eo(t);return e==yJ||e==bJ||e==vJ||e==wJ}var vJ,yJ,bJ,wJ,mm,aw=$(()=>{mu();vu();vJ="[object AsyncFunction]",yJ="[object Function]",bJ="[object GeneratorFunction]",wJ="[object Proxy]";mm=xJ});var SJ,gm,GN=$(()=>{Qn();SJ=kr["__core-js_shared__"],gm=SJ});function _J(t){return!!KN&&KN in t}var KN,YN,XN=$(()=>{GN();KN=function(){var t=/[^.]+$/.exec(gm&&gm.keys&&gm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();YN=_J});function PJ(t){if(t!=null){try{return CJ.call(t)}catch{}try{return t+""}catch{}}return""}var EJ,CJ,ds,lw=$(()=>{EJ=Function.prototype,CJ=EJ.toString;ds=PJ});function OJ(t){if(!To(t)||YN(t))return!1;var e=mm(t)?NJ:AJ;return e.test(ds(t))}var IJ,AJ,TJ,MJ,RJ,kJ,NJ,ZN,JN=$(()=>{aw();XN();vu();lw();IJ=/[\\^$.*+?()[\]{}|]/g,AJ=/^\[object .+?Constructor\]$/,TJ=Function.prototype,MJ=Object.prototype,RJ=TJ.toString,kJ=MJ.hasOwnProperty,NJ=RegExp("^"+RJ.call(kJ).replace(IJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");ZN=OJ});function DJ(t,e){return t?.[e]}var QN,eO=$(()=>{QN=DJ});function LJ(t,e){var r=QN(t,e);return ZN(r)?r:void 0}var Zi,ia=$(()=>{JN();eO();Zi=LJ});var FJ,na,vm=$(()=>{ia();Qn();FJ=Zi(kr,"Map"),na=FJ});var zJ,ps,Dd=$(()=>{ia();zJ=Zi(Object,"create"),ps=zJ});function BJ(){this.__data__=ps?ps(null):{},this.size=0}var tO,rO=$(()=>{Dd();tO=BJ});function UJ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var iO,nO=$(()=>{iO=UJ});function VJ(t){var e=this.__data__;if(ps){var r=e[t];return r===qJ?void 0:r}return WJ.call(e,t)?e[t]:void 0}var qJ,HJ,WJ,oO,sO=$(()=>{Dd();qJ="__lodash_hash_undefined__",HJ=Object.prototype,WJ=HJ.hasOwnProperty;oO=VJ});function GJ(t){var e=this.__data__;return ps?e[t]!==void 0:jJ.call(e,t)}var $J,jJ,aO,lO=$(()=>{Dd();$J=Object.prototype,jJ=$J.hasOwnProperty;aO=GJ});function YJ(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ps&&e===void 0?KJ:e,this}var KJ,uO,cO=$(()=>{Dd();KJ="__lodash_hash_undefined__";uO=YJ});function yu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var uw,dO=$(()=>{rO();nO();sO();lO();cO();yu.prototype.clear=tO;yu.prototype.delete=iO;yu.prototype.get=oO;yu.prototype.has=aO;yu.prototype.set=uO;uw=yu});function XJ(){this.size=0,this.__data__={hash:new uw,map:new(na||ra),string:new uw}}var pO,hO=$(()=>{dO();Od();vm();pO=XJ});function ZJ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var fO,mO=$(()=>{fO=ZJ});function JJ(t,e){var r=t.__data__;return fO(e)?r[typeof e=="string"?"string":"hash"]:r.map}var oa,Ld=$(()=>{mO();oa=JJ});function QJ(t){var e=oa(this,t).delete(t);return this.size-=e?1:0,e}var gO,vO=$(()=>{Ld();gO=QJ});function eQ(t){return oa(this,t).get(t)}var yO,bO=$(()=>{Ld();yO=eQ});function tQ(t){return oa(this,t).has(t)}var wO,xO=$(()=>{Ld();wO=tQ});function rQ(t,e){var r=oa(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}var SO,_O=$(()=>{Ld();SO=rQ});function bu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var Fd,cw=$(()=>{hO();vO();bO();xO();_O();bu.prototype.clear=pO;bu.prototype.delete=gO;bu.prototype.get=yO;bu.prototype.has=wO;bu.prototype.set=SO;Fd=bu});function nQ(t,e){var r=this.__data__;if(r instanceof ra){var i=r.__data__;if(!na||i.length<iQ-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Fd(i)}return r.set(t,e),this.size=r.size,this}var iQ,EO,CO=$(()=>{Od();vm();cw();iQ=200;EO=nQ});function wu(t){var e=this.__data__=new ra(t);this.size=e.size}var PO,IO=$(()=>{Od();UN();HN();VN();jN();CO();wu.prototype.clear=BN;wu.prototype.delete=qN;wu.prototype.get=WN;wu.prototype.has=$N;wu.prototype.set=EO;PO=wu});function oQ(t,e){for(var r=-1,i=t==null?0:t.length;++r<i&&e(t[r],r,t)!==!1;);return t}var AO,TO=$(()=>{AO=oQ});var sQ,dw,MO=$(()=>{ia();sQ=function(){try{var t=Zi(Object,"defineProperty");return t({},"",{}),t}catch{}}(),dw=sQ});function aQ(t,e,r){e=="__proto__"&&dw?dw(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var ym,pw=$(()=>{MO();ym=aQ});function cQ(t,e,r){var i=t[e];(!(uQ.call(t,e)&&fm(i,r))||r===void 0&&!(e in t))&&ym(t,e,r)}var lQ,uQ,bm,hw=$(()=>{pw();sw();lQ=Object.prototype,uQ=lQ.hasOwnProperty;bm=cQ});function dQ(t,e,r,i){var n=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(r[a],t[a],a,r,t):void 0;l===void 0&&(l=t[a]),n?ym(r,a,l):bm(r,a,l)}return r}var sa,zd=$(()=>{hw();pw();sa=dQ});function pQ(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var RO,kO=$(()=>{RO=pQ});function fQ(t){return Ln(t)&&eo(t)==hQ}var hQ,fw,NO=$(()=>{mu();tl();hQ="[object Arguments]";fw=fQ});var OO,mQ,gQ,vQ,DO,LO=$(()=>{NO();tl();OO=Object.prototype,mQ=OO.hasOwnProperty,gQ=OO.propertyIsEnumerable,vQ=fw(function(){return arguments}())?fw:function(t){return Ln(t)&&mQ.call(t,"callee")&&!gQ.call(t,"callee")},DO=vQ});var yQ,Mo,xu=$(()=>{yQ=Array.isArray,Mo=yQ});function bQ(){return!1}var FO,zO=$(()=>{FO=bQ});var qO,BO,wQ,UO,xQ,SQ,wm,mw=$(()=>{Qn();zO();qO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,BO=qO&&typeof module=="object"&&module&&!module.nodeType&&module,wQ=BO&&BO.exports===qO,UO=wQ?kr.Buffer:void 0,xQ=UO?UO.isBuffer:void 0,SQ=xQ||FO,wm=SQ});function CQ(t,e){var r=typeof t;return e=e??_Q,!!e&&(r=="number"||r!="symbol"&&EQ.test(t))&&t>-1&&t%1==0&&t<e}var _Q,EQ,HO,WO=$(()=>{_Q=9007199254740991,EQ=/^(?:0|[1-9]\d*)$/;HO=CQ});function IQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=PQ}var PQ,xm,gw=$(()=>{PQ=9007199254740991;xm=IQ});function JQ(t){return Ln(t)&&xm(t.length)&&!!dr[eo(t)]}var AQ,TQ,MQ,RQ,kQ,NQ,OQ,DQ,LQ,FQ,zQ,BQ,UQ,qQ,HQ,WQ,VQ,$Q,jQ,GQ,KQ,YQ,XQ,ZQ,dr,VO,$O=$(()=>{mu();gw();tl();AQ="[object Arguments]",TQ="[object Array]",MQ="[object Boolean]",RQ="[object Date]",kQ="[object Error]",NQ="[object Function]",OQ="[object Map]",DQ="[object Number]",LQ="[object Object]",FQ="[object RegExp]",zQ="[object Set]",BQ="[object String]",UQ="[object WeakMap]",qQ="[object ArrayBuffer]",HQ="[object DataView]",WQ="[object Float32Array]",VQ="[object Float64Array]",$Q="[object Int8Array]",jQ="[object Int16Array]",GQ="[object Int32Array]",KQ="[object Uint8Array]",YQ="[object Uint8ClampedArray]",XQ="[object Uint16Array]",ZQ="[object Uint32Array]",dr={};dr[WQ]=dr[VQ]=dr[$Q]=dr[jQ]=dr[GQ]=dr[KQ]=dr[YQ]=dr[XQ]=dr[ZQ]=!0;dr[AQ]=dr[TQ]=dr[qQ]=dr[MQ]=dr[HQ]=dr[RQ]=dr[kQ]=dr[NQ]=dr[OQ]=dr[DQ]=dr[LQ]=dr[FQ]=dr[zQ]=dr[BQ]=dr[UQ]=!1;VO=JQ});function QQ(t){return function(e){return t(e)}}var Su,Sm=$(()=>{Su=QQ});var jO,Bd,eee,vw,tee,hs,_m=$(()=>{rw();jO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bd=jO&&typeof module=="object"&&module&&!module.nodeType&&module,eee=Bd&&Bd.exports===jO,vw=eee&&dm.process,tee=function(){try{var t=Bd&&Bd.require&&Bd.require("util").types;return t||vw&&vw.binding&&vw.binding("util")}catch{}}(),hs=tee});var GO,ree,KO,YO=$(()=>{$O();Sm();_m();GO=hs&&hs.isTypedArray,ree=GO?Su(GO):VO,KO=ree});function oee(t,e){var r=Mo(t),i=!r&&DO(t),n=!r&&!i&&wm(t),o=!r&&!i&&!n&&KO(t),s=r||i||n||o,a=s?RO(t.length,String):[],l=a.length;for(var p in t)(e||nee.call(t,p))&&!(s&&(p=="length"||n&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||HO(p,l)))&&a.push(p);return a}var iee,nee,Em,yw=$(()=>{kO();LO();xu();mw();WO();YO();iee=Object.prototype,nee=iee.hasOwnProperty;Em=oee});function aee(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||see;return t===r}var see,_u,Cm=$(()=>{see=Object.prototype;_u=aee});var lee,XO,ZO=$(()=>{iw();lee=pm(Object.keys,Object),XO=lee});function dee(t){if(!_u(t))return XO(t);var e=[];for(var r in Object(t))cee.call(t,r)&&r!="constructor"&&e.push(r);return e}var uee,cee,JO,QO=$(()=>{Cm();ZO();uee=Object.prototype,cee=uee.hasOwnProperty;JO=dee});function pee(t){return t!=null&&xm(t.length)&&!mm(t)}var Pm,bw=$(()=>{aw();gw();Pm=pee});function hee(t){return Pm(t)?Em(t):JO(t)}var Eu,Im=$(()=>{yw();QO();bw();Eu=hee});function fee(t,e){return t&&sa(e,Eu(e),t)}var eD,tD=$(()=>{zd();Im();eD=fee});function mee(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var rD,iD=$(()=>{rD=mee});function yee(t){if(!To(t))return rD(t);var e=_u(t),r=[];for(var i in t)i=="constructor"&&(e||!vee.call(t,i))||r.push(i);return r}var gee,vee,nD,oD=$(()=>{vu();Cm();iD();gee=Object.prototype,vee=gee.hasOwnProperty;nD=yee});function bee(t){return Pm(t)?Em(t,!0):nD(t)}var Cu,Am=$(()=>{yw();oD();bw();Cu=bee});function wee(t,e){return t&&sa(e,Cu(e),t)}var sD,aD=$(()=>{zd();Am();sD=wee});function See(t,e){if(e)return t.slice();var r=t.length,i=cD?cD(r):new t.constructor(r);return t.copy(i),i}var dD,lD,xee,uD,cD,pD,hD=$(()=>{Qn();dD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lD=dD&&typeof module=="object"&&module&&!module.nodeType&&module,xee=lD&&lD.exports===dD,uD=xee?kr.Buffer:void 0,cD=uD?uD.allocUnsafe:void 0;pD=See});function _ee(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var Tm,ww=$(()=>{Tm=_ee});function Eee(t,e){for(var r=-1,i=t==null?0:t.length,n=0,o=[];++r<i;){var s=t[r];e(s,r,t)&&(o[n++]=s)}return o}var fD,mD=$(()=>{fD=Eee});function Cee(){return[]}var Mm,xw=$(()=>{Mm=Cee});var Pee,Iee,gD,Aee,Pu,Rm=$(()=>{mD();xw();Pee=Object.prototype,Iee=Pee.propertyIsEnumerable,gD=Object.getOwnPropertySymbols,Aee=gD?function(t){return t==null?[]:(t=Object(t),fD(gD(t),function(e){return Iee.call(t,e)}))}:Mm,Pu=Aee});function Tee(t,e){return sa(t,Pu(t),e)}var vD,yD=$(()=>{zd();Rm();vD=Tee});function Mee(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}var km,Sw=$(()=>{km=Mee});var Ree,kee,Nm,_w=$(()=>{Sw();nw();Rm();xw();Ree=Object.getOwnPropertySymbols,kee=Ree?function(t){for(var e=[];t;)km(e,Pu(t)),t=hm(t);return e}:Mm,Nm=kee});function Nee(t,e){return sa(t,Nm(t),e)}var bD,wD=$(()=>{zd();_w();bD=Nee});function Oee(t,e,r){var i=e(t);return Mo(t)?i:km(i,r(t))}var Om,Ew=$(()=>{Sw();xu();Om=Oee});function Dee(t){return Om(t,Eu,Pu)}var xD,SD=$(()=>{Ew();Rm();Im();xD=Dee});function Lee(t){return Om(t,Cu,Nm)}var _D,ED=$(()=>{Ew();_w();Am();_D=Lee});var Fee,Dm,CD=$(()=>{ia();Qn();Fee=Zi(kr,"DataView"),Dm=Fee});var zee,Lm,PD=$(()=>{ia();Qn();zee=Zi(kr,"Promise"),Lm=zee});var Bee,Fm,ID=$(()=>{ia();Qn();Bee=Zi(kr,"Set"),Fm=Bee});var Uee,zm,AD=$(()=>{ia();Qn();Uee=Zi(kr,"WeakMap"),zm=Uee});var TD,qee,MD,RD,kD,ND,Hee,Wee,Vee,$ee,jee,rl,Iu,Bm=$(()=>{CD();vm();PD();ID();AD();mu();lw();TD="[object Map]",qee="[object Object]",MD="[object Promise]",RD="[object Set]",kD="[object WeakMap]",ND="[object DataView]",Hee=ds(Dm),Wee=ds(na),Vee=ds(Lm),$ee=ds(Fm),jee=ds(zm),rl=eo;(Dm&&rl(new Dm(new ArrayBuffer(1)))!=ND||na&&rl(new na)!=TD||Lm&&rl(Lm.resolve())!=MD||Fm&&rl(new Fm)!=RD||zm&&rl(new zm)!=kD)&&(rl=function(t){var e=eo(t),r=e==qee?t.constructor:void 0,i=r?ds(r):"";if(i)switch(i){case Hee:return ND;case Wee:return TD;case Vee:return MD;case $ee:return RD;case jee:return kD}return e});Iu=rl});function Yee(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Kee.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Gee,Kee,OD,DD=$(()=>{Gee=Object.prototype,Kee=Gee.hasOwnProperty;OD=Yee});var Xee,Cw,LD=$(()=>{Qn();Xee=kr.Uint8Array,Cw=Xee});function Zee(t){var e=new t.constructor(t.byteLength);return new Cw(e).set(new Cw(t)),e}var Au,Um=$(()=>{LD();Au=Zee});function Jee(t,e){var r=e?Au(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var FD,zD=$(()=>{Um();FD=Jee});function ete(t){var e=new t.constructor(t.source,Qee.exec(t));return e.lastIndex=t.lastIndex,e}var Qee,BD,UD=$(()=>{Qee=/\w*$/;BD=ete});function tte(t){return HD?Object(HD.call(t)):{}}var qD,HD,WD,VD=$(()=>{Rd();qD=Dn?Dn.prototype:void 0,HD=qD?qD.valueOf:void 0;WD=tte});function rte(t,e){var r=e?Au(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var $D,jD=$(()=>{Um();$D=rte});function Ste(t,e,r){var i=t.constructor;switch(e){case dte:return Au(t);case ite:case nte:return new i(+t);case pte:return FD(t,r);case hte:case fte:case mte:case gte:case vte:case yte:case bte:case wte:case xte:return $D(t,r);case ote:return new i;case ste:case ute:return new i(t);case ate:return BD(t);case lte:return new i;case cte:return WD(t)}}var ite,nte,ote,ste,ate,lte,ute,cte,dte,pte,hte,fte,mte,gte,vte,yte,bte,wte,xte,GD,KD=$(()=>{Um();zD();UD();VD();jD();ite="[object Boolean]",nte="[object Date]",ote="[object Map]",ste="[object Number]",ate="[object RegExp]",lte="[object Set]",ute="[object String]",cte="[object Symbol]",dte="[object ArrayBuffer]",pte="[object DataView]",hte="[object Float32Array]",fte="[object Float64Array]",mte="[object Int8Array]",gte="[object Int16Array]",vte="[object Int32Array]",yte="[object Uint8Array]",bte="[object Uint8ClampedArray]",wte="[object Uint16Array]",xte="[object Uint32Array]";GD=Ste});var YD,_te,XD,ZD=$(()=>{vu();YD=Object.create,_te=function(){function t(){}return function(e){if(!To(e))return{};if(YD)return YD(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),XD=_te});function Ete(t){return typeof t.constructor=="function"&&!_u(t)?XD(hm(t)):{}}var JD,QD=$(()=>{ZD();nw();Cm();JD=Ete});function Pte(t){return Ln(t)&&Iu(t)==Cte}var Cte,eL,tL=$(()=>{Bm();tl();Cte="[object Map]";eL=Pte});var rL,Ite,iL,nL=$(()=>{tL();Sm();_m();rL=hs&&hs.isMap,Ite=rL?Su(rL):eL,iL=Ite});function Tte(t){return Ln(t)&&Iu(t)==Ate}var Ate,oL,sL=$(()=>{Bm();tl();Ate="[object Set]";oL=Tte});var aL,Mte,lL,uL=$(()=>{sL();Sm();_m();aL=hs&&hs.isSet,Mte=aL?Su(aL):oL,lL=Mte});function qm(t,e,r,i,n,o){var s,a=e&Rte,l=e&kte,p=e&Nte;if(r&&(s=n?r(t,i,n,o):r(t)),s!==void 0)return s;if(!To(t))return t;var f=Mo(t);if(f){if(s=OD(t),!a)return Tm(t,s)}else{var c=Iu(t),m=c==dL||c==zte;if(wm(t))return pD(t,a);if(c==pL||c==cL||m&&!n){if(s=l||m?{}:JD(t),!a)return l?bD(t,sD(s,t)):vD(t,eD(s,t))}else{if(!lr[c])return n?t:{};s=GD(t,c,a)}}o||(o=new PO);var v=o.get(t);if(v)return v;o.set(t,s),lL(t)?t.forEach(function(_){s.add(qm(_,e,r,_,t,o))}):iL(t)&&t.forEach(function(_,E){s.set(E,qm(_,e,r,E,t,o))});var g=p?l?_D:xD:l?Cu:Eu,x=f?void 0:g(t);return AO(x||t,function(_,E){x&&(E=_,_=t[E]),bm(s,E,qm(_,e,r,E,t,o))}),s}var Rte,kte,Nte,cL,Ote,Dte,Lte,Fte,dL,zte,Bte,Ute,pL,qte,Hte,Wte,Vte,$te,jte,Gte,Kte,Yte,Xte,Zte,Jte,Qte,ere,tre,rre,lr,Hm,Pw=$(()=>{IO();TO();hw();tD();aD();hD();ww();yD();wD();SD();ED();Bm();DD();KD();QD();xu();mw();nL();vu();uL();Im();Am();Rte=1,kte=2,Nte=4,cL="[object Arguments]",Ote="[object Array]",Dte="[object Boolean]",Lte="[object Date]",Fte="[object Error]",dL="[object Function]",zte="[object GeneratorFunction]",Bte="[object Map]",Ute="[object Number]",pL="[object Object]",qte="[object RegExp]",Hte="[object Set]",Wte="[object String]",Vte="[object Symbol]",$te="[object WeakMap]",jte="[object ArrayBuffer]",Gte="[object DataView]",Kte="[object Float32Array]",Yte="[object Float64Array]",Xte="[object Int8Array]",Zte="[object Int16Array]",Jte="[object Int32Array]",Qte="[object Uint8Array]",ere="[object Uint8ClampedArray]",tre="[object Uint16Array]",rre="[object Uint32Array]",lr={};lr[cL]=lr[Ote]=lr[jte]=lr[Gte]=lr[Dte]=lr[Lte]=lr[Kte]=lr[Yte]=lr[Xte]=lr[Zte]=lr[Jte]=lr[Bte]=lr[Ute]=lr[pL]=lr[qte]=lr[Hte]=lr[Wte]=lr[Vte]=lr[Qte]=lr[ere]=lr[tre]=lr[rre]=!0;lr[Fte]=lr[dL]=lr[$te]=!1;Hm=qm});function nre(t){return Hm(t,ire)}var ire,Iw,hL=$(()=>{Pw();ire=4;Iw=nre});function ore(t,e){for(var r=-1,i=t==null?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}var Wm,Aw=$(()=>{Wm=ore});function are(t){return typeof t=="symbol"||Ln(t)&&eo(t)==sre}var sre,Tu,Vm=$(()=>{mu();tl();sre="[object Symbol]";Tu=are});function Tw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(lre);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],o=r.cache;if(o.has(n))return o.get(n);var s=t.apply(this,i);return r.cache=o.set(n,s)||o,s};return r.cache=new(Tw.Cache||Fd),r}var lre,fL,mL=$(()=>{cw();lre="Expected a function";Tw.Cache=Fd;fL=Tw});function cre(t){var e=fL(t,function(i){return r.size===ure&&r.clear(),i}),r=e.cache;return e}var ure,gL,vL=$(()=>{mL();ure=500;gL=cre});var dre,pre,hre,yL,bL=$(()=>{vL();dre=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pre=/\\(\\)?/g,hre=gL(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(dre,function(r,i,n,o){e.push(n?o.replace(pre,"$1"):i||r)}),e}),yL=hre});function mre(t){if(typeof t=="string"||Tu(t))return t;var e=t+"";return e=="0"&&1/t==-fre?"-0":e}var fre,wL,xL=$(()=>{Vm();fre=1/0;wL=mre});function EL(t){if(typeof t=="string")return t;if(Mo(t))return Wm(t,EL)+"";if(Tu(t))return _L?_L.call(t):"";var e=t+"";return e=="0"&&1/t==-gre?"-0":e}var gre,SL,_L,CL,PL=$(()=>{Rd();Aw();xu();Vm();gre=1/0,SL=Dn?Dn.prototype:void 0,_L=SL?SL.toString:void 0;CL=EL});function vre(t){return t==null?"":CL(t)}var IL,AL=$(()=>{PL();IL=vre});function yre(t){return Mo(t)?Wm(t,wL):Tu(t)?[t]:Tm(yL(IL(t)))}var Mw,TL=$(()=>{Aw();ww();xu();Vm();bL();xL();AL();Mw=yre});function xre(t){return Hm(t,bre|wre)}var bre,wre,ML,RL=$(()=>{Pw();bre=1,wre=4;ML=xre});function il(){return il=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},il.apply(this,arguments)}function Sre(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function zL(t,e){if(t==null)return{};var r={},i=Object.keys(t),n,o;for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function kL(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ere(){var t=Fr($m);return t||lb(!1),t}function Mu(t,e,r,i){i===void 0&&(i=0);for(var n=Mw(e);t&&i<n.length;)t=t[n[i++]];return i!==n.length&&!t||t===void 0?r:t}function Rw(t,e,r){for(var i=Iw(t),n=i,o=0,s=Mw(e);o<s.length-1;o++){var a=s[o],l=Mu(t,s.slice(0,o+1));if(l&&(BL(l)||Array.isArray(l)))n=n[a]=Iw(l);else{var p=s[o+1];n=n[a]=Cre(p)&&Number(p)>=0?[]:{}}}return(o===0?t:n)[s[o]]===r?t:(r===void 0?delete n[s[o]]:n[s[o]]=r,o===0&&r===void 0&&delete i[s[o]],i)}function UL(t){var e=function(n){return Ot(_re,null,function(o){return o||lb(!1),Ot(t,il({},n,{formik:o}))})},r=t.displayName||t.name||t.constructor&&t.constructor.name||"Component";return e.WrappedComponent=t,e.displayName="FormikConnect("+r+")",(0,FL.default)(e,t)}var LL,FL,$m,bEe,_re,NL,OL,BL,Cre,Pre,wEe,Ire,Are,Tre,kw,Mre,nl,DL,Rre,qL=$(()=>{yN();Ze();LL=ve(AN());oP();hL();TL();FL=ve(Lh());RL();$m=Tn(void 0);$m.displayName="FormikContext";bEe=$m.Provider,_re=$m.Consumer;NL=function(e){return Array.isArray(e)&&e.length===0},OL=function(e){return typeof e=="function"},BL=function(e){return e!==null&&typeof e=="object"},Cre=function(e){return String(Math.floor(Number(e)))===e},Pre=function(e){return Fa.count(e)===0};wEe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Li:zt,Ire=Fi(function(t,e){var r=t.action,i=zL(t,["action"]),n=r??"#",o=Ere(),s=o.handleReset,a=o.handleSubmit;return Ot("form",il({onSubmit:a,ref:e,onReset:s,action:n},i))});Ire.displayName="Form";Are=function(e,r,i){var n=nl(e),o=n[r];return n.splice(r,1),n.splice(i,0,o),n},Tre=function(e,r,i){var n=nl(e),o=n[r];return n[r]=n[i],n[i]=o,n},kw=function(e,r,i){var n=nl(e);return n.splice(r,0,i),n},Mre=function(e,r,i){var n=nl(e);return n[r]=i,n},nl=function(e){if(e){if(Array.isArray(e))return[].concat(e);var r=Object.keys(e).map(function(i){return parseInt(i)}).reduce(function(i,n){return n>i?n:i},0);return Array.from(il({},e,{length:r+1}))}else return[]},DL=function(e,r){var i=typeof e=="function"?e:r;return function(n){if(Array.isArray(n)||BL(n)){var o=nl(n);return i(o)}return n}},Rre=function(t){Sre(e,t);function e(i){var n;return n=t.call(this,i)||this,n.updateArrayField=function(o,s,a){var l=n.props,p=l.name,f=l.formik.setFormikState;f(function(c){var m=DL(a,o),v=DL(s,o),g=Rw(c.values,p,o(Mu(c.values,p))),x=a?m(Mu(c.errors,p)):void 0,_=s?v(Mu(c.touched,p)):void 0;return NL(x)&&(x=void 0),NL(_)&&(_=void 0),il({},c,{values:g,errors:a?Rw(c.errors,p,x):c.errors,touched:s?Rw(c.touched,p,_):c.touched})})},n.push=function(o){return n.updateArrayField(function(s){return[].concat(nl(s),[ML(o)])},!1,!1)},n.handlePush=function(o){return function(){return n.push(o)}},n.swap=function(o,s){return n.updateArrayField(function(a){return Tre(a,o,s)},!0,!0)},n.handleSwap=function(o,s){return function(){return n.swap(o,s)}},n.move=function(o,s){return n.updateArrayField(function(a){return Are(a,o,s)},!0,!0)},n.handleMove=function(o,s){return function(){return n.move(o,s)}},n.insert=function(o,s){return n.updateArrayField(function(a){return kw(a,o,s)},function(a){return kw(a,o,null)},function(a){return kw(a,o,null)})},n.handleInsert=function(o,s){return function(){return n.insert(o,s)}},n.replace=function(o,s){return n.updateArrayField(function(a){return Mre(a,o,s)},!1,!1)},n.handleReplace=function(o,s){return function(){return n.replace(o,s)}},n.unshift=function(o){var s=-1;return n.updateArrayField(function(a){var l=a?[o].concat(a):[o];return s=l.length,l},function(a){return a?[null].concat(a):[null]},function(a){return a?[null].concat(a):[null]}),s},n.handleUnshift=function(o){return function(){return n.unshift(o)}},n.handleRemove=function(o){return function(){return n.remove(o)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(kL(n)),n.pop=n.pop.bind(kL(n)),n}var r=e.prototype;return r.componentDidUpdate=function(n){this.props.validateOnChange&&this.props.formik.validateOnChange&&!(0,LL.default)(Mu(n.formik.values,n.name),Mu(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},r.remove=function(n){var o;return this.updateArrayField(function(s){var a=s?nl(s):[];return o||(o=a[n]),OL(a.splice)&&a.splice(n,1),OL(a.every)&&a.every(function(l){return l===void 0})?[]:a},!0,!0),o},r.pop=function(){var n;return this.updateArrayField(function(o){var s=o.slice();return n||(n=s&&s.pop&&s.pop()),s},!0,!0),n},r.render=function(){var n={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},o=this.props,s=o.component,a=o.render,l=o.children,p=o.name,f=o.formik,c=zL(f,["validate","validationSchema"]),m=il({},n,{form:c,name:p});return s?Ot(s,m):a?a(m):l?typeof l=="function"?l(m):Pre(l)?null:Fa.only(l):null},e}(me);Rre.defaultProps={validateOnChange:!0}});var WL=se((SEe,HL)=>{var kre="__lodash_hash_undefined__";function Nre(t){return this.__data__.set(t,kre),this}HL.exports=Nre});var $L=se((_Ee,VL)=>{function Ore(t){return this.__data__.has(t)}VL.exports=Ore});var GL=se((EEe,jL)=>{var Dre=mf(),Lre=WL(),Fre=$L();function jm(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Dre;++e<r;)this.add(t[e])}jm.prototype.add=jm.prototype.push=Lre;jm.prototype.has=Fre;jL.exports=jm});var YL=se((CEe,KL)=>{function zre(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}KL.exports=zre});var ZL=se((PEe,XL)=>{function Bre(t,e){return t.has(e)}XL.exports=Bre});var Nw=se((IEe,JL)=>{var Ure=GL(),qre=YL(),Hre=ZL(),Wre=1,Vre=2;function $re(t,e,r,i,n,o){var s=r&Wre,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var p=o.get(t),f=o.get(e);if(p&&f)return p==e&&f==t;var c=-1,m=!0,v=r&Vre?new Ure:void 0;for(o.set(t,e),o.set(e,t);++c<a;){var g=t[c],x=e[c];if(i)var _=s?i(x,g,c,e,t,o):i(g,x,c,t,e,o);if(_!==void 0){if(_)continue;m=!1;break}if(v){if(!qre(e,function(E,L){if(!Hre(v,L)&&(g===E||n(g,E,r,i,o)))return v.push(L)})){m=!1;break}}else if(!(g===x||n(g,x,r,i,o))){m=!1;break}}return o.delete(t),o.delete(e),m}JL.exports=$re});var e2=se((AEe,QL)=>{function jre(t){var e=-1,r=Array(t.size);return t.forEach(function(i,n){r[++e]=[n,i]}),r}QL.exports=jre});var r2=se((TEe,t2)=>{function Gre(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}t2.exports=Gre});var a2=se((MEe,s2)=>{var i2=gd(),n2=c0(),Kre=Xl(),Yre=Nw(),Xre=e2(),Zre=r2(),Jre=1,Qre=2,eie="[object Boolean]",tie="[object Date]",rie="[object Error]",iie="[object Map]",nie="[object Number]",oie="[object RegExp]",sie="[object Set]",aie="[object String]",lie="[object Symbol]",uie="[object ArrayBuffer]",cie="[object DataView]",o2=i2?i2.prototype:void 0,Ow=o2?o2.valueOf:void 0;function die(t,e,r,i,n,o,s){switch(r){case cie:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case uie:return!(t.byteLength!=e.byteLength||!o(new n2(t),new n2(e)));case eie:case tie:case nie:return Kre(+t,+e);case rie:return t.name==e.name&&t.message==e.message;case oie:case aie:return t==e+"";case iie:var a=Xre;case sie:var l=i&Jre;if(a||(a=Zre),t.size!=e.size&&!l)return!1;var p=s.get(t);if(p)return p==e;i|=Qre,s.set(t,e);var f=Yre(a(t),a(e),i,n,o,s);return s.delete(t),f;case lie:if(Ow)return Ow.call(t)==Ow.call(e)}return!1}s2.exports=die});var Dw=se((REe,l2)=>{function pie(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}l2.exports=pie});var Lw=se((kEe,u2)=>{var hie=Dw(),fie=Eo();function mie(t,e,r){var i=e(t);return fie(t)?i:hie(i,r(t))}u2.exports=mie});var d2=se((NEe,c2)=>{function gie(t,e){for(var r=-1,i=t==null?0:t.length,n=0,o=[];++r<i;){var s=t[r];e(s,r,t)&&(o[n++]=s)}return o}c2.exports=gie});var Fw=se((OEe,p2)=>{function vie(){return[]}p2.exports=vie});var zw=se((DEe,f2)=>{var yie=d2(),bie=Fw(),wie=Object.prototype,xie=wie.propertyIsEnumerable,h2=Object.getOwnPropertySymbols,Sie=h2?function(t){return t==null?[]:(t=Object(t),yie(h2(t),function(e){return xie.call(t,e)}))}:bie;f2.exports=Sie});var g2=se((LEe,m2)=>{var _ie=d0(),Eie=_ie(Object.keys,Object);m2.exports=Eie});var y2=se((FEe,v2)=>{var Cie=bf(),Pie=g2(),Iie=Object.prototype,Aie=Iie.hasOwnProperty;function Tie(t){if(!Cie(t))return Pie(t);var e=[];for(var r in Object(t))Aie.call(t,r)&&r!="constructor"&&e.push(r);return e}v2.exports=Tie});var Bw=se((zEe,b2)=>{var Mie=m0(),Rie=y2(),kie=xd();function Nie(t){return kie(t)?Mie(t):Rie(t)}b2.exports=Nie});var x2=se((BEe,w2)=>{var Oie=Lw(),Die=zw(),Lie=Bw();function Fie(t){return Oie(t,Lie,Die)}w2.exports=Fie});var E2=se((UEe,_2)=>{var S2=x2(),zie=1,Bie=Object.prototype,Uie=Bie.hasOwnProperty;function qie(t,e,r,i,n,o){var s=r&zie,a=S2(t),l=a.length,p=S2(e),f=p.length;if(l!=f&&!s)return!1;for(var c=l;c--;){var m=a[c];if(!(s?m in e:Uie.call(e,m)))return!1}var v=o.get(t),g=o.get(e);if(v&&g)return v==e&&g==t;var x=!0;o.set(t,e),o.set(e,t);for(var _=s;++c<l;){m=a[c];var E=t[m],L=e[m];if(i)var O=s?i(L,E,m,e,t,o):i(E,L,m,t,e,o);if(!(O===void 0?E===L||n(E,L,r,i,o):O)){x=!1;break}_||(_=m=="constructor")}if(x&&!_){var M=t.constructor,D=e.constructor;M!=D&&"constructor"in t&&"constructor"in e&&!(typeof M=="function"&&M instanceof M&&typeof D=="function"&&D instanceof D)&&(x=!1)}return o.delete(t),o.delete(e),x}_2.exports=qie});var P2=se((qEe,C2)=>{var Hie=Ks(),Wie=Yn(),Vie=Hie(Wie,"DataView");C2.exports=Vie});var A2=se((HEe,I2)=>{var $ie=Ks(),jie=Yn(),Gie=$ie(jie,"Promise");I2.exports=Gie});var M2=se((WEe,T2)=>{var Kie=Ks(),Yie=Yn(),Xie=Kie(Yie,"Set");T2.exports=Xie});var k2=se((VEe,R2)=>{var Zie=Ks(),Jie=Yn(),Qie=Zie(Jie,"WeakMap");R2.exports=Qie});var U2=se(($Ee,B2)=>{var Uw=P2(),qw=ff(),Hw=A2(),Ww=M2(),Vw=k2(),z2=ja(),Ru=a0(),N2="[object Map]",ene="[object Object]",O2="[object Promise]",D2="[object Set]",L2="[object WeakMap]",F2="[object DataView]",tne=Ru(Uw),rne=Ru(qw),ine=Ru(Hw),nne=Ru(Ww),one=Ru(Vw),ol=z2;(Uw&&ol(new Uw(new ArrayBuffer(1)))!=F2||qw&&ol(new qw)!=N2||Hw&&ol(Hw.resolve())!=O2||Ww&&ol(new Ww)!=D2||Vw&&ol(new Vw)!=L2)&&(ol=function(t){var e=z2(t),r=e==ene?t.constructor:void 0,i=r?Ru(r):"";if(i)switch(i){case tne:return F2;case rne:return N2;case ine:return O2;case nne:return D2;case one:return L2}return e});B2.exports=ol});var K2=se((jEe,G2)=>{var $w=gf(),sne=Nw(),ane=a2(),lne=E2(),q2=U2(),H2=Eo(),W2=Sf(),une=_f(),cne=1,V2="[object Arguments]",$2="[object Array]",Gm="[object Object]",dne=Object.prototype,j2=dne.hasOwnProperty;function pne(t,e,r,i,n,o){var s=H2(t),a=H2(e),l=s?$2:q2(t),p=a?$2:q2(e);l=l==V2?Gm:l,p=p==V2?Gm:p;var f=l==Gm,c=p==Gm,m=l==p;if(m&&W2(t)){if(!W2(e))return!1;s=!0,f=!1}if(m&&!f)return o||(o=new $w),s||une(t)?sne(t,e,r,i,n,o):ane(t,e,l,r,i,n,o);if(!(r&cne)){var v=f&&j2.call(t,"__wrapped__"),g=c&&j2.call(e,"__wrapped__");if(v||g){var x=v?t.value():t,_=g?e.value():e;return o||(o=new $w),n(x,_,r,i,o)}}return m?(o||(o=new $w),lne(t,e,r,i,n,o)):!1}G2.exports=pne});var jw=se((GEe,Z2)=>{var hne=K2(),Y2=Ys();function X2(t,e,r,i,n){return t===e?!0:t==null||e==null||!Y2(t)&&!Y2(e)?t!==t&&e!==e:hne(t,e,r,i,X2,n)}Z2.exports=X2});var Q2=se((KEe,J2)=>{var fne=gf(),mne=jw(),gne=1,vne=2;function yne(t,e,r,i){var n=r.length,o=n,s=!i;if(t==null)return!o;for(t=Object(t);n--;){var a=r[n];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<o;){a=r[n];var l=a[0],p=t[l],f=a[1];if(s&&a[2]){if(p===void 0&&!(l in t))return!1}else{var c=new fne;if(i)var m=i(p,f,l,t,e,c);if(!(m===void 0?mne(f,p,gne|vne,i,c):m))return!1}}return!0}J2.exports=yne});var Gw=se((YEe,eF)=>{var bne=_o();function wne(t){return t===t&&!bne(t)}eF.exports=wne});var rF=se((XEe,tF)=>{var xne=Gw(),Sne=Bw();function _ne(t){for(var e=Sne(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,xne(n)]}return e}tF.exports=_ne});var Kw=se((ZEe,iF)=>{function Ene(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}iF.exports=Ene});var oF=se((JEe,nF)=>{var Cne=Q2(),Pne=rF(),Ine=Kw();function Ane(t){var e=Pne(t);return e.length==1&&e[0][2]?Ine(e[0][0],e[0][1]):function(r){return r===t||Cne(r,t,e)}}nF.exports=Ane});var Km=se((QEe,sF)=>{var Tne=ja(),Mne=Ys(),Rne="[object Symbol]";function kne(t){return typeof t=="symbol"||Mne(t)&&Tne(t)==Rne}sF.exports=kne});var Ym=se((eCe,aF)=>{var Nne=Eo(),One=Km(),Dne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lne=/^\w*$/;function Fne(t,e){if(Nne(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||One(t)?!0:Lne.test(t)||!Dne.test(t)||e!=null&&t in Object(e)}aF.exports=Fne});var cF=se((tCe,uF)=>{var lF=mf(),zne="Expected a function";function Yw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(zne);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],o=r.cache;if(o.has(n))return o.get(n);var s=t.apply(this,i);return r.cache=o.set(n,s)||o,s};return r.cache=new(Yw.Cache||lF),r}Yw.Cache=lF;uF.exports=Yw});var pF=se((rCe,dF)=>{var Bne=cF(),Une=500;function qne(t){var e=Bne(t,function(i){return r.size===Une&&r.clear(),i}),r=e.cache;return e}dF.exports=qne});var fF=se((iCe,hF)=>{var Hne=pF(),Wne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vne=/\\(\\)?/g,$ne=Hne(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Wne,function(r,i,n,o){e.push(n?o.replace(Vne,"$1"):i||r)}),e});hF.exports=$ne});var Xw=se((nCe,mF)=>{function jne(t,e){for(var r=-1,i=t==null?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}mF.exports=jne});var xF=se((oCe,wF)=>{var gF=gd(),Gne=Xw(),Kne=Eo(),Yne=Km(),Xne=1/0,vF=gF?gF.prototype:void 0,yF=vF?vF.toString:void 0;function bF(t){if(typeof t=="string")return t;if(Kne(t))return Gne(t,bF)+"";if(Yne(t))return yF?yF.call(t):"";var e=t+"";return e=="0"&&1/t==-Xne?"-0":e}wF.exports=bF});var _F=se((sCe,SF)=>{var Zne=xF();function Jne(t){return t==null?"":Zne(t)}SF.exports=Jne});var Ud=se((aCe,EF)=>{var Qne=Eo(),eoe=Ym(),toe=fF(),roe=_F();function ioe(t,e){return Qne(t)?t:eoe(t,e)?[t]:toe(roe(t))}EF.exports=ioe});var ku=se((lCe,CF)=>{var noe=Km(),ooe=1/0;function soe(t){if(typeof t=="string"||noe(t))return t;var e=t+"";return e=="0"&&1/t==-ooe?"-0":e}CF.exports=soe});var Xm=se((uCe,PF)=>{var aoe=Ud(),loe=ku();function uoe(t,e){e=aoe(e,t);for(var r=0,i=e.length;t!=null&&r<i;)t=t[loe(e[r++])];return r&&r==i?t:void 0}PF.exports=uoe});var AF=se((cCe,IF)=>{var coe=Xm();function doe(t,e,r){var i=t==null?void 0:coe(t,e);return i===void 0?r:i}IF.exports=doe});var MF=se((dCe,TF)=>{function poe(t,e){return t!=null&&e in Object(t)}TF.exports=poe});var kF=se((pCe,RF)=>{var hoe=Ud(),foe=wf(),moe=Eo(),goe=Cd(),voe=xf(),yoe=ku();function boe(t,e,r){e=hoe(e,t);for(var i=-1,n=e.length,o=!1;++i<n;){var s=yoe(e[i]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++i!=n?o:(n=t==null?0:t.length,!!n&&voe(n)&&goe(s,n)&&(moe(t)||foe(t)))}RF.exports=boe});var OF=se((hCe,NF)=>{var woe=MF(),xoe=kF();function Soe(t,e){return t!=null&&xoe(t,e,woe)}NF.exports=Soe});var LF=se((fCe,DF)=>{var _oe=jw(),Eoe=AF(),Coe=OF(),Poe=Ym(),Ioe=Gw(),Aoe=Kw(),Toe=ku(),Moe=1,Roe=2;function koe(t,e){return Poe(t)&&Ioe(e)?Aoe(Toe(t),e):function(r){var i=Eoe(r,t);return i===void 0&&i===e?Coe(r,t):_oe(e,i,Moe|Roe)}}DF.exports=koe});var zF=se((mCe,FF)=>{function Noe(t){return function(e){return e?.[t]}}FF.exports=Noe});var UF=se((gCe,BF)=>{var Ooe=Xm();function Doe(t){return function(e){return Ooe(e,t)}}BF.exports=Doe});var HF=se((vCe,qF)=>{var Loe=zF(),Foe=UF(),zoe=Ym(),Boe=ku();function Uoe(t){return zoe(t)?Loe(Boe(t)):Foe(t)}qF.exports=Uoe});var Zw=se((yCe,WF)=>{var qoe=oF(),Hoe=LF(),Woe=Cf(),Voe=Eo(),$oe=HF();function joe(t){return typeof t=="function"?t:t==null?Woe:typeof t=="object"?Voe(t)?Hoe(t[0],t[1]):qoe(t):$oe(t)}WF.exports=joe});var $F=se((bCe,VF)=>{var Goe="Expected a function";function Koe(t){if(typeof t!="function")throw new TypeError(Goe);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}VF.exports=Koe});var KF=se((wCe,GF)=>{var Yoe=f0(),Xoe=Ud(),Zoe=Cd(),jF=_o(),Joe=ku();function Qoe(t,e,r,i){if(!jF(t))return t;e=Xoe(e,t);for(var n=-1,o=e.length,s=o-1,a=t;a!=null&&++n<o;){var l=Joe(e[n]),p=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(n!=s){var f=a[l];p=i?i(f,l,a):void 0,p===void 0&&(p=jF(f)?f:Zoe(e[n+1])?[]:{})}Yoe(a,l,p),a=a[l]}return t}GF.exports=Qoe});var XF=se((xCe,YF)=>{var ese=Xm(),tse=KF(),rse=Ud();function ise(t,e,r){for(var i=-1,n=e.length,o={};++i<n;){var s=e[i],a=ese(t,s);r(a,s)&&tse(o,rse(s,t),a)}return o}YF.exports=ise});var JF=se((SCe,ZF)=>{var nse=Dw(),ose=yf(),sse=zw(),ase=Fw(),lse=Object.getOwnPropertySymbols,use=lse?function(t){for(var e=[];t;)nse(e,sse(t)),t=ose(t);return e}:ase;ZF.exports=use});var e5=se((_Ce,QF)=>{var cse=Lw(),dse=JF(),pse=Ef();function hse(t){return cse(t,pse,dse)}QF.exports=hse});var r5=se((ECe,t5)=>{var fse=Xw(),mse=Zw(),gse=XF(),vse=e5();function yse(t,e){if(t==null)return{};var r=fse(vse(t),function(i){return[i]});return e=mse(e),gse(t,r,function(i,n){return e(i,n[0])})}t5.exports=yse});var n5=se((CCe,i5)=>{var bse=Zw(),wse=$F(),xse=r5();function Sse(t,e){return xse(t,wse(bse(e)))}i5.exports=Sse});var o5,s5,Jw,_se,a5=$(()=>{Ze();qL();o5=ve(n5()),s5=ve(Ie()),Jw=class extends ze.Component{render(){return null}componentDidUpdate(e){if(!s5.default.isEqual(e.formik.initialValues,this.props.formik.initialValues))return;let r=(0,o5.default)(this.props.formik.values,function(i,n){return e.formik.values[n]===i});Object.keys(r).length>0&&this.props.onChange(r,this.props.formik)}},_se=UL(Jw)});var l5=$(()=>{});var Ese,u5=$(()=>{Ese=ve(Ie())});var Zm=$(()=>{a5();Fe();l5();u5();Zs()});var c5=se((OCe,Qw)=>{(function(){function t(g,x){document.addEventListener?g.addEventListener("scroll",x,!1):g.attachEvent("scroll",x)}function e(g){document.body?g():document.addEventListener?document.addEventListener("DOMContentLoaded",function x(){document.removeEventListener("DOMContentLoaded",x),g()}):document.attachEvent("onreadystatechange",function x(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",x),g())})}function r(g){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(g)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(g,x){g.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+x+";"}function n(g){var x=g.g.offsetWidth,_=x+100;return g.j.style.width=_+"px",g.i.scrollLeft=_,g.h.scrollLeft=g.h.scrollWidth+100,g.l!==x?(g.l=x,!0):!1}function o(g,x){function _(){var L=E;n(L)&&L.g.parentNode!==null&&x(L.l)}var E=g;t(g.h,_),t(g.i,_),n(g)}function s(g,x,_){x=x||{},_=_||window,this.family=g,this.style=x.style||"normal",this.weight=x.weight||"normal",this.stretch=x.stretch||"normal",this.context=_}var a=null,l=null,p=null,f=null;function c(g){return l===null&&(m(g)&&/Apple/.test(window.navigator.vendor)?(g=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!g&&603>parseInt(g[1],10)):l=!1),l}function m(g){return f===null&&(f=!!g.document.fonts),f}function v(g,x){var _=g.style,E=g.weight;if(p===null){var L=document.createElement("div");try{L.style.font="condensed 100px sans-serif"}catch{}p=L.style.font!==""}return[_,E,p?g.stretch:"","100px",x].join(" ")}s.prototype.load=function(g,x){var _=this,E=g||"BESbswy",L=0,O=x||3e3,M=new Date().getTime();return new Promise(function(D,P){if(m(_.context)&&!c(_.context)){var U=new Promise(function(F,V){function q(){new Date().getTime()-M>=O?V(Error(""+O+"ms timeout exceeded")):_.context.document.fonts.load(v(_,'"'+_.family+'"'),E).then(function(J){1<=J.length?F():setTimeout(q,25)},V)}q()}),N=new Promise(function(F,V){L=setTimeout(function(){V(Error(""+O+"ms timeout exceeded"))},O)});Promise.race([N,U]).then(function(){clearTimeout(L),D(_)},P)}else e(function(){function F(){var ae;(ae=ie!=-1&&oe!=-1||ie!=-1&&Z!=-1||oe!=-1&&Z!=-1)&&((ae=ie!=oe&&ie!=Z&&oe!=Z)||(a===null&&(ae=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!ae&&(536>parseInt(ae[1],10)||parseInt(ae[1],10)===536&&11>=parseInt(ae[2],10))),ae=a&&(ie==K&&oe==K&&Z==K||ie==Q&&oe==Q&&Z==Q||ie==te&&oe==te&&Z==te)),ae=!ae),ae&&(ee.parentNode!==null&&ee.parentNode.removeChild(ee),clearTimeout(L),D(_))}function V(){if(new Date().getTime()-M>=O)ee.parentNode!==null&&ee.parentNode.removeChild(ee),P(Error(""+O+"ms timeout exceeded"));else{var ae=_.context.document.hidden;(ae===!0||ae===void 0)&&(ie=q.g.offsetWidth,oe=J.g.offsetWidth,Z=Y.g.offsetWidth,F()),L=setTimeout(V,50)}}var q=new r(E),J=new r(E),Y=new r(E),ie=-1,oe=-1,Z=-1,K=-1,Q=-1,te=-1,ee=document.createElement("div");ee.dir="ltr",i(q,v(_,"sans-serif")),i(J,v(_,"serif")),i(Y,v(_,"monospace")),ee.appendChild(q.g),ee.appendChild(J.g),ee.appendChild(Y.g),_.context.document.body.appendChild(ee),K=q.g.offsetWidth,Q=J.g.offsetWidth,te=Y.g.offsetWidth,V(),o(q,function(ae){ie=ae,F()}),i(q,v(_,'"'+_.family+'",sans-serif')),o(J,function(ae){oe=ae,F()}),i(J,v(_,'"'+_.family+'",serif')),o(Y,function(ae){Z=ae,F()}),i(Y,v(_,'"'+_.family+'",monospace'))})})},typeof Qw=="object"?Qw.exports=s:(window.FontFaceObserver=s,window.FontFaceObserver.prototype.load=s.prototype.load)})()});var d5,p5,ex,h5,f5=$(()=>{ke();d5=ve(Ie(),1);Zm();p5=ve(c5(),1);fe();ex=class extends me{constructor(e){super(e),this.state={parentWidth:{},width:{},scale:1,fontFamily:null},this.observer=null,this.timeout=null,this.iterations=0,this.iterationLimit=100,this.maxScale=2e3,this.fitTextRef=_e()}render(e,r){let i=!!e.baseNode?.getAttribute("style")?.includes("line-height"),n=window.getComputedStyle(e.baseNode),o=n.letterSpacing,s=n.direction,a="0px";return o.includes("-")&&(a=o.replace("-","")),S(de,{children:[S("span",{ref:this.fitTextRef,class:"fit-text",children:e.children}),S("style",{children:`
					:host { 
                        min-width: 1px;
                        box-sizing:border-box;
                        white-space: nowrap!important;
                        display: inline-block!important;
                        --font-scale: ${this.state.scale}!important;
                        ${i?"":"line-height: 1!important;"}
                        animation: none!important;
                        will-change: transform;
                        --rotate-transform: 0deg!important;
                    }
                    .fit-text {
                        padding${s==="ltr"?"-right":"-left"}: ${a}!important;
                    }
				`})]})}locateFitText=()=>{if(!this.props.baseNode||!this.fitTextRef.current||!this.props.baseNode.parentElement)return;this.fitTextRef.current.classList.remove("fit-text");let e=this.props.baseNode.parentElement.getBoundingClientRect().width,r=this.props.baseNode.getBoundingClientRect().width;this.fitTextRef.current.classList.add("fit-text"),this.setState({parentWidth:e,width:r})};handleResize=()=>{this.locateFitText()};handleFontLoad=()=>{this.timeout=setTimeout(()=>{this.locateFitText()},200)};refreshFontFamily=()=>{let r=window.getComputedStyle(this.props.baseNode).fontFamily.split(",");r=r.map(i=>i.trim()),r=r.map(i=>i.replace(/['"]+/g,"")),r[0]!==this.state.fontFamily&&this.setState({fontFamily:r[0]})};componentDidMount(){this.state.fontFamily||this.refreshFontFamily(),window.addEventListener("resize",this.handleResize),this.observer=new MutationObserver(e=>{d5.default.find(e,r=>{if(r.target.contains(this.props.baseNode||r.target===this.props.baseNode)||r.type==="attributes"&&r.attributeName==="uses"&&r.target?.getAttribute("uses")?.includes("fit-text")===!0)return!0;if(r.target.tagName==="STYLE")return r.target.textContent.includes("font-family")&&this.refreshFontFamily(),!0})&&this.locateFitText()}),this.observer.observe(document,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("keyup",this.handleKeyup),this.locateFitText()}handleKeyup=e=>{if(!window.CargoEditor?.getActiveEditor?.())return;let r=window.CargoEditor.getActiveRange();(r.startContainer===this.props.baseNode||r.startContainer.parentElement===this.props.baseNode)&&this.locateFitText()};componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.observer.disconnect(),window.removeEventListener("keyup",this.handleKeyup),clearTimeout(this.timeout)}componentDidUpdate(e,r){if(r.fontFamily!==this.state.fontFamily){let i=new p5.default(this.state.fontFamily);this.iterations=0,i.load().then(()=>{this.handleFontLoad()}).catch(()=>{this.handleFontLoad()})}if(r.scale!==this.state.scale){let i=this.state.scale-r.scale;if((i>.1||i<-.1)&&this.iterations<this.iterationLimit&&Number.isFinite(i)&&this.state.width>0&&this.state.parentWidth>0){this.iterations++,this.locateFitText();return}else this.iterations>=this.iterationLimit&&this.setState({scale:1})}if(r.parentWidth!==this.state.parentWidth||r.width!==this.state.width){r.parentWidth!==this.state.parentWidth&&(this.iterations=0);let i=Math.min(this.maxScale,this.state.parentWidth/(this.state.width/this.state.scale));this.iterations<this.iterationLimit&&Number.isFinite(i)&&i!=this.state.scale&&this.state.width>0&&this.state.parentWidth>0?this.setState({scale:i}):this.iterations>=this.iterationLimit&&this.setState({scale:1});return}if(e.baseNode!==this.props.baseNode){this.iterations=0,this.locateFitText();return}}},h5=ex});var tx,Nu,qd,aa,rx,Jm,sl=$(()=>{ke();Ze();tx=ve(Ie(),1);Fe();Xn();Br();mt();Kk();Zk();rN();oN();aN();cN();pN();fN();vN();f5();Po();fe();Nu=new Set,qd=class extends me{constructor(e){switch(super(e),he||(this.observer=new MutationObserver(this.onAttributeChange)),this.usesOrder=["dropshadow","drag","fit-text","blink","rotation","eye-roll","scroll-animate","flying-object","inline-part-styles"],this.state={attributes:this.getAttributes()},this.usesKeys={rotation:Xk,"eye-roll":Gk,drag:sN,"scroll-transition":nN,"flying-object":tN,dropshadow:uN,background:dN,"inline-part-styles":hN,blink:gN,"fit-text":h5},this.props.baseNode.tagName){case"DIV":case"SPAN":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"H7":case"H8":case"H9":this.displayInlineBlock=!0;break;default:this.displayInlineBlock=!1;break}}render(e,r){let i=e.customElementMode?this.props.children:S("slot",{});if(r.attributes.uses.length==0)return S(de,{children:[S("style",{id:"uses-host",children:`
			:host {
				transform-origin: center center;
				transform: var(--base-translate, translate(0));
			}
			`}),i]},"uses-fragment");let n=[];r.attributes.uses.forEach((a,l)=>{this.usesKeys[a]&&this.usesKeys[a].transformSlot&&n.push(this.usesKeys[a].transformSlot)}),r.attributes.uses.forEach((a,l)=>{this.usesKeys[a]&&(i=Ot(this.props.customElementMode?this.usesKeys[a]:Co(this.usesKeys[a]),{...this.state.attributes,...this.props,lowestLevel:l==0,baseNode:this.props.baseNode,children:i,transformSlots:n}))});let o=!!r.attributes.uses.includes("fit-text"),s=S(de,{children:[this.props.adminMode&&!e.customElementMode&&o===!1&&S(Jr,{baseNode:this.props.baseNode}),S("style",{id:"uses-host",children:`
			:host(span){
				display: inline-block;
			}

			:host {
				position: relative;
				transform-origin: center center;
				transform: var(--base-translate, translate(0)) ${n.map(a=>`var(${a}, translate(0))`).join(" ")};
				${this.displayInlineBlock?"display: inline-block;":""}
			}

			${this.props.adminMode&&!e.customElementMode&&o===!1?`:host::selection {
				background: none;
			}`:""}
			`}),i]},"uses-fragment");return e.customElementMode?s:rt(s,this.props.baseNode.shadowRoot)}componentDidMount(){this.observer?.observe(this.props.baseNode,{attributes:!0})}componentDidUpdate(e,r){(e.uses!==this.props.uses||e.forceScrollTransition!==this.props.forceScrollTransition)&&this.setState({attributes:this.getAttributes()})}componentWillUnmount(){this.observer?.disconnect()}getAttributes=()=>{let e={};for(let[i,n]of Object.entries(this.state?.attributes||{}))e[i]=void 0;let r=[...this.props.baseNode.attributes].reduce((i,n)=>(i[n.name]=n.value,i),{});for(let[i,n]of Object.entries(r))n==="false"?r[i]=!1:n==="true"&&(r[i]=!0);return this.props.customElementMode&&(r.uses=(r.uses||"")+" "+this.props.uses),this.props.forceScrollTransition&&!r.uses.includes("scroll-transition")&&r["disable-scroll-animation"]!==!0&&(r.uses+=" scroll-transition"),r.uses=r.uses?.split(" ")||[],r.uses=tx.default.uniq(r.uses),r.uses.sort((i,n)=>this.usesOrder.indexOf(i)<this.usesOrder.indexOf(n)?-1:1),{...e,...r}};onAttributeChange=e=>{if(!e.some(n=>n.attributeName!=="style"&&n.attributeName!=="class"))return;let i=this.getAttributes();if(i.uses.length===0){if(this.props.removeFromUseList&&!this.props.customElementMode){this.props.removeFromUseList(this.props.baseNode);return}}else tx.default.isEqual(this.state.attributes,i)||this.setState({attributes:i})}};qd.defaultProps={uses:[]};aa=Ue((t,e)=>{let r=t?.css?.stylesheet,i=t?.pages?.byId[e?.pageInfo?.pid]?.local_css;return{forceScrollTransition:!!(r?.includes("--scroll-animation:")||i?.includes("--scroll-animation:"))}},null)(qd),rx=class extends me{constructor(e){super(e),this.mutationsList=[],this.hasRunFirstMutationSummary=!1,!he&&!this.props.customElementMode&&(this.observer=new MutationObserver(this.onMutation))}render(){return this.props.children}componentDidMount(){this.props.bodycopyRef.current&&(this.onSummary(),this.observer?.observe(this.props.bodycopyRef.current,{attributes:!0,subtree:!0,childList:!0,attributeFilter:["uses"]}))}componentWillUnmount(){this.observer?.disconnect(),cancelAnimationFrame(this.onSummaryAnimationFrame),this.props.bodycopyRef.current&&Array.from(this.props.bodycopyRef.current.querySelectorAll("[uses]")).forEach(this.removeFromUseList)}onMutation=()=>{this.ticking||(this.ticking=!0,this.onSummaryAnimationFrame=requestAnimationFrame(()=>{this.onSummary(),this.ticking=!1}))};onSummary=()=>{if(!this.props.bodycopyRef.current)return;let e=Array.from(this.props.bodycopyRef.current.querySelectorAll("[uses]")),r=e.filter(n=>!Nu.has(n));Array.from(Nu).filter(n=>!n.hasAttribute("uses")||e.includes(n)).forEach(this.removeFromUseList),r.forEach(this.addToUseList)};addToUseList=e=>{if(!(e.nodeType!==Node.ELEMENT_NODE||window.customElements.get(e.tagName.toLowerCase()))){if(!e.shadowRoot)try{e.attachShadow({mode:"open"})}catch{CargoEditor?.mutationManager?.execute(()=>{let i={};e.hasAttribute("uses")&&(i.uses=e.getAttribute("uses")),e.hasAttribute("rotation")&&(i.rotation=e.getAttribute("rotation")),e.hasAttribute("animate")&&(i.animate=e.getAttribute("animate")),e.hasAttribute("scroll-transition")&&(i["scroll-transition"]=e.getAttribute("scroll-transition"));let n=document.createElement("span");for(let s in i)n.setAttribute(s,i[s]);e.parentNode.insertBefore(n,e);let o=CargoEditor?.getActiveRange();CargoEditor.helpers.movePreservingRanges(e,n,-1,o),n.attachShadow({mode:"open"}),e.removeAttribute("scroll-transition"),e.removeAttribute("uses"),e.removeAttribute("animate"),e.removeAttribute("rotation"),e=n});return}if(!Nu.has(e)){Nu.add(e);let r={component:S(qd,{customElementMode:!1,baseNode:e,adminMode:this.props.adminMode,removeFromUseList:this.removeFromUseList}),element:e,portalHost:null};Pt(e,"custom-element-connected",r),this.portalHost=r.portalHost}}};removeFromUseList=e=>{let r=this.props.bodycopyRef.current&&this.props.bodycopyRef.current.contains(e),i=e.hasAttribute("uses");if(!r&&this.props.bodycopyRef.current)Pt(this.props.bodycopyRef.current,"custom-element-disconnected",{component:null,element:e,portalHost:this.portalHost}),Nu.delete(e);else if(!i&&(Pt(e,"custom-element-disconnected",{component:null,element:e,portalHost:this.portalHost}),Nu.delete(e),r&&e.shadowRoot))if(CargoEditor?.mutationManager)CargoEditor?.mutationManager?.execute(()=>{let n=document.createElement("div");n.innerHTML=e.outerHTML,e.replaceWith(n.childNodes[0])},{preventDraft:!0});else{let n=document.createElement("div");n.innerHTML=e.outerHTML,e.replaceWith(n.childNodes[0])}}},Jm=rx});var Hd={};hr(Hd,{default:()=>Pse});var ix,Pse,m5=$(()=>{Fe();ix={name:"wallpaper",excludeFromShuffle:!0,options:[{labelName:"Image",name:"activeImage",type:"image",value:"default"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"image-fit",type:"radio",value:"fill",values:[{labelName:"Fill Window",value:"fill"},{labelName:"Fit Window",value:"fit"}]},{labelName:"Display as Slideshow",name:"cycle-group",type:"details-menu",toggle:{name:"cycle-images",type:"check-box",value:!1},children:[{labelName:void 0,name:"transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"}]},{labelName:"Autoplay",name:"autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"autoplay-delay",type:"range-input",value:3,min:0,max:20,step:.1},{labelName:"Transition Speed",name:"transition-speed",type:"range-input",value:.8,min:0,max:10,step:.1},{labelName:"Randomize Order",name:"shuffle",type:"check-box",value:!1},{labelName:"Navigation",name:"navigation",type:"check-box",value:!1}]},{labelName:"Opacity",name:"opacity",type:"range-input",value:1,min:0,max:1,step:.01,excludeFromShuffle:!0},{type:"color",labelName:"Background Color",name:"bg-color",value:"transparent",showField:!0},{labelName:"Margin",name:"margin",type:"scrubber",value:"0",addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",allowedUnits:["px","%","em","rem","vmin","vmax","vw","vh"],excludeFromShuffle:!0,min:0,max:{"%":50,vh:50,vw:50,vmin:100,vmax:50}},{name:"alignments",type:"custom",value:null}]};ix.defaults=ht(ix.options);Pse=ix});var Wd={};hr(Wd,{default:()=>Ise});var Qm,Ise,g5=$(()=>{Fe();Qm={name:"gradient",options:[{type:"custom",name:"gradient-preset"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{name:"gradient-type",type:"radio",value:"linear",values:[{labelName:"Linear",value:"linear"},{labelName:"Radial",value:"radial"}]},{type:"checkbox-color",checkbox:{labelName:"Color One",name:"color-one-active",type:"check-box",value:!0},color:{type:"color",labelName:"Color One",name:"color-one",value:"#f2c409",requirements:[{option:"color-one-active",shouldBe:!0}]}},{type:"checkbox-color",checkbox:{labelName:"Color Two",name:"color-two-active",type:"check-box",value:!1},color:{type:"color",labelName:"Color Two",name:"color-two",value:"#02ff00",requirements:[{option:"color-two-active",shouldBe:!0}]}},{type:"checkbox-color",checkbox:{labelName:"Color Three",name:"color-three-active",type:"check-box",value:!0},color:{type:"color",labelName:"Color Three",name:"color-three",value:"#fe2201",requirements:[{option:"color-three-active",shouldBe:!0}]}},{type:"spacer"},{type:"group",className:"grid-columns-even",requirements:[{option:"gradient-type",shouldBe:"radial"}],children:[{labelName:"X",name:"pos-x",type:"scrubber",numberOnlyMode:!0,suffix:"%",requirements:[{option:"gradient-type",shouldBe:"radial"}],value:0,min:-150,max:150,step:.5},{labelName:"Y",name:"pos-y",type:"scrubber",numberOnlyMode:!0,suffix:"%",requirements:[{option:"gradient-type",shouldBe:"radial"}],value:0,min:-150,max:150,step:.5}]},{labelName:"Rotation",name:"rotation",type:"scrubber",suffix:"\xB0",requirements:[{option:"gradient-type",shouldBe:"linear"}],loopValues:!0,numberOnlyMode:!0,value:0,min:0,max:360,step:1},{labelName:"Smoothness",name:"smoothness",type:"scrubber",numberOnlyMode:!0,suffix:"%",value:50,min:0,max:100,step:.1},{labelName:"Scale",name:"scale",type:"scrubber",numberOnlyMode:!0,suffix:"%",value:50,min:.1,max:100,step:.1},{type:"group",className:"grid-columns-even",children:[{labelName:"Repeat",name:"repeat",type:"check-box",value:!1},{labelName:"Animation",name:"animation-speed",type:"range-input",requirements:[{option:"repeat",shouldBe:!0}],renderWhenDisabled:!0,value:0,min:-100,max:100,step:1}]}]};Qm.defaults=ht(Qm.options);Qm.customShuffle=t=>{let e={...t},r=Math.floor(Math.random()*256),i=Math.floor(Math.random()*256),n=Math.floor(Math.random()*256);switch(Math.floor(Math.random()*20)){case 0:r=i=n=0;break;case 1:r=i=n=255;break;case 2:case 3:r=i=n;break}e["color-one"]="rgb("+r+", "+i+", "+n+")";let s=[];if(Math.random()>.3)for(var a=0;a<3;a++)s.push(Math.random()*240+-120);else s[0]=s[1]=s[2]=Math.random()*240+-120;let l=Math.floor(r+s[0]+1024)%256,p=Math.floor(i+s[1]+1024)%256,f=Math.floor(n+s[2]+1024)%256;e["color-two"]="rgb("+l+", "+p+", "+f+")";let c=Math.floor((r+s[0]+1024)*2)%256,m=Math.floor((i+s[1]+1024)*2)%256,v=Math.floor((n+s[2]+1024)*2)%256;return e["color-three"]="rgb("+c+", "+m+", "+v+")",e["color-one-active"]=!0,Math.random()>.4?(e["color-two-active"]=!0,e["color-three-active"]=!0):Math.random()>.4?(e["color-two-active"]=!0,e["color-three-active"]=!1):e["color-three-active"]=!0,Math.random()>.5&&(e["animation-speed"]=0),Math.random()>.5&&(e.rotation=Math.round(e.rotation/45)*45),Math.random()>.5&&(e["pos-x"]=0),Math.random()>.5&&(e["pos-y"]=0),Math.random()>.8&&(e.smoothness=100),e};Ise=Qm});var ox={};hr(ox,{default:()=>Tse,onChangeCustom:()=>Ase});var dPe,Ase,nx,Tse,v5=$(()=>{Fe();dPe=ve(Ie()),Ase=(t,e,r)=>{let i={};for(let[o,s]of Object.entries(e))t[o]!=s&&(i[o]=s);let n=JSON.parse(e.filters);for(let[o,s]of Object.entries(i))switch(o){case"filters":r.UpdateFilters(n);break;case"rgb":case"film":case"badtv":r.ToggleComponent(n);break;case"image":r.UpdateImage(s);break;default:r.UpdateSettings(e)}},nx={name:"badtv",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Bad TV",name:"badtv-group",type:"details-menu",toggle:{name:"badtv",type:"check-box",value:!0},children:[{name:"distortion",labelName:"Thick Distortion",type:"range-input",value:3,min:.1,max:10,step:.1,interactive:!0,noisePosn:1,randMin:2.8,randMax:3.2,randRange:"low"},{name:"distortion2",labelName:"Fine Distortion",type:"range-input",value:1,min:.1,max:10,step:.1,noisePosn:20,randMin:1,randMax:5,automate:!0},{name:"speed",labelName:"Distortion Speed",type:"range-input",value:.1,min:0,max:.3,step:.01,noisePosn:40,randMin:0,randMax:.1,randRange:"low"},{name:"rollSpeed",labelName:"Roll Speed",type:"range-input",value:.05,min:0,max:.2,step:.01,noisePosn:50,randMin:0,randMax:.6,randRange:"low"}]},{labelName:"RGB Shift",name:"rgb-group",type:"details-menu",toggle:{name:"rgb",type:"check-box",value:!0},children:[{name:"amount",labelName:"Amount",type:"range-input",value:.005,min:0,max:.1,step:.001,interactive:!0,noisePosn:60,randMin:0,randMax:.025,randRange:"low"},{name:"angle",labelName:"Angle",type:"range-input",value:0,min:0,max:6.28,step:.01,noisePosn:80,randMin:0,randMax:6.28,automate:!0}]},{labelName:"Scanlines",name:"film-group",type:"details-menu",toggle:{name:"film",type:"check-box",value:!0},children:[{name:"sCount",labelName:"Amount",value:800,type:"range-input",min:400,max:1e3,step:1,noisePosn:90,randMin:650,randMax:1e3,randRange:"high"},{name:"sIntensity",labelName:"Strength",value:.95,type:"range-input",min:0,max:2,step:.01},{name:"nIntensity",labelName:"Noise",value:.28,type:"range-input",min:0,max:2,step:.01}]},{type:"spacer"},{labelName:"Automate",name:"automate",type:"check-box",value:!1},{labelName:"Interactive",name:"interactive",type:"check-box",value:!1}]};nx.defaults=ht(nx.options);Tse=nx});function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function qe(t,e){if(t=t||"",e=e||{},t instanceof qe)return t;if(!(this instanceof qe))return new qe(t,e);var r=kse(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}function kse(t){var e={r:0,g:0,b:0},r=1,i=null,n=null,o=null,s=!1,a=!1;return typeof t=="string"&&(t=Jse(t)),eg(t)=="object"&&(fs(t.r)&&fs(t.g)&&fs(t.b)?(e=Nse(t.r,t.g,t.b),s=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):fs(t.h)&&fs(t.s)&&fs(t.v)?(i=Vd(t.s),n=Vd(t.v),e=Dse(t.h,i,n),s=!0,a="hsv"):fs(t.h)&&fs(t.s)&&fs(t.l)&&(i=Vd(t.s),o=Vd(t.l),e=Ose(t.h,i,o),s=!0,a="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=E5(r),{ok:s,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function Nse(t,e,r){return{r:fr(t,255)*255,g:fr(e,255)*255,b:fr(r,255)*255}}function y5(t,e,r){t=fr(t,255),e=fr(e,255),r=fr(r,255);var i=Math.max(t,e,r),n=Math.min(t,e,r),o,s,a=(i+n)/2;if(i==n)o=s=0;else{var l=i-n;switch(s=a>.5?l/(2-i-n):l/(i+n),i){case t:o=(e-r)/l+(e<r?6:0);break;case e:o=(r-t)/l+2;break;case r:o=(t-e)/l+4;break}o/=6}return{h:o,s,l:a}}function Ose(t,e,r){var i,n,o;t=fr(t,360),e=fr(e,100),r=fr(r,100);function s(p,f,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?p+(f-p)*6*c:c<1/2?f:c<2/3?p+(f-p)*(2/3-c)*6:p}if(e===0)i=n=o=r;else{var a=r<.5?r*(1+e):r+e-r*e,l=2*r-a;i=s(l,a,t+1/3),n=s(l,a,t),o=s(l,a,t-1/3)}return{r:i*255,g:n*255,b:o*255}}function b5(t,e,r){t=fr(t,255),e=fr(e,255),r=fr(r,255);var i=Math.max(t,e,r),n=Math.min(t,e,r),o,s,a=i,l=i-n;if(s=i===0?0:l/i,i==n)o=0;else{switch(i){case t:o=(e-r)/l+(e<r?6:0);break;case e:o=(r-t)/l+2;break;case r:o=(t-e)/l+4;break}o/=6}return{h:o,s,v:a}}function Dse(t,e,r){t=fr(t,360)*6,e=fr(e,100),r=fr(r,100);var i=Math.floor(t),n=t-i,o=r*(1-e),s=r*(1-n*e),a=r*(1-(1-n)*e),l=i%6,p=[r,s,o,o,a,r][l],f=[a,r,r,s,o,o][l],c=[o,o,a,r,r,s][l];return{r:p*255,g:f*255,b:c*255}}function w5(t,e,r,i){var n=[ro(Math.round(t).toString(16)),ro(Math.round(e).toString(16)),ro(Math.round(r).toString(16))];return i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function Lse(t,e,r,i,n){var o=[ro(Math.round(t).toString(16)),ro(Math.round(e).toString(16)),ro(Math.round(r).toString(16)),ro(C5(i))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function x5(t,e,r,i){var n=[ro(C5(i)),ro(Math.round(t).toString(16)),ro(Math.round(e).toString(16)),ro(Math.round(r).toString(16))];return n.join("")}function Fse(t,e){e=e===0?0:e||10;var r=qe(t).toHsl();return r.s-=e/100,r.s=tg(r.s),qe(r)}function zse(t,e){e=e===0?0:e||10;var r=qe(t).toHsl();return r.s+=e/100,r.s=tg(r.s),qe(r)}function Bse(t){return qe(t).desaturate(100)}function Use(t,e){e=e===0?0:e||10;var r=qe(t).toHsl();return r.l+=e/100,r.l=tg(r.l),qe(r)}function qse(t,e){e=e===0?0:e||10;var r=qe(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),qe(r)}function Hse(t,e){e=e===0?0:e||10;var r=qe(t).toHsl();return r.l-=e/100,r.l=tg(r.l),qe(r)}function Wse(t,e){var r=qe(t).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,qe(r)}function Vse(t){var e=qe(t).toHsl();return e.h=(e.h+180)%360,qe(e)}function S5(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=qe(t).toHsl(),i=[qe(t)],n=360/e,o=1;o<e;o++)i.push(qe({h:(r.h+o*n)%360,s:r.s,l:r.l}));return i}function $se(t){var e=qe(t).toHsl(),r=e.h;return[qe(t),qe({h:(r+72)%360,s:e.s,l:e.l}),qe({h:(r+216)%360,s:e.s,l:e.l})]}function jse(t,e,r){e=e||6,r=r||30;var i=qe(t).toHsl(),n=360/r,o=[qe(t)];for(i.h=(i.h-(n*e>>1)+720)%360;--e;)i.h=(i.h+n)%360,o.push(qe(i));return o}function Gse(t,e){e=e||6;for(var r=qe(t).toHsv(),i=r.h,n=r.s,o=r.v,s=[],a=1/e;e--;)s.push(qe({h:i,s:n,v:o})),o=(o+a)%1;return s}function Yse(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function E5(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function fr(t,e){Xse(t)&&(t="100%");var r=Zse(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function tg(t){return Math.min(1,Math.max(0,t))}function gn(t){return parseInt(t,16)}function Xse(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function Zse(t){return typeof t=="string"&&t.indexOf("%")!=-1}function ro(t){return t.length==1?"0"+t:""+t}function Vd(t){return t<=1&&(t=t*100+"%"),t}function C5(t){return Math.round(parseFloat(t)*255).toString(16)}function _5(t){return gn(t)/255}function fs(t){return!!to.CSS_UNIT.exec(t)}function Jse(t){t=t.replace(Mse,"").replace(Rse,"").toLowerCase();var e=!1;if(sx[t])t=sx[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=to.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=to.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=to.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=to.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=to.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=to.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=to.hex8.exec(t))?{r:gn(r[1]),g:gn(r[2]),b:gn(r[3]),a:_5(r[4]),format:e?"name":"hex8"}:(r=to.hex6.exec(t))?{r:gn(r[1]),g:gn(r[2]),b:gn(r[3]),format:e?"name":"hex"}:(r=to.hex4.exec(t))?{r:gn(r[1]+""+r[1]),g:gn(r[2]+""+r[2]),b:gn(r[3]+""+r[3]),a:_5(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=to.hex3.exec(t))?{r:gn(r[1]+""+r[1]),g:gn(r[2]+""+r[2]),b:gn(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function Qse(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}var Mse,Rse,sx,Kse,to,Ro=$(()=>{Mse=/^\s+/,Rse=/\s+$/;qe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,n,o,s,a;return r=e.r/255,i=e.g/255,n=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),.2126*o+.7152*s+.0722*a},setAlpha:function(e){return this._a=E5(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=b5(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=b5(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+n+"%)":"hsva("+r+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=y5(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=y5(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+n+"%)":"hsla("+r+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return w5(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Lse(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(fr(this._r,255)*100)+"%",g:Math.round(fr(this._g,255)*100)+"%",b:Math.round(fr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(fr(this._r,255)*100)+"%, "+Math.round(fr(this._g,255)*100)+"%, "+Math.round(fr(this._b,255)*100)+"%)":"rgba("+Math.round(fr(this._r,255)*100)+"%, "+Math.round(fr(this._g,255)*100)+"%, "+Math.round(fr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Kse[w5(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+x5(this._r,this._g,this._b,this._a),i=r,n=this._gradientType?"GradientType = 1, ":"";if(e){var o=qe(e);i="#"+x5(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,n=this._a<1&&this._a>=0,o=!r&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return qe(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Use,arguments)},brighten:function(){return this._applyModification(qse,arguments)},darken:function(){return this._applyModification(Hse,arguments)},desaturate:function(){return this._applyModification(Fse,arguments)},saturate:function(){return this._applyModification(zse,arguments)},greyscale:function(){return this._applyModification(Bse,arguments)},spin:function(){return this._applyModification(Wse,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(jse,arguments)},complement:function(){return this._applyCombination(Vse,arguments)},monochromatic:function(){return this._applyCombination(Gse,arguments)},splitcomplement:function(){return this._applyCombination($se,arguments)},triad:function(){return this._applyCombination(S5,[3])},tetrad:function(){return this._applyCombination(S5,[4])}};qe.fromRatio=function(t,e){if(eg(t)=="object"){var r={};for(var i in t)t.hasOwnProperty(i)&&(i==="a"?r[i]=t[i]:r[i]=Vd(t[i]));t=r}return qe(t,e)};qe.equals=function(t,e){return!t||!e?!1:qe(t).toRgbString()==qe(e).toRgbString()};qe.random=function(){return qe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};qe.mix=function(t,e,r){r=r===0?0:r||50;var i=qe(t).toRgb(),n=qe(e).toRgb(),o=r/100,s={r:(n.r-i.r)*o+i.r,g:(n.g-i.g)*o+i.g,b:(n.b-i.b)*o+i.b,a:(n.a-i.a)*o+i.a};return qe(s)};qe.readability=function(t,e){var r=qe(t),i=qe(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};qe.isReadable=function(t,e,r){var i=qe.readability(t,e),n,o;switch(o=!1,n=Qse(r),n.level+n.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};qe.mostReadable=function(t,e,r){var i=null,n=0,o,s,a,l;r=r||{},s=r.includeFallbackColors,a=r.level,l=r.size;for(var p=0;p<e.length;p++)o=qe.readability(t,e[p]),o>n&&(n=o,i=qe(e[p]));return qe.isReadable(t,i,{level:a,size:l})||!s?i:(r.includeFallbackColors=!1,qe.mostReadable(t,["#fff","#000"],r))};sx=qe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Kse=qe.hexNames=Yse(sx);to=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}()});var ax={};hr(ax,{default:()=>tae,onChangeCustom:()=>eae});var mPe,eae,$d,tae,P5=$(()=>{Fe();mPe=ve(Ie());Ro();eae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);i.hasOwnProperty("color_r")&&(r.Update("color_r",i.color_r),delete i.color_r),i.hasOwnProperty("color_g")&&(r.Update("color_g",i.color_g),delete i.color_g),i.hasOwnProperty("color_b")&&(r.Update("color_b",i.color_b),delete i.color_b);for(let[n,o]of Object.entries(i))r.Update(n,o)},$d={name:"parallax",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Knockout Mask",name:"knockout_shape",type:"radio",value:"triangle",values:[{customLabel:"RectangleIcon",value:"rectangle"},{customLabel:"SquareIcon",value:"square"},{customLabel:"TriangleIcon",value:"triangle"},{customLabel:"CircleIcon",value:"circle"}]},{labelName:"Knockout Blur",name:"knockout_blur",type:"range-input",value:0,suffix:"%",min:0,max:100,step:1},{labelName:"Knockout Size",name:"knockout",type:"range-input",value:85,suffix:"%",min:0,max:100,step:1},{labelName:"Knockout Rotation",name:"knockout_rotation",type:"range-input",loopValues:!0,value:171,suffix:"\xB0",min:0,max:360,step:1},{type:"spacer"},{labelName:void 0,name:"movement_direction",type:"radio",value:"xy",values:[{labelName:"X/Y Axes",value:"xy"},{labelName:"Z Axis",value:"z"}]},{labelName:"Movement Direction",name:"xy_direction",type:"range-input",loopValues:!0,value:285,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"movement_direction",shouldBe:"xy"}]},{labelName:"Layers",name:"layers",type:"range-input",value:3,min:2,max:15,step:1,allowUnclampedTextEntry:!1,requirements:[{option:"movement_direction",shouldBe:"xy"}]},{labelName:void 0,name:"z_direction",type:"radio",value:"inwards",values:[{labelName:"Inwards",value:"inwards"},{labelName:"Outwards",value:"outwards"}],requirements:[{option:"movement_direction",shouldBe:"z"}]},{labelName:"Layers",name:"z_layers",type:"range-input",value:4,min:4,max:15,step:1,requirements:[{option:"movement_direction",shouldBe:"z"}]},{labelName:"Speed",name:"speed",type:"range-input",value:30,suffix:"%",min:0,max:100,step:1},{labelName:"Depth",name:"depth",type:"range-input",value:35,suffix:"%",min:0,max:100,step:.5},{labelName:"Base Rotation",name:"base_rotation",type:"range-input",loopValues:!0,value:50,suffix:"\xB0",min:0,max:360,step:1},{labelName:"Skew",name:"skew",type:"range-input",loopValues:!0,value:-50,suffix:"\xB0",min:-1080,max:1080,step:1},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Sensitivity",name:"mouse_speed",type:"range-input",value:68,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Scroll Interaction",name:"scroll_interaction",type:"check-box",value:!1},{type:"spacer"},{labelName:"Background Color",name:"background_color",type:"color",value:"#FFFFFF00"},{labelName:"See-Through",name:"see_through",type:"check-box",value:!1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#FFFFFF00",excludeFromShuffle:!0}]};$d.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.hasOwnProperty("background_color")&&e?.background_color===null&&(e.background_color="rgba(0,0,0,0)"),e.color){let r=qe(e.color);e.overlay_hex=r.toHexString(),e.overlay_alpha=r.getAlpha()}if(e.background_color){let r=qe(e.background_color),i=r.toRgb();e.color_r=i.r,e.color_g=i.g,e.color_b=i.b,e.alpha=i.a,e.hex_color=r.toHexString()}return e};$d.defaults=ht($d.options);$d.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";tae=$d});var lx={};hr(lx,{default:()=>iae,onChangeCustom:()=>rae});var bPe,rae,Ou,iae,I5=$(()=>{Fe();bPe=ve(Ie());Ro();rae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Ou={name:"refraction",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"reflection_type",type:"radio",value:"reflection",values:[{labelName:"Reflection",value:"reflection"},{labelName:"Refraction",value:"refraction"}]},{labelName:"Flip Image",name:"flip",type:"check-box",value:!0},{labelName:"Refraction Ratio",name:"refraction_ratio",type:"range-input",requirements:[{option:"reflection_type",shouldBe:"refraction"}],value:19,min:0,max:100,step:.1},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Movement Range",name:"mouse_speed",type:"range-input",value:63,min:0,max:100,step:.1},{labelName:"Dynamic Image Refraction",name:"refract_interaction",type:"check-box",value:!1,requirements:[{option:"reflection_type",shouldBe:"refraction"}]},{labelName:null,name:"refract_motion",type:"radio",value:"speed",requirements:[{option:"reflection_type",shouldBe:"refraction"},{option:"refract_interaction",shouldBe:!0}],values:[{labelName:"Gather",value:"gather"},{labelName:"Disperse",value:"disperse"},{labelName:"Speed",value:"speed"}]},{type:"spacer"},{labelName:"Geometry: ",name:"geometry",type:"select",values:[{labelName:"Fullerene",value:"buckyball_3"},{labelName:"Compound Eye",value:"compoundeye_2"},{labelName:"Shattered Glass",value:"shattered"},{labelName:"Shard",value:"shard"},{labelName:"Warped Glass",value:"warped_glass_3"},{labelName:"Tube",value:"tube"},{labelName:"Cubic",value:"cubic"},{labelName:"Turbine",value:"turbine"},{labelName:"Icosahedron",value:"icosahedron_small"},{labelName:"Geodesic",value:"icosahedron_2"}]},{labelName:"Geometry Zoom",name:"zoom",type:"range-input",value:100,min:100,max:300,step:1},{labelName:"Rotation X",name:"rot_x",type:"range-input",value:145,min:0,max:360,step:1},{labelName:"Rotation Y",name:"rot_y",type:"range-input",value:195,min:0,max:360,step:1},{labelName:"Rotation Z",name:"rot_z",type:"range-input",value:115,min:0,max:360,step:1},{labelName:"Rotation Speed X",name:"rot_speed_x",type:"range-input",value:3.5,min:-20,max:20,step:.1},{labelName:"Rotation Speed Y",name:"rot_speed_y",type:"range-input",value:-1.5,min:-20,max:20,step:.1},{labelName:"Rotation Speed Z",name:"rot_speed_z",type:"range-input",value:2,min:-20,max:20,step:.1},{type:"spacer"},{labelName:"Color Overlay",name:"color",type:"color",value:"#ffffff00"},{labelName:void 0,name:"overlay_type",type:"radio",value:"multiply_color",values:[{labelName:"Multiply",value:"multiply_color"},{labelName:"Screen",value:"screen_color"}]}]};Ou.defaults=ht(Ou.options);Ou.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";Ou.defaults.rgb={value:"rgb(255,255,255)"};Ou.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgb(255,255,255)"),e.color){let r=qe(e.color);e.rgb=r.toRgbString(),e.color=r.toRgbString(),e.alpha=r.getAlpha()}return e};iae=Ou});var ux={};hr(ux,{default:()=>oae,onChangeCustom:()=>nae});var _Pe,nae,Du,oae,A5=$(()=>{Fe();_Pe=ve(Ie());Ro();nae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Du={name:"ripples",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Distortion X",name:"scaleX",type:"range-input",value:20,min:0,max:100,step:1},{labelName:"Distortion Y",name:"scaleY",type:"range-input",value:20,min:0,max:100,step:1},{labelName:"Scale",name:"scale",type:"range-input",value:1,min:1,max:10,step:.01},{labelName:"Speed",name:"target_speed",type:"range-input",value:9,min:0,max:100,step:.1},{labelName:"Direction",name:"direction",type:"scrubber",numberOnlyMode:!0,value:245,min:0,max:360,loopValues:!0,suffix:"\xB0",step:1},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Sensitivity",requires:"mouse_sensitivity",name:"mouse_sensitivity",type:"range-input",value:100,min:0,max:100,step:1},{labelName:"Overlay Color",name:"color",type:"color",value:"#ffffff00",excludeFromShuffle:!0}]};Du.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=qe(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};Du.defaults=ht(Du.options);Du.defaults.alpha={value:0};Du.defaults.hex={value:"#fff"};oae=Du});var cx={};hr(cx,{default:()=>aae,onChangeCustom:()=>sae});var IPe,sae,Lu,aae,T5=$(()=>{Fe();IPe=ve(Ie());Ro();sae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Lu={name:"slitscan",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"orientation",type:"radio",value:"horizontal",values:[{labelName:"Horizontal",value:"horizontal"},{labelName:"Vertical",value:"vertical"}]},{labelName:"Scan Size",name:"scan_size",type:"range-input",value:90,min:0,max:100,step:.1},{labelName:"Short Wave",name:"scan_cycles",type:"range-input",value:1,min:0,max:20,step:.1},{labelName:"Wiggle",name:"wiggle",type:"range-input",value:20,min:0,max:100,step:.1},{labelName:"Speed",name:"target_speed",type:"range-input",value:17,min:-100,max:100,step:1},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Scroll Interaction",name:"scroll_interaction",type:"check-box",value:!1},{labelName:"Overlay Color",name:"color",type:"color",value:"transparent",excludeFromShuffle:!0}]};Lu.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=qe(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};Lu.defaults=ht(Lu.options);Lu.defaults.alpha={value:0};Lu.defaults.hex={value:"#000000"};aae=Lu});var dx={};hr(dx,{default:()=>uae,onChangeCustom:()=>lae});var RPe,lae,al,uae,M5=$(()=>{Fe();RPe=ve(Ie());Ro();lae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},al={name:"pixelation",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"layout_mode",type:"radio",value:"grid_mode",values:[{labelName:"Grid",value:"grid_mode"},{labelName:"Rows",value:"row_mode"},{labelName:"Columns",value:"column_mode"}]},{labelName:"Rows",name:"rows",type:"range-input",value:44,min:1,max:64,step:1,allowUnclampedTextEntry:!1,requirements:[{option:"layout_mode",shouldBe:"row_mode"}]},{labelName:"Columns",name:"columns",type:"range-input",value:44,min:1,max:64,step:1,allowUnclampedTextEntry:!1,requirements:[{option:"layout_mode",shouldBe:"column_mode"}]},{labelName:"Subdivisions",name:"grid_size",type:"range-input",value:44,min:1,max:100,step:1,allowUnclampedTextEntry:!1,requirements:[{option:"layout_mode",shouldBe:"grid_mode"}]},{labelName:"Cell Image Zoom",name:"zoom",type:"range-input",value:100,suffix:"%",min:1,max:100,step:1},{labelName:"Flip Alternate Cells",name:"flip_it",type:"check-box",value:!1},{type:"spacer"},{labelName:"Turbulence",name:"stir_grid",type:"check-box",value:!0},{labelName:"Stir Frequency",name:"stir_freq",type:"range-input",value:74,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Stir Strength",name:"stir_strength",type:"range-input",value:4,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Disorder",name:"stir_disorder",type:"range-input",value:4,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Motion Elasticity",name:"elasticity",type:"range-input",value:35,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#ffffff00",excludeFromShuffle:!0},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Movement Force",name:"mouse_sensitivity",type:"range-input",value:6,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Mouse Radius",name:"tolerance",type:"range-input",value:50,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Mouseover Zoom",name:"mouse_zoom",type:"range-input",value:0,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]}]};al.defaults=ht(al.options);al.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";al.defaults.rgb={value:"rgb(255,255,255)"};al.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=qe(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};al.customShuffle=t=>(Math.random()>.5&&(t.zoom=100),t);uae=al});var px={};hr(px,{default:()=>dae,onChangeCustom:()=>cae});var DPe,cae,jd,dae,R5=$(()=>{Fe();DPe=ve(Ie());Ro();cae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i)){let s=!0;if(n==="image"&&(o!==void 0&&o?r.obj.loadImage(o):s=!1),n!==void 0&&s===!0){let a={};a[n]=o,r.Update(n,o),r.obj.updateSettings(a)}}},jd={name:"kaleidoscope",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Slices",name:"slices",type:"range-input",value:18,min:2,max:256,step:1},{labelName:"Zoom",name:"zoom",type:"range-input",value:217,suffix:"%",min:1,max:500,step:1},{labelName:"Rotation",name:"baseRotation1",type:"range-input",value:61,suffix:"\xB0",min:-180,max:180,step:1},{labelName:"Rotation Speed",name:"rotationSpeed1",type:"range-input",value:-8,suffix:"\xB0/sec",min:-100,max:100,step:1},{labelName:"Image Rotation",name:"baseRotation2",type:"range-input",value:-148,suffix:"\xB0",min:-180,max:180,step:1},{labelName:"Image Rotation Speed",name:"rotationSpeed2",type:"range-input",value:-8,suffix:"\xB0/sec",min:-100,max:100,step:1},{labelName:"Image Rotation Anchor X",name:"rotationCenterX",type:"range-input",value:21,suffix:"\xB0/sec",min:-300,max:300,step:1},{labelName:"Image Rotation Anchor Y",name:"rotationCenterY",type:"range-input",value:66,suffix:"\xB0/sec",min:-300,max:300,step:1},{type:"spacer"},{labelName:"Mirror Slices",name:"mirrorSlices",type:"check-box",value:!0},{labelName:"Mouse Interaction",name:"hasMouseInteraction",type:"check-box",value:!0}]};jd.transformChanges=(t,e)=>{if(e.color){let r=qe(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};jd.defaults=ht(jd.options);jd.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";dae=jd});var hx={};hr(hx,{default:()=>hae,onChangeCustom:()=>pae});var BPe,pae,Gd,hae,k5=$(()=>{Fe();BPe=ve(Ie());Ro();pae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Gd={name:"polygon_engine",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{labelName:"Style:",name:"style",type:"select",value:"delaunay",values:[{labelName:"Random 1",value:"random1"},{labelName:"Random 2",value:"random2"},{labelName:"Iso",value:"iso"},{labelName:"Rectangular 1",value:"straight1"},{labelName:"Rectangular 2",value:"straight2"},{labelName:"Voronoi",value:"voronoi"},{labelName:"Delaunay",value:"delaunay"}]},{labelName:"Cuts",name:"subdivisionCount",type:"range-input",allowUnclampedTextEntry:!1,value:421,min:3,max:500,step:1},{labelName:"Animation Speed",name:"animationSpeed",type:"range-input",value:1,min:0,max:20,step:.1},{type:"spacer"},{labelName:"Mouse Interaction",name:"hasMouseInteraction",type:"check-box",value:!0},{labelName:"Interaction Speed",name:"interactionSpeed",type:"range-input",value:15,min:0,max:20,step:.1,requirements:[{option:"hasMouseInteraction",shouldBe:!0}]},{labelName:"Interaction Radius",name:"interactionRadius",type:"range-input",value:300,suffix:"px",min:0,max:500,step:1,requirements:[{option:"hasMouseInteraction",shouldBe:!0}]},{type:"spacer"},{excludeFromShuffle:!0,labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"}]};Gd.defaults=ht(Gd.options);Gd.defaults.image_url="//static.cargo.site/assets/backdrop/default_256.jpg";Gd.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=qe(e.color);e.overlay_hex=r.toHexString(),e.overlay_alpha=r.getAlpha()}return e};hae=Gd});var fx={};hr(fx,{default:()=>mae,onChangeCustom:()=>fae});var WPe,fae,Kd,mae,N5=$(()=>{Fe();WPe=ve(Ie());Ro();fae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Kd={name:"morphovision",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Transition Duration",name:"transition_time",type:"range-input",value:4,suffix:" sec",min:.5,max:10,step:.1},{labelName:"Intensity",name:"transition_alpha",type:"range-input",value:76,suffix:"%",min:10,max:100,step:1},{labelName:"Zoom",name:"zoom",type:"range-input",value:14,suffix:"%",min:-100,max:100,step:1},{labelName:"Cycle Images",name:"cycle_images",type:"check-box",value:!0},{labelName:"Randomize Order",name:"shuffle",type:"check-box",value:!0,renderWhenDisabled:!0,requirements:[{option:"cycle_images",shouldBe:!0}]},{type:"spacer"},{labelName:"Morph Size",name:"morph_size",type:"range-input",value:85,suffix:"%",min:0,max:100,step:1},{labelName:"Morph Movement",name:"morph_speed",type:"range-input",value:15,suffix:"%",min:0,max:100,step:1},{labelName:"Morph Amplitude",name:"amplitude",type:"range-input",value:22,suffix:"%",min:0,max:100,step:1},{labelName:"Phase Shift",name:"phase",type:"range-input",value:95,suffix:"%",min:0,max:100,step:1},{labelName:"Movement Jitter",name:"jitter",type:"range-input",value:18,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Image Warp",name:"small_warp",type:"range-input",value:40,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"},{labelName:void 0,name:"blend",type:"radio",value:"MULTIPLY",values:[{labelName:"Normal",value:"NORMAL"},{labelName:"Screen",value:"SCREEN"},{labelName:"Multiply",value:"MULTIPLY"}]}]};Kd.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=qe(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};Kd.defaults=ht(Kd.options);Kd.defaults.image_url="/_jsapps/backdrop/morphovision/morph_default.jpeg";mae=Kd});var mx={};hr(mx,{default:()=>vae,onChangeCustom:()=>gae});var GPe,gae,rg,vae,O5=$(()=>{Fe();GPe=ve(Ie()),gae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},rg={name:"wave",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Waves",name:"ripples.on",type:"check-box",value:!0},{labelName:"Wave Speed",name:"ripples.noiseSpeed",type:"range-input",value:15,min:0,max:20,step:.1,requirements:[{option:"ripples.on",shouldBe:!0}]}]};rg.defaults=ht(rg.options);rg.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";vae=rg});var gx={};hr(gx,{default:()=>bae,onChangeCustom:()=>yae});var XPe,yae,Fu,bae,D5=$(()=>{Fe();XPe=ve(Ie());Ro();yae=(t,e,r)=>{let i={};for(let[o,s]of Object.entries(e))t[o]!=s&&(i[o]=s);let n=[];for(let[o,s]of Object.entries(i))r.Update(o,s)},Fu={name:"halftone",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Screen Size",name:"dot_scale",type:"range-input",value:53,suffix:"%",min:0,max:100,step:.5},{labelName:"Dot Gain",name:"dot_gain",type:"range-input",value:48,suffix:"%",min:-100,max:200,step:1},{labelName:"Under-Color Removal",name:"dot_gain",type:"range-input",value:95,suffix:"%",min:0,max:100,step:1},{labelName:"Registration Accuracy",name:"color_offset",type:"range-input",value:94,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Cyan",name:"cyan",type:"check-box",value:!0},{labelName:"Halftone",name:"cyan_halftone",type:"check-box",value:!0,requirements:[{option:"cyan",shouldBe:!0}]},{labelName:"Opacity",name:"c_opacity",type:"range-input",value:70,suffix:"%",min:0,max:100,step:1,requirements:[{option:"cyan",shouldBe:!0}]},{labelName:"Rotation",name:"c_rotation",type:"range-input",value:140,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"cyan",shouldBe:!0},{option:"cyan_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"c_rot_speed",type:"range-input",value:-1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"cyan",shouldBe:!0},{option:"cyan_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Magenta",name:"magenta",type:"check-box",value:!0},{labelName:"Halftone",name:"magenta_halftone",type:"check-box",value:!0,requirements:[{option:"magenta",shouldBe:!0}]},{labelName:"Opacity",name:"m_opacity",type:"range-input",value:69,suffix:"%",min:0,max:100,step:1,requirements:[{option:"magenta",shouldBe:!0}]},{labelName:"Rotation",name:"m_rotation",type:"range-input",value:42,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"magenta",shouldBe:!0},{option:"magenta_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"m_rot_speed",type:"range-input",value:1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"magenta",shouldBe:!0},{option:"magenta_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Yellow",name:"yellow",type:"check-box",value:!0},{labelName:"Halftone",name:"yellow_halftone",type:"check-box",value:!0,requirements:[{option:"yellow",shouldBe:!0}]},{labelName:"Opacity",name:"y_opacity",type:"range-input",value:99,suffix:"%",min:0,max:100,step:1,requirements:[{option:"yellow",shouldBe:!0}]},{labelName:"Rotation",name:"y_rotation",type:"range-input",value:59,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"yellow",shouldBe:!0},{option:"yellow_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"y_rot_speed",type:"range-input",value:-1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"yellow",shouldBe:!0},{option:"yellow_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Black",name:"black",type:"check-box",value:!0},{labelName:"Halftone",name:"black_halftone",type:"check-box",value:!0,requirements:[{option:"black",shouldBe:!0}]},{labelName:"Opacity",name:"k_opacity",type:"range-input",value:100,suffix:"%",min:0,max:100,step:1,requirements:[{option:"black",shouldBe:!0}]},{labelName:"Rotation",name:"k_rotation",type:"range-input",value:45,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"black",shouldBe:!0},{option:"black_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"k_rot_speed",type:"range-input",value:0,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"black",shouldBe:!0},{option:"black_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"},{labelName:void 0,name:"overlay_type",type:"radio",value:"multiply_color",values:[{labelName:"Normal",value:"normal_color"},{labelName:"Screen",value:"screen_color"},{labelName:"Multiply",value:"multiply_color"}]},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0}]};Fu.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=qe(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};Fu.customShuffle=t=>{switch(t.overlay_type=Math.random()>.5?"multiply_color":"screen_color",Math.floor(Math.random()*4)){case 0:t.black=!0,t.c_opacity=Math.max(75,t.c_opacity);break;case 1:t.cyan=!0,t.c_opacity=Math.max(75,t.c_opacity);break;case 2:t.yellow=!0,t.y_opacity=Math.max(100,t.y_opacity),t.black=!0,t.c_opacity=Math.max(50,t.c_opacity);break;case 3:t.magenta=!0,t.m_opacity=Math.max(75,t.m_opacity);break}return t};Fu.defaults=ht(Fu.options);Fu.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";bae=Fu});var vx={};hr(vx,{default:()=>xae,onChangeCustom:()=>wae});var eIe,L5,wae,Yd,xae,F5=$(()=>{Fe();eIe=ve(Ie()),L5={checkerboard:{preset_image:"https://static.cargo.site/assets/backdrop/video/checkerboard_64.png",preset_width:"16px",preset_height:"16px"},hexed:{preset_image:"https://static.cargo.site/assets/backdrop/video/hexed_16.png",preset_width:"8px",preset_height:"8px"},noise:{preset_image:"https://static.cargo.site/assets/backdrop/video/noise.png",preset_width:"512px",preset_height:"512px"},interlace:{preset_image:"https://static.cargo.site/assets/backdrop/video/interlace.png",preset_width:"1px",preset_height:"3px"}},wae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);i.hasOwnProperty("color")&&i?.color===null&&(i.color="rgba(0,0,0,0)");for(let[n,o]of Object.entries(i))r.Update(n,o)},Yd={name:"video",excludeFromShuffle:!0,options:[{labelName:"Video URL:",name:"video_url",type:"text-input",value:"",className:"hover",config:"noBars"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"scale_option",type:"radio",value:"cover",values:[{labelName:"Fill Window",value:"cover"},{labelName:"Fit Window",value:"contain"}]},{labelName:"Margin",name:"margin",type:"scrubber",value:"0",addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",allowedUnits:["px","%","em","rem","vmin","vmax","vw","vh"],excludeFromShuffle:!0,min:0,max:{"%":50,vh:50,vw:50,vmin:100,vmax:50}},{type:"spacer"},{labelName:"Overlay",name:"preset_pattern",type:"radio",value:"blank",values:[{labelName:void 0,value:"checkerboard"},{labelName:void 0,value:"hexed"},{labelName:void 0,value:"noise"},{labelName:void 0,value:"interlace"},{labelName:void 0,value:"blank"}]},{labelName:"Video Opacity",name:"alpha",type:"range-input",value:100,min:0,max:100,step:1,excludeFromShuffle:!0},{labelName:"Background Color",name:"color",type:"color",value:"#FFFFFF00"},{type:"spacer"},{labelName:"Display Still Image In Mobile Devices",name:"use_mobile_image",type:"check-box",value:!1},{name:"image",type:"custom",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc",renderWhenDisabled:!1,requirements:[{option:"use_mobile_image",shouldBe:!0}]}]};Yd.transformChanges=(t,e)=>(e.preset_pattern&&(L5[e.preset_pattern]?(e.using_preset=!0,e.image_active=!0,e={...e,...L5[e.preset_pattern]}):(e.using_preset=!1,e.image_active=!1)),e);Yd.defaults=ht(Yd.options);Yd.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";xae=Yd});var Xd={};hr(Xd,{badtv:()=>ox,gradient:()=>Wd,halftone:()=>gx,kaleidoscope:()=>px,morphovision:()=>fx,parallax:()=>ax,pixelation:()=>dx,polygon_engine:()=>hx,refraction:()=>lx,ripple:()=>ux,slitscan:()=>cx,video:()=>vx,wallpaper:()=>Hd,wave:()=>mx});var ig=$(()=>{m5();g5();v5();P5();I5();A5();T5();M5();R5();k5();N5();O5();D5();F5()});var io,Sae,z5,yx,B5,_ae,U5=$(()=>{ke();_r();qr();ig();Fe();io=ve(Ie(),1);fe();Sae={"legacy/slitscan":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/slitscan/main.js"),"legacy/refraction":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/refraction/main.js"),"legacy/badtv":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/badtv/main.js"),"legacy/gmaps":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/gmaps/main.js"),"legacy/halftone":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/halftone/main.js"),"legacy/kaleidoscope":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/kaleidoscope/main.js"),"legacy/morphovision":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/morphovision/main.js"),"legacy/parallax":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/parallax/main.js"),"legacy/pixelation":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/pixelation/main.js"),"legacy/polygon_engine":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/polygon_engine/main.js"),"legacy/ripple":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/ripple/main.js"),"legacy/video":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/video/main.js"),"legacy/wave":()=>import("https://build.cargo.site/frontend/da62ba/_jsapps/backdrop/wave/main.js")},z5=io.default.memoize(t=>new Promise(async(e,r)=>{if(he)return r();await _ae();let{default:i}=await Sae[t]();e(i)})),yx=class extends me{constructor(e){super(e),this.ref=_e(),z5(this.props.path).catch(r=>{})}componentDidMount(){this.initView()}initView=async()=>{delete this.backboneView;let e=await z5(this.props.path).catch(n=>{});if(!this.ref.current){console.log("No element to render backbone view to...");return}let r=Xd[this.props.path.replace("legacy/","")],i={page_id:this.props.id};io.default.each(r?.default.defaults,(n,o)=>{i[o]=n.value}),this.onChangeCustom=r?.onChangeCustom?r.onChangeCustom.bind(this):null,this.ref.current.innerHTML="",this.backboneView=new e({el:this.ref.current,model:new Backbone.Model({data:{...i,...this.props.settings}}),...this.props.viewOptions||{}}),this.backboneView.id&&(this.ref.current.id=this.backboneView.id),this.backboneView.className&&(this.ref.current.className=this.backboneView.className),this.backboneView.defaults={...this.backboneView.defaults,...this.props.defaults},this.backboneView.deferredLoadEventName&&(this.backboneView.deferredLoadEventName+="_"+io.default.uniqueId(),Cargo.Event.once(this.backboneView.deferredLoadEventName,()=>{this.ref.current&&this.ref.current.dispatchEvent(new CustomEvent("legacy-backdrop-loaded",{bubbles:!0,composed:!0,detail:{}}))})),this.backboneView.render(),typeof this.backboneView.Init=="function"&&this.backboneView.Init(),this.backboneView.SetSizeFromMainView?.(this.props.dimensions.width,this.props.dimensions.height),this.props.visibility.visible?(this.backboneView.in_viewport=!0,this.backboneView.Resume?.()):this.backboneView.in_viewport=!1};destroyView=()=>{this.backboneView&&(typeof this.backboneView.destroy=="function"&&this.backboneView.destroy(),this.backboneView.undelegateEvents(),this.backboneView.$el.removeData().unbind(),this.backboneView.remove(),delete this.backboneView)};componentWillUnmount(){this.destroyView()}componentDidUpdate(e){if(this.backboneView&&!io.default.isEqual(e.settings,this.props.settings)&&(this.onChangeCustom?this.onChangeCustom(e.settings,this.props.settings,this.backboneView):console.log("custom backdrop update failed")),this.props.path!=e.path){this.destroyView(),this.initView();return}this.backboneView&&((e.dimensions.width!=this.props.dimensions.width||e.dimensions.height!=this.props.dimensions.height)&&this.backboneView.SetSizeFromMainView?.(this.props.dimensions.width,this.props.dimensions.height),this.props.visibility.visible!=e.visibility.visible&&(this.props.visibility.visible?(this.backboneView.in_viewport=!0,this.backboneView.Resume?.()):(this.backboneView.in_viewport=!1,this.backboneView.Pause?.())))}render(){let e=this.props.path?.replace("legacy/","")||"";return S("div",{"data-backdrop":e,ref:this.ref,dangerouslySetInnerHTML:{__html:""}})}},B5=yx,_ae=io.default.once(async()=>{if(he)return;let{Backbone:t,underscore:e,jQuery:r}=await import("https://static.cargo.site/assets/C3/legacy/backbone-packaged.min.js");window.$=r,window.Backbone=t,window._=e,window.Cargo={o:{collection:{},model:{}},Collection:{},Helper:{isMobile:()=>nt.data.mobile.active,IsAdminEdit:()=>zr},Event:io.default.extend({},t.Events),Core:{Handlebars:{Render:()=>""}}},window.Backdrop={Data:{}},Cargo.o.collection.images=t.Collection.extend({model:function(i,n){return i&&i.type==="local"?new Cargo.o.model.localImage(i,n):new Cargo.o.model.image(i,n)},fetchImage:function(i,n){let o=window.store.getState(),s=$e.getMediaByHash(o)[i],a=new Cargo.o.model.image({...s});if(s&&a)return a.getImageWithOptions({w:n})},fetchWebGLImage:function(i,n){let o=window.store.getState(),s=$e.getMediaByHash(o)[i];return s?{w:s.width,h:s.height,url:"https://freight.cargo.site/w/"+n+"/t/webgl/i/"+s.hash+"/"+s.name,id:i}:null}}),Cargo.o.model.image=t.Model.extend({initialize:function(){io.default.bindAll(this,"getImageByWidth")},urlRoot:function(){return"/_api/v0/image"},getImageByWidth:function(i){var n={};return i>this.get("width")&&(i=this.get("width")),n.w=i,this.getImageWithOptions(n).url},getImageByWidth2x:function(i){return this.getImageByWidth(i*2)},getImageWithOptions:function(i){var n={retina:window.devicePixelRatio?window.devicePixelRatio>=1.2:!1,square:!1,url:"",webgl:i.hasOwnProperty("t")&&i.t=="webgl"};if(io.default.extend(n,i),n.t==="original"&&(n.retina=!1),n.retina===!0&&!n.webgl&&(n.q==null&&(n.q=75),n.hasOwnProperty("w")&&(n.w=Math.min(n.w*2,this.get("width"))),n.hasOwnProperty("h")&&(n.h=Math.min(n.h*2,this.get("height")))),n.w&&n.w>this.get("width")&&(n.webgl?n.w=this.getValidWebGLSize(n.w):n.w=this.get("width")),n.h&&n.h>this.get("height")&&(n.h=this.get("height")),n.square===!0){var o=this.getSquareCrop();n.c={x:o.x,y:o.y,w:o.w,h:o.h}}var s=["t","w","h","q","c"],a=[],l=!1,p=!1;io.default.each(n,function(c,m){s.indexOf(m)===-1||c===""||(m==="c"?a.push("c/"+c.x+"/"+c.y+"/"+c.w+"/"+c.h):a.push(m+"/"+c),l=m=="w"?c:m=="c"&&c.w?c.w:l,p=m=="h"?c:m=="c"&&c.h?c.h:p)},this);var f=this.getScaleSize(l,p);return n.w=f.w,n.h=f.h,this.get("hash")!==void 0&&this.get("name")!==void 0?n.url="https://freight.cargo.site/"+a.join("/")+"/i/"+this.get("hash")+"/"+this.get("name"):n.url="",n},getSquareCrop:function(){var i=y=w=h=diff=0;return this.get("height")>this.get("width")?(w=h=this.get("width"),diff=this.get("height")-this.get("width"),y=Math.floor(diff/2),i=0):this.get("width")>this.get("height")?(w=h=this.get("height"),diff=this.get("width")-this.get("height"),i=Math.floor(diff/2),y=0):(w=this.get("width"),h=this.get("height"),i=y=0),{w,h,x:i,y}},getOriginalImage:function(){return this.getImageWithOptions({t:"original",retina:!1})},urlBelongsToImage:function(i){return typeof i!="string"?!1:i.indexOf(this.get("hash")+"/"+this.get("name"))!==-1},getValidWebGLSize:function(i){var n=[128,256,512,1024,2048,4096];return i>this.get("width")&&io.default.each(n,function(o){o<1e3&&(i=o)}),i},getScaleSize:function(i,n){var o,s,a=i,l=n;if(o=parseInt(this.get("width")),s=parseInt(this.get("height")),!(i&&n)){if(o==s)a=i||n||o,l=a;else if(i)var p=o/i,l=Math.floor(s/p),a=i;else if(n)var p=s/n,a=Math.floor(o/p),l=n}return{w:a,h:l}},getFitSize:function(i,n,o,s){if(i=parseInt(i),n=parseInt(n),n>i)var a=i/o,l=Math.floor(n/a),p=o;else if(i>n)var a=n/s,p=Math.floor(i/a),l=s;else var p=i,l=n;return[p,l]}}),Cargo.Collection.Images=new Cargo.o.collection.images})});var zu,ng=$(()=>{ke();zu=function(t,e,r={}){if(t.nodeType===3)return t.data;if(t.nodeType!==1)return null;let i={},n=[],o=0,s=t.attributes,a=t.childNodes;for(o=s.length;o--;)i[s[o].name]=s[o].value;for(r={...i,...r},o=a.length;o--;){let l=zu(a[o],null);n[o]=l}return Ot(e||t.nodeName,r,n)}});var cIe,bx,og,Ji,la=$(()=>{ke();Fe();cIe=ve(Ie(),1);Br();fe();he||(bx=new ResizeObserver(function(t){t.forEach(function(e){Pt(e.target,"reference-resize",{target:e.target,width:e.contentRect.width},{bubbles:!1,cancelable:!0,composed:!0})})}));og=class extends me{constructor(e){super(e),this.elementRef=_e(),this.elementRef.current={},this.saveRef=r=>i=>{this.elementRef.current[r]=i}}render(){let{values:e={elWidth:"100%"}}=this.props;return S("div",{tabIndex:"-1","data-nosnippet":!0,style:{height:0,width:"100%",minWidth:"100%",overflow:"hidden",display:"block",alignSelf:"flex-start",visibility:"hidden",pointerEvents:"none",boxSizing:"border-box",zIndex:-1,...this.props.style},children:Object.keys(e).map(r=>{let i=e[r];return S("div",{tabIndex:"-1",ref:this.saveRef(r),style:typeof i=="object"?i:{width:i}})})})}componentDidUpdate(e,r){}onResize=e=>{let r=Object.keys(this.elementRef.current).find(i=>this.elementRef.current[i]===e.target);this.props.onResize&&this.props.onResize(r,e.width)};componentDidMount(){Object.keys(this.elementRef.current).forEach(e=>{let r=this.elementRef.current[e];Mt(r,"reference-resize",this.onResize),bx?.observe(r)})}componentWillUnmount(){Object.keys(this.elementRef.current).forEach(e=>{let r=this.elementRef.current[e];bx?.unobserve(r),kt(r,"reference-resize",this.onResize)})}};og.defaultProps={values:{elWidth:"100%"}};Ji=og});var SIe,sg,Ei,ms=$(()=>{ke();Ze();Po();Rr();SIe=ve(Ie(),1);fe();sg=class extends me{constructor(e){super(e),this.state={scrollIncrement:0,pointerAttention:!1,shiftButtonX:0,shifted:!1,overlayPosition:{x:0,y:0,width:0,height:0}},this.attachToBaseNode()}render(e,r){return this.renderElement?rt(S(de,{children:e.render({...r,...e})}),this.renderElement):null}pointerIn=e=>{this.requestTick(),this.setState(r=>({pointerAttention:!0,scrollIncrement:r.scrollIncrement+1})),this.props.onPointerIn&&this.props.onPointerIn()};pointerOut=()=>{this.setState({pointerAttention:!1}),this.props.onPointerOut&&this.props.onPointerOut()};updatePosition=e=>{let r=this.props.buttonHeight||0,i=0,n=e.height,o=e.top;this.props.buttonMode=="inside",n=e.height,this.setState({overlayPosition:{x:e.left,y:o,width:e.width,height:n}})};componentWillUnmount(){this.props.baseNode._wasFocused=this.state.pointerAttention,this.props.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),Xe.removePortal(this.props.baseNode,this.renderElement)}requestTick=()=>{this.ticking||(Xe.updateElementRect(this.props.baseNode),this.ticking=!0,requestAnimationFrame(()=>{this.ticking=!1}))};attachToBaseNode(){this.props.baseNode&&(this.renderElement=Xe.getPortal(this.props.baseNode,{noPointerEvents:this.props.noPointerEvents||!1,trackResize:this.props.trackResize||!1,extraMargins:this.props.buttonMode=="inside"?[0,0,0,0]:[0,0,0,0],component:this}))}onScroll=e=>{this.requestTick();let r=this.props.scrollContext.getScrollPosition().y,i=r-this.scrollPos;this.scrollPos=r,this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(i)};componentDidMount(){this.props.baseNode&&this.props.baseNode._wasFocused&&(this.setState({pointerAttention:!0}),this.requestTick()),Xe.testHover()}componentDidUpdate(e,r){this.props.baseNode&&e.baseNode!==this.props.baseNode&&this.attachToBaseNode(),(this.state.pointerAttention!==r.pointerAttention||this.state.noPointerEvents!==r.noPointerEvents||this.props.hasFocus!==e.hasFocus||this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement)&&(this.props.scrollContext.scrollingElement&&(this.props.hasFocus||this.state.pointerAttention||this.state.noPointerEvents)?(this.scrollPos=this.props.scrollContext.getScrollPosition().y,this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),Xe.testHover(),this.requestTick())}};sg.defaultProps={buttonMode:"inside",buttonHeight:0};Ei=Co(sg)});var Qi,ag,ko,Bu=$(()=>{ke();Ze();Dt();ms();Rr();Xn();mt();Qi=ve(Ie(),1);_r();Fe();fe();ag=class extends me{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,galleryIsEmpty:!1,showInsertionIndicator:!1,allowTransition:!1,adjacentIndexes:{above:-1,below:-1,left:-1,right:-1}},this.dragMap=new Map,this.onDragOver=Qi.default.throttle(this.onDragOver,80)}mutationObserverOptions={attributes:!0,childList:!0,subtree:!0,characterData:!0};render(e,r){let{galleryInstance:i}=e,{initialShowOutlines:n,showTransition:o,draggingOver:s,adjacentIndexes:a,showInsertionIndicator:l,galleryIsEmpty:p,buttonHovered:f,UIWindow:c,allowTransition:m}=r,v=this.props["thumbnail-index"]!==void 0,g=23;return S(de,{children:[S(Jr,{onlyAllowCollapsedRange:!0,baseNode:i}),S("style",{children:`
				${m||l?`
					::slotted(media-item) {
						--base-translate: translate(0, 0);						
						transition: .08s transform cubic-bezier(0, 0, 0.01, 1);
					}
				`:""}
				${l?`


					::slotted(media-item:nth-child(${a.left+1})) {
						z-index: 1001;
						--base-translate: translateX(-15px);
					}

					::slotted(media-item:nth-child(${a.right+1})) {
						z-index: 1001;
						--base-translate: translateX(15px);
					}

					::slotted(media-item:nth-child(${a.above+1})) {
						z-index: 1001;
						--base-translate: translateY(-15px);
					}

					::slotted(media-item:nth-child(${a.below+1})) {
						z-index: 1001;
						--base-translate: translateY(15px);
					}
				`:""}

			`}),S(Ei,{...this.props,hasFocus:!!c,onScrollWhileHovered:this.onScrollWhileHovered,trackResize:!0,buttonHeight:g,buttonMode:"inside",baseNode:this.props.galleryInstance,render:x=>{let{pointerAttention:_,overlayPosition:E}=x,L=0;if(E.y<=1&&(L=Math.min(-E.y+1,E.height+-g+1)),!e?.["blog-gallery"])return S(de,{children:S("div",{className:`editor-overlay editor-outline${_||c?" hover":""}${_||c?" button-hover":""}${c?" focus":""}`,style:{transform:`translate3d(${E.x}px, ${E.y}px, 0)`,width:E.width+"px",height:E.height+"px",display:_||c?"block":"none",minHeight:"27px",zIndex:10},children:[S("div",{className:"in-editor-buttons gallery",style:{transform:`translateY(${L}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:S("button",{onMouseDown:O=>{this.launchUIWindow(O)},ref:this.galleryButtonRef,className:"text",children:v?"Thumbnail Index":"Gallery"})}),e.otherUI]})})}})]})}launchUIWindow=(e,r)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.galleryInstance.getBoundingClientRect(),n={x:i.x+-10,y:i.y,left:i.right+-10,right:i.right+-10,top:i.top+0,bottom:i.top+27,width:i.width,height:10};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"imagegallery-ineditor",windowAlias:"imagegallery",positionRect:n,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!0,props:{activeGallery:this.props.galleryInstance}})};onMutate=e=>{if(this.props.suppressMutation)return;this.observer.disconnect();let r=[],i=[],n=[],o=!1,s=!1,a=this.props["thumbnail-index"],l=!1;e.forEach(f=>{if(f.target.tagName=="MEDIA-ITEM"){if(r.indexOf(f.target)>-1||f.type!=="attributes"||f.attributeName==="slot"||this.props.disabledMediaItemOptions.indexOf(f.attributeName)>-1)return;a&&r.push(f.target),!(f.attributeName==="style"||f.attributeName==="class")&&this.props.gallerySpecificAttributes&&this.props.gallerySpecificAttributes.includes(f.attributeName)&&r.push(f.target)}else f.target==this.props.galleryInstance&&(f.removedNodes.length>0||f.addedNodes.length>0)?(this.props.allowedElements&&(s=[...Array.from(f.addedNodes),...Array.from(f.removedNodes)].some(this.props.allowedElements)),o=f.addedNodes.length>0||o,i=[...i,...Array.from(f.addedNodes).filter(c=>c.tagName==="MEDIA-ITEM")],n=[...n,...Array.from(f.removedNodes).filter(c=>c.tagName==="MEDIA-ITEM")]):f.type==="characterData"&&(l=f.target)}),i=Qi.default.uniq(i),n=Qi.default.uniq(n),r=Qi.default.uniq(r);let p=Array.from(this.props.galleryInstance.childNodes).filter(f=>f?.nodeName!=="MEDIA-ITEM");this.props.allowedElements&&Qi.default.remove(p,this.props.allowedElements),p.forEach(f=>{f.remove()}),(i.length>0||n.length>0)&&(Array.from(this.props.galleryInstance.children).some(f=>f.tagName==="MEDIA-ITEM")||this.removeEmptyGallery()),n.forEach(f=>{f.itemResize=void 0,f.itemDragStart=void 0,f.drag=void 0}),(i.length>0||n.length>0||r.length>0||s||this.props["thumbnail-index"]&&l)&&this.props.onCleanUp&&this.props.onCleanUp(i,n,r,l),this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions)};removeEmptyGallery=Qi.default.debounce(()=>{if(!Array.from(this.props.galleryInstance.children).some(e=>e.tagName==="MEDIA-ITEM")){if(this.state.isDraggingInEditor)this.setState({galleryIsEmpty:!0});else if(this.props["thumbnail-index"]===void 0){this.props.galleryInstance.remove();return}}},0);scrollIntoView=()=>{let e=this.props.galleryInstance.getBoundingClientRect();this.props.galleryInstance.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{transitionTime:120,lazyScroll:!0}}))};onDragOver=(e,r,i)=>{if(this.props.disableDragOver)return;let o=!1;if(i?.dropTarget?._getPlaceholderUIState){let s=i.dropTarget._getPlaceholderUIState();s.visible===!0&&s.is_target===!0&&(o=!0)}if((!i.customDropTarget||i.customDropTarget===this.props.galleryInstance)&&(i.draggedMediaItems.length>0||i.fromOutside)&&!i.inAdmin&&this.props.galleryInstance.contains(i.dropTarget)&&!o){this.dragOverCounter++,this.state.showInsertionIndicator||this.dragMap.clear();let s=this.props.galleryInstance.getBoundingClientRect(),a=60,l=1.033,p=2.399827721492203,f=Array.from(this.props.galleryInstance.children),c=[],m=r.clientX+-s.left,v=r.clientY+-s.top,g=15,x,_=0,E,L=0,O=null;for(x=0;x<a;x++)if(O=null,_=_+p,g=g*l+2,E=r.clientX+Math.cos(_)*g,L=r.clientY+Math.sin(_)*g,O=document.elementFromPoint(E,L),O&&(O=O.closest("MEDIA-ITEM")||null),this.props.galleryInstance.contains(O)||(O=null),O&&c.indexOf(O)===-1)if(this.dragMap.has(O)){let Z=this.dragMap.get(O);E<=Z.x2+s.left&&E>=Z.x1+s.left&&L<=Z.y2+s.top&&L>=Z.y1+s.top&&c.push(O)}else c.push(O);let M=c.map(Z=>{let K;if(this.dragMap.has(Z))K=this.dragMap.get(Z);else{let Le=ud(Z);K={w:Le.width+-(15*2),h:Le.height+-(15*2),x1:Le.left+-s.left+15,x2:Le.left+Le.width+-s.left+-15,y1:Le.top+-s.top+15,y2:Le.top+Le.height+-s.top+-15},this.dragMap.set(Z,K)}let Q=!1,te=!1,ee=!1,ae=!1,ue=!1,le=!1,xe=0,Re=0,be=0;m>=K.x1&&m<=K.x2?(te=!0,m<K.x1+K.w*.5?le=!0:ue=!0,be=0):K.x1>m?(le=!0,be=K.x1-m):m>K.x2&&(be=K.x2-m,ue=!0),v>=K.y1&&v<=K.y2?(Q=!0,v<K.y1+K.h*.5?ae=!0:ee=!0,Re=0):K.y1>v?(ae=!0,Re=K.y1-v):v>K.y2&&(ee=!0,Re=K.y2-v),xe=Math.sqrt(Re*Re+be*be);let Me=f.indexOf(Z),We=Z.getAttribute("slot"),Pe=0,Ve=0;return this.props.dragIndicationType==="columns"&&(Pe=Array.from(Z.assignedSlot.parentElement.children).indexOf(Z.assignedSlot)),{inX:te,inY:Q,distance:xe,rise:Re,run:be,above:ee,below:ae,toRight:le,toLeft:ue,index:Me,slotIndex:Pe,el:Z,rect:K}}),D={el:null,index:-1},P=D,U=D,N=D,F=D,V=[],q=[],J=[],Y=[];M.forEach(Z=>{Z.above&&J.push(Z),Z.below&&Y.push(Z),Z.toRight&&q.push(Z),Z.toLeft&&V.push(Z)});let ie=null,oe=!1;if(this.props.dragIndicationType==="columns"){let Z=Qi.default.minBy(J,ee=>Math.abs(ee.distance)),K=Qi.default.minBy(Y,ee=>Math.abs(ee.distance)),Q=Qi.default.minBy(V.filter(ee=>ee.inY),ee=>Math.abs(ee.distance)),te=Qi.default.minBy(q?.filter(ee=>ee.inY),ee=>Math.abs(ee.distance));Z&&K?Math.abs(K.run)<Math.abs(Z.run)?(F=K,N=J.find(ee=>ee.rect.x1<F.rect.x2&&ee.rect.x2>F.rect.x1)||D):(N=Z,F=Y.find(ee=>ee.rect.x1<N.rect.x2&&ee.rect.x2>N.rect.x1)||D):Z?N=Z:K&&(F=K),Q&&te?oe=te.rect.y1!==Q.rect.y1:(Q?.rect?.y1>0||te?.rect?.y1>0||N?.index>-1)&&(oe=!0)}if(oe){if(P=D,U=D,N=N,F=F,F?.el)ie=F.el;else for(ie=N.el?.nextElementSibling?.assignedElements?.()[0]||null;ie&&ie.tagName!=="MEDIA-ITEM";)ie=ie?.nextElementSibling||null;i.draggedMediaItems.length===1&&f.indexOf(i.draggedMediaItems[0])>-1&&f.indexOf(ie)>f.indexOf(i.draggedMediaItems[0])&&(ie=ie.nextElementSibling)}else{let Z=Qi.default.minBy(V,Q=>Math.abs(Q.distance)),K=Qi.default.minBy(q,Q=>Math.abs(Q.distance));if(Z&&K?Math.abs(K.rise)<Math.abs(Z.rise)?(U=K,P=V.find(Q=>Q.index==U.index+-1)):(P=Z,U=q.find(Q=>Q.index==P.index+1)):Z?P=Z:K&&(U=K),N=D,F=D,U=U||D,P=P||D,U?.el)ie=U.el;else for(ie=P.el?.nextElementSibling;ie&&ie.tagName!=="MEDIA-ITEM";)ie=ie.nextElementSibling}clearTimeout(this.stopTransitionTimeout),this.dragOverCounter>1&&(this.setState({adjacentIndexes:{left:P.index,right:U.index,above:N.index,below:F.index},insertBeforeTarget:ie,showInsertionIndicator:!0,allowTransition:!0}),ye.globalDragEventController.setCustomDropTarget(this.props.galleryInstance))}else this.dragOverCounter=0,this.state.showInsertionIndicator&&this.props.onDragOut&&this.props.onDragOut(),this.setState({showInsertionIndicator:!1},()=>{clearTimeout(this.stopTransitionTimeout),this.stopTransitionTimeout=setTimeout(()=>{this.setState({allowTransition:!1})},200)}),ye.globalDragEventController.releaseCustomDropTarget(this.props.galleryInstance)};onDragStart=(e,r,i)=>{if(!(this.props["thumbnail-index"]&&(!i.draggedMediaItems?.[0]||!this.props.galleryInstance.contains(i.draggedMediaItems[0])))){if(Xe.activateHoverElement(this.props.galleryInstance),this.props.disableDragStart){r.preventDefault();return}this.dragOverCounter=0}};onAfterDragStart=(e,r,i)=>{this.props.disableDragStart||this.setState({isDraggingInEditor:!0})};onDragEnd=(e,r,i)=>{this.onDragOver.cancel(),this.props.onDragEnd&&this.props.onDragEnd(),this.setState({showInsertionIndicator:!1,isDraggingInEditor:!1},()=>{this.onDragFinish()})};onDragDrop=(e,r,i)=>{if(this.onDragOver.cancel(),this.props.onDragDrop&&this.props.onDragDrop(),!this.props.disableDrop&&!i.inAdmin){if(i.customDropTarget===this.props.galleryInstance){CargoEditor.mutationManager.execute(()=>{i.draggedMediaItems.forEach((s,a)=>{this.props["thumbnail-index"]&&s.setSaveable(!1),this.props.galleryInstance.insertBefore(s,this.state.insertBeforeTarget)}),this.props.onAfterDrop&&this.props.onAfterDrop(i.draggedMediaItems,this.state.insertBeforeTarget,this.state.adjacentIndexes)});let n=i.draggedMediaItems[0],o=i.draggedMediaItems[0]?.getAttribute("href");clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(()=>{let s=CargoEditor.rangy.createRange();this.props["thumbnail-index"]&&(n=Array.from(this.props.galleryInstance.children).find(a=>a.getAttribute("href")==o)),n&&(s.selectNode(n),CargoEditor.helpers.setActiveRange(s))},120)}this.setState({showInsertionIndicator:!1,isDraggingInEditor:!1,insertBeforeTarget:null},()=>{this.onDragFinish()})}};onBeforeDrop=(e,r,i)=>{this.props.disableBeforeDrop};onDragFinish=()=>{Xe.testHover(),this.state.galleryIsEmpty&&(Array.from(this.props.galleryInstance.children).filter(r=>r?.tagName=="MEDIA-ITEM").length==0&&this.props["thumbnail-index"]===void 0?CargoEditor.mutationManager.execute(()=>{this.props.galleryInstance.remove()}):this.setState({galleryIsEmpty:!1})),clearTimeout(this.stopTransitionTimeout),this.stopTransitionTimeout=setTimeout(()=>{this.setState({allowTransition:!1})},200)};setUIWindow=e=>{this.setState({UIWindow:e}),e?typeof this.props.onUIWindowSet=="function"&&this.props.onUIWindowSet(e):typeof this.props.onUIWindowRelease=="function"&&this.props.onUIWindowRelease(e)};onScrollWhileHovered=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidUpdate(e){e.suppressMutation!==this.props.suppressMutation&&(this.observer.disconnect(),this.props.suppressMutation||this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions)),Qi.default.isEqual(e.mediaItemEditorInfo,this.props.mediaItemEditorInfo)||this.setMediaItemEditorInfo()}setMediaItemEditorInfo=()=>{this.props.galleryInstance._mediaItemEditorInfo=this.props.mediaItemEditorInfo||{disableResize:!1,disableButton:!1},Array.from(this.props.galleryInstance.children).filter(r=>r.tagName==="MEDIA-ITEM").forEach(r=>{r._editorInterface?.setState?.({mediaItemEditorInfo:{...this.props.mediaItemEditorInfo}})}),this.props.mediaItemEditorInfo?.afterScaleChange&&(this.props.galleryInstance._mediaItemEditorInfo.afterScaleChange=this.props.mediaItemEditorInfo.afterScaleChange)};flushMutationQueue=()=>{let e=this.observer.takeRecords();e.length>0&&this.onMutate(e)};componentDidMount(){if(this.props.galleryInstance.children.length===0&&this.props["thumbnail-index"]===void 0){this.props.galleryInstance.remove();return}this.setMediaItemEditorInfo(),this.observer=new MutationObserver(this.onMutate),this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions),this.props.galleryInstance._editorInterface=this,ye.globalDragEventController.on("dragstart",this.onDragStart),ye.globalDragEventController.on("dragover",this.onDragOver),ye.globalDragEventController.on("dragend",this.onDragEnd),ye.globalDragEventController.on("before-drop",this.onBeforeDrop),ye.globalDragEventController.on("drop",this.onDragDrop),ye.globalDragEventController.on("after-dragstart",this.onAfterDragStart)}componentWillUnmount(){clearTimeout(this.stopTransitionTimeout),this.state.UIWindow&&this.state.UIWindow.changingLayout,this.removeEmptyGallery.cancel(),this.onDragOver.cancel(),this.observer?.disconnect(),this.observer=null,clearTimeout(this.showOutlinesTimeout),clearTimeout(this.bindTimeout),ye.globalDragEventController.off("dragstart",this.onDragStart),ye.globalDragEventController.off("dragover",this.onDragOver),ye.globalDragEventController.off("dragend",this.onDragEnd),ye.globalDragEventController.off("before-drop",this.onBeforeDrop),ye.globalDragEventController.off("drop",this.onDragDrop),ye.globalDragEventController.off("after-dragstart",this.onAfterDragStart),this.props.galleryInstance._editorInterface===this&&(this.props.galleryInstance._mediaItemEditorInfo=null,delete this.props.galleryInstance._editorInterface)}};ag.defaultProps={disabledMediaItemOptions:[],dragIndicationType:"grid"};ko=Ue((t,e)=>({Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}))(ag)});var wx,xx,q5,H5=$(()=>{ke();wx=ve(Ie(),1);Dt();Rr();Bu();fe();xx=class extends me{constructor(e){super(e),this.state={hasUIWindow:!1,pointerAttention:!1},this.debouncedCheckRange=wx.default.debounce(this.checkRange,120)}render(e,r){let{thumbnailsVisible:i,galleryInstance:n,dragContext:o,pageInfo:s}=e;return S(de,{children:[S("style",{children:`
			::slotted(media-item) {
				${this.state.thumbnailsVisible?"--display-slideshow-captions: block!important;":""}
			}	
		`}),s.isEditing?S(ko,{...e,mediaItemEditorInfo:{disableResize:!0,disableButton:!1},gallerySpecificAttributes:this.props.gallerySpecificAttributes||[],suppressMutation:this.props.suppressMutation,galleryInstance:n,disableDragOver:!i,disableDrop:!i,allowedElements:a=>a.part=="previous-button"||a.part=="next-button",onUIWindowRelease:this.onUIWindowRelease,onPointerIn:this.onPointerIn,onPointerOut:this.onPointerOut}):null]})}onCleanUp=(e,r,i,n,o,s)=>{this.props.pageInfo.isEditing||(this.props.galleryInstance.updateNavigation(),this.props.onCleanUp&&this.props.onCleanUp(e,r,i,n,o,s))};onPointerIn=()=>{this.props.pageInfo.isEditing&&this.setState({pointerAttention:!0})};onPointerOut=()=>{this.props.pageInfo.isEditing&&this.setState({pointerAttention:!1})};onDragOver=(e,r,i)=>{switch(!0){case i.fromOutside:case(i.fromAdmin&&i.draggedMediaItems.length>0):case(!i.fromAdmin&&i.draggedMediaItems.length>0&&e.getElement().contains(i.draggedMediaItems[0])&&this.props.pageInfo.isEditing):break;default:return}let{x:n,y:o}=ye.globalDragEventController,a=Array.from(document.elementsFromPoint?.(n,o)??[]).find(l=>l==this.props.galleryInstance);a&&a.showThumbnails()};onDragEnd=()=>{this.debouncedCheckRange()};onDragDrop=(e,r,i)=>{if((this.props.galleryInstance.contains(i.dropTarget)||this.props.galleryInstance.contains(i.customDropTarget))&&this.props.thumbnailsVisible){let n=i.customDropTarget?.tagName=="MEDIA-ITEM"?i.customDropTarget:i.draggedMediaItems[0];n&&setTimeout(()=>{let o=CargoEditor.rangy.createRange();o.selectNode(n),CargoEditor.helpers.setActiveRange(o),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor())},60),setTimeout(()=>{this.debouncedCheckRange()},500)}else this.props.galleryInstance?.hideThumbnails?.()};onUIWindowRelease=()=>{this.props.galleryInstance.thumbnailsVisible&&this.debouncedCheckRange(),this.setState({hasUIWindow:!1})};onUIWindowSet=e=>{this.setState({hasUIWindow:e})};checkRange=()=>{if(!this.props.pageInfo.isEditing)return;let e=CargoEditor.getActiveRange();CargoEditor.events.off("cursor-activity",this.debouncedCheckRange),ye.globalDragEventController.isDragging||this.state.hasUIWindow||this.props.childArray.some(r=>r._editorInterface?.state?.UIWindow)||e&&(this.props.galleryInstance.contains(e.startContainer)||this.props.galleryInstance.contains(e.endContainer))||!e?CargoEditor.events.on("cursor-activity",this.debouncedCheckRange):this.props.galleryInstance?.hideThumbnails?.()};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),CargoEditor.events.on("cursor-activity",this.captionCursorActivity)};captionCursorActivity=wx.default.throttle(()=>{var e=CargoEditor.getActiveRange();e&&this.props.galleryInstance.contains(e.commonAncestorContainer)&&Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM").forEach((i,n)=>{i.contains(e.commonAncestorContainer)&&this.props.onItemResize(null,i,n)})},120);componentDidUpdate(e){if(e.inTransition!==this.props.inTransition){let r=Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM");if(this.props.inTransition)r.forEach(i=>{Xe.deactivateHoverElement(i),Xe.lockItem(i)});else if(this.state.pointerAttention){r.forEach(n=>{Xe.deactivateHoverElement(n),Xe.unlockItem(n)});let i=Array.from(this.props.galleryInstance.children).find(n=>n.nodeName==="MEDIA-ITEM"&&n.assignedSlot?.parentElement?.hasAttribute("data-active-slide"));i&&Xe.activateHoverElement(i)}}}componentDidMount(){CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents),ye.globalDragEventController.on("dragover",this.onDragOver),ye.globalDragEventController.on("drop",this.onDragDrop),ye.globalDragEventController.on("dragend",this.onDragEnd)}componentWillUnmount(){window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.captionCursorActivity.cancel(),CargoEditor&&Object.keys(CargoEditor||{}).length>0&&CargoEditor.events.off("cursor-activity",this.captionCursorActivity),ye.globalDragEventController.off("drop",this.onDragDrop),ye.globalDragEventController.off("dragover",this.onDragOver),ye.globalDragEventController.off("dragend",this.onDragEnd)}},q5=xx});var W5,V5,Sx=$(()=>{W5="http://www.w3.org/2000/svg",V5=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i});function $5(t,e,r,i){let n,o,s;for(;e=e._parent;)if((n=e._component)&&!n._processingException)try{if(o=n.constructor,o&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(t)),s=n._dirty),n.componentDidCatch!=null&&(n.componentDidCatch(t,i||{}),s=n._dirty),s)return n._pendingError=n}catch(a){t=a}throw t}var j5=$(()=>{Sx()});var Eae,_x,G5=$(()=>{j5();Eae={_catchError:$5},_x=Eae});function K5(t,e,r){e[0]=="-"?t.setProperty(e,r==null?"":r):r==null?t[e]="":typeof r!="number"||V5.test(e)?t[e]=r:t[e]=r+"px"}function Ex(t,e,r,i,n){let o;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)r&&e in r||K5(t.style,e,"");if(r)for(e in r)(!i||r[e]!==i[e])&&K5(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Cae,"$1")),e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e=e.toLowerCase().slice(2):e=e.slice(2),t._listeners||(t._listeners={}),t._listeners[e+o]=r,r?i?r._attached=i._attached:(r._attached=Z5,t.addEventListener(e,o?X5:Y5,o)):t.removeEventListener(e,o?X5:Y5,o);else{if(n==W5)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r==null?"":r;break e}catch{}typeof r=="function"||(r!=null&&(r!==!1||e[4]=="-")?t.setAttribute(e,e=="popover"&&r==!0?"":r):t.removeAttribute(e))}}function J5(t){return function(e){if(this._listeners){let r=this._listeners[e.type+t];if(e._dispatched==null)e._dispatched=Z5++;else if(e._dispatched<r._attached)return;return r(_x.event?_x.event(e):e)}}}var Cae,Z5,Y5,X5,Q5=$(()=>{Sx();G5();Cae=/(PointerCapture)$|Capture$/i,Z5=0;Y5=J5(!1),X5=J5(!0)});function No(t,e,r,i,n){let o;for(o in r)o!=="children"&&o!=="key"&&!(o in e)&&Ex(t,o,null,r[o],i);for(o in e)(!n||typeof e[o]=="function")&&o!=="children"&&o!=="key"&&o!=="value"&&o!=="checked"&&r[o]!==e[o]&&Ex(t,o,e[o],r[o],i)}var Uu=$(()=>{Q5()});var ez,tz=$(()=>{ez=(t,e={})=>{let r=t.replace(/["#$%<>&=\?\\\/:]/g,"").replace(/(\s|\.)/g,"-").replace(/-{2,}/g,"-").toLowerCase(),i=r.length>0?r:"_";if(e.inUse){let n=i,o=1;for(;e.inUse.includes(n);)n=i+`-${o++}`;return n}return i}});function rz(t){let e=t.split(":"),r=e[0],i="all";switch(r){case"set":i=ll.default.tail(e).map(n=>n).join(":");break;case"tag":i=ll.default.tail(e)[0]?.split(",").map(n=>ez(n.trim()));break;case"img":i="all";break;case"all":i="all";break}return{type:r,value:i}}function Aae(t){class e extends Mr{constructor(i){super(i),this.fixBadNullValue(),this.state={layoutIncrement:0,initialLoad:!1,attributeMap:this.getMapFromAttribute(),thumbnails:[],renderLimit:150},this.preactRendering=!1}getMapFromAttribute=()=>{let i={};try{let n=unescape(this.props["thumbnail-index-metadata"]||"{}");i=JSON.parse(n)}catch(n){i={},console.error("failed to load saved thumbnail map: ",n)}return i};fixBadNullValue=()=>{this.props["thumbnail-index"]==="null"&&this.props.baseNode&&this.props.baseNode.removeAttribute("thumbnail-index"),this.props.baseNode&&this.props.baseNode.hasAttribute("tag")&&this.props.baseNode.removeAttribute("tag")};isActiveLink=i=>{if(this.props.inAdminFrame&&this.props.adminMode===!0)return!1;let n=i.purl.replace(/^#/,"");return i.id===this.props.PIDBeingEdited||n===this.props.activePURL||this.props.hashPurl&&n===this.props.hashPurl};render(i){if(!i["thumbnail-index"]||i["thumbnail-index"]==="null"){let l={...i,"thumbnail-index":void 0};return S(t,{...l})}let n=this.state.thumbnails.length>0,o=n&&i["show-tags"],s=n&&i["show-title"],a=n||!this.state.initialLoad?this.state.thumbnails:this.props.adminMode?Iae:[];return this.props.baseNode.tagName==="GALLERY-FREEFORM"&&(a=ll.default.sortBy(a,l=>{let p=this.state.attributeMap?.[l.id];return p!=null?p.sort+1:0})),a=a.slice(0,this.state.renderLimit),this.renderedItemCount=a.length,S(t,{...i,onCleanUp:this.onCleanUp,disableDragOver:!0,children:a.map((l,p)=>{let f=l.thumbnail?.is_video||l.thumbnail?.is_url||null;return Ot("media-item",{...this.state.attributeMap[l.id]?.attributes,saveable:!1,model:l.thumbnail,autoplay:f,loop:f,muted:f,href:l.purl,rel:"history",itemDragStart:this.onDragStart,key:"thumb id"+l.id,"disable-zoom":!0,className:`thumbnail linked ${l.tags.map(c=>"tag-"+c.url).join(" ").toLowerCase()}${this.isActiveLink(l)?" active":""}`,...l.attributes},S("figcaption",{class:`caption${!s&&!o?" empty":""}`,slot:"caption",children:[s?S("div",{className:"page-title",children:l.title},"title-"+l.url+"-"+l.title+"-"+this.state.layoutIncrement):null,l.tags.length>0&&o?S("div",{className:"tags",children:l.tags.map((c,m)=>S(de,{children:[S("a",{href:c.url,className:"tag-link",rel:i["links-filter-index"]?"filter-index":"history","data-tag":c.tag,children:c.tag+""}),m<l.tags.length-1?S("span",{className:"tag-separator"}):null]},"tag-link-"+c.url+"-"+this.state.layoutIncrement))}):null]}))})})}onDragStart=i=>{!this.props["thumbnail-index"]||this.props["thumbnail-index"]==="null"||this.props.adminMode&&this.props.baseNode.tagName!=="GALLERY-FREEFORM"&&(i.preventDefault(),i.stopPropagation())};componentDidUpdate(i,n){this.fixBadNullValue(),this.props["thumbnail-index"]&&(i["thumbnail-index"]!==this.props["thumbnail-index"]||this.props.thumbCollection!==i.thumbCollection||this.props.sort!==i.sort||this.props.lastPublishedAt!==i.lastPublishedAt)&&this.setThumbnails(),this.state.thumbnails!==n.thumbnails&&this.props.baseNode.dispatchEvent(new CustomEvent("new-thumbnails-rendered",{bubbles:!0,cancelable:!0,composed:!0,detail:{}})),this.props["thumbnail-index-metadata"]!==i["thumbnail-index-metadata"]&&this.setState({attributeMap:this.getMapFromAttribute()}),this.ticking||(this.ticking=!0,setTimeout(()=>{this.renderedItemCount>=this.state.renderLimit&&this.setState({renderLimit:this.state.renderLimit+250}),delete this.ticking},200)),this.props["thumbnail-index"]!==i["thumbnail-index"]&&this.props["thumbnail-index"]&&this.props["thumbnail-index"]!=="null"&&(this.props.pageInfo.setPageData({filter:this.props["thumbnail-index"]},this.props.baseNode),this.emitFilterEvent())}emitFilterEvent=()=>{this.props["thumbnail-index"]&&!this.props.adminMode&&(this.emitFilterDebounce=requestAnimationFrame(()=>{var i=new CustomEvent("filter-thumbnail-index",{bubbles:!0,cancelable:!0,composed:!0,detail:{filter:this.props["thumbnail-index"]}});this.props.baseNode.dispatchEvent(i)}))};updateOldThumbMetaData=ll.default.debounce(()=>{let i=this.props.baseNode.querySelector('script[type="text/thumbnail-metadata"]');if(i){try{CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("thumbnail-index-metadata",escape(i.textContent))},{preventDraft:!0})}catch{}CargoEditor?.mutationManager?.execute?.(()=>{i.remove()},{preventDraft:!0})}},2e3);onPreactRenderComplete=()=>{this.preactRendering=!1,this.childListObserver.takeRecords()};onPreactRenderStart=()=>{this.onChildListMutation(this.childListObserver.takeRecords()),this.preactRendering=!0};onChildListMutation=i=>{if(!this.props["thumbnail-index"]||this.preactRendering||i.length===0)return;i.reverse();let n=!1;for(let o of i)o.type==="childList"&&(o.addedNodes.length>0||o.removedNodes.length>0)&&(n||(console.log("[DOM] Enforced Preact ownership of component tree"),n=!0),Array.from(o.addedNodes).forEach(s=>o.target.removeChild(s)),Array.from(o.removedNodes).forEach(s=>{o.target.insertBefore(s,o.nextSibling)}));this.childListObserver.takeRecords()};componentDidMount(){this.fixBadNullValue(),this.updateOldThumbMetaData(),this.setThumbnails(),this.props["thumbnail-index"]&&this.props["thumbnail-index"]!=="null"&&this.emitFilterEvent(),this.props.baseNode.addEventListener("keydown",this.onKeyDown),this.props.baseNode.addEventListener("filter-thumbnail-index",this.setThumbnails),document.addEventListener("filter-thumbnail-index",this.setThumbnails),this.props.baseNode.addEventListener("refresh-thumbnail-index",this.setThumbnails),this.childListObserver=new MutationObserver(this.onChildListMutation),this.childListObserver.observe(this.props.baseNode,{subtree:!0,childList:!0}),Mt(document,"preact-render-start",this.onPreactRenderStart),Mt(document,"preact-render-complete",this.onPreactRenderComplete)}componentWillUnmount(){kt(document,"preact-render-start",this.onPreactRenderStart),kt(document,"preact-render-complete",this.onPreactRenderComplete),this.childListObserver.disconnect(),cancelAnimationFrame(this.emitFilterDebounce),this.props.baseNode.removeEventListener("refresh-thumbnail-index",this.setThumbnails),this.props.baseNode.removeEventListener("keydown",this.onKeyDown),this.props.baseNode.removeEventListener("filter-thumbnail-index",this.setThumbnails),document.removeEventListener("filter-thumbnail-index",this.setThumbnails)}onKeyDown=i=>{i.metaKey||i.ctrlKey||!this.props["thumbnail-index"]||(/^.$/u.test(i.key)||i.key==="Enter"||i.key==="Delete"||i.key==="Backspace")&&(i.preventDefault(),i.stopPropagation())};setThumbnails=async()=>{if(!this.props["thumbnail-index"])return;let i=rz(this.props["thumbnail-index"]),n=this.props.lastPublishedAt,o=[];switch(i.type){case"set":try{({data:o}=await Zd.default.get(`${sr}/pages/${this.props.siteId}/thumbs/set/${i.value}?limit=999&timestamp=${n}`,{use_cache:!0}))}catch{}break;case"tag":try{({data:o}=await Zd.default.get(`${sr}/pages/${this.props.siteId}/thumbs/tag/${i.value.join(",")}?limit=999&timestamp=${n}`,{use_cache:!0}))}catch{}break;case"img":try{({data:o}=await Zd.default.get(`${sr}/sites/${this.props.siteId}/media/images?with-pages=true`,{use_cache:!0}))}catch{}o=o.filter(l=>l.media.length>0&&l.password_enabled==!1),o=ll.default.flatMap(o,l=>l.media.map(p=>({display:!0,id:p.id,purl:l.purl,url:l.purl,sort:0,tags:[],thumbnail:p,title:S(de,{children:[S("a",{href:l.purl,rel:"noopener nofollow",target:"_blank",className:"page-link",children:l.title}),S("br",{}),S("a",{target:"_blank",rel:"noopener nofollow",href:"https://freight.cargo.site/o/i/"+p.hash+"/"+p.name,children:p.name})]}),attributes:{"disable-scroll-animation":!0,href:null,"force-quick-view":!0,hash:p.hash}})));break;default:try{({data:o}=await Zd.default.get(`${sr}/pages/${this.props.siteId}/thumbs/all?limit=999`,{use_cache:!0}))}catch{}break}let s=store.getState();o=o.filter(l=>{let p=s.pages.byId[l.id];return!(p&&p.crdt_state!==er.Published||p&&i.type==="set"&&s.structure.byParent[i.value]&&!s.structure.byParent[i.value].some(f=>f===p.id))});let a=ll.default.unionBy(this.props.thumbCollection,o,"id");switch(a=a.filter(l=>l.pin!==!0&&l.display!==!1&&l.id!==this.props.homepageID&&l.id!==this.props.mobileHomepageID&&l.crdt_state!==er.Deleted&&l.thumb_meta?.hide_from_index!==!0&&this.props.pageInfo.pid!==l.id),this.props.sort){case"reverse":a.sort((l,p)=>p.sort-l.sort);break;case"shuffle":a.sort(l=>Math.random()-.5);break;default:a.sort((l,p)=>l.sort-p.sort);break}a.forEach(l=>{l.purl.startsWith("#")||(l.purl="#"+l.purl)}),this.setState({initialLoad:!0,thumbnails:a})};onCleanUp=(i,n,o,s)=>{if(!this.props["thumbnail-index"]||!this.props.adminMode)return;let a={},l="",p=store.getState();if(Array.from(this.props.baseNode.children).filter(c=>c.tagName==="MEDIA-ITEM").forEach((c,m)=>{let v=c.getAttribute("href"),g={},x=c.attributes,_=0;for(_=x.length;_--;)x[_].name==="saveable"||x[_].name==="limit-by"||x[_].name==="class"||x[_].name==="hash"||x[_].name==="href"||x[_].name==="rel"||x[_].name==="slot"||x[_].name==="width"||x[_].name==="height"||x[_].name==="disable-zoom"||x[_].name==="data-placeholder"||x[_].name.startsWith("dynamic-")||(g[x[_].name]=x[_].value);let E=$e.getContentByPurl(p,v)?.id||null;E&&(a[E]={sort:m,attributes:g})}),a={...this.state.attributeMap,...a},l=JSON.stringify(a),l=escape(l),l!==this.props["thumbnail-index-metadata"])CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("thumbnail-index-metadata",l)},{preventDraft:!0}),this.setState({attributeMap:a||{}});else if(s){if(CargoEditor&&CargoEditor?.getActiveEditor?.()){let c=CargoEditor.rangy.createRange();c.selectNode(this.props.baseNode),c.collapse(),CargoEditor.helpers.setActiveRange(c)}this.setState({layoutIncrement:this.state.layoutIncrement+1})}}}return qt(Ue((r,i)=>{let n=Pae(i["thumbnail-index"],r.structure,r.pages),o=(r.pages.byId[r.frontendState.activePID]||r.sets.byId[r.frontendState.activePID])?.purl;return{lastPublishedAt:r.adminState?.crdt?.publishedAt??"000",thumbCollection:n,activePURL:o,hashPurl:r.frontendState.activeHashPurl,adminMode:r.frontendState.adminMode,PIDBeingEdited:r.frontendState.PIDBeingEdited,inAdminFrame:r.frontendState.inAdminFrame,siteId:r.site.id,homepageID:r.site.homepage_id,mobileHomepageID:r.site.mobile_homepage_id}})(e))}var Zd,ll,Pae,Iae,Oo,qu=$(()=>{ke();Ze();mt();Dt();Fe();Zs();Zd=ve(kn(),1);Ur();_i();_r();tz();Br();ll=ve(Ie(),1);fe();ke();Pae=mn((t,e,r)=>{let i=[];if(!t)return i;let n=rz(t);switch(n.type){case"set":i=(e.byParent[n.value]||[]).map(o=>r.byId[o]).filter(o=>o!==void 0);break;case"tag":i=Object.values(r.byId).filter(o=>o.tags&&o.tags.find(s=>n.value?.includes(s.url)));break;case"img":i=[];break;default:i=Object.values(r.byId);break}return i.map(o=>{let s=null;return o.thumb_media_id&&o.media?s=o.media.find(a=>a.id===o.thumb_media_id)||null:o.thumbnail&&(s=o.thumbnail),{id:o.id,title:o.title,purl:o.purl,thumb_meta:o.thumb_meta||{},display:o.display,sort:e.bySort[o.id],tags:o.tags||[],pin:o.pin,crdt_state:o.crdt_state,thumbnail:s}})}),Iae=[null,null,null].fill({attributes:{href:null,hash:"placeholder","suppress-placeholder-ui":!0},purl:null,thumbnail:null,tags:[],title:null});Oo=Aae});var sz,br,iz,Cx,nz,oz,Tae,Mae,Rae,kae,ul,Px,Ix,lg,Nae,ug=$(()=>{ke();Ze();ng();mt();qr();la();H5();Uu();Zr();qu();Br();Po();Ur();Fe();sl();sz=ve(Ie(),1);fe();ke();br={name:"slideshow",displayName:"Slideshow",tagName:"GALLERY-SLIDESHOW",disabledMediaItemOptions:["scale","sticker","limit-by"],mobileOptions:[{labelName:"",name:"mobile-transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"},{labelName:"Scrub",value:"scrub"}]},{labelName:"Transition Speed",name:"mobile-transition-speed",type:"scrubber",numberOnlyMode:!0,value:.8,min:0,max:10,step:.1,requirements:[{option:"transition-type",shouldBe:t=>t==="slide"||t==="fade"}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Navigation",name:"mobile-navigation",type:"check-box",value:!0},{labelName:"Captions",name:"mobile-show-captions",type:"check-box",value:!0}]},{labelName:"Autoplay",name:"mobile-autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"mobile-autoplay-delay",type:"scrubber",value:3,step:.1,min:.1,max:30,numberOnlyMode:!0,requirements:[{option:"autoplay",shouldBe:!0}]},{type:"spacer"},{type:"group",className:"slideshow-size-group grid-columns-template-1-auto",children:[{type:"custom",name:"widthTextLabel",requirements:[{option:"mobile-limit-by",shouldBe:"width"}]},{name:"mobile-scale",value:"50rem",allowCalc:!0,allowVar:!0,type:"scrubber",allowOutOfRangeTextInput:!1,labelName:"Scale: Height",allowedUnits:["px","%","rem","em","vmin","vmax","vw","vh"],min:{px:8,rem:.5,em:.5,etc:1},max:{"%":100,vmin:100,vmax:100,vh:100,vw:100,etc:void 0},addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",requirements:[{option:"mobile-limit-by",shouldBe:"height"}]},{type:"custom",name:"fitTextLabel",requirements:[{option:"mobile-limit-by",shouldBe:"fit"}]},{name:"mobile-limit-by",type:"radio",value:"width",values:[{name:"width",customLabel:"widthLabel",value:"width"},{name:"height",customLabel:"heightLabel",value:"height"},{name:"fit",customLabel:"fitLabel",value:"fit"}]}]},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"center",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"center",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Shuffle",name:"mobile-shuffle",type:"check-box",value:!1},{type:"more-actions",children:[{labelName:"Slides",name:"toggle-thumbs",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),this.state.activeGallery.thumbnailsVisible?this.state.activeGallery.hideThumbnails():this.state.activeGallery.showThumbnails()}}]}],options:[{labelName:"",name:"transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"},{labelName:"Scrub",value:"scrub"}]},{labelName:"Transition Speed",name:"transition-speed",type:"scrubber",numberOnlyMode:!0,value:.8,min:0,max:10,step:.1,requirements:[{option:"transition-type",shouldBe:t=>t==="slide"||t==="fade"}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Navigation",name:"navigation",type:"check-box",value:!0},{labelName:"Captions",name:"show-captions",type:"check-box",value:!0}]},{labelName:"Autoplay",name:"autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"autoplay-delay",type:"scrubber",value:3,step:.1,min:.1,max:30,numberOnlyMode:!0,requirements:[{option:"autoplay",shouldBe:!0}]},{labelName:"Pause On Hover",name:"pause-on-hover",type:"check-box",value:!1,requirements:[{option:"autoplay",shouldBe:!0}]},{type:"spacer"},{type:"group",className:"slideshow-size-group grid-columns-template-1-auto",children:[{type:"custom",name:"widthTextLabel",requirements:[{option:"limit-by",shouldBe:"width"}]},{name:"scale",value:"50rem",allowCalc:!0,allowVar:!0,type:"scrubber",allowOutOfRangeTextInput:!1,labelName:"Scale: Height",allowedUnits:["px","%","rem","em","vmin","vmax","vw","vh"],min:{px:8,rem:.5,em:.5,etc:1},max:{"%":100,vmin:100,vmax:100,vh:100,vw:100,etc:void 0},addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",requirements:[{option:"limit-by",shouldBe:"height"}]},{type:"custom",name:"fitTextLabel",requirements:[{option:"limit-by",shouldBe:"fit"}]},{name:"limit-by",type:"radio",value:"width",values:[{name:"width",customLabel:"widthLabel",value:"width"},{name:"height",customLabel:"heightLabel",value:"height"},{name:"fit",customLabel:"fitLabel",value:"fit"}]}]},{labelName:"Horizontal Align",name:"horizontal-align",type:"radio",value:"center",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]},{labelName:"Vertical Align",name:"vertical-align",type:"radio",value:"center",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{type:"group",className:"grid-columns-even",children:[{type:"group",className:"grid-columns-even",children:[{labelName:"Disable Zoom",name:"disable-zoom",type:"check-box",value:!1},{labelName:"Shuffle",name:"shuffle",type:"check-box",value:!1}]}]},{labelName:()=>{let t=store.getState().user?.id;return wb(t)||!1&&localStorage.getItem("simulateProductionAcct")!=="true"?"Disable Scroll Animation":"Disable Scroll Transition"},name:"disable-scroll-animation",type:"check-box",value:!1,requirements:[{option:"imageSettingsScrollAnimation",shouldBe:t=>t===!0||typeof t=="string"}]},{name:"auto-height",value:"custom"},{name:"height-limit",value:"60%"},{name:"adjust-for-captions",value:!1},{type:"more-actions",children:[{labelName:"Slides",name:"toggle-thumbs",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),this.state.activeGallery.thumbnailsVisible?this.state.activeGallery.hideThumbnails():this.state.activeGallery.showThumbnails()}}]}]};br.defaults=ht(br.options);br.mobileDefaults=ht(br.mobileOptions);iz=.04,Cx=.25,nz=.085,oz=.1,Tae=.08,Mae=2,Rae=3,kae=15,ul=0,Px=1,Ix=2,lg=class extends Mr{constructor(e){super(e);let r=he?{hasLayout:!1,visible:!1,position:"unknown"}:{hasLayout:!0,visible:!0,position:"inside"};this.state={captionHeightMap:[],showThumbnails:this.props.thumbnails===!0||this.props.thumbnails==="true",hasLoaded:he,visible:!1,viewportIntersection:r,layoutIncrement:0,pointerOver:!1,initialShowNavigation:!0,destinationIndex:0,activeIndex:0,initialActiveIndex:0,inTransition:!1,elWidth:0,hasSizes:{slideHeightPx:!1,elWidth:!1},slideHeightPx:0,tallestSlide:{index:0,height:0},...this.getNavigation(),isDragging:!1,isPointerDown:!1,scrubAnimating:!1,scrubStatus:ul},this.loadedItems=new Set,this.shuffleSeed=Math.random()*100,this.lastPointerFrameDeltaX=0,this.pointerFrameDeltaX=0,this.scrubCounter=0,this.lastPointerX=0,this.firstPointerX=0,this.pointerX=0,this.xTransform=0,this.slideListRef=_e(),this.scrubAnimationRequest=null,this.autoplayInterval=null,this.updateOptions(),this.lastTimestamp=0,this.styleRef=_e(),Object.defineProperty(this.props.baseNode,"thumbnailsVisible",{get:()=>this.state.showThumbnails,set:i=>this.setState({showThumbnails:!!i}),configurable:!0}),this.props.baseNode.pause=this.pause,this.props.baseNode.resume=this.startAutoplay,this.props.baseNode.nextSlide=this.nextSlide,this.props.baseNode.prevSlide=this.prevSlide,this.props.baseNode.showThumbnails=this.showThumbnails,this.props.baseNode.hideThumbnails=this.hideThumbnails,this.props.baseNode.goToSlide=this.goToSlide,this.props.baseNode.getActiveSlide=this.getActiveSlide,this.props.baseNode.updateNavigation=()=>{let{prevNavigation:i,nextNavigation:n}=this.getNavigation();(this.state.prevNavigation!==i||this.state.nextNavigation!==n)&&this.setState({nextNavigation:n,prevNavigation:i})}}render(e,r){this.updateOptions();let{baseNode:i,adminMode:n,pageInfo:o,usesScrollAnimation:s}=e,{showThumbnails:a,activeIndex:l,destinationIndex:p,inTransition:f,isPointerDown:c,scrubAnimating:m,hasLoaded:v,pointerOver:g,hasSizes:x,initialShowNavigation:_,captionHeightMap:E,viewportIntersection:L,lazyloadable:O}=r,{showCaptions:M,autoPlayDelay:D,limitBy:P,adjustForCaptions:U}=this.options,{elWidth:N}=r;x.elWidth||(this.cachedElWidth=this.props.baseNode.offsetWidth,N=this.cachedElWidth);let F=P==="fit"?"var(--fit-height)":ur(this.options.scale,P=="width"?"%":"rem").join(""),V=this.renderSlides(),q=this.getSlideListStyles(),J=S("div",{ref:this.slideListRef,style:{transform:q.transform},className:"slide-list",draggable:!1,tabIndex:0,children:V}),Y={};a||(Y.onKeyDown=this.handleKeyDown,Y.onClickCapture=this.onClickCapture,Y.className="slideshow-wrapper",f&&(Y.className+=" in-transition"),c&&(Y.className+=" pointer-down"),m&&this.isScrub&&(Y.className+=" scrubbing"));let ie=P==="width"?this.state.tallestSlide.height:this.state.slideHeightPx,oe=this.makeMediaItemAttributes(),Z=this.mediaItems.map((ee,ae)=>{let ue=oe[ae].slot,le=ee._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}},xe="100%",Re=le.width,be=le.height,Me=null,We=this.options.showCaptions&&this.state.captionHeightMap[ae]||0;if(a)xe=null;else if(typeof Re=="string"&&Re.indexOf("%")>-1)xe=Re;else if(P!=="width"){U?Me=ie+-We:Me=ie;let Pe=be/Re,Ve=Me+-le.mediaItemSize.padSize+-le.mediaSize.padSize,Le=Ve*(1/Pe),He=(Ve+le.mediaSize.padSize)/(Le+le.mediaSize.padSize),it=(Me+-le.mediaItemSize.padSize)*(1/He);Math.abs(it+le.mediaItemSize.padSize-N)<1?xe="100%":xe=`${Math.min(100,100*(it+le.mediaItemSize.padSize)/N)}%`}return{captionHeight:We,customSlideHeight:Me,figureWidth:xe,slot:ue}}),K=Math.min(this.options.speed/2,.1),Q=Math.max(Math.floor(N/200),2);this.setMediaElementProperties(oe);let te=s&&!this.props["disable-scroll-animation"]?" scroll-transition":"";return S(de,{children:[rt(S(de,{children:S(aa,{scrollContext:this.props.scrollContext,uses:te,visibility:L,onLazyLoadChange:null,adminMode:n,customElementMode:!0,baseNode:i,isLazyLoadable:O,pageInfo:o,children:[this.options.showCaptions?S("style",{id:"gallery-slideshow-captions",ref:this.styleRef,children:`
					::slotted(media-item) {
						--slideshow-caption-transform: ${q["--slideshow-caption-transform"]||"translateX(0px)"};
						z-index: 9;
					}
				`}):null,S("style",{id:"gallery-slideshow",children:`
* {
	box-sizing: border-box;
}

:host([hidden]) {
	display: none;
}

:host {
	position: relative;
	transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: .2s;
	opacity: ${v||a?1:0};

	width: var(--resize-parent-width, 100%);
	max-width: 100%;
    --navigation-opacity: ${g||_?1:0};
    --slide-height: ${ie}px;

	--slideshow-horizontal-align: ${this.options.hAlign==="left"?"flex-start":this.options.hAlign==="right"?"flex-end":"center"};

	--slideshow-caption-align: ${this.options.hAlign==="left"?"left":this.options.hAlign==="right"?"right":"center"};	

	--slideshow-vertical-align: ${this.options.vAlign==="top"?"flex-start":this.options.vAlign==="bottom"?"flex-end":"center"};

    ${a?`
	    display: grid;
		grid-template-columns: repeat(${Q}, 1fr);
		column-gap: 2rem;
		row-gap: 2rem;
		align-items: start;
		overflow:hidden;
		--display-slideshow-captions: block!important;
		--slideshow-caption-opacity: 1;	

	`:`
		--slideshow-caption-transition-duration: ${K}s;	
		--display-slideshow-captions: ${M?"block":"none"}!important;
	    display: flex;
    	flex-direction: column;
	`}
}

${a?"":Z.map((ee,ae)=>`
::slotted(media-item[slot="${ee.slot}"]){
	--item-width: ${ee.figureWidth};
	--slide-height: ${ee.customSlideHeight||ie}px; 
	--caption-height: ${ee.captionHeight}px;
}`).join("")}

${a?`
::slotted(media-item){
	min-width: 0;
	max-width: 100%;
	--item-width: 100%;	
	--resize-parent-width: 100%;
	--slide-height: auto;

    --display-slideshow-captions: block;
    --slideshow-caption-transform: translateX(0px);
    --slideshow-caption-opacity: 1;
    --slideshow-caption-align: left;
    --slideshow-caption-transition-duration: 0;	
}`:`
::slotted(media-item) {
    transition: none!important;
    display:block;
	min-width: ${N}px;
	flex-shrink: 0;
}


	`}

.slide { 
    -webkit-user-select:none;
    user-select:none;
    flex-shrink: 0;
    width: ${N}px;
}

.navigation-wrapper {

	order: 1;
	position: relative;
}

.slideshow-wrapper {
	--resize-parent-width: ${N}px;
	order: 3;
	margin-bottom: ${Math.max(...this.state.captionHeightMap.filter(ee=>ee!==void 0))}px;
}


.slide-list {
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
	transform:translateX(0);
    height: var(--slide-height, auto);		
    touch-action: manipulation;
    position: relative;
    display: flex;
    flex-wrap: nowrap;
    flex-direction: row;
    justify-content: flex-start;
}

.slide-list:focus {
    outline: 0;
}


/*
slide transition type 
default transition is slide
*/
${this.isSlide?`
.slide {
    visibility:hidden;
	--base-translate: none!important;    
}

.pointer-down .adjacent-slide.slide,
.in-transition .adjacent-slide.slide,
.active-slide.slide {
    visibility: visible;
}

.slideshow-wrapper {
	overflow-y: visible;
	overflow-x: clip;
}


`:""}

${this.isFade?`


.slide {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    display: flex;
    z-index: 0;

    ${this.state.cancelFadeTransition?`
	  -webkit-transition: none !important;
	  -moz-transition: none !important;
	  -o-transition: none !important;
	  transition: none !important;
    `:`
		transition-timing-function: var(--slideshow-fade-transition-out, cubic-bezier(0.68, 0, 0.68, 0.19));
	    transition-property: opacity;
		transition-duration: ${this.options.speed}s;	
    `}
}

.adjacent-slide.slide {
    display: flex;
}

.active-slide.slide {
    position: relative;
    z-index: 3;
}

.destination-slide.slide {
    ${this.state.cancelFadeTransition?"":"transition-timing-function: var(--slideshow-fade-transition-in, cubic-bezier(0.3, 0, 0.4, 1));"}
	opacity: 1!important;
}

	`:""}


${this.isScrub?`
.slide {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    display: flex;
    z-index: 0;
	transition: opacity .08s cubic-bezier(0.5, 0, 1, 0.5);						


    visibility: hidden;
}

.adjacent-slide.slide {
    visibility: visible;
}

.active-slide.slide {
    position: relative;
    z-index: 3;
}

.destination-slide.slide {
	transition: opacity .08s cubic-bezier(0, 0.5, 0.5, 1);
    opacity: 1!important;
}

.slide {
    cursor: ew-resize;
}
	`:""}

/* captions */

.slide {
	--slideshow-caption-opacity: 0;	
}

.in-transition .slide{
    --slideshow-caption-opacity: 0;
}

${this.state.hideCaptionDuringTransition?"":`
.destination-slide.active-slide.slide {
    --slideshow-caption-opacity: 1;
}
`}

${K==0?`
.destination-slide.slide,
.active-slide.slide {
    --slideshow-caption-opacity: 1;
}	
`:""}

.scrubbing .slide {
    --slideshow-caption-opacity: 0;
}

/** default navigation **/
.navigation-wrapper {

    position: absolute;
    left:0;
    right: 0;
    
    z-index: 2;
    height: var(--slide-height, auto);
    opacity: var(--navigation-opacity, 1);

}


 				`}),n?S(q5,{...e,thumbnailsVisible:a,onItemResize:this.onItemResize,inTransition:this.state.inTransition||this.state.isDragging,suppressMutation:this.state.isDragging,gallerySpecificAttributes:s?["disable-scroll-animation"]:[],galleryInstance:i}):null,!a&&this.options.navigation&&this.len>1&&S("div",{className:"navigation-wrapper",part:`slideshow-nav ${g||_?"navigation-active":""}`,children:[this.state.prevNavigation,this.state.nextNavigation]}),a?S("slot",{name:"thumbnails",onClick:this.onThumbnailClick}):S("div",{part:"slides",...Y,onPointerDown:this.onPointerDown,children:J}),S(Ji,{values:{slideHeightPx:F,elWidth:"100%"},style:a?{gridColumn:`1 / span ${Q}`}:null,onResize:this.onResize})]},"slideshow-host")},"slideshow-fragment"),this.props.baseNode.shadowRoot),this.props.children]})}getNavigation=()=>{let e=Array.from(this.props.baseNode.children),r=e.find(n=>n.getAttribute("part")=="previous-button"),i=e.find(n=>n.getAttribute("part")=="next-button");return r?r=zu(r,null,{onClick:this.prevSlide,onPointerDown:n=>this.startScrubDelta(n,Ix),key:"previous-button",part:"previous-button"}):r=S("div",{part:"slideshow-nav-previous-button",class:"slideshow-navigation previous-button",onClick:this.prevSlide,onPointerDown:n=>this.startScrubDelta(n,Ix),children:S("svg",{part:"slideshow-nav-prev",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),i?i=zu(i,null,{onClick:this.nextSlide,onPointerDown:n=>this.startScrubDelta(n,Px),key:"next-button",part:"next-button"}):i=S("div",{part:"slideshow-nav-next-button",class:"slideshow-navigation next-button",onClick:this.nextSlide,onPointerDown:n=>this.startScrubDelta(n,Px),children:S("svg",{part:"slideshow-nav-next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),{prevNavigation:r,nextNavigation:i}};updateOptions(){let{"adjust-for-captions":e=br.defaults["adjust-for-captions"].value,"limit-by":r=br.defaults["limit-by"].value,scale:i=br.defaults.scale.value,autoplay:n=br.defaults.autoplay.value,"autoplay-delay":o=br.defaults["autoplay-delay"].value,"transition-speed":s=br.defaults["transition-speed"].value,"transition-type":a=br.defaults["transition-type"].value,navigation:l=br.defaults.navigation.value,"vertical-align":p=br.defaults["vertical-align"].value,"horizontal-align":f=br.defaults["horizontal-align"].value,shuffle:c=br.defaults.shuffle.value,"show-captions":m=br.defaults["show-captions"].value,"disable-zoom":v=br.defaults["disable-zoom"].value,"disable-scroll-animation":g=br.defaults["disable-scroll-animation"].value,"pause-on-hover":x=br.defaults["pause-on-hover"].value,"mobile-limit-by":_,"mobile-scale":E,"mobile-adjust-for-captions":L,"mobile-autoplay":O,"mobile-autoplay-delay":M,"mobile-transition-speed":D,"mobile-transition-type":P,"mobile-navigation":U,"mobile-vertical-align":N,"mobile-horizontal-align":F,"mobile-shuffle":V,"mobile-show-captions":q,"mobile-pause-on-hover":J,"auto-height":Y=br.defaults["auto-height"].value,"height-limit":ie=br.defaults["height-limit"].value,"mobile-auto-height":oe,"mobile-height-limit":Z}=this.props;this.props["limit-by"]===void 0&&this.props["auto-height"]!==void 0&&(Y==="custom"?(r="height",this.props.scale==null&&this.props["height-limit"]!==void 0&&(i=ie)):Y==="fit"?(r="fit",this.props.scale==null&&(i=100)):(r="width",this.props.scale==null&&(i=100))),a=a=="fade"||a=="scrub"?a:"slide";let K=this.props.isMobile,Q={adjustForCaptions:K&&L!==void 0?L:e,shuffle:K&&V!==void 0?V:c,autoplay:K&&O!==void 0?O:n,autoPlayDelay:K&&M!==void 0?M:o,speed:K&&D!==void 0?D:s,type:K&&P!==void 0?P:a,navigation:K&&U!==void 0?U:l,disableScrollAnimation:g,disableZoom:v,limitBy:K&&_!==void 0?_:r,scale:K&&E!==void 0?E:i,vAlign:K&&N!==void 0?N:p,hAlign:K&&F!==void 0?F:f,showCaptions:K&&q!==void 0?q:m,pauseOnHover:K&&J!==void 0?J:x};Object.entries(Q).forEach(([ue,le])=>{le=="true"?Q[ue]=!0:le=="false"&&(Q[ue]=!1)}),Q.speed==0&&Q.type==="slide"&&(Q.type="fade"),this.options=Q,this.isScrub=Q.type==="scrub",this.isSlide=Q.type==="slide",this.isFade=Q.type==="fade";let te=Array.from(this.props.baseNode.children);if(this.mediaItems=Array.from(this.props.baseNode.children).filter(ue=>ue.tagName=="MEDIA-ITEM"),this.len=this.mediaItems.length,this.len>0){if(this.shuffleList=[],this.options.shuffle){for(let xe=0;xe<this.len;xe++)this.shuffleList.push(xe);let ue=this.shuffleSeed,le=0;this.shuffleList=this.shuffleList.sort(xe=>(le++,ue=(ue+9)%10,(Math.sin(le+2.4)*5+5)%10>ue?-1:1))}}else this.shuffleList=[];let ee=this.isScrub?Math.min(kae,(this.len-1)/2):Math.min(Rae,(this.len-1)/2),ae=ee;ae=Math.max(1,Math.floor(ae)),ee=Math.max(1,Math.ceil(ee)),this.len==3?(ae=1,ee=1):this.len==2?ae=0:this.len==1&&(ae=0,ee=0),this.lazyloadPrev=ae,this.lazyloadNext=ee}setMediaElementProperties=e=>{if(this.len==0)return;let r=[...this.mediaItems],i=this.state.viewportIntersection.position!=="inside"?this.state.viewportIntersection.position:"outside";r.forEach((n,o)=>{let s=e[o]||{},a=s.visibility||!1;delete s.isAdjacent,delete s.visibility,this.state.hasLoaded?s.itemLoad=null:s.itemLoad=this.onMediaLoad;let l=n._props||{};No(n,{...l,...s},l,!1,!1),n._disableZoom?.(this.options.disableZoom),this.options.disableScrollAnimation?n._disableScrollTransition?.(!0):n._disableScrollTransition?.(!1),n.assignedSlot?((this.state.lazyloadable||this.state.visible)&&Pt(n,"lazyLoadIntersectionChange",{visible:!0,position:"inside"},{bubbles:!1}),this.state.visible&&n.slot.replace("slot-","")==this.state.destinationIndex?Pt(n,"viewportIntersectionChange",{visible:!0,position:"inside"},{bubbles:!1}):Pt(n,"viewportIntersectionChange",{visible:!1,position:i},{bubbles:!1})):Pt(n,"viewportIntersectionChange",{visible:!1,position:i},{bubbles:!1})})};componentDidMount(){Array.from(this.props.baseNode.children).filter(i=>{let n=i.assignedSlot;return i.tagName==="MEDIA-ITEM"&&n!==null&&i.getAttribute("hash")==="placeholder"}).forEach(this.onMediaLoad);let r=this.props.pageInfo.getPageData(this.props.baseNode);r.activeSlide!==void 0&&(this.waitingToGoToSlide=void 0,r.activeSlide>=this.len?this.waitingToGoToSlide=r.activeSlide:this.goToSlide(r.activeSlide)),he||(Mt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyLoadIntersectionChange),Mt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),this.props.baseNode.addEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.addEventListener("pointerleave",this.onPointerLeave),window.addEventListener("touchstart",this.onWindowTouchStart))}componentWillUnmount(){this.loadedItems.clear(),clearTimeout(this.scrollRestore),he||(cancelAnimationFrame(this.updateSlideTransformAnimationFrame),kt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyLoadIntersectionChange),kt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),window.removeEventListener("touchstart",this.onWindowTouchStart),this.props.baseNode.removeEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.removeEventListener("pointerleave",this.onPointerLeave))}onViewportIntersectionChange=e=>{this.setState({visible:e.visible,viewportIntersection:e})};onLazyLoadIntersectionChange=e=>{this.setState(r=>({lazyloadable:r.lazyloadable||e.visible}))};componentDidUpdate(e,r){e.childArray.length!==this.props.childArray.length&&this.waitingToGoToSlide!==void 0&&this.props.childArray.length>=this.len&&(this.goToSlide(this.waitingToGoToSlide),this.waitingToGoToSlide=void 0),e.slideshowLoad!==this.props.slideshowLoad&&this.state.hasLoaded&&this.props.slideshowLoad&&this.props.slideshowLoad(),(r.layoutIncrement!==this.state.layoutIncrement||r.elWidth!==this.state.elWidth||r.slideHeightPx!==this.state.slideHeightPx||r.hasSizes.elWidth!==this.state.hasSizes.elWidth||r.hasSizes.slideHeightPx!==this.state.hasSizes.slideHeightPx)&&this.updateSlideSizes(),r.cancelFadeTransition!==this.state.cancelFadeTransition&&this.state.cancelFadeTransition&&requestAnimationFrame(()=>{this.slideListRef.current&&Array.from(this.slideListRef.current.querySelectorAll(".slide")).forEach(n=>{n.offsetHeight}),this.setState({cancelFadeTransition:!1})});let i=!1;this.props.thumbnails!=e.thumbnails&&(i=!0,this.onPointerUp(),this.onSlideEnd()),this.props["transition-type"]!==e["transition-type"]&&(this.setState(n=>({finishingTransition:!1,inTransition:!1,destinationIndex:n.activeIndex,cancelFadeTransition:!0}),()=>{setTimeout(()=>{this.onSlideEnd()},30)}),i=!0,this.onPointerUp(),this.onSlideEnd()),(this.props["show-captions"]!==e["show-captions"]||this.props["mobile-show-captions"]!==e["mobile-show-captions"]&&this.props.isMobile)&&(this.options.showCaptions?(this.onSlideEnd(),this.setState(n=>({...n,layoutIncrement:n.layoutIncrement+1}))):this.setState({captionHeightMap:[]})),(e.isMobile!=this.props.isMobile||e.autoplay!=this.props.autoplay||e["mobile-autoplay"]!=this.props["mobile-autoplay"]&&this.props.isMobile)&&(i=!0),r.pointerOver!==this.state.pointerOver&&this.options.pauseOnHover&&(i=!0),r.visible!=this.state.visible&&(i=!0),r.hasLoaded!==this.state.hasLoaded&&(i=!0),i&&clearTimeout(this.autoplayInterval),i&&this.startAutoplay(),this.isScrub&&(!r.isDragging&&this.state.isDragging?document.body.classList.add("slideshow-scrub-dragging"):!this.state.isDragging&&r.isDragging&&document.body.classList.remove("slideshow-scrub-dragging")),e.adminMode!==this.props.adminMode&&(this.state.inTransition&&this.onSlideEnd(),this.setState({showThumbnails:!1})),this.state.activeIndex!==r.activeIndex&&this.state.activeIndex==this.state.destinationIndex&&(clearTimeout(this.showCaptionsAfterTransitionTimeout),this.showCaptionsAfterTransitionTimeout=setTimeout(()=>{this.setState({hideCaptionDuringTransition:!1})},80)),(this.state.inTransition!==r.inTransition||this.state.isPointerDown!==r.isPointerDown||this.state.isDragging!==r.isDragging)&&((this.state.inTransition||this.state.isDragging)&&!this.state.hideCaptionDuringTransition&&(clearTimeout(this.showCaptionsAfterTransitionTimeout),this.setState({hideCaptionDuringTransition:!0})),this.progress=0,cancelAnimationFrame(this.updateSlideTransformAnimationFrame),this.updateSlideTransform())}pause=()=>{this.setState(e=>({inTransition:!1,destinationIndex:e.activeIndex}),()=>{this.onSlideEnd(),clearTimeout(this.autoplayInterval)})};startAutoplay=()=>{this.options.autoplay&&this.state.visible&&this.state.hasLoaded&&!this.options.showThumbnails&&(this.options.pauseOnHover&&!this.state.pointerOver||!this.options.pauseOnHover)&&(clearTimeout(this.autoplayInterval),this.autoplayInterval=setTimeout(this.nextSlide,this.options.autoPlayDelay*1e3))};onItemResize=(e,r,i)=>{this.setState(n=>{let o=Array.from(r.children).find(p=>p.getAttribute("slot")==="caption"),s=[...n.captionHeightMap],a=n.captionHeightMap[i],l=0;if(o&&this.options.showCaptions){let p=window.getComputedStyle(o),f=p.getPropertyValue("position");f==="fixed"||f==="absolute"?l=0:p.getPropertyValue("box-sizing")==="content-box"?(l=parseFloat(p.getPropertyValue("height"))||0,l+=parseFloat(p.getPropertyValue("margin-top"))||0,l+=parseFloat(p.getPropertyValue("margin-bottom"))||0,l+=parseFloat(p.getPropertyValue("padding-top"))||0,l+=parseFloat(p.getPropertyValue("padding-bottom"))||0,l+=parseFloat(p.getPropertyValue("border-top"))||0,l+=parseFloat(p.getPropertyValue("border-bottom"))||0):(l=parseFloat(p.getPropertyValue("height"))||0,l+=parseFloat(p.getPropertyValue("margin-top"))||0,l+=parseFloat(p.getPropertyValue("margin-bottom"))||0)}else l=0;return l!==a?(s[i]=l,{captionHeightMap:s,layoutIncrement:n.layoutIncrement+1}):{layoutIncrement:n.layoutIncrement+1}})};updateSlideSizes=()=>{if(this.len==0)return;let{hasSizes:e}=this.state,{elWidth:r}=this.state;!e.elWidth&&this.cachedElWidth&&(r=this.cachedElWidth);let i=this.mediaItems.some(l=>l.matches('[uses*="inline-part-styles"]')),n,o=this.mediaItems.map((l,p)=>{let f=l._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};n==null&&l.assignedSlot&&(n={mediaItemPad:f.mediaItemSize.padSize,mediaPad:f.mediaSize.padSize});let c=f.width,m=f.height,v=m||0;if(typeof c=="string"&&c.indexOf("%")>-1)v=parseFloat(m)+f.mediaItemSize.padSize+f.mediaSize.padSize||150+f.mediaItemSize.padSize+f.mediaSize.padSize;else{let g=m/c;if(f.mediaSize.padSize>0){let x=((r-f.mediaSize.padSize)*g+f.mediaSize.padSize)/r;v=(r-f.mediaItemSize.padSize)*x+f.mediaItemSize.padSize}else if(n&&!i){let x=((r-n.mediaPad)*g+n.mediaPad)/r;v=(r-n.mediaItemPad)*x+n.mediaItemPad}else v=(r-f.mediaItemSize.padSize)*g+f.mediaItemSize.padSize}return Math.floor(v*32)/32}),s=sz.default.maxBy(o,l=>l||0)||0,a={index:o.indexOf(s),height:s};this.setState({tallestSlide:a})};onResize=(e,r)=>{this.setState(i=>({hasSizes:{...i.hasSizes,[e]:!0},[e]:r}))};handleKeyDown=e=>{switch(e.keyCode){case 39:e.preventDefault(),this.nextSlide();break;case 37:e.preventDefault(),this.prevSlide();break}};onPointerEnter=e=>{this.setState({pointerOver:!0})};onPointerLeave=e=>{this.setState({pointerOver:!1})};scrubAnimate=e=>{this.lastScrubTimeStamp==null&&(this.lastScrubTimeStamp=e);let r=e-this.lastScrubTimeStamp;this.lastScrubTimeStamp=e;let{elWidth:i}=this.state,n=iz===0?1/this.len:iz,o=this.pointerX;if(this.state.isPointerDown){this.scrubCounter=0;let a=this.lastPointerX-this.pointerX;this.pointerFrameDeltaX!=0&&(this.lastPointerFrameDeltaX=this.pointerFrameDeltaX),this.pointerFrameDeltaX=a,this.lastPointerFrameDeltaX>0&&this.pointerFrameDeltaX<0?this.firstPointerX=this.pointerX:this.lastPointerFrameDeltaX<0&&this.pointerFrameDeltaX>0&&(this.firstPointerX=this.pointerX)}else this.state.scrubStatus===Ix?(this.scrubCounter=0,this.pointerFrameDeltaX=this.pointerFrameDeltaX+-oz):this.state.scrubStatus===Px?(this.scrubCounter=0,this.pointerFrameDeltaX=this.pointerFrameDeltaX+oz):this.state.scrubStatus===ul&&(this.pointerFrameDeltaX<0?this.pointerFrameDeltaX=Math.min(0,this.pointerFrameDeltaX+nz):this.pointerFrameDeltaX=Math.max(0,this.pointerFrameDeltaX+-nz));if(Math.abs(this.pointerFrameDeltaX)>Cx*n*i&&(this.pointerFrameDeltaX>0?this.pointerFrameDeltaX=Cx*n*i:this.pointerFrameDeltaX=-(Cx*n)*i),this.state.isPointerDown){let a=this.lastPointerX-this.pointerX,l=this.lastPointerX-(this.lastPointerX+this.pointerFrameDeltaX);this.firstPointerX=this.firstPointerX-(a-l)}else this.pointerX=this.lastPointerX+this.pointerFrameDeltaX,o=this.pointerX;if(this.lastPointerX=this.pointerX,this.xDrag=o-this.firstPointerX,Math.abs(this.xDrag/i)>n&&this.len>1){this.slidesProgressedWhileScrubbing==null&&(this.slidesProgressedWhileScrubbing=0),this.slidesProgressedWhileScrubbing++;let a=this.xDrag>0?(this.state.activeIndex+1)%this.len:(this.state.activeIndex+-1+this.len)%this.len;this.setState({destinationIndex:a,activeIndex:a}),this.xDrag=9e9,this.scrubCounter=0,this.firstPointerX=this.pointerX}clearTimeout(this.autoplayInterval),this.state.scrubStatus==ul&&(this.scrubCounter>=500&&!this.state.isPointerDown||this.slidesProgressedWhileScrubbing<2&&this.state.scrubbingFromNavigation)?(this.setState({scrubAnimating:!1,scrubbingFromNavigation:!1}),this.scrubCounter=0,this.slidesProgressedWhileScrubbing=0,this.lastScrubTimeStamp=void 0,this.options.autoplay&&!(this.options.pauseOnHover&&this.state.pointerOver)&&(this.autoplayInterval=setTimeout(this.nextSlide,Math.max(100,this.options.autoPlayDelay*1e3-1e3)))):(this.scrubCounter=this.scrubCounter+r,this.scrubAnimationRequest=requestAnimationFrame(this.scrubAnimate))};startScrubDelta=(e,r)=>{if(e){if(e.button==2)return;e.preventDefault()}!this.isScrub||this.len<2||(this.setState({scrubStatus:r}),this.scrubCounter=0,this.firstPointerX=this.lastPointerX=this.pointerX=0,this.lastPointerFrameDeltaX=this.pointerFrameDeltaX=0,this.xDrag=0,this.setState({scrubbingFromNavigation:!0,scrubAnimating:!0}),cancelAnimationFrame(this.scrubAnimationRequest),this.scrubAnimationRequest=requestAnimationFrame(this.scrubAnimate),window.addEventListener("pointerup",this.onScrubPointerUp),window.addEventListener("pointercancel",this.onScrubPointerUp))};onScrubPointerUp=e=>{this.setState({scrubStatus:ul}),window.removeEventListener("pointerup",this.onScrubPointerUp),window.removeEventListener("pointercancel",this.onScrubPointerUp)};onClickCapture=e=>{this.cancelClick&&e.preventDefault()};onPointerDown=e=>{if(this.cancelClick=!1,e.defaultPrevented)return;let r=e.target.closest(".caption");r&&this.props.baseNode.contains(r)||!this.slideListRef.current||e.button==2||(clearTimeout(this.autoplayInterval),this.firstPointerX=this.lastPointerX=this.pointerX=e.clientX,this.pointerFrameDeltaX=0,this.xDrag=0,this.initialXTransform=this.isSlide?this.xTransform:0,this.setState(i=>({isPointerDown:!0,initialActiveIndex:i.activeIndex})),window.cancelAnimationFrame(this.scrubAnimationRequest),this.isScrub&&(this.scrubAnimationRequest=window.requestAnimationFrame(this.scrubAnimate)),window.addEventListener("pointermove",this.onWindowPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerUp))};getSlideListStyles=()=>{let e="translateX(0)",r="translateX(0)";return this.isSlide&&(e=`translateX(${Math.round((this.state.elWidth*(-1+(1-this.lazyloadPrev))+this.xTransform)*2)/2}px)`,r=`translateX(${-Math.round(this.xTransform*2)/2}px)`),{"--slideshow-caption-transform":r,transform:e}};updateSlideTransform=e=>{let{destinationIndex:r,activeIndex:i,elWidth:n}=this.state,o="";if(this.progress===void 0&&(this.progress=0),this.isSlide&&(this.state.inTransition||this.state.isPointerDown||this.state.isDragging)){o="transform";let a=this.xDrag+this.initialXTransform,l=0,p=a,f=n;r>i?f=-n:r<i?f=n:f=0;let c=0;if((!e||e==0)&&(e=0,this.lastTimestamp=0,c=0),this.lastTimestamp==0&&(this.lastTimestamp=e||0),c=e-this.lastTimestamp,this.lastTimestamp=e,this.state.isDragging||this.state.isPointerDown){if(this.state.isDragging){this.dragPxPerSecond===void 0&&(this.dragPxPerSecond=0),this.lastDragX===void 0&&(this.lastDragX=this.pointerX);let m=(this.pointerX-this.lastDragX)*c;m!=0&&(m>0&&this.dragPxPerSecond>0?m<this.dragPxPerSecond&&(m=this.dragPxPerSecond*.95+m*.05):m<0&this.dragPxPerSecond<0&&m>this.dragPxPerSecond&&(m=this.dragPxPerSecond*.95+m*.05),this.dragPxPerSecond=m),this.lastDragX=this.pointerX}this.progress=0}else{if(this.state.isPointerDown||(this.progress=this.progress+c),this.dragPxPerSecond!==void 0&&this.dragPxPerSecond!==0){this.dragPxPerSecond<0?this.dragPxPerSecond=Math.min(-800,this.dragPxPerSecond):this.dragPxPerSecond=Math.max(800,this.dragPxPerSecond);let m=n/Math.abs(this.dragPxPerSecond);l=Ib(this.progress/(Math.min(m,this.options.speed)*1e3))}else l=Pb(this.progress/(this.options.speed*1e3));a=l*f+(1-l)*p}a=Math.min(Math.max(-n,a),n),this.xTransform=a,l>=1&&!(this.state.isPointerDown||this.state.isDragging)?(this.dragPxPerSecond=void 0,this.lastDragX=void 0,this.onSlideEnd()):this.updateSlideTransformAnimationFrame=requestAnimationFrame(this.updateSlideTransform)}else this.isScrub?(this.xTransform=0,this.progress=0):this.isFade&&(this.xTransform=0,this.progress=0);let s=this.getSlideListStyles();this.slideListRef.current&&s.transform!==this.slideListRef.current.style.transform&&(this.slideListRef.current.style.transform=s.transform,this.styleRef.current&&(this.styleRef.current.sheet?.cssRules?.[0]?.style.setProperty("--slideshow-caption-transform",s["--slideshow-caption-transform"]||"translateX(0px)"),Ui()&&Array.from(this.props.baseNode.children).forEach(a=>{a.nodeName==="MEDIA-ITEM"&&a.assignedSlot&&a._forceRedraw?.()})),this.slideListRef.current.style.willChange=o)};onPointerUp=e=>{window.removeEventListener("pointercancel",this.onPointerUp),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointermove",this.onWindowPointerMove),clearTimeout(this.autoplayInterval),cancelAnimationFrame(this.scrubPointerAnimationRequest);let r=!1,i=!1,n=!1,o=!1;if(e){let p=e.timeStamp-(this.lastPointerUpTimestamp||-9e9);this.lastPointerUpTimestamp=e.timeStamp,o=p<250;let f=Array.from(e.composedPath()).some(c=>c.getAttribute?.("part")?.includes("media"));if(f&&e.target.tagName==="MEDIA-ITEM"&&e.target.getAttribute("browser-default")=="true"){let c=e.target.getFileType?.()??"";(c.startsWith("vimeo")||c.startsWith("youtube")||c=="video")&&(n=!0)}e.target?.closest("a, [href]")&&(r=!0),e.target?.closest("media-item.zoomable")&&f&&(i=!0),!r&&!i&&e?.preventDefault()}e?.pointerType==="touch"&&!r&&e.type!=="pointercancel"&&e.target.nodeName==="MEDIA-ITEM"&&e.target?.shadowRoot?.querySelector(".sizing-frame")?.click();let s=!1,a=!1,l=!1;this.setState(p=>{let{elWidth:f,scrubStatus:c,isPointerDown:m,isDragging:v,inTransition:g,finishingTransition:x,scrubAnimating:_,activeIndex:E,destinationIndex:L}=p;if(!p.isDragging&&(r||i||n))s=!1,l=!1;else if(this.isScrub)g=!1,x=!1,p.isDragging?_=!0:Math.abs(this.xDrag)<8&&(_=!1,s=!0,l=!0);else if(this.isSlide&&this.options.speed!=0)if(p.isDragging)x=!0,g=!0,s=!1,l=!1;else{let O=this.state.elWidth-Math.abs(this.xTransform+this.state.elWidth)%this.state.elWidth,M=O<50||O>this.state.elWidth-50,D=O<50;o?(s=!p.inTransition,l=!0,x=!1,g=!1):M&&!D&&p.inTransition||p.finishingTransition?(s=!1,l=!0,x=!1,g=!1):p.inTransition?(s=!1,D||(x=!0),g=!0):(s=!0,x=!1,l=!0,g=!1)}else this.isFade&&this.options.speed!=0?p.isDragging?s=!1:(s=!0,l=!0,g=!1):this.options.speed==0&&(p.isDragging?(g=!1,s=!1,l=!0):(g=!1,s=!0,l=!0),E=L);return s&&e&&(this.cancelClick=!0),{elWidth:f,finishingTransition:x,scrubStatus:ul,isPointerDown:!1,isDragging:!1,inTransition:g,destinationIndex:L,activeIndex:E,scrubAnimating:_}},()=>{this.isFade&&a&&this.setState({cancelFadeTransition:!0}),l&&this.onSlideEnd(),s&&this.nextSlide()})};onWindowTouchStart=e=>{if(e.target.closest("gallery-slideshow")!==this.props.baseNode){if(e.target.hasAttribute("href")){this.pause();let r=()=>{Ab(this.props.baseNode)&&this.startAutoplay(),window.removeEventListener("touchend",r)};window.addEventListener("touchend",r)}this.setState({pointerOver:!1})}};onWindowPointerMove=e=>{this.pointerX=e.clientX,this.xDrag=this.pointerX-this.firstPointerX,this.setState(r=>{let{activeIndex:i,destinationIndex:n,isDragging:o,initialActiveIndex:s}=r,a=Math.abs(this.xDrag/r.elWidth),l=r.elWidth*(-2+(1-this.lazyloadNext)),p=r.elWidth*(1-this.lazyloadPrev);if(!r.isDragging&&r.isPointerDown&&Math.abs(this.xDrag)>Mae&&(o=!0,this.isSlide&&r.inTransition&&this.len>1&&(r.destinationIndex>r.activeIndex&&this.xDrag<0?(s++,i++,n++,this.xTransform=this.xTransform+r.elWidth,this.initialXTransform=this.initialXTransform+r.elWidth):r.destinationIndex<r.activeIndex&&this.xDrag>0&&(s--,i--,n--,this.xTransform=this.xTransform-r.elWidth,this.initialXTransform=this.initialXTransform-r.elWidth),s=(i+this.len*3)%this.len,i=(i+this.len*3)%this.len,n=(n+this.len*3)%this.len),this.cancelClick=!0),o){let f=this.xDrag<0?i+1:i-1;a>Tae&&this.len>1?(Math.abs(f-r.initialActiveIndex)<2||this.isScrub)&&(n=f):this.isScrub||(n=r.initialActiveIndex),n<-1&&(n=n+this.len)}if(r.activeIndex!==i||r.destinationIndex!==n||r.isDragging!==o||r.initialActiveIndex!==s)return{...r,activeIndex:i,destinationIndex:n,initialActiveIndex:s,isDragging:o};{let f=this.getSlideListStyles();return this.slideListRef.current&&(this.slideListRef.current.style.transform=f.transform,this.styleRef.current&&this.styleRef.current.sheet?.cssRules?.[0]?.style.setProperty("--slideshow-caption-transform",f["--slideshow-caption-transform"]||"translateX(0px)")),null}})};nextSlide=e=>{if(e){if(e.defaultPrevented||e.button==2)return;e.stopPropagation(),e.preventDefault()}if(!(this.len<2)){if(this.state.inTransition&&e){this.onSlideEnd();return}cancelAnimationFrame(this.scrubAnimate),this.setState(r=>{let i={...r},n=r.activeIndex+1;return i.inTransition=!(this.isScrub||this.options.speed==0),this.xTransform=0,this.initialXTransform=0,this.isScrub?(i.destinationIndex=n,i.scrubStatus=ul):i.destinationIndex=n,this.xDrag=0,i}),(this.options.speed==0||this.isScrub)&&this.onSlideEnd()}};prevSlide=e=>{if(e){if(e.defaultPrevented||e.button==2)return;e.stopPropagation(),e.preventDefault()}if(!(this.len<2)){if(this.state.inTransition){this.onSlideEnd();return}cancelAnimationFrame(this.scrubAnimate),this.setState(r=>{let i={...r},n=r.activeIndex-1;return n<-1&&(n=n+this.len),i.inTransition=!(this.isScrub||this.options.speed==0),this.xTransform=0,this.initialXTransform=0,this.isScrub?(i.destinationIndex=n,i.scrubStatus=ul):i.destinationIndex=n,this.xDrag=0,i}),(this.options.speed==0||this.isScrub)&&this.onSlideEnd()}};onThumbnailClick=e=>{if(this.props.adminMode)return;e.preventDefault(),e.stopPropagation();let r=e?.target?.closest?.("media-item")||null;if(r){let i=Array.from(this.props.baseNode.children).indexOf(r);this.setState({destinationIndex:i,activeIndex:i},this.hideThumbnails)}};onSlideEnd=()=>{clearTimeout(this.autoplayInterval),this.isFade&&this.slideListRef.current&&this.state.inTransition&&this.setState({cancelFadeTransition:!0}),this.setState(e=>{this.xTransform=0;let r=(e.destinationIndex+this.len+this.len+this.len)%this.len;return{...e,activeIndex:r,destinationIndex:r,finishingTransition:!1,inTransition:!1}},()=>{if(this.isSlide&&this.slideListRef.current&&(this.slideListRef.current.style.willChange=""),this.props.afterSlideChange){let r=this.props.baseNode.shadowRoot?.querySelector(".active-slide slot")?.assignedElements()?.[0]||null;this.props.afterSlideChange(this.state.activeIndex,r)}this.startAutoplay()})};onSlideOpacityTransitionStart=(e,r)=>{e.propertyName==="opacity"&&r==0&&e.target.classList.contains("slide")};onSlideOpacityTransitionEnd=(e,r)=>{e.propertyName==="opacity"&&r==0&&e.target.classList.contains("slide")&&this.onSlideEnd()};getWrapAroundDistanceFromIndex=(e,r,i)=>{let n=i*.5,o=n-Math.abs((e+-r)%(2*n)-n);return o<-n&&o<0&&(o=o+i),o};makeMediaItemAttributes=()=>{if(this.len==0)return;let{showThumbnails:e,elWidth:r,slideHeightPx:i,activeIndex:n,actualCardSize:o,destinationIndex:s}=this.state,{shuffle:a,limitBy:l,scale:p,adjustForCaptions:f}=this.options,c=a&&!e,m=[];for(let v=0;v<this.len;v++){let g=(v+this.len)%this.len,x=g;c&&(x=this.shuffleList[g]);let _=`slot-${x}`,E=Math.abs(this.getWrapAroundDistanceFromIndex((x+this.len)%this.len,n,this.len))<3,L={itemDragStart:this.onDragStart,itemResize:(O,M)=>{this.onItemResize(O,M,x)},drag:!1,rotation:"0",scale:"100","limit-by":"width",isAdjacent:E,visibility:n==g,slot:e?"thumbnails":_};m.push(L)}return m};onDragStart=e=>{this.state.showThumbnails||(e.preventDefault(),e.stopPropagation())};onMediaLoad=e=>{let r=Array.from(this.props.baseNode.children).filter(n=>{let o=n.assignedSlot;return n.tagName==="MEDIA-ITEM"&&o!==null});this.loadedItems.has(e)||this.loadedItems.add(e);var i=this.isFade?Math.min(r.length,3):r.length;this.loadedItems.size>=i&&!this.state.hasLoaded&&(this.setState({hasLoaded:!0}),setTimeout(()=>{this.setState({initialShowNavigation:!1})},this.props?.["navigation-hide-delay"]*1e3||1500),this.props.slideshowLoad&&this.props.slideshowLoad())};renderSlides=()=>{let{elWidth:e,destinationIndex:r,activeIndex:i,inTransition:n,showThumbnails:o}=this.state,{xDrag:s,initialXTransform:a}=this,l=[],f=(a%e+s>0||r<i)&&this.isSlide&&this.len==2;for(let c=-this.lazyloadPrev;c<this.lazyloadNext+1;c++){let m=c;f&&(m=m+-1);let v=(m+i+this.len*2)%this.len,g="slot-"+v,x=!1,_=!1,E={};E.className=`slide ${this.options.type}-transition`,(r+this.len)%this.len==v&&(_=!0,E.className+=" destination-slide"),(i+this.len)%this.len==v&&(x=!0,E.className+=" active-slide"),E.part="slide",E.style={},o||(E.style={width:`${e}px`,transform:f?"translateX("+-e+"px)":null}),this.isFade&&(E.onTransitionStart=L=>{this.onSlideOpacityTransitionStart(L,m)},E.onTransitionEnd=L=>{this.onSlideOpacityTransitionEnd(L,m)}),m==-1&&(E.part+=" "+this.options.type+"-slide-previous"),m==1&&(E.part+=" "+this.options.type+"-slide-next"),m>=-1&&m<=1?(E.className+=" adjacent-slide",E.part+=" "+this.options.type+"-slide-adjacent"):E.className+=" non-adjacent-slide",E.slot=g,l.push(Ot("div",{...E,key:"slot_"+g},S("slot",{name:g})))}return l};goToSlide=e=>{e=e%this.len||0,!(isNaN(e)||this.state.destinationIndex===e)&&this.setState({showThumbnails:!1,destinationIndex:e,activeIndex:e,inTransition:!1},()=>{this.updateSlideTransform()})};getActiveSlide=()=>{let r=this.props.baseNode.shadowRoot?.querySelector(".active-slide slot")?.assignedElements()?.[0]||null;return[this.state.activeIndex,r]};showThumbnails=()=>{let e=this.props.scrollContext.getScrollPosition().y;this.setState({showThumbnails:!0,inTransition:!1},()=>{this.scrollRestore=setTimeout(()=>{this.props.scrollContext.updateScrollPosition({x:null,y:e})},60),this.props.baseNode.dispatchEvent(new CustomEvent("show-thumbnails",{composed:!0,bubbles:!1}))})};hideThumbnails=()=>{let e=this.props.scrollContext.getScrollPosition().y;if(window.getSelection().rangeCount>0){var i=window.getSelection()?.getRangeAt?.(0)?.intersectsNode(this.props.baseNode);i&&window.getSelection()?.removeAllRanges()}this.initialXTransform=0,this.xTransform=0,this.setState(n=>({destinationIndex:n.activeIndex,showThumbnails:!1,inTransition:!1,finishingTransition:!1}),()=>{this.scrollRestore=setTimeout(()=>{this.props.scrollContext.updateScrollPosition({x:null,y:e})},60),this.props.baseNode.dispatchEvent(new CustomEvent("hide-thumbnails",{composed:!0,bubbles:!1}))})}};lg.defaultProps={"show-tags":!0,"show-title":!0,"thumbnail-index":void 0};Nae=qt(Oo(Ue((t,e)=>({isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,usesScrollAnimation:t.siteDesign.images.scroll_animation}))(lg)));ar(Nae,"gallery-slideshow",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","slideshowLoad","afterSlideChange","thumbnails","transition-type","autoplay","autoplay-delay","transition-speed","navigation","shuffle","height-limit","auto-height","vertical-align","horizontal-align","adjust-for-captions","show-captions","pause-on-hover","disable-scroll-animation","mobile-adjust-for-captions","mobile-thumbnails","mobile-transition-type","mobile-autoplay","mobile-autoplay-delay","mobile-transition-speed","mobile-navigation","mobile-shuffle","mobile-height-limit","mobile-auto-height","mobile-vertical-align","mobile-horizontal-align","mobile-show-captions","mobile-pause-on-hover"])});var az,Ax,Tx,lz,uz=$(()=>{ke();Ze();az=ve(Ie(),1);ug();mt();_r();ig();Fe();qr();Br();fe();Ax={hash:"F1332270929626196865795426877515",id:1234,name:"scape.jpg",width:4e3,height:2250,file_type:"jpg",mime_type:"image/jpg",is_placeholder:!1,is_image:!0,is_video:!1,is_url:!1},Tx=class extends me{constructor(e){super(e),this.state={isMobile:nt.data.mobile.active,loaded:!1,showNavigation:!0,navigationContainer:null,backdropShadowRoot:null,navigationElement:null},this.containerRef=_e(),this.wallpaperRef=_e(),this.slideshowRef=_e(),this.navigationRef=_e()}getSettings=()=>{let e={};for(let[r,i]of Object.entries(Hd.default.defaults))this.props.settings?.hasOwnProperty(r)?e[r]=this.props.settings[r]:e[r]=i.value;return e};render(){let{showNavigation:e,navigationContainer:r,isMobile:i}=this.state,{modelArray:n,singleModel:o,visibility:s,wrapperDimensions:a}=this.props,l=this.getSettings(),p=ur(l.margin,"%"),f="";p[1]==="%"?(p[0]=Math.min(this.props.dimensions.width,this.props.dimensions.height)*parseFloat(p[0])*.01,p[1]="px"):p[1].includes("rem")&&i&&(p[0]="calc( var(--mobile-padding-offset, 1) * "+p[0]+"rem )",p[1]="");let c;p[1]==="px"?c=this.props.dimensions.height+.5-p[0]*2+"px":p[0]?.indexOf?.("calc(")>-1?c=`calc( ${this.props.dimensions.height+.5}px - ( 2 *  ( ${p[0].replace("calc(","")} ) )`:c=`calc( ${this.props.dimensions.height+.5}px - ${p[0]*2+p[1]} )`;let m=l["image-fit"]=="fit",v={autoplay:l.autoplay,"transition-speed":l["transition-speed"],"transition-type":l["transition-type"],"autoplay-delay":l["autoplay-delay"],"pause-on-hover":!1,"limit-by":"height",shuffle:l.shuffle,navigation:!1,scale:c,"show-captions":!1,slideshowLoad:this.onFirstLoad,afterSlideChange:this.onAfterSlideChange,"disable-scroll-animation":!0},g=this.props.settings.alignments||{},x="";for(let[L,O]of Object.entries(g))x+=` media-item[hash="${L}"] { --position-image: ${O.x}% ${O.y}% }`;let _=null,E=null;return n.length>0&&(E=l.navigation&&l["cycle-images"]&&n.length>1?S(de,{children:[S("div",{className:`backdrop ${this.props.settings.clipScroll?"clip":""}`,children:S("div",{className:"wallpaper-slideshow",ref:this.navigationRef,children:this.state.navigationElement?rt(S(de,{children:[S("style",{children:`
:host {
	width: ${this.props.dimensions.width}px;
}

[part="slideshow-nav"] {
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none; 

    pointer-events: none;
    position: absolute;
    inset: 0;
    z-index: 1001;
    

    opacity: ${this.state.loaded&&e?"1":"0"};

    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
}


							`}),S("div",{part:"slideshow-nav",children:[S("div",{part:"slideshow-nav-previous-button",onClick:this.prevSlide,children:S("svg",{part:"slideshow-nav-prev",class:"left-arrow",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",class:"arrow",d:"M22.3,28l-10-10l10-10"})]})}),S("div",{part:"slideshow-nav-next-button",onClick:this.nextSlide,children:S("svg",{part:"slideshow-nav-next",class:"next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",class:"arrow",d:"M22.3,28l-10-10l10-10"})]})})]})]}),this.state.navigationElement.shadowRoot):null})}),S("div",{className:"page-layout",children:S("div",{className:"page-content"})})]}):null,_=l["cycle-images"]&&n.length>1?S("gallery-slideshow",{...v,className:"image-container multiple-item",ref:this.slideshowRef,children:n.map((L,O)=>S("media-item",{"image-fit":m?"fit":"fill","disable-zoom":!0,"disable-scroll-animation":!0,hash:L.hash,muted:"true",autoplay:L.is_video||L.is_url,loop:!0,part:"media-item"},"slide-"+O))}):S("div",{className:"image-container single-item",children:S("media-item",{"image-fit":m?"fit":"fill","disable-zoom":!0,"disable-scroll-animation":!0,hash:o?.hash||"placeholder",model:o,part:"media-item",muted:"true",autoplay:o.is_video,loop:"true","force-visible":this.props.visibility.visible,itemLoad:this.onFirstLoad,"limit-by":m?"height":"width",scale:m?c:"100%"})})),S("div",{className:"wallpaper",ref:this.wallpaperRef,children:this.state.backdropShadowRoot&&rt(S(de,{children:[S("style",{children:`:host {
						background-color: ${l["bg-color"]||"transparent"};
					    position: absolute;
					    inset: 0;
					}

					gallery-slideshow media-item figcaption.caption,
					media-item::part(placeholder-ui) {
					    display: none!important;
					}

					gallery-slideshow media-item::part(sizing-frame) {
					    margin: auto 0;
					    flex-grow: 0;
					}

					gallery-slideshow media-item::part(frame) {
					    display: flex;
					    flex-wrap: wrap;
					    width: ${m?"var(--item-width)":"100%"}; 
					    height: var(--slide-height);
					    align-content: center;
					    align-self: center;
					}					

					.inner {
					    position: absolute;
					    inset: ${p.join("")};
					}

					.image-container {
						opacity: ${l.opacity};
						inset: 0;
					    width: 100%;
					    height: 100%;
					    position: absolute;
					    text-align: center;
					    z-index: 2;
					}

					.image-container.single-item {
						display: flex;
						align-content: center;
						justify-content: center;
						position: absolute; 
						margin: auto;
						inset: 0;
					}

					.image-container.single-item media-item {
						margin: auto;
						max-width: auto;
					}

					.image-container.single-item media-item::part(figure){
						height: 100%;
					}				

					gallery-slideshow, media-item {
						transform: translateX(0)!important;
					}

			

					${m?`


						`:`			

						media-item::part(sizing-frame),
						media-item::part(frame) {
						    margin: 0;
						    width: 100%;
						    height: ${c};
						    pointer-events:none;
						    display: block;
						    padding: 0;
						}		

						media-item::part(media),
						media-item::part(video) {
						    object-position: var(--position-image, center center);                  
						    pointer-events: auto;
						    display: block;
						    margin: 0;
						    width: 100%;
						    height: 100%;
						    position: absolute;					    
						    top: 0;
						    left: 0;
						}						
					`}


					${x}`}),E&&r&&rt(E,r),S("div",{className:"overlay"}),S("div",{className:"inner",ref:this.containerRef,children:_})]}),this.state.backdropShadowRoot)})}prevSlide=e=>{this.hideNavigation.cancel(),e?.preventDefault(),this.slideshowRef.current?.prevSlide()};nextSlide=e=>{e?.preventDefault(),this.hideNavigation.cancel(),this.slideshowRef.current?.nextSlide()};onPointerMove=e=>{!this.state.showNavigation&&this.props.inViewport&&this.setState({showNavigation:!0}),e&&e.target&&this.state.navigationContainer?.contains(e.target)?this.hideNavigation.cancel():this.hideNavigation()};hideNavigation=az.default.debounce(()=>{this.setState({showNavigation:!1})},1500);onMobileChange=e=>{this.setState({isMobile:e})};renderNavigation(){if(!this.props.backdropRef.current)return;if(this.props.modelArray.length>1&&this.props.settings["cycle-images"]&&!this.state.navigationContainer&&this.props.settings.navigation){let r=document.createElement("div");r.classList.add("wallpaper-navigation"),this.props.backdropRef.current.closest(".page").appendChild(r),this.setState({navigationContainer:r})}else this.state.navigationContainer&&this.state.navigationContainer.remove(),this.setState({navigationContainer:null,navigationElement:null})}componentDidMount(){nt.on("mobile-change",this.onMobileChange),this.wallpaperRef.current&&!this.wallpaperRef.current.shadowRoot&&this.wallpaperRef.current.attachShadow({mode:"open"}),this.setState({backdropShadowRoot:this.wallpaperRef.current?.shadowRoot}),this.renderNavigation(),window.addEventListener("pointermove",this.onPointerMove),setTimeout(()=>{this.setMediaElementProperties()},100)}componentWillUnmount(){nt.off("mobile-change",this.onMobileChange),this.hideNavigation.cancel(),this.state.navigationContainer&&this.state.navigationContainer.remove(),window.removeEventListener("pointermove",this.onPointerMove)}componentDidUpdate(e,r){let i=this.getSettings();if((this.props.settings.navigation!==e.settings.navigation||this.props.settings["cycle-images"]!==e.settings["cycle-images"]||e.modelArray?.length==1&&this.props.modelArray?.length>1)&&(this.renderNavigation(),this.onPointerMove()),this.props.settings.activeImage!==e.settings.activeImage&&this.props.settings["cycle-images"]&&this.slideshowRef.current){let n=this.slideshowRef.current.querySelector('[hash="'+this.props.settings.activeImage+'"]');if(n){let o=Array.from(this.slideshowRef.current.children).indexOf(n);this.slideshowRef.current.goToSlide(o)}}this.props.visibility.visible&&this.containerRef.current&&(e.visibility.visible!==this.props.visibility.visible||this.props.settings["cycle-images"]!==e.settings["cycle-images"])&&this.setMediaElementProperties(),this.navigationRef.current!==this.state.navigationElement&&(this.navigationRef.current&&!this.navigationRef.current.shadowRoot&&this.navigationRef.current.attachShadow({mode:"open"}),this.setState({navigationElement:this.navigationRef.current}))}setMediaElementProperties=()=>{this.slideshowRef.current&&Pt(this.slideshowRef.current,"viewportIntersectionChange",{visible:this.props.visibility.visible,position:this.props.visibility.position},{bubbles:!1})};onFirstLoad=e=>{if(this.slideshowRef.current){let r=this.slideshowRef.current.getActiveSlide();this.wallpaperRef.current.dispatchEvent(new CustomEvent("afterSlideChange",{detail:{slideIndex:r[0],mediaItem:r[1]},composed:!1,bubbles:!1}))}this.state.loaded||(this.setState({loaded:!0,showNavigation:!0}),this.props.onLoad&&this.props.onLoad())};onAfterSlideChange=(e,r)=>{this.wallpaperRef.current.dispatchEvent(new CustomEvent("afterSlideChange",{detail:{slideIndex:e,mediaItem:r},composed:!1,bubbles:!1}))}},lz=Ue((t,e)=>{let r=$e.getMediaByParent(t)[e.id],i=r.some(s=>s.loading);r=r.filter(s=>!s.loading&&!s.is_deleted&&(s.is_video||s.is_image));let n=null,o=e.settings?.activeImage||null;return o===Ax.hash?(n=Ax,r.push(n)):(o&&(n=r.find(s=>s.hash==o)),n||(n=r[0])),!n&&!i&&r.length==0&&(n=Ax,r.push(n)),e.settings.excluded&&(r=r.filter(s=>e.settings.excluded.indexOf(s.hash)==-1),r.length==1&&e.settings["cycle-images"]&&(n=r[0])),e.settings.order&&r.sort(function(s,a){return e.settings.order.indexOf(s.hash)<e.settings.order.indexOf(a.hash)?-1:1}),{singleModel:n,modelArray:r}})(Tx)});var hTe,Mx,cz,dz=$(()=>{ke();Ze();hTe=ve(Ie(),1);mt();_r();ig();fe();Mx=class extends me{constructor(e){super(e),this.state={loaded:!1,counter:0,shadowRootRef:null},this.gradientElementRef=_e()}render(){let{visibility:e,dimensions:r}=this.props,{counter:i}=this.state,n={};for(let[ae,ue]of Object.entries(Wd.default.defaults))this.props.settings?.hasOwnProperty(ae)?n[ae]=this.props.settings[ae]:n[ae]=ue.value;let{repeat:o,rotation:s,scale:a,smoothness:l,"animation-speed":p,"pos-x":f,"pos-y":c,"gradient-type":m,"color-one":v,"color-two":g,"color-three":x,"color-one-active":_,"color-two-active":E,"color-three-active":L}=n;v=v||"transparent",g=g||"transparent",x=x||"transparent",c=c+50,f=f+50,a=parseFloat(a)/100,l=parseFloat(l)/100,s=parseInt(s);let O=p>0;p=Math.abs(p/100),p=p*p,p=O?p:-p;let M=p!==0,D=M&&m=="linear"&&o,P=M&&m=="radial"&&o,U=p>0?p*120+(1-p)*2400:Math.abs(p)*120+(1-Math.abs(p))*2400,N=(1-Math.abs(p))*40+Math.abs(p)*4,F=i%U/U;p>0&&(F=1-F);let V=0,q=P?F*100*a:0,J=[];_&&J.push(v),E&&J.push(g),L&&J.push(x);let Y="",ie="",oe="",Z=0,K=0,Q="",te="",ee=[];if(J.length!=0)if(J.length==1)Y+=`background-color: ${J[0]}`;else if(J.length==2)if(o){a=(1-l)*a+a*l;let ae=(100/4*1+-l*(100/4))*a-(1-l)*(100/5)*a;ee[0]=0+q,ee[1]=(100/4*1+l*(100/4))*a-(1-l)*(100/5)*a+-ae+q,ee[2]=(100/4*3+-l*(100/4))*a-(1-l)*(100/5)*a+-ae+q,ee[3]=(100/4*3+l*(100/4))*a-(1-l)*(100/5)*a+-ae+q,ee[4]=100*a+q}else ee[0]=0,ee[1]=a*100+-(a*100)*l,ee[2]=a*100+(1-a)*100*l,ee[3]=100;else if(o){a=(1-l)*a+a*l;let ae=(100/6*1+-l*(100/6))*a-(1-l)*(100/7)*a;ee[0]=0+q,ee[1]=(100/6*1+l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ee[2]=(100/6*3+-l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ee[3]=(100/6*3+l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ee[4]=(100/6*5+-l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ee[5]=(100/6*5+l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ee[6]=100*a+q}else a=(1-l)*3*a+a*l,ee[0]=100/6*0+l*(100/6)*0,ee[1]=100/6*2+-l*(100/6)*2,ee[2]=100/6*2+l*(100/6)*1,ee[3]=100/6*4+-l*(100/6)*1,ee[4]=100/6*4+l*(100/6)*2,ee[5]=100/6*6+-l*(100/6)*0,ee[0]=Math.max(ee[0]*a+50*(1-a),0),ee[1]=Math.max(ee[1]*a+50*(1-a),0),ee[2]=ee[2]*a+50*(1-a),ee[3]=ee[3]*a+50*(1-a),ee[4]=Math.min(ee[4]*a+50*(1-a),100),ee[5]=Math.min(ee[5]*a+50*(1-a),100);if(J.length>1){Y="background-image: ",Y+=o?"repeating-":"",Y+=m=="linear"?`linear-gradient( ${s+180}deg`:`radial-gradient( circle at ${f}% ${c}%`,ie=oe="background-position: ";let ae=[];if(J.length==2?o?ae=[0,1,1,0,0]:ae=[0,0,1,1]:o?ae=[0,1,1,2,2,0,0]:ae=[0,0,1,1,2,2],D?ee.forEach((ue,le)=>{let xe=J[ae[le]]||J[0];Y+=`, ${xe} ${ue/2}%`}):ee.forEach((ue,le)=>{let xe=J[ae[le]]||J[0];Y+=`, ${xe} ${ue}%`}),Y+=")",D){let ue=(s+90)*(Math.PI/180),le=r.width/r.height,xe=Math.cos(ue),Re=Math.sin(ue),be=ee[ee.length-1]+"%";xe<0?(oe+="0% ",ie+=be+" "):(oe+=be+" ",ie+="0% "),Re<0?(Re*=-1,oe+="0%;",ie+=be+";"):(oe+=be+";",ie+="0%;")}}return S("div",{className:"gradient",ref:this.gradientElementRef,children:this.state.shadowRoot&&rt(S("style",{children:`:host {
						${Y};
					    position: absolute;
					    top: 0;
					    left: 0;
					    right: 0;
					    bottom: 0;
					    margin: auto;
					    background-position: 0 0;
					    background-size: ${D?"200% 200%;":"100% 100%;"}
					    ${D&&"will-change: background-position, background-image;"}
					    ${D&&"animation: slideAnimation "+N+"s linear infinite "+(p<0?"reverse":"normal")+";"}
					}

					${D?`
					@keyframes slideAnimation {
						0% {
							${ie}
						}

						100% {
							${oe}
						}
					}
					`:""}
					`}),this.state.shadowRoot)})}componentDidUpdate(e,r){(this.props.settings.repeat!==e.settings.repeat||this.props["animation-speed"]!==e["animation-speed"])&&(cancelAnimationFrame(this.animFrame),this.props.settings.repeat&&this.props["animation-speed"]!==0&&(this.animFrame=requestAnimationFrame(this.draw)))}componentWillUnmount(){cancelAnimationFrame(this.animFrame)}draw=()=>{this.setState(e=>({counter:e.counter+1}),()=>{this.animFrame=requestAnimationFrame(this.draw)})};componentDidMount(){this.gradientElementRef.current&&!this.gradientElementRef.current.shadowRoot&&this.gradientElementRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.gradientElementRef.current?.shadowRoot}),this.props.settings.repeat&&this.props["animation-speed"]!==0&&(this.animFrame=requestAnimationFrame(this.draw)),this.props.onLoad&&this.props.onLoad()}onFirstLoad=e=>{}},cz=Mx});var STe,Jd,Rx,Qd,Oae,Dae,kx,Nx,pz,Ox=$(()=>{ke();STe=ve(Ie(),1);Fe();Zr();U5();uz();dz();Br();fe();he||(Rx=new IntersectionObserver(function(t){t.forEach(function(e){let r="inside";e.boundingClientRect.top-e.boundingClientRect.height<0&&!e.isIntersecting?r="above":e.boundingClientRect.top>0&&!e.isIntersecting&&(r="below"),Pt(e.target,"backdropContentViewportChange",{detail:{visible:e.isIntersecting,position:r},target:e.target})})},{root:document,rootMargin:"0px",threshold:[0,1]}),Jd=new IntersectionObserver(function(t){t.forEach(function(e){let r="inside";e.boundingClientRect.top-e.boundingClientRect.height<0&&!e.isIntersecting?r="above":e.boundingClientRect.top>0&&!e.isIntersecting&&(r="below"),Pt(e.target,"backdropWrapperViewportChange",{detail:{visible:e.isIntersecting,position:r},target:e.target})})},{root:document,rootMargin:window.screen.height+"px 0px",threshold:[0,1]}),Qd=new ResizeObserver(t=>{t.forEach(e=>{Pt(e.target,"backdropContentResize",{detail:{width:e.contentRect.width,height:e.contentRect.height},target:e.target})})}));Oae=["wallpaper","gradient","legacy/ripple","legacy/slitscan","legacy/badtv","legacy/gmaps","legacy/halftone","legacy/kaleidoscope","legacy/morphovision","legacy/parallax","legacy/pixelation","legacy/polygon_engine","legacy/refraction","legacy/ripple","legacy/slitscan","legacy/video","legacy/wave"],Dae={wallpaper:lz,gradient:cz},kx={};Oae.forEach(t=>{t.startsWith("legacy")?kx[t]=B5:kx[t]=Dae[t]});Nx=class extends me{constructor(e){super(e),this.backdropRef=_e(),this.backdropWrapperRef=_e(),this.state={loaded:0,wrapperDimensions:{width:800,height:800},dimensions:{width:800,height:800},visibility:{visible:!1,position:"inside"},innerVisibility:{visible:!1,position:"inside"},wrapperVisibility:{visible:!1,position:"inside"},viewportVisibility:{visible:!1,position:"inside"}}}onViewportIntersectionChange=e=>{this.setState({viewportVisibility:e.detail})};onIntersectionChange=e=>{e.target==this.backdropRef.current?this.setState({innerVisibility:e.detail}):this.setState({wrapperVisibility:e.detail})};onResize=e=>{e.target==this.backdropRef.current?this.setState({dimensions:e.detail}):this.setState({wrapperDimensions:e.detail})};render(e,r){let{settings:i,id:n}=this.props,o=kx[i.activeBackdrop];if(!o)return i.activeBackdrop!=="none"&&console.warn(`Error: Selected Backdrop mode "${i.activeBackdrop}" not found`),null;let s=i.backdropSettings?.[i.activeBackdrop]||{},a=s.clipScroll==!0;return S("div",{className:`backdrop ${a?"clip":""}`,ref:this.backdropWrapperRef,children:[S("div",{className:`backdrop-contents ${this.state.visibility.visible?"visible":""} ${this.state.visibility.position} ${this.state.loaded>0?"loaded":""}`,ref:this.backdropRef,style:{"--backdrop-width":this.state.wrapperDimensions.width+"px","--backdrop-height":this.state.wrapperDimensions.height+"px"},children:S(o,{...this.props,wrapperDimensions:this.state.wrapperDimensions,backdropRef:this.backdropRef,id:this.props.id,path:i.activeBackdrop,settings:s,dimensions:this.state.dimensions,visibility:this.state.visibility,inViewport:this.state.viewportVisibility.visible,onLoad:this.onLoad})}),S(Io,{baseNodeRef:this.backdropWrapperRef})]})}onLoad=e=>{let r=this.backdropRef.current.querySelector("[data-backdrop]");r&&r.removeAttribute("style"),e&&(e.preventDefault(),e.stopPropagation()),this.setState(i=>({loaded:i.loaded+1})),setTimeout(()=>{this.fireBackdropLoadComplete()})};fireBackdropLoadComplete=()=>{this.backdropLoadCompleteFired||(this.backdropLoadCompleteFired=!0,window.dispatchEvent(new CustomEvent("backdrop-load-complete",{bubbles:!0,composed:!0,detail:{}})))};componentDidUpdate(e,r){if(this.state.innerVisibility!==r.innerVisibility||this.state.wrapperVisibility!==r.wrapperVisibility){let n=(this.props.settings.backdropSettings?.[this.props.settings.activeBackdrop]||{}).clipScroll==!0;this.setState({visibility:n?{...this.state.wrapperVisibility}:{...this.state.innerVisibility}})}e.settings?.activeBackdrop!==this.props.settings?.activeBackdrop&&this.setState(i=>({loaded:i.loaded-1}))}componentDidMount(){this.backdropRef.current&&(window.dispatchEvent(new CustomEvent("backdrop-load-start",{bubbles:!0,composed:!0,detail:{}})),setTimeout(()=>{this.fireBackdropLoadComplete()},3e3),this.backdropWrapperRef.current.addEventListener("legacy-backdrop-loaded",this.onLoad),Mt(this.backdropRef.current,"backdropContentResize",this.onResize),Mt(this.backdropRef.current,"backdropWrapperViewportChange",this.onIntersectionChange),Mt(this.backdropWrapperRef.current,"backdropContentResize",this.onResize),Mt(this.backdropWrapperRef.current,"backdropWrapperViewportChange",this.onIntersectionChange),Mt(this.backdropRef.current,"backdropContentViewportChange",this.onViewportIntersectionChange),Qd.observe(this.backdropRef.current),Qd.observe(this.backdropWrapperRef.current),Jd.observe(this.backdropWrapperRef.current),Jd.observe(this.backdropRef.current),Rx.observe(this.backdropRef.current))}componentWillUnmount(){this.backdropRef.current&&(this.backdropWrapperRef.current.removeEventListener("legacy-backdrop-loaded",this.onLoad),kt(this.backdropRef.current,"backdropContentResize",this.onResize),kt(this.backdropRef.current,"backdropWrapperViewportChange",this.onIntersectionChange),kt(this.backdropWrapperRef.current,"backdropContentResize",this.onResize),kt(this.backdropWrapperRef.current,"backdropWrapperViewportChange",this.onIntersectionChange),kt(this.backdropRef.current,"backdropContentViewportChange",this.onViewportIntersectionChange),Qd.unobserve(this.backdropRef.current),Qd.unobserve(this.backdropWrapperRef.current),Jd.unobserve(this.backdropWrapperRef.current),Jd.unobserve(this.backdropRef.current),Rx.unobserve(this.backdropRef.current))}},pz=Nx});var si,Oe,ep,hz=$(()=>{si=ve(Ie(),1);Fe();Oe={handledEmbeds:[],embedsIniting:[],embedScriptsCache:{},songKickWidgets:{},embedInitAttempts:new WeakMap,embedChangeObserver:he?null:new MutationObserver(t=>{t.forEach(e=>{e.removedNodes.length>0&&e.target.children.length===0&&Oe.add(e.target);let r=Array.from(e.addedNodes).filter(i=>i?.nodeName==="IFRAME");r.length>0&&(Array.from(e.target.querySelectorAll("iframe")).forEach(i=>{r.includes(i)||i.remove()}),e.target.getAttribute?.("data-type")==="tixtree"&&requestAnimationFrame(()=>{window.iFrameResize?.()}))})}),loadEmbedScript:(t,e)=>{if(Oe.embedScriptsCache[t])return Oe.embedScriptsCache[t];let r=new Promise(i=>{let n=document.createElement("script");n.setAttribute("src",t),n.onload=i,document.head.appendChild(n)});return Oe.embedScriptsCache[t]=r,r},initializeBandsInTown:function(t,e){var r="https://widget.bandsintown.com/main.min.js";e==="v3"&&(r="https://widgetv3.bandsintown.com/main.min.js"),Oe.loadEmbedScript(r).then(function(){BIT.widgetInitializer?t():BIT.onReady=t})},findEmbedsIn:function(t){t&&(si.default.each(t.querySelectorAll("cargo-embed"),Oe.add,Oe),si.default.each(t.querySelectorAll("#tixtree-wrapper"),e=>{e.setAttribute("data-type","tixtree"),Oe.add(e)}),si.default.each(t.querySelectorAll(".tt-widget"),e=>{e.setAttribute("data-type","ticket-tailor"),Oe.add(e)}),si.default.each(t.querySelectorAll(".shopify-buy-frame"),e=>{e.setAttribute("data-type","shopify-buy-frame"),Oe.add(e)}))},add:function(t){if(!(!t||t.nodeType!==Node.ELEMENT_NODE)){var e=t.getAttribute("data-type");if(!(!e||Oe.handledEmbeds.includes(t)&&t.children.length>0)){if(Oe.embedInitAttempts.get(t)===void 0?Oe.embedInitAttempts.set(t,0):Oe.embedInitAttempts.set(t,Oe.embedInitAttempts.get(t)+1),Oe.embedInitAttempts.get(t)>10){console.log("Exceeded max init attempts");return}switch(e){case"tweet":Oe.handleTwitterEmbed(t);break;case"twitter-timeline":Oe.handleTwitterTimelineEmbed(t);break;case"bandsintown":Oe.handleBandsIntownEmbed(t);break;case"songkick":Oe.handleSongkickEmbed(t);break;case"opentable":Oe.handleOpentableEmbed(t);break;case"typeform":Oe.handleTypeFormEmbed(t);break;case"shoprocket":Oe.handleShopRocketEmbed(t);break;case"tixtree":Oe.handleTixTreeEmbed(t);break;case"ticket-tailor":Oe.handleTicketTailorEmbed(t);break;case"shopify-buy-frame":Oe.handleShopifyEmbed(t);break;default:console.log("No method for handling",e,"embed")}}}},handleTwitterEmbed:function(t){var e=t.getAttribute("data-id");!e||e===""||Oe.embedsIniting.includes(t)||(Oe.embedsIniting.push(t),Oe.loadEmbedScript("https://platform.twitter.com/widgets.js").then(()=>{t.innerHTML="",twttr.widgets.createTweet(e,t).then(function(r){r&&(r.setAttribute("contenteditable","false"),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0})),Oe.embedsIniting=Oe.embedsIniting.filter(i=>i!==t)})}),Oe.handledEmbeds.push(t))},handleTwitterTimelineEmbed:function(t){if(!Oe.embedsIniting.includes(t)){Oe.embedsIniting.push(t);try{var e=JSON.parse(t.getAttribute("data-source"))}catch{return}typeof e=="number"&&(e=t.getAttribute("data-source"));var r;if(t.hasAttribute("data-options"))try{r=JSON.parse(t.getAttribute("data-options"))}catch{}Oe.loadEmbedScript("https://platform.twitter.com/widgets.js").then(()=>{t.innerHTML="",twttr.widgets.createTimeline(e,t,r).then(function(i){i&&(i.setAttribute("contenteditable","false"),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0})),Oe.embedsIniting=Oe.embedsIniting.filter(n=>n!==t)})}),Oe.handledEmbeds.push(t)}},handleOpentableEmbed:function(t){if(!t.ownerDocument.contains(t)||Oe.embedsIniting.includes(t))return;Oe.embedsIniting.push(t);let e=document.createElement("opentable-embed-anchor");e.src=t.getAttribute("data-src"),t.appendChild(e),fetch(t.getAttribute("data-src")).then(r=>r.text()).then(r=>{if(Oe.embedsIniting=Oe.embedsIniting.filter(i=>i!==t),!e.ownerDocument.contains(e)){Oe.handleOpentableEmbed(t);return}e.id=si.default.uniqueId("opentable-"),r=r.replaceAll('getElementsByTagName("script")','querySelectorAll("opentable-embed-anchor#'+e.id+'")'),window.eval(r),e.remove(),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0}),Oe.handledEmbeds.push(t)})},handleBandsIntownEmbed:function(t){Oe.initializeBandsInTown(()=>{t.innerHTML="";var e={},r={};si.default.each(t.attributes,function(o){if(/^data-/.test(o.name)&&o.name!=="data-type"){var s=o.name.substr(5).replace(/-/g,"_");e[s]=o.value;var a=s.split("_").map(function(l,p){return p>0?l.charAt(0).toUpperCase()+l.slice(1):l}).join("");r[a]=o.value}});var i=document.createElement("a");if(i.setAttribute("id","bit-widget-"+si.default.uniqueId()),i.setAttribute("class","bit-widget-initializer"),si.default.each(e,function(o,s){i.setAttribute("data-"+s.replace(/_/g,"-"),o)}),t.appendChild(i),zr){var n=new MutationObserver(function(o){si.default.each(o,function(s){s.type=="childList"&&s.addedNodes.forEach(function(a){a&&a.nodeType===Node.ELEMENT_NODE&&(a.setAttribute("contenteditable",!1),a.classList.contains("bit-widget-container")&&(a.style.pointerEvents="none",n.disconnect()))})})});n.observe(t,{childList:!0})}BIT.widgetInitializer.append(i,r),Oe.embedChangeObserver?.observe(t,{childList:!0}),Oe.handledEmbeds.push(t)},t.getAttribute("data-bit-widget-version"))},handleSongkickEmbed:function(t){if(!Oe.embedsIniting.includes(t)){Oe.embedsIniting.push(t);var e={};si.default.each(t.attributes,function(n){if(/^data-/.test(n.name)&&n.name!=="data-type"){var o=n.name.substr(5).replace(/-/g,"_");e[o]=n.value}});var r=document.createElement("a");r.setAttribute("class","songkick-widget"),r.setAttribute("href","https://www.songkick.com/artists/"+e.id),r.setAttribute("contenteditable","false"),si.default.each(e,function(n,o){r.setAttribute("data-"+o.replace(/_/g,"-"),n)}),t.appendChild(r);var i="https://widget-app.songkick.com/injector/"+e.id;Oe.songKickWidgets[e.id]===void 0?Oe.songKickWidgets[e.id]=0:i=i+"?"+ ++Oe.songKickWidgets[e.id],Oe.loadEmbedScript(i).then(()=>{Oe.embedsIniting=Oe.embedsIniting.filter(n=>n!==t),t.children.length===0&&Oe.add(t)}),Oe.embedChangeObserver?.observe(t,{childList:!0}),Oe.handledEmbeds.push(t)}},handleTypeFormEmbed:function(t){Oe.embedsIniting.includes(t)||(Oe.embedsIniting.push(t),Oe.loadEmbedScript("https://embed.typeform.com/next/embed.js").then(()=>{if(t.dataset.embed)t.innerHTML=si.default.unescape(t.dataset.embed),window.tf.load();else{let e={};si.default.each(t.attributes,function(r){r.name.startsWith("data-tf")&&(e[si.default.camelCase(r.name.replace("data-tf",""))]=r.value)}),e.container=t,delete e.iframeProps,t.innerHTML="",window.tf.createWidget(e.widget||e.live,e),t.children[0]?.setAttribute("style",t.getAttribute("data-style")),setTimeout(()=>{t.children[0]?.setAttribute("style",t.getAttribute("data-style"))},100),setTimeout(()=>{t.children[0]?.setAttribute("style",t.getAttribute("data-style"))},1e3)}Oe.embedsIniting=Oe.embedsIniting.filter(e=>e!==t)}),Oe.embedChangeObserver?.observe(t,{childList:!0}),Oe.handledEmbeds.push(t))},handleShopRocketEmbed:function(t){Oe.embedsIniting.includes(t)||!t.dataset.embed||(Oe.embedsIniting.push(t),Oe.loadEmbedScript("https://cdn.shoprocket.io/loader.js").then(()=>{if(zr){var e=new MutationObserver(function(r){si.default.each(r,function(i){i.type=="childList"&&i.addedNodes.forEach(function(n){n&&n.nodeType===Node.ELEMENT_NODE&&(n.setAttribute("contenteditable",!1),n.classList.contains("sr-embed")&&(n.style.pointerEvents="none",e.disconnect()))})})});e.observe(t,{childList:!0})}t.innerHTML=si.default.unescape(t.dataset.embed),window.Shoprocket?.init(),Oe.embedsIniting=Oe.embedsIniting.filter(r=>r!==t)}),Oe.embedChangeObserver?.observe(t,{childList:!0}),Oe.handledEmbeds.push(t))},handleTixTreeEmbed:function(t){Oe.handledEmbeds.push(t),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0})},handleTicketTailorEmbed:function(t){Oe.handledEmbeds.push(t),Array.from(t.querySelectorAll(".tt-widget-wrapper")).forEach(e=>e.remove())},handleShopifyEmbed:function(t){t.setAttribute("contenteditable","false"),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0}),Oe.handledEmbeds.push(t)},remove:function(){}},ep=Oe});var fz,zTe,Dx,Hu,cg=$(()=>{ke();fz=ve(kn(),1);Zs();xr();mt();tr();zTe=ve(Ie(),1);fe();Dx=class extends me{constructor(e){super(e),this.state={error:!1}}render(e){return S(de,{children:[S("style",{children:`
					.pages > .page:only-child,
					.pages :has(.page-password) > .page:only-child {
						min-height: var(--viewport-height);
					}
					
					.pages > .page:only-child .page-content,
					.pages :has(.page-password) > .page:only-child .page-content {
						align-items: center;
					}

					.site-password,
					.page-password {
						text-align: center;
						margin: auto;
						height: 0;
						width: 340px;
						display: table;
					}

					.site-password {
						position: fixed;
						top: 0;
						bottom: 0;
						left: 0;
						right: 0;
					}

					.error {
					    transform: translate(0, 20px);
					    position: absolute;
					    width: 100%;
					    text-align: center;
					    left: 0;
					    color: rgba(0,0,0,0.75);
					    user-select: none;
					}

					.submit-wrapper {
						display: grid;
						grid-template-columns: auto 40px;
						border-radius: 100px;
					    border: 1px solid rgba(0,0,0,0.75);
						grid-gap: 5px;
						background: #fff;
					}

					.button-area {
						position: relative;
						width: 40px;
						justify-content: center;
						align-items: center;
						display: flex;
						cursor: pointer;
					}

					.submit-button {
						display: block;
						width: 36px;
						height: 36px;
						border-radius: 50%;
						background: #000;
						transform-origin: 50% 50%;
						transform: scale(1);
						border: none;
						background-image: url("data:image/svg+xml,%3Csvg width='21' height='19' viewBox='0 0 21 19' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11.8438 1.9375L19.3438 9.4375L11.8438 16.9375' stroke='%23fff' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M19.3437 9.4375L1.40625 9.4375' stroke='%23fff' stroke-width='2.5' stroke-linecap='round'/%3E%3C/svg%3E%0A");
						background-position: 46% 50%;
						background-repeat: no-repeat;
						background-size: 17px 17px;
						pointer-events: auto;
						cursor: pointer;
						margin-right: 1px;
						padding: 0;
					}

					.submit-button:active {
						opacity: 0.7;
					}


					input[type="password"] {
						border-radius: 100px;
					    border: none;
						padding: 10px 0px 10px 20px;
					    font-size: 14px;
					    font-family: Helvetica;
					    font-size: 18px;
					    font-style: normal;
					    font-weight: 400;
					    line-height: 21px;
					    letter-spacing: -0.004em;
					    text-align: left;
						width: auto;
					}

					input[type="password"]:placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]::-webkit-input-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]::-moz-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]:-moz-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
	            `}),S("div",{className:this.props.target==="site"?"site-password":"page-password",children:[S("form",{onSubmit:this.submit,class:"submit-wrapper",children:[S("input",{name:"pw",type:"password",placeholder:"Enter password...",autofocus:"true",onKeyDown:this.onKeyDown}),S("div",{className:"button-area",children:S("button",{className:"submit-button",type:"submit"})})]}),this.state.error&&S("span",{class:"error",children:"Invalid password"})]})]})}onKeyDown=e=>{this.state.error&&this.setState({error:!1})};submit=e=>{e.preventDefault();let r;this.props.target==="site"?r=`/sites/${this.props.siteId}/validatepassword`:r=`/pages/${this.props.siteId}/id/${this.props.target}/validatepassword`,fz.default.post(sr+r,{[this.props.target==="site"?"site_password":"password"]:e.target.elements.pw.value}).then(({data:i})=>{if(!i.token){this.setState({error:!0});return}this.setState({error:!1}),this.props.setAuthentication({authenticated:!0,data:{access_token:i.token,id:null}}),this.props.onSucces?.()}).catch(i=>{console.error(i),this.setState({error:!0})})}},Hu=Ue((t,e)=>({siteId:t.site.id}),t=>Bt({setAuthentication:Ye.setAuthentication},t))(Dx)});var Lx,mz,gz=$(()=>{ke();Ze();ms();Rr();Dt();Dt();fe();Lx=class extends me{constructor(e){super(e),this.state={hover:!1,buttonHovered:!1},this.editPageButtonRef=_e(),this.layoutButtonRef=_e(),CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents)}editorIsEmpty=(e,r)=>{requestAnimationFrame(()=>{this.setState({showEmpty:this.props.isEditingPage})})};editorHasContent=(e,r)=>{this.setState({showEmpty:!1})};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.CargoEditor=CargoEditor,this.CargoEditor.events.on("editor-no-content",this.editorIsEmpty),this.CargoEditor.events.on("editor-has-content",this.editorHasContent)};componentWillUnmount=()=>{this.CargoEditor&&(this.CargoEditor.events.off("editor-no-content",this.editorIsEmpty),this.CargoEditor.events.off("editor-has-content",this.editorHasContent))};onButtonEnter=()=>{this.setState({hover:!0})};onButtonLeave=()=>{this.setState({hover:!1})};launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.layoutButtonRef.current.getBoundingClientRect(),i={x:r.x+0,y:r.y+-212,left:r.left+0,right:r.right+0,top:r.top+0+-212,bottom:r.top+27+-212,width:r.width,height:r.height};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"layouttemplate",supportsMobile:!0,positionRect:i,closeButton:!1,closeOnAllClickout:!1})};render(e){let r=this.props.isEditingPage,i=this.props.pageIsPin,n=this.state.showEmpty,o=23;return S(Ei,{isEditingPage:r,name:"EditPageButton",trackResize:!0,noPointerEvents:!0,buttonHeight:o,buttonMode:"outside",baseNode:this.props.bodycopyRef.current,render:s=>{let{pointerAttention:a,overlayPosition:l,shiftButtonX:p,shifted:f}=s,c=-o,m=-2;return l.y<=o&&(c=Math.max(0,-l.y),m=0,c>l.height&&(m=-2,c=l.height+1)),r&&n||r?null:S(de,{children:[S("div",{className:`in-editor-buttons page${a?" hover button-hover":""} ${f?"shifted":""}`,style:{transform:`translate3d(${m+l.x}px, ${c+l.y}px, 0)`},children:S("div",{className:"pointer-mask",style:{transform:`translateX(${p}px)`},children:S("button",{className:"edit-page text",onMouseDown:v=>{v.button==2||v.metaKey||this.props.editPage(v)},ref:this.editPageButtonRef,children:[S("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 16H6V4H10.9875V8.09705H15V16ZM16 7.64491L11.4226 3H5V17H16V7.64491Z",fill:"black"})}),this.props.pageTitle]})})}),S("div",{className:`editor-overlay editor-outline page-outline${a?" hover button-hover":""}${this.state.showEmpty?" hover":""}`,style:{width:l.width+"px",height:l.height+"px",transform:`translate3d(${l.x}px, ${l.y}px, 0)`}})]})}})}},mz=Lx});function zae(t,e){let r={};for(let i in e)r[i]=t.style.getPropertyValue(i),t.style.setProperty(i,"unset");t.offsetHeight;for(let i in e)t.style.setProperty(i,r[i])}function bz(){let t=document.querySelectorAll(".page");for(let e of t){let r=window.getComputedStyle(e),i=r.getPropertyValue("--page-layout-mix"),n=r.getPropertyValue("--page-mix");(n.length||i.length)&&zae(e,{"--page-mix":n,"--page-layout-mix":i})}}function Bae(t){return Bt({pageMounted:Ye.pageMounted,pageUnMounted:Ye.pageUnMounted,updateFrontendState:Ye.updateFrontendState,fetchContent:Ye.fetchContent,fetchCommerceProducts:Ye.fetchCommerceProducts},t)}var Ci,ca,dg,tp,pg,gs,Fx,hg,zx,Bx,vz,Wu,yz,Lae,Fae,fg,Uae,da,mg=$(()=>{ke();xr();mt();tr();Ci=ve(Ie(),1);_r();Pd();Ur();Po();Zr();sl();qr();Ox();hz();Fe();cg();gz();_i();Ja();fe();ca=new WeakMap,dg=new WeakMap,tp=new WeakMap,pg=new WeakMap,vz=null,Wu=null,yz=t=>{t.forEach(function(e){ca.has(e.target)&&ca.get(e.target).onAboveViewPort(e)})},Lae=Ci.default.once(()=>{let t=document.implementation.createDocument("http://www.w3.org/1999/xhtml","body",null),e=document.createElement("style");return t.children[0].appendChild(e),e}),Fae=t=>{let e=Lae();return t!==vz&&(e.innerHTML=t,vz=t),e};he||(gs=new ResizeObserver(function(t){Ui()&&(Wu===null?Wu=window.innerWidth:Wu!==window.innerWidth&&(Wu<2050&&window.innerWidth>=2050&&bz(),Wu>=2050&&window.innerWidth<2050&&bz(),Wu=window.innerWidth));let e={};yz(hg.takeRecords()),t.forEach(function(r){let i=ca.get(r.target);if(i&&(i.onResize(r.target.getBoundingClientRect()),e[i.props.id]=r.contentRect.height),dg.has(r.target)&&dg.get(r.target).onBodyCopyResize(r.contentRect.width),tp.has(r.target)||pg.has(r.target)){var n=window.getComputedStyle(r.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-bottom"))+parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("border-bottom"));if(tp.has(r.target)){let a=tp.get(r.target);(a.state.pageContentPad.top!==o||a.state.pageContentPad.bottom!==s)&&a.setState({pageContentPad:{top:o,bottom:s}})}else{let a=pg.get(r.target);(a.state.pageLayoutPad.top!==o||a.state.pageLayoutPad.bottom!==s)&&a.setState({pageLayoutPad:{top:o,bottom:s}})}}}),B0(e)}),hg=new IntersectionObserver(yz,{root:document,rootMargin:"0px 0px 0px 0px",threshold:[0,1]}),zx=new IntersectionObserver((t,e)=>{t.forEach(function(r){ca.has(r.target)&&ca.get(r.target).onViewportBoundaryIntersection(r)})},{root:document,rootMargin:Math.max(screen.height*6,2500)+"px",threshold:[0,1]}),Bx=new IntersectionObserver((t,e)=>{t.forEach(r=>{r.isIntersecting&&window.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{lastVisiblePid:r.target.id}})})},{root:null,rootMargin:"-20% 0px -80% 0px",threshold:[0,1]}),Fx=new MutationObserver(function(t){Ci.default.each(t,function(e){e.type=="childList"&&e.addedNodes.forEach(function(r){r.nodeName==="CARGO-EMBED"&&ep.add(r)})})}));fg=class extends me{constructor(e){super(e),this.overlayContentRef=_e(),this.bodycopyRef=_e(),this.pageContentRef=_e(),this.pageRef=_e(),this.pageLayoutRef=_e(),this.lastBodycopyRef=_e(),this.lastPageContentRef=_e(),this.lastPageRef=_e(),this.lastPageLayoutRef=_e(),this.lastHeight=0,this.state={resizeParentWidth:"100%",mobileOffsetsString:null,pageContentPad:{top:0,bottom:0},pageLayoutPad:{top:0,bottom:0},windowHeight:null,fullyRender:!0,lastPageContainerHeight:100,overlayContentFromTransformValue:null,overlayContentToTransformValue:null},this.localStyleRef=_e()}setOverlayContentTransformValues=()=>{let e=this.overlayContentRef.current?.getBoundingClientRect();if(!e)return;let r=this.pageContentRef.current?.getBoundingClientRect();if(!r)return;let i=0,n=0,o=this.props.overlayOptions?.animateOnOpen?.slideAmount/100,s=this.props.overlayOptions?.animateOnClose?.slideAmount/100;if(this.props.overlayOptions?.animateOnOpen?.speed!==0)switch(this.props.overlayOptions?.animateOnOpen?.slideDirection){case"bottom":i=(r.height+(e.height-r.bottom))*o;break;case"top":i=-r.bottom*o;break;case"right":i=(r.width+(e.width-r.right))*o;break;case"left":i=-r.right*o;break}if(this.props.overlayOptions?.animateOnClose?.speed!==0)switch(this.props.overlayOptions?.animateOnClose?.slideDirection){case"bottom":n=(r.height+(e.height-r.bottom))*s;break;case"top":n=-r.bottom*s;break;case"right":n=(r.width+(e.width-r.right))*s;break;case"left":n=-r.right*s;break}if(this.state.overlayContentFromTransformValue!==i&&this.state.overlayContentToTransformValue!==n){this.setState({overlayContentFromTransformValue:i,overlayContentToTransformValue:n});return}if(this.state.overlayContentFromTransformValue!==i){this.setState({overlayContentFromTransformValue:i});return}if(this.state.overlayContentToTransformValue!==n){this.setState({overlayContentToTransformValue:n});return}};setMobileOffsets=()=>{if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}let e=["ul","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","small-caps"];if(!this.localStyleRef.current)return;let r=Fae(this.props.globalStylesheet),i=!1;r.sheet&&Ci.default.each(r.sheet.rules,o=>{o?.selectorText===".mobile [id] .page-layout"&&o?.style?.getPropertyValue("padding")==="0px"&&(i=!0)}),i&&e.push(`[id="${this.props.pid}"] .page-layout`);let n=su(this.localStyleRef.current.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:e}]);this.setState({mobileOffsetsString:n})};onBodyCopyResize=e=>{this.lastWidth!==e&&(this.setState({resizeParentWidth:e+"px"}),this.lastWidth=e)};onWindowResize=e=>{this.setState(r=>r.windowHeight===nt.data.window.h?null:{windowHeight:nt.data.window.h})};onResize=e=>{if(!e)return;let r=0;if(this.isAboveViewport&&this.lastHeight!==e.height&&(r+=e.height-this.lastHeight),this.lastHeight=e.height,r!==0){let i=document.scrollingElement.scrollTop+r;document.scrollingElement.scrollTo({top:i,behavior:"instant"})}};onAboveViewPort=e=>{e.rootBounds.height!==0&&(this.isAboveViewport=e.boundingClientRect.bottom<0)};onViewportBoundaryIntersection=e=>{if(e.rootBounds.height===0)return;let r=e.isIntersecting;(he||this.props.isPin||this.props.isEditingPage)&&(r=!0),this.setFullRenderState(r)};setFullRenderState=e=>{let r={fullyRender:e,renderSparseHeightDiv:!e};e?this.state.fullyRender!==!0&&(r.renderSparseHeightDiv=!0,setTimeout(()=>{this.state.fullyRender===!0&&this.setState({renderSparseHeightDiv:!1})},100)):r.lastPageContainerHeight=this.pageRef.current?.getBoundingClientRect().height||100,this.setState(r)};updateAdminState=e=>{this.props.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:e})};zIndexLayerPosition=e=>e?.toString().padStart(2,"0");findPageAdjusteeStatus=e=>{let r={top:null,bottom:null},i=Ci.default.pickBy(this.context?.adjustPairs,n=>n.adjusts.indexOf(this.props.pid)!==-1);return Ci.default.keys(i).length>0&&Ci.default.each(i,function(n){r[n.location]=n.adjustedHeight}),r};determinePinCSS=()=>{if(he||this.props.isOverlay||Ci.default.isEmpty(this.context.levelData))return;let e=1,r={},i=this.context?.renderedPins&&this.props.isPin,n=this.findPageAdjusteeStatus(this.props.pid);if(r.paddingTop=n.top,r.paddingBottom=n.bottom,i){let o=this.context?.renderedPins[this.props.pid];if(o){let s=o.depth,a=Ci.default.keys(this.context.levelData?.levels)?.length+e,l=a-s+e,p=l+this.zIndexLayerPosition(100-o?.pinSort);if(r.zIndex=o.type!=="adjust"?p??null:null,localStorage.getItem("pin_testing")==="true"){let c={old_zIndex:l+this.zIndexLayerPosition(100-o?.sort),new_zIndex:p,pid:this.props.pid,pageList_sort:o?.sort,renderedPageSort:o?.pinSort};console.log(c)}let f=this.context.levelData?.levels[s][o.location];o.type==="overlay"?r[o.location]=f.startingHeight-n[o.location]:o.type==="adjust"&&n[o.location]!==null&&(r[o.location]=f.adjustsSelf?null:f.startingHeight-n[o.location])}}return r["--pin-padding-top"]=(r.paddingTop||0)+"px",r["--pin-padding-bottom"]=(r.paddingBottom||0)+"px",Ci.default.isEmpty(r)?null:r};getAdjustOnlyPinStartHeight=(e,r,i)=>{let n=0;return Ci.default.each(this.context.renderedPins,(o,s)=>{o.depth===e&&o.location===i&&(i==="top"?o.sort<r:o.sort>r)&&o.type==="adjust"&&(n+=this.context.pageHeights[s])}),n};determinePinClassList(e){if(!e||this.props.isOverlay)return"";let r=null;if(this.props.isMobile){let n=this.props?.local_css?.match(/--mobile-pin-options: (.*);/);r=n?n[1].replace(/['"]+/g,"").split(" "):null}let i="";return i+=" pinned pinned-"+e.position,r?i+=r.includes("fixed")?" fixed":r.includes("overlay")?" overlay":"":i+=e.fixed?" fixed":e.overlay?" overlay":"",i}editPage=e=>{if(e.preventDefault(),parent.window.Cargo?.Ecommerce?.View?.currentView?.saveButton?.saveEnabled===!0||parent.window.Cargo?.Ecommerce?.View?.currentView?.SaveButton?.saveEnabled===!0){parent.window.dispatchEvent(new CustomEvent("navigate-after-commerce-save",{detail:{pid:this.props.pid}}));return}parent.editorActivationEvent=e,parent.navigateAdmin("/"+this.props.pid),this.updateAdminState({pageTitleBarTransition:!0}),setTimeout(()=>{this.updateAdminState({pageTitleBarTransition:!1})},600)};getPageInfoContextValue(){return(this.props.isEditingPage!==this.lastProps?.isEditingPage||this.props.pid!==this.lastProps?.pid)&&(this.pageInfoContextValue={isEditing:this.props.isEditingPage,pid:this.props.pid}),this.lastProps=this.props,this.pageInfoContextValue}render(){if(!this.props.hasPage||he&&this.props.access_level!=="public")return null;let e=this.props.backdrops?.activeBackdrop&&this.props.backdrops?.activeBackdrop!="none",r=this.props.isPin&&this.props.pin_options,i=r?this.props.pin_options:null,n=null,o=null,s=this.determinePinCSS(),a=this.determinePinClassList(i),l={};this.props?.local_css?.includes("--page-layout-mix:")&&!this.props?.local_css?.includes("--page-layout-mix: normal")?l["--page-content-backdrop-filter"]="none":l["--page-content-backdrop-filter"]="";let p={},f="";if(this.props.isOverlay===!0){let m="translate3d(0, 0, 0)";switch(this.props.overlayOptions?.animateOnOpen?.slideDirection){case"bottom":m=`translate3d(0, ${this.state.overlayContentFromTransformValue}px, 0)`;break;case"top":m=`translate3d(0, ${this.state.overlayContentFromTransformValue}px, 0)`;break;case"right":m=`translate3d(${this.state.overlayContentFromTransformValue}px, 0, 0)`;break;case"left":m=`translate3d(${this.state.overlayContentFromTransformValue}px, 0, 0)`;break}if(this.props.overlayOptions?.animateOnOpen?.scaleAmount){let P=1-Number(this.props.overlayOptions?.animateOnOpen?.scaleAmount)/100;m+=` scale(${P})`}this.props.overlayOptions?.animateOnOpen?.rotateAmount&&(m+=` rotate(${Number(this.props.overlayOptions?.animateOnOpen?.rotateAmount)*-1}deg)`);let v="translate3d(0, 0, 0)";switch(this.props.overlayOptions?.animateOnClose?.slideDirection){case"top":v=`translate3d(0, ${this.state.overlayContentToTransformValue}px, 0)`;break;case"bottom":v=`translate3d(0, ${this.state.overlayContentToTransformValue}px, 0)`;break;case"left":v=`translate3d(${this.state.overlayContentToTransformValue}px, 0, 0)`;break;case"right":v=`translate3d(${this.state.overlayContentToTransformValue}px, 0, 0)`;break}if(this.props.overlayOptions?.animateOnClose?.scaleAmount){let P=1-Number(this.props.overlayOptions?.animateOnClose?.scaleAmount)/100*-1;v+=` scale(${P})`}this.props.overlayOptions?.animateOnClose?.rotateAmount&&(v+=` rotate(${this.props.overlayOptions?.animateOnClose?.rotateAmount}deg)`);let g="none";switch(this.props.overlayOptions?.animateOnOpen?.wipeShape){case"right":g="inset(0 0 0 100%)";break;case"left":g="inset(0 100% 0 0)";break;case"top":g="inset(0 0 100% 0)";break;case"bottom":g="inset(100% 0 0 0)";break;case"circle":g="circle(0%)";break;case"diamond":g="polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%)";break;case"square":g="inset(100% 100% 100% 100%)";break}let x="none";switch(this.props.overlayOptions?.animateOnClose?.wipeShape){case"right":case"left":case"top":case"bottom":x="inset(0 0 0 0)";break;case"circle":x="circle(125%)";break;case"diamond":x="polygon(-50% 50%, 50% -50%, 150% 50%, 50% 150%)";break;case"square":x="inset(0 0 0 0)";break}let _="none";switch(this.props.overlayOptions?.animateOnOpen?.wipeShape){case"right":case"left":case"top":case"bottom":_="inset(0 0 0 0)";break;case"circle":_="circle(125%)";break;case"diamond":_="polygon(-50% 50%, 50% -50%, 150% 50%, 50% 150%)";break;case"square":_="inset(0 0 0 0)";break}let E="none";switch(this.props.overlayOptions?.animateOnClose?.wipeShape){case"left":E="inset(0 0 0 100%)";break;case"right":E="inset(0 100% 0 0)";break;case"bottom":E="inset(0 0 100% 0)";break;case"top":E="inset(100% 0 0 0)";break;case"circle":E="circle(0%)";break;case"diamond":E="polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%)";break;case"square":E="inset(100% 100% 100% 100%)";break}let L="linear";switch(this.props.overlayOptions?.animateOnOpen?.easing){case"ease-in":L="ease-in";break;case"ease-out":L="ease-out";break;case"ease-in-out":L="ease-in-out";break;case"bounce":L="cubic-bezier(.47,1.64,.41,.8)";break;case"elastic":L="cubic-bezier(.2,.69,.41,1.12)";break;case"hesitate":L="cubic-bezier(0,.8,1,0)";break;case"smooth":L="cubic-bezier(.240,1,.290,1.0)";break;case"linear":default:L="linear";break}let O="linear";switch(this.props.overlayOptions?.animateOnClose?.easing){case"ease-in":O="ease-in";break;case"ease-out":O="ease-out";break;case"ease-in-out":O="ease-in-out";break;case"smooth":O="cubic-bezier(.240,1,.290,1.0)";break;case"bounce":O="cubic-bezier(.47,1.64,.41,.8)";break;case"elastic":O="cubic-bezier(.2,.69,.41,1.12)";break;case"hesitate":O="cubic-bezier(0,.8,1,0)";break;case"linear":default:O="linear";break}p={"--overlay-open-duration":this.props.overlayOptions?.animateOnOpen?.speed?`${this.props.overlayOptions?.animateOnOpen?.speed}s`:"0s","--overlay-open-from-opacity":this.props.overlayOptions?.animateOnOpen?.fade?0:1,"--overlay-open-from-background-color":this.props.overlayOptions?.animateOnOpen?.fade?"inherit":"transparent","--overlay-open-content-from-transform":m,"--overlay-open-content-from-clip-mask":g,"--overlay-open-content-to-clip-mask":_,"--overlay-close-duration":this.props.overlayOptions?.animateOnClose?.speed?`${this.props.overlayOptions?.animateOnClose?.speed}s`:"0s","--overlay-close-to-opacity":this.props.overlayOptions?.animateOnClose?.fade?0:1,"--overlay-close-to-background-color":this.props.overlayOptions?.animateOnClose?.fade?"inherit":"transparent","--overlay-close-content-to-transform":v,"--overlay-close-content-from-clip-mask":x,"--overlay-close-content-to-clip-mask":E,"--overlay-open-easing":L,"--overlay-close-easing":O,opacity:this.state.overlayContentFromTransformValue!==null?void 0:0,zIndex:999}}if(this.state.fullyRender){let m=this.props.contentPad.top+this.state.pageLayoutPad.top+this.state.pageContentPad.top+this.state.pageContentPad.bottom+this.state.pageLayoutPad.bottom+this.props.contentPad.bottom;s&&(s.paddingTop&&(m+=s.paddingTop),s.paddingBottom&&(m+=s.paddingBottom));let v=Math.max(10,this.state.windowHeight-m),g=null;this.props.access_level==="password"?g=S(Hu,{target:this.props.pid,onSucces:()=>{this.props.fetchContent(this.props.pid,{force:!0})}}):this.hasOwnProperty("lockedContent")?g=this.lockedContent:g=this.lockedContent=this.props.content,this.maxFitHeight=v;let x=S("bodycopy",{style:{"--fit-height":v+"px","--resize-parent-width":this.state.resizeParentWidth},ref:this.bodycopyRef,dangerouslySetInnerHTML:typeof g=="string"?{__html:g}:void 0,children:Fc(g)?g:null});o=S(jf,{pageRef:this.pageRef,value:this.getPageInfoContextValue(),children:S("div",{className:"page-layout",ref:this.pageLayoutRef,children:S("div",{className:`page-content${this.props?.local_css?.includes("--page-content-backdrop-filter")?" has-content-backdrop-filter":""}`,ref:this.pageContentRef,style:l,children:[this.props.adminMode&&this.props.Editor_PageEditorOutlines!==!1&&S(mz,{bodycopyRef:this.bodycopyRef,pageTitle:this.props.title,pageContent:this.props.content,pageIsPin:this.isPinned,isEditingPage:this.props.isEditingPage,editPage:this.editPage}),S(Jm,{pageInfo:this.getPageInfoContextValue(),adminMode:this.props.adminMode,bodycopyRef:this.bodycopyRef,children:[S(Io,{portalHost:x}),x]})]})})})}let c=!0;return(i?.fixed||this.props.isOverlay)&&(c=!1),this.state.renderSparseHeightDiv&&(s=s||{},s.height=this.state.lastPageContainerHeight+"px",s.overflow="hidden"),n=S("div",{id:this.props.pid,"page-url":this.props.purl?.toLowerCase(),className:`page${a!==null?a:""}${this.props.stackedPage?" stacked-page":""}${this.props?.local_css?.includes("--page-backdrop-filter")?" has-backdrop-filter":""}`,ref:this.pageRef,style:{...s},editing:this.props.isEditingPage,children:[e&&S(pz,{id:this.props.pid,settings:this.props.backdrops}),S("a",{id:this.props.purl}),S(du,{passthrough:c,scrollingElement:this.props.isOverlay?this.overlayContentRef:this.pageContentRef,children:[this.state.renderSparseHeightDiv&&S("div",{style:{height:this.state.lastPageContainerHeight+"px"}}),o]}),S("style",{ref:this.localStyleRef,dangerouslySetInnerHTML:{__html:this.props.local_css}}),S("style",{id:`mobile-offset-styles-${this.props.pid}`,dangerouslySetInnerHTML:{__html:this.state.mobileOffsetsString}})]}),this.props.isOverlay===!0?S("div",{ref:this.overlayContentRef,className:"overlay-content "+f,style:p,children:n}):n}componentDidUpdate=(e,r)=>{this.bindObservers(),this.setPinProperties(e),this.props.isOverlay===!0&&(this.setOverlayScrollability(),this.state.overlayContentFromTransformValue!==null&&this.overlayContentRef?.current?.classList.contains("overlay-open")===!1&&this.props.overlayOptions?.animateOnOpen!==!1&&this.props.overlayOptions?.animateOnOpen?.speed!==0&&(this.overlayContentRef?.current?.classList.add("overlay-open"),this.overlayContentRef?.current?.classList.add("overlay-animating"))),e.content===void 0&&this.props.content!==e.content&&(this.checkAndSetActiveLinks(),this.fetchCommerceProductsByLink(),ep.findEmbedsIn(this.pageRef.current)),this.state.fullyRender===!0&&r.fullyRender===!1?this.onFullComponentRender():this.state.fullyRender===!1&&r.fullyRender===!0&&this.onSparseComponentRender(),(e.activePURL!==this.props.activePURL||e.hashPurl!==this.props.hashPurl||e.activePID!==this.props.activePID||e.adminMode!==this.props.adminMode)&&(this.checkAndSetActiveLinks(),this.temporarySafariRenderingFix()),this.props.local_css!==e.local_css&&this.setMobileOffsets(),this.props.globalStylesheet!==e.globalStylesheet&&this.setMobileOffsets(),e.isMobile!==this.props.isMobile&&this.setMobileOffsets(),this.props.position!==e.position&&(this.isAboveViewport=this.props.position==="above",this.onResize(this.pageRef.current.getBoundingClientRect()))};shouldComponentUpdate(e,r,i){return!(this.props===e&&this.state===r&&this.context===i||this.hasOwnProperty("lockedContent")&&this.props.content!==e.content&&Vf({...this.props,content:null},{...e,content:null})&&this.state===r&&this.context===i)}setPinProperties=e=>{if(this.props.isPin&&this.pageRef.current){if(this.props.adminMode&&Ci.default.isEqual(this.props.pin_options,e.pin_options)===!1){if(window.PRESERVE_SCROLL_ON_NEXT_NAVIGATION){window.PRESERVE_SCROLL_ON_NEXT_NAVIGATION=!1;return}if(this.pageRef.current.scrollIntoView(),this.props.pin_options.position==="bottom"){let r=this.context.adjustPairs[this.props.pid];if(r&&r.adjusts){let i=document.body.querySelector("[id='"+r.adjusts[0]+"']");requestAnimationFrame(()=>{i.scrollIntoView({block:"end"})})}}}this.props.pin_options.fixed===!0&&this.setFixedPinScrollability(),this.props.pin_options.overlay===!0&&this.props.local_css!==""&&this.checkBackgroundColor()}};checkBackgroundColor=Ci.default.debounce(()=>{if(!this.pageRef.current)return;!(this.props.backdrops?.activeBackdrop&&this.props.backdrops?.activeBackdrop!="none")&&this.hasNoBackgroundColor(this.pageRef.current)?this.pageRef.current.classList.remove("accepts-pointer-events"):this.pageRef.current.classList.add("accepts-pointer-events");let r=this.pageRef.current?.querySelector(".page-content");this.hasNoBackgroundColor(r)?r.classList.remove("accepts-pointer-events"):r.classList.add("accepts-pointer-events")},100);hasNoBackgroundColor=e=>{if(e==null)return!1;let r=window.getComputedStyle(e,null),i=r.getPropertyValue("background-color"),n=i.match("rgba")?i.replace(/^.*,(.+)\)/,"$1"):null;return i==null||i=="transparent"||i=="initial"||n==0};setFixedPinScrollability=()=>{if(!this.pageRef.current)return;let e=this.pageContentRef.current,r=this.bodycopyRef.current;e&&r&&r.clientHeight>e.clientHeight?this.pageRef.current.classList.add("allow-scroll"):this.pageRef.current.classList.remove("allow-scroll")};setOverlayScrollability=()=>{this.overlayContentRef.current&&(this.overlayContentRef.current.scrollHeight>this.overlayContentRef.current.offsetHeight+1?this.overlayContentRef.current.classList.add("overlay-allow-scroll"):this.overlayContentRef.current.classList.remove("overlay-allow-scroll"))};checkAndSetActiveLinks=e=>{if(!this.pageRef.current)return;let r=e?.detail?.filter;r?.startsWith("tag:")?r=r.replace("tag:","").trim():r?r="all":r=null;let i=this.props.inAdminFrame&&this.props.adminMode===!0;if(this.props.isEditingPage&&!i)return;let n=this.pageRef.current.querySelectorAll('[rel="history"], [rel="filter-index"], [rel="home-page"]'),o=this.props.activePURL===this.props.homepagePURL||this.props.activePID==="root";Ci.default.each(n,s=>{let a=s.getAttribute("href")?.toLowerCase().replace(/^#/,""),l=this.props.homepagePURL===a||s.getAttribute("rel")==="home-page",p=this.props.activePURL&&a===this.props.activePURL||this.props.hashPurl&&a===this.props.hashPurl||this.props.activePurlParents?.includes(a);!i&&p&&!l?s.classList.add("active"):s.classList.remove("active"),!i&&l&&this.props.enableHomeLinkActiveStates&&(o?s.classList.add("active"):s.classList.remove("active"))})};bindObservers=(e=!1)=>{(this.pageRef.current!==this.lastPageRef.current||e)&&(this.lastPageRef.current&&(ca.delete(this.lastPageRef.current),gs.unobserve(this.lastPageRef.current),hg.unobserve(this.lastPageRef.current),zx.unobserve(this.lastPageRef.current),Bx.unobserve(this.lastPageRef.current)),this.pageRef.current&&!e&&(ca.set(this.pageRef.current,this),gs.observe(this.pageRef.current),hg.observe(this.pageRef.current),zx.observe(this.pageRef.current),Bx.observe(this.pageRef.current)),this.lastPageRef.current=this.pageRef.current),(this.pageLayoutRef.current!==this.lastPageLayoutRef.current||e)&&(this.lastPageLayoutRef.current&&(pg.delete(this.lastPageLayoutRef.current),gs.unobserve(this.lastPageLayoutRef.current)),this.pageLayoutRef.current&&!e&&(pg.set(this.pageLayoutRef.current,this),gs.observe(this.pageLayoutRef.current)),this.lastPageLayoutRef.current=this.pageLayoutRef.current),(this.pageContentRef.current!==this.lastPageContentRef.current||e)&&(this.lastPageContentRef.current&&(tp.delete(this.lastPageContentRef.current),gs.unobserve(this.lastPageContentRef.current)),this.pageContentRef.current&&!e&&(tp.set(this.pageContentRef.current,this),gs.observe(this.pageContentRef.current)),this.lastPageContentRef.current=this.pageContentRef.current),(this.bodycopyRef.current!==this.lastBodycopyRef.current||e)&&(this.lastBodycopyRef.current&&(this.lastBodycopyRef.current.removeEventListener("filter-thumbnail-index",this.checkAndSetActiveLinks),this.lastBodycopyRef.current.removeEventListener("new-thumbnails-rendered",this.checkAndSetActiveLinks),dg.delete(this.lastBodycopyRef.current),gs.unobserve(this.lastBodycopyRef.current)),this.bodycopyRef.current&&!e&&(dg.set(this.bodycopyRef.current,this),gs.observe(this.bodycopyRef.current),this.bodycopyRef.current.addEventListener("filter-thumbnail-index",this.checkAndSetActiveLinks),this.bodycopyRef.current.addEventListener("new-thumbnails-rendered",this.checkAndSetActiveLinks)),this.lastBodycopyRef.current=this.bodycopyRef.current)};componentDidMount(){this.isAboveViewport=this.props.position==="above",this.onWindowResize(),nt.on("window-resize",this.onWindowResize),this.state.fullyRender===!0&&this.onFullComponentRender(),this.pageRef.current&&(this.onResize(this.pageRef.current.getBoundingClientRect()),this.context.onPageMount(this.pageRef.current),ep.findEmbedsIn(this.pageRef.current),Fx&&Fx.observe(this.pageRef.current,{childList:!0,subtree:!0}),this.pageRef.current.addEventListener("dom-binding-initialized",()=>{ep.findEmbedsIn(this.pageRef.current)}),this.props.isOverlay&&(window.setTimeout(this.setOverlayContentTransformValues,100),this.calculateOverlayPassthroughClasses(),this.pageRef.current.addEventListener("animationend",this.calculateOverlayPassthroughClasses)),this.temporarySafariRenderingFix())}calculateOverlayPassthroughClasses=()=>{if(!this.pageRef.current||!this.pageContentRef.current)return;let e=window.getComputedStyle(this.pageRef.current,null),r=window.getComputedStyle(this.pageContentRef.current,null),i=e.getPropertyValue("background-color"),n=r.getPropertyValue("background-color"),o=this.props.isOverlay&&(i==="transparent"||i==="initial"||i==="rgba(0, 0, 0, 0)")&&this.props.overlayOptions?.closeOnNavigate===!0,s=this.props.isOverlay&&(n==="transparent"||n==="initial"||n==="rgba(0, 0, 0, 0)")&&i.startsWith("rgba(");o?this.overlayContentRef.current.classList.add("is-passthrough-overlay"):this.overlayContentRef.current.classList.remove("is-passthrough-overlay"),s?this.overlayContentRef.current.classList.add("is-content-passthrough-overlay"):this.overlayContentRef.current.classList.remove("is-content-passthrough-overlay")};temporarySafariRenderingFix=()=>{this.props.adminMode||setTimeout(()=>{!he&&Ui()&&this.props?.pin_options?.position==="bottom"&&(this.pageRef?.current?.classList.add("loading"),setTimeout(()=>{this.pageRef?.current?.classList.remove("loading")},1200))},10)};onFullComponentRender(){if(this.pageLayoutRef.current){let e=function(r){r.childNodes.forEach(i=>i.setSaveable(!0));for(let i of r.childNodes)e(i)};e(this.pageLayoutRef.current)}this.pageRef.current&&(this.initializeScriptTags(),this.props.pageMounted(this.pageRef.current).then(()=>{this.checkAndSetActiveLinks(),this.fetchCommerceProductsByLink()})),this.props.isPin&&this.props.pin_options?.fixed===!0&&this.setFixedPinScrollability(),this.props.isOverlay===!0&&this.setOverlayScrollability(),this.props.isMobile&&this.setMobileOffsets(),this.bindObservers()}componentWillUnmount(){this.pageRef.current&&this.pageRef.current.removeEventListener("animationend",this.calculateOverlayPassthroughClasses),nt.off("window-resize",this.onWindowResize),ca.delete(this.pageRef.current),this.onSparseComponentRender(!0),this.onResize({height:0}),this.context.onPageUnmount(this.pageRef.current)}onSparseComponentRender(e=!1){this.bindObservers(e),this.pageRef.current&&this.props.pageUnMounted(this.pageRef.current)}fetchCommerceProductsByLink=()=>{if(!this.pageRef.current||!this.props.has_shop)return;let e=this.pageRef.current.querySelectorAll('[rel="add-to-cart"], [rel="add_to_cart"]'),r=[];Ci.default.each(e,i=>{let n=i.getAttribute("data-product");n&&r.push(n)}),this.props.fetchCommerceProducts({idArray:r,onlyNew:!0})};initializeScriptTags=()=>{let e=!1,r=function(i){e=!0};window.addEventListener("error",r,!1),Ci.default.each(this.bodycopyRef.current?.querySelectorAll("script"),i=>{if(i.getAttribute("type")==="text/thumbnail-metadata")return;e=!1;let n=document.createElement("script");[...i.attributes].forEach(o=>{n.setAttribute(o.nodeName,o.nodeValue)}),n.innerHTML=i.textContent,i.replaceWith(n),e&&(e=!1,n.parentNode.insertBefore(document.createComment(n.outerHTML),n),n.remove(),this.props.adminMode&&this.props.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"One or more scripts on this page are broken and were disabled.",type:"notice"}}}))}),window.removeEventListener("error",r)}};fg.contextType=us;Uae=mn((t,e)=>t.map(r=>e[r]?.purl).filter(r=>r&&typeof r=="string").map(r=>r.toLowerCase())),da=Nn(Ue((t,e)=>{let r=$e.getContentById(t,e.id),i=t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID],n,o;return i&&(n=i.purl?.toLowerCase(),o=Uae($e.getParentSetList(t,i.id),t.sets.byId)),!he&&!n&&(n=window.location.pathname.replace(/^\//,"").toLowerCase()),{inAdminFrame:t.frontendState.inAdminFrame,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,isEditingPage:r?.id&&t.frontendState.PIDBeingEdited===r?.id,hasPage:r!==void 0,homepagePURL:$e.getHomepagePurl(t),pid:r?.id,purl:r?.purl,isPin:r?.pin,title:r?.title,backdrops:r?.backdrops,content:r?.content,access_level:r?.access_level,local_css:r?.local_css,pin_options:r?.pin_options,PIDBeingEdited:t.frontendState.PIDBeingEdited,hashPurl:t.frontendState.activeHashPurl,globalStylesheet:t.css?.stylesheet,enableHomeLinkActiveStates:t.siteDesign?.site?.enableHomeLinkActiveStates,activePID:t.frontendState.activePID,activePURL:n,activePurlParents:o,pageDepth:$e.getParentSetList(t,e.id).length-1,has_shop:t.site.shop_id!==null,Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}},Bae)(fg))});var Ux,wz,xz=$(()=>{ke();mg();fe();Ux=class t extends me{constructor(e){super(e)}render=()=>{let e=this.props.childNodes.filter(i=>i.parent===this.props.id),r=e.filter(i=>i.content.page_type=="page").length>1;return S("div",{"data-container":"set","data-id":this.props.id,children:e.map((i,n)=>i.content.page_type==="set"?S(t,{id:i.content.id,childNodes:this.props.childNodes,contentPad:this.props.contentPad},i.content.id):S(da,{id:i.content.id,position:i.position,contentPad:this.props.contentPad,stackedPage:r},i.content.id))})}},wz=Ux});var EMe,qx,gg,Hx=$(()=>{ke();EMe=ve(Ie(),1);fe();qx=class extends me{constructor(e){super(e)}render=()=>S(de,{children:[S("style",{children:`
					body {
						letter-spacing: 0;
						padding: 30px;
						color: rgba(0,0,0,.85);
						font-size: 18px;
						line-height: 1;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons;
					}
				`}),this.props.message]})},gg=qx});var Sz,_z=$(()=>{Sz={closeOnClickout:!1,closeOnNavigate:!1,closeOthersOnOpen:!1,animateOnOpen:{fade:!1,speed:0,slideAmount:0,slideDirection:"default",wipeShape:"default",easing:"linear",scaleAmount:0,rotateAmount:0},animateOnClose:{fade:!1,speed:0,slideAmount:0,slideDirection:"default",wipeShape:"default",easing:"linear",scaleAmount:0,rotateAmount:0}}});function Vae(t,e){return{adminMode:t.frontendState.adminMode,PIDToEdit:t.frontendState.PIDToEdit,overlayBeingPreviewed:t.frontendState.overlayBeingPreviewed,overlayOptionsByPID:Wae(t.pages.byId),sortMap:t.structure.bySort,autoRenderableOverlays:$e.getAutoRenderableOverlaysForSet(t,e.pinContextPID,e.match?.params?.page)}}function $ae(t){return Bt({fetchContent:Ye.fetchContent},t)}var MMe,vs,qae,Kx,Qr,Yx,Hae,Wae,Wx,Hr,vg,en,yg,Vx,$x,Ez,Cz,jx,Gx,bg,Pz,wg=$(()=>{ke();MMe=ve(kn(),1);mt();xr();tr();ns();vs=ve(Ie(),1);Fe();_r();mg();_z();_i();qr();Ja();fe();qae={top:0,bottom:0},Kx=new Array,Qr={closeOverlay:()=>{},openOverlay:()=>{},getOverlay:()=>{},toggleOverlay:()=>{},handleGlobalClick:()=>{},getAllOverlays:()=>{}},Yx=class extends me{constructor(e){super(e),this.state={activeOverlays:[]},this.intermediateActiveOverlays=this.state.activeOverlays,Qr.openOverlay=this.openOverlay,Qr.closeOverlay=this.closeOverlay,Qr.toggleOverlay=this.toggleOverlay,Qr.getOverlay=this.getOverlay,Qr.handleGlobalClick=this.handleGlobalClick,Qr.getAllOverlays=this.getAllOverlays}componentDidMount(){requestAnimationFrame(()=>{this.autoRenderOverlays()})}autoRenderOverlays=(e=[])=>{if(this.props.adminMode){let s=this.props.store.getState(),a=[this.props.PIDToEdit,this.props.overlayBeingPreviewed].filter(l=>!!l&&s.pages.byId[l]?.overlay===!0);a.includes(this.props.PIDToEdit)&&this.openOverlay(this.props.PIDToEdit),this.state.activeOverlays.forEach(l=>{a.includes(l.pid)||this.closeOverlay(l?.pid)});return}let r=this.props.autoRenderableOverlays.map(s=>s.id),i=e.map(s=>s.id),n=vs.default.difference(i,r),o=vs.default.difference(r,i);n.forEach(s=>{this.closeOverlay(s)}),o.sort((s,a)=>this.props.sortMap[a]-this.props.sortMap[s]),o.forEach(s=>{this.openOverlay(s)})};componentDidUpdate=(e,r)=>{if((this.props.autoRenderableOverlays!==e.autoRenderableOverlays||this.props.adminMode&&!e.adminMode)&&this.autoRenderOverlays(e.autoRenderableOverlays),this.props.adminMode!==e.adminMode&&this.autoRenderOverlays([]),this.state.activeOverlays!==r.activeOverlays){let i=vs.default.difference(this.state.activeOverlays,r.activeOverlays),n=vs.default.difference(r.activeOverlays,this.state.activeOverlays);if(Kx=[...this.state.activeOverlays],bg(),i.length>0)for(let o of i)(o.getOverlayOptions().animateOnOpen||o.getOverlayOptions().animateOnClose)&&o.ref?.current?.base.addEventListener("animationend",this.handleAnimationEnd)}};componentWillUnmount=()=>{};handleGlobalClick=(e,r)=>{if(this.props.adminMode||r.closest(".quick-view")||document.querySelector(".alert-window"))return;let o=r.closest(".page-content")?.closest(".page")?.getAttribute("id"),s=this.state.activeOverlays.find(v=>v.pid===o),a=this.state.activeOverlays[this.state.activeOverlays.length-1],l=this.props.store.getState(),p=!!(this.target&&this.target.closest(".overlay-content")),f=Object.keys(l?.pages?.byId).some(v=>{let g=l.pages.byId[v];if(!g.overlay)return!1;let x=e.getAttribute("href")?.replace(/\//,"");return g.purl===x}),c=l.pages.byId[a?.pid]?.purl,m=e?.getAttribute("href")?.replace(/\//,"");if(this.state.activeOverlays.some(v=>v.getOverlayOptions().closeOnNavigate)&&e.hasAttribute("href")&&(e.getAttribute("rel")==="history"||e.getAttribute("rel")==="home-page")&&e.getAttribute("href").replace(/\//,"").toLowerCase()!=="contact-form"&&!l.frontendState.contactForm.inited&&!l.frontendState.cartOpen&&f===!1){requestAnimationFrame(()=>{window.__deferred_page_load_promise__?window.__deferred_page_load_promise__.then(()=>{requestAnimationFrame(()=>{this.state.activeOverlays.forEach(v=>{v.getOverlayOptions().closeOnNavigate&&this.closeOverlay(v.pid)})})}):s?this.closeOverlay(s.pid):this.state.activeOverlays.forEach(v=>{v.getOverlayOptions().closeOnNavigate&&this.closeOverlay(v.pid)})});return}if(a&&a.getOverlayOptions().closeOnClickout===!0&&!l.frontendState.contactForm.inited&&!l.frontendState.cartOpen&&o!==a?.pid){this.closeOverlay(a?.pid);return}};handleAnimationEnd=e=>{if(e.target.classList.contains("page"))switch(e.animationName){case"overlayOpen":case"overlayOpenWithoutOpacity":{let r=e.target.closest(".overlay-animating");r&&r?.classList?.remove("overlay-animating"),e.target.classList.remove("overlay-open");break}case"overlayClose":case"overlayCloseWithoutOpacity":{setTimeout(()=>{let i=e.target.closest(".overlay-animating");i&&i?.classList?.remove("overlay-animating")},101),e.target.classList.remove("overlay-close");let r=e.target.getAttribute("id");this.closeOverlay(r,!0);break}}};openOverlay=(e,r={})=>{if(!e||this.getOverlay(e))return;let i=Hae(e,this.props.overlayOptionsByPID[e],r);i.closeOthersOnOpen&&[...this.intermediateActiveOverlays].forEach(o=>{this.closeOverlay(o.pid)}),this.intermediateActiveOverlays=[...this.intermediateActiveOverlays,{pid:e,ref:_e(),getOverlayOptions:()=>i}],this.setState({activeOverlays:this.intermediateActiveOverlays})};closeOverlay=(e,r=!1)=>{if(e){if(r===!1){let i=this.getOverlay(e);if(!i)return;let n=i.getOverlayOptions();if(i.ref?.current?.base&&n?.animateOnClose?.speed>0){i.ref.current.base.classList.add("overlay-close"),i.ref.current.base.classList.add("overlay-animating");return}}this.intermediateActiveOverlays=this.intermediateActiveOverlays.filter(i=>i.pid!==e),this.setState({activeOverlays:this.intermediateActiveOverlays})}};toggleOverlay=(e,r)=>{this.getOverlay(e)?this.closeOverlay(e):this.openOverlay(e,r)};getAllOverlays=()=>this.intermediateActiveOverlays;getOverlay=e=>this.intermediateActiveOverlays.find(r=>r.pid===e);render(){return this.state.activeOverlays.map(({pid:e,getOverlayOptions:r,ref:i})=>S(da,{id:e,contentPad:qae,isOverlay:!0,overlayOptions:r(),ref:i},e))}},Hae=mn((t,e,r)=>vs.default.merge({},Sz,e,r)),Wae=mn(t=>t=vs.default.mapValues(t,e=>e.overlay_options));if(!he){Wx=null,Hr=null,vg=!1,en=!1,yg=null,Vx=m=>{if(clearTimeout(Wx),Wx=setTimeout(()=>{vg=!1,en=!1},200),!vg){let v=[...Kx].reverse().map(x=>document.getElementById(x.pid)?.closest(".overlay-content:not(.overlay-animating)")),g=v.find(x=>x?.contains(m));if(Hr=null,g)if(g.classList.contains("overlay-allow-scroll"))Hr=g,en=!0;else{let x=v[0].classList?.contains("overlay-allow-scroll")?v[0]:null;if(x)Hr=x,en=!0;else{let _=g.querySelector(".page-content")?.contains(m),E=g.querySelector(".backdrop");!_&&!g.classList.contains("is-passthrough-overlay")||E||_&&!g.classList.contains("is-content-passthrough-overlay")?(en=!0,Hr=null):(en=!1,Hr=null)}}else{let x=v.find((_,E)=>_?.classList?.contains("overlay-allow-scroll")??!1);x?(Hr=x,en=!0):(en=!1,Hr=null)}Hr&&(vg=!0)}};let t=0,e=0,r=null,i=null,n,o=null,s=0,a=null,l=!1,p=!1,f=!1,c=0;$x=m=>{t=yg-m.touches[0].clientY,e=e*.8+t*.2,yg=m.touches[0].clientY,clearTimeout(r),r=setTimeout(()=>{t=0},300),Hr&&(Hr.scrollTop=Hr.scrollTop+t),(en||l)&&(en=!0,m.preventDefault(),m.stopPropagation()),en&&(document.scrollingElement.scrollTop=s)},Ez=m=>{t=m.deltaY,Vx(m.target),en&&m.preventDefault(),Hr&&(Hr.scrollTop=Hr.scrollTop+t)},Cz=()=>{f||(f=!0,s=document.scrollingElement.scrollTop,document.scrollingElement.style.overflow="hidden",document.scrollingElement.style.overscrollBehavior="none",document.scrollingElement.scrollTop=s)},jx=vs.default.debounce(()=>{f&&(f=!1,document.scrollingElement.style.overflow="",document.scrollingElement.style.overscrollBehavior="",document.scrollingElement.scrollTop=s)},150),Gx=m=>{if(!i){jx();return}let v=n==0?16:m-n;n=m,e=e*.97;let g=i.scrollTop;i.scrollTop=i.scrollTop+e*(v/16.667),i.scrollTop-g!=0?c=0:c++,o=requestAnimationFrame(Gx),(Math.abs(e)<.5||c>15)&&(i=null)},window.addEventListener("wheel",Ez,{passive:!1}),window.addEventListener("touchstart",m=>{if(c=0,p=!1,i=null,cancelAnimationFrame(o),Vx(m.touches[0].target),e=0,t=0,a=m.touches[0].clientY,l=m.touches[0].target.closest(".overlay-content"),l){let v=l.querySelector(".page-content")?.contains(m.touches[0].target),g=l.querySelector(".backdrop");(!v&&l.classList.contains("is-passthrough-overlay")&&!g||v&&l.classList.contains("is-content-passthrough-overlay"))&&(l=null)}(Hr||l)&&(Cz(),yg=m.touches[0].clientY,document.body.addEventListener("touchmove",$x,{passive:!1}))}),document.body.addEventListener("click",m=>{p=!0}),document.body.addEventListener("touchend",m=>{document.body.removeEventListener("touchmove",$x,{passive:!1}),Hr&&Math.abs(e)>2?(i=Hr,clearTimeout(r),n=window?.performance?.now?.()??0,e=t*.8+e*.2,o=requestAnimationFrame(Gx)):jx();let v=a-m.changedTouches[0].clientY;if(!i&&Math.abs(v)<10&&en){let g=m.changedTouches[0].target;setTimeout(()=>{p||Qr.handleGlobalClick(g,g)},330)}},{passive:!1}),nt.on("window-resize",()=>{bg()}),bg=vs.default.debounce(()=>{let m=[...Kx].reverse(),v=m.findIndex(g=>{let x=g.ref?.current?.base.closest(".overlay-content");return x?x.classList.contains("overlay-allow-scroll")&&!x.classList.contains("overlay-close"):!1});m.forEach((g,x)=>{let _=g.ref?.current?.base.closest(".overlay-content");_&&(x==0?_.classList.add("top-overlay"):_.classList.remove("top-overlay"),v==-1?(_.classList.remove("top-scrollable-overlay"),_.classList.remove("behind-top-scrollable-overlay")):x>v?(_.classList.remove("top-scrollable-overlay"),_.classList.add("behind-top-scrollable-overlay")):x==v?(_.classList.add("top-scrollable-overlay"),_.classList.remove("behind-top-scrollable-overlay")):(_.classList.remove("top-scrollable-overlay"),_.classList.remove("behind-top-scrollable-overlay")))}),v>-1?document.body.classList.add("has-scrollable-overlay"):document.body.classList.remove("has-scrollable-overlay")},30),bg()}Pz=Nn($n(Ue(Vae,$ae)(Yx)))});function Kae(t,e){let r=e.idType==="purl"?$e.getContentByPurl(t,e.id):$e.getContentById(t,e.id),i,n=null,o=null;if(!r){let s=!1;if(t.frontendState.networkErrors.find(a=>a.id===e.id&&a.idType===e.idType&&a)!==void 0||t.frontendState.inAdminFrame){if(e.idType==="purl"&&(i=t.site.tags.find(a=>a.url===e.id),!i)){for(let a in t.pages.byId)if(i=t.pages.byId[a].tags.find(l=>l.url===e.id),i)break}i||(s=!0)}if(s)return{content:null,pageNotFound:s}}if(r)if(r.page_type==="set"){n=r.id;let s=$e.getContentByPurl(t,e.hashPurl),a=t.structure.indexById[s?.id]||0,l=t.sets.byId[$e.getItemParentId(t,s?.id)]||r;o=Gae(t.structure,t.pages,t.sets,l,a,Jx($e.getSetsByParent(t),n))}else n=$e.getItemParentId(t,r.id);else i&&(n="root",o=Object.values(t.pages.byId).filter(s=>t.structure.indexById[s.id]===null||s.crdt_state===er.Deleted?!1:s.tags.some(a=>a.tag===i.tag)).map(s=>({content:s,position:"below"})),o.sort((s,a)=>t.structure.bySort[s.content.id]-t.structure.bySort[a.content.id]));return{tag:i,hasContent:r!==void 0,contentId:r?.id,contentType:r?.page_type,contentTitle:r?.title,contentPurl:r?.purl,contentIsStack:r?.stack,contentIsPin:r?.pin,contentIsOverlay:r?.overlay,contentCRDTState:r?.crdt_state,children:o,parentSetPID:n,isFeed:t.sets.byId.root.stack,topPins:$e.getPinsForSet(t,n,"top",r?.id),bottomPins:$e.getPinsForSet(t,n,"bottom",r?.id),adminMode:t.frontendState.adminMode}}function Yae(t){return Bt({fetchContent:Ye.fetchContent,fetchPagesByTag:Ye.fetchPagesByTag,fetchSitePackage:Ye.fetchSitePackage,updateFrontendState:Ye.updateFrontendState},t)}var Iz,Do,jae,Xx,Zx,xg,Jx,Az,Gae,Qx,e1=$(()=>{ke();xr();mt();Iz=ve(Hh(),1);Ja();Do=ve(Ie(),1);pa();tr();Fe();_r();Dt();mg();xz();Hx();Pd();_i();wg();fe();jae=async t=>{let e=[];if(!t.hasContent){let r=t.fetchContent(t.id,{idType:t.idType});e.push(r)}he&&e.push(Az(t,{up:!1,down:!0})),await Promise.allSettled(e).catch(r=>{})},Xx={top:0,bottom:0},Zx=10,xg=class extends me{constructor(e){super(e),this.contentRef=_e(),this.contentParentRef=_e(),this.topPaginationWatcherRef=_e(),this.bottomPaginationWatcherRef=_e(),this.paginationLimitsTriggered={up:!1,down:!1},this.state={contentPad:Xx,pageRenderLimits:{above:this.props.hashPurl?25:0,below:25},completedPaginationAbove:!1,completedPaginationBelow:!1},he||(this.paginationObserver=new IntersectionObserver(this.onPaginationObserverCallback,{root:document,rootMargin:screen.height*2+"px",threshold:[0,1]}),this.resizeObserver=new ResizeObserver(r=>{r.forEach(i=>{var n=window.getComputedStyle(i.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top"));(o!==this.state.contentPad.top||s!==this.state.contentPad.bottom)&&this.setState({contentPad:{top:o,bottom:s}})})})),this.props.hasContent&&this.props.updateFrontendState({activePID:this.props.contentId,activeTag:void 0,activeHashPurl:this.props.hashPurl})}getContentByPosition(e){return this.props.children?.filter(r=>r.position===e)||[]}getPageStack(){let e=this.getPageContainerPinOffsets(),r=[];return this.props.topPins.forEach(i=>{r.push(S(da,{id:i.id,contentPad:Xx,stackedPage:this.props.topPins.length>1},i.id))}),this.renderedChildren=[...Do.default.takeRight(this.getContentByPosition("above"),this.state.pageRenderLimits.above),...Do.default.take(this.getContentByPosition("below"),this.state.pageRenderLimits.below)],r.push(S("div",{className:"pages",ref:this.contentRef,style:e,children:this.props.contentType==="set"||this.props.tag?!this.props.tag&&this.props.isFeed!==!0&&this.props.contentIsStack!==!0?null:S(de,{children:[S("div",{className:`pagination-watcher ${this.state.completedPaginationAbove?"pagination-complete":""}`,"data-direction":"up",ref:this.topPaginationWatcherRef},"pagination_watcher_up"),S(wz,{id:this.props.contentId,childNodes:this.renderedChildren,contentPad:this.state.contentPad},this.props.contentId),S("div",{className:`pagination-watcher ${this.state.completedPaginationBelow?"pagination-complete":""}`,"data-direction":"down",ref:this.bottomPaginationWatcherRef},"pagination_watcher_down")]},"page_container_fragment"):this.props.contentIsPin||this.props.contentIsOverlay?null:S(da,{id:this.props.contentId,contentPad:this.state.contentPad,stackedPage:!1},this.props.contentId)},"page_container")),this.props.bottomPins.forEach(i=>{r.push(S(da,{id:i.id,contentPad:Xx,stackedPage:this.props.bottomPins.length>1},i.id))}),r}render(){if(this.props.pageNotFound)return S(gg,{message:"Page not found."});let e;return(!this.props.hasContent||this.props.contentCRDTState===er.Deleted)&&!this.props.tag?e=null:e=this.getPageStack(),S("div",{className:"content",ref:this.contentParentRef,children:[S(Pz,{pinContextPID:this.props.parentSetPID}),e]})}bindContentParent=()=>{this.resizeObserver&&this.contentParentRef.current&&!this.state.contentParentRef&&(this.resizeObserver.observe(this.contentParentRef.current),this.setState({contentParentRef:this.contentParentRef.current}))};componentDidMount(){this.bindContentParent(),this.attachPaginationWatchers(),this.props.hasContent&&this.props.updateFrontendState({activePID:this.props.contentId,activeTag:void 0,activeHashPurl:this.props.hashPurl})}shouldComponentUpdate(e,r,i){if(this.props===e&&this.state===r&&this.context===i)return!1;if(this.props.contentId!==e.contentId||this.props.hashPurl!==e.hashPurl||this.props.tag!==e.tag){let n=e.hashPurl&&this.props.hashPurl!==e.hashPurl;this.setState({pageRenderLimits:{above:n?25:0,below:25}})}return!0}componentDidUpdate(e,r,i){this.bindContentParent(),!this.props.adminMode&&e.contentCRDTState!==er.Deleted&&this.props.contentCRDTState===er.Deleted&&(this.props.updateFrontendState({alertModal:{message:"Page not found",type:"notice"}}),no.replace("/"+e.contentPurl||"/")),this.props.id&&e.id!==this.props.id&&this.props.fetchContent(this.props.id,{idType:this.props.idType}),this.props.tag&&e.tag!==this.props.tag&&(this.props.updateFrontendState({activePID:void 0,activeTag:this.props.tag}),this.requestPagination()),this.props.hashPurl!==e.hashPurl&&this.props.updateFrontendState({activeHashPurl:this.props.hashPurl}),this.props.hasContent&&this.props.contentId!==e.contentId&&(this.props.updateFrontendState({activePID:this.props.contentId,activeTag:void 0}),this.requestPagination()),this.attachPaginationWatchers(),this.props.pageNotFound!==e.pageNotFound&&this.props.updateFrontendState({pageNotFound:this.props.pageNotFound})}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.unobserve(this.contentParentRef.current),this.paginationObserver&&this.paginationObserver.disconnect(),this.props.updateFrontendState({activePID:void 0,activeTag:void 0,activeHashPurl:""})}attachPaginationWatchers(){this.paginationObserver&&this.topPaginationWatcherRef.current&&this.bottomPaginationWatcherRef.current?(this.topPaginationWatcherRef.current!==this.topPaginationWatcherEl&&(this.topPaginationWatcherEl&&this.paginationObserver.unobserve(this.topPaginationWatcherEl),this.paginationObserver.observe(this.topPaginationWatcherRef.current),this.topPaginationWatcherEl=this.topPaginationWatcherRef.current),this.bottomPaginationWatcherRef.current!==this.bottomPaginationWatcherEl&&(this.bottomPaginationWatcherEl&&this.paginationObserver.unobserve(this.bottomPaginationWatcherEl),this.paginationObserver.observe(this.bottomPaginationWatcherRef.current),this.bottomPaginationWatcherEl=this.bottomPaginationWatcherRef.current)):(delete this.topPaginationWatcherEl,delete this.bottomPaginationWatcherEl)}onPaginationObserverCallback=e=>{let r=!1;e.forEach(i=>{let n=i.target.dataset.direction;i.isIntersecting?(this.paginationLimitsTriggered[n]=!0,r=!0):this.paginationLimitsTriggered[n]=!1}),r&&this.requestPagination()};requestPagination=async()=>{if(this.isPaginating)return;this.isPaginating=!0;let e=0;for(;this.isPaginating;){if(e++>25){console.log("Exceeded max consecutive pagination attempts...");break}(this.paginationLimitsTriggered.up||this.paginationLimitsTriggered.down)&&this.setState({pageRenderLimits:{above:(this.state.pageRenderLimits.above||0)+(this.paginationLimitsTriggered.up?Zx:0),below:(this.state.pageRenderLimits.below||0)+(this.paginationLimitsTriggered.down?Zx:0)}}),await Az(this.props,this.paginationLimitsTriggered).then(r=>{let i=r.length===0&&!(this.paginationLimitsTriggered.up&&this.state.pageRenderLimits.above<this.getContentByPosition("above").length),n=r.length===0&&!(this.paginationLimitsTriggered.down&&this.state.pageRenderLimits.below<this.getContentByPosition("below").length);this.setState({completedPaginationAbove:i,completedPaginationBelow:n}),i&&n&&(this.isPaginating=!1)}).catch(r=>{console.error(r),this.isPaginating=!1}),this.props.tag&&(this.isPaginating=!1,this.setState({pageRenderLimits:{above:9e9,below:9e9}})),await new Promise(r=>setTimeout(r,250))}};getPageContainerPinOffsets=()=>{let e={marginTop:0,marginBottom:0};if(he)return e;let r=i=>(i.hasOverlayPins&&!i.adjustsSelf&&i.adjusterId!==null?i.totalHeight:0)-(i.adjustedLevel==="content"?i.adjusterHeight:0);return Do.default.each(this.context.levelData.levels,(i,n)=>{e.marginTop+=r(i.top),e.marginBottom+=r(i.bottom)}),e}},Jx=(t,e,r=[])=>(r.push(e),t[e]?.forEach(i=>{Jx(t,i,r)}),r),Az=(t,e,r={})=>new Promise((i,n)=>{if(!t||!e)return n("Missing pagination parameters");if(t.tag)return t.fetchPagesByTag(t.tag.url).then(i).catch(n);let o=t.store.getState(),s=[];if(Do.default.each(e,(a,l)=>{if(!a)return;let p,f;if(l==="up"){let v=Do.default.first(t.children);v&&(f=v.index,p=v.parent)}else if(l==="down"){let v=Do.default.last(t.children);v?(f=v.index,p=v.parent):t.contentType==="set"&&(f=0,p=t.contentId)}if(p===void 0||f===void 0)return;let c=0,m=Jx($e.getSetsByParent(o),t.parentSetPID);as(o.structure,o.pages,o.sets,o.sets.byId[p],f,{reverse:l==="up",callback:(v,g,x)=>{if(!x&&m.includes(v)&&(s.push({parent:v,index:g}),c++),c>=Zx)return"break"}})}),s.length>0){let a=Do.default.groupBy(s,"parent"),l=Do.default.map(a,(p,f)=>t.fetchContent(f,{indexes:Do.default.map(p,"index"),idType:"pid"}));Promise.all(l).then(i).catch(n)}else i([])}),Gae=mn((t,e,r,i,n,o)=>{let s=[],a=[],l=r.byId.root.stack;return as(t,e,r,i,n-1,{reverse:!0,traverseUp:!0,includeSets:!0,callback:(p,f,c)=>{if(!c||!o.includes(p))return"break";c&&(s.unshift({parent:p,index:f,content:c,position:"above"}),a.push(c))}}),as(t,e,r,i,n,{reverse:!1,traverseUp:!0,includeSets:!0,callback:(p,f,c)=>{if(!c||!o.includes(p))return"break";c&&!a.includes(c)&&s.push({parent:p,index:f,content:c,position:"below"})}}),s});xg.contextType=us;Qx=Nn(Ue(Kae,Yae)((0,Iz.frontloadConnect)(jae,{onMount:!0,onUpdate:!1})(xg)))});function Xae(t){return Bt({pageMounted:Ye.pageMounted,pageUnMounted:Ye.pageUnMounted,updateFrontendState:Ye.updateFrontendState,fetchContent:Ye.fetchContent,fetchCommerceProducts:Ye.fetchCommerceProducts},t)}var ys,cl,Sg,rp,_g,bs,Eg,t1,Tz,Vu,ip,Mz,Rz=$(()=>{ke();xr();mt();tr();ys=ve(Ie(),1);_r();Pd();Ur();Po();Zr();sl();qr();Ox();Fe();cg();_i();fe();cl=new WeakMap,Sg=new WeakMap,rp=new WeakMap,_g=new WeakMap,Tz=t=>{t.forEach(function(e){cl.has(e.target)&&cl.get(e.target).onAboveViewPort(e)})},Vu=0;he||(bs=new ResizeObserver(function(t){let e={};Tz(Eg.takeRecords()),t.forEach(function(r){let i=cl.get(r.target);if(i&&(i.onResize(r.contentRect),e[i.props.id]=r.contentRect.height),Sg.has(r.target)&&Sg.get(r.target).onBodyCopyResize(r.contentRect.width),rp.has(r.target)||_g.has(r.target)){var n=window.getComputedStyle(r.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-bottom"))+parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("border-bottom"));if(rp.has(r.target)){let a=rp.get(r.target);(a.state.pageContentPad.top!==o||a.state.pageContentPad.bottom!==s)&&a.setState({pageContentPad:{top:o,bottom:s}})}else{let a=_g.get(r.target);(a.state.pageLayoutPad.top!==o||a.state.pageLayoutPad.bottom!==s)&&a.setState({pageLayoutPad:{top:o,bottom:s}})}}}),Vu!==0&&(document.scrollingElement.scrollTop+=Vu,Vu=0)}),Eg=new IntersectionObserver(Tz,{root:document,rootMargin:"0px 0px 0px 0px",threshold:[0,1]}),t1=new IntersectionObserver((t,e)=>{t.forEach(function(r){cl.has(r.target)&&cl.get(r.target).onViewportBoundaryIntersection(r)})},{root:document,rootMargin:Math.max(screen.height*6,2500)+"px",threshold:[0,1]}));ip=class extends me{constructor(e){super(e),this.bodycopyRef=_e(),this.pageContentRef=_e(),this.pageRef=_e(),this.pageLayoutRef=_e(),this.galleryRef=_e(),this.lastBodycopyRef=_e(),this.lastPageContentRef=_e(),this.lastPageRef=_e(),this.lastPageLayoutRef=_e(),this.currentHeight=0,this.state={resizeParentWidth:"100%",mobileOffsetsString:null,pageContentPad:{top:0,bottom:0},pageLayoutPad:{top:0,bottom:0},authorized:he?null:localStorage.getItem("images-include-offline"),imageSort:"forward",windowHeight:nt.data.window.h,fullyRender:!0,lastPageLayoutHeight:100},this.localStyleRef=_e(),this.scrollingElement={current:he?null:window}}setMobileOffsets=()=>{if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}if(!this.localStyleRef.current)return;let e=su(this.localStyleRef.current.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:["ul","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","small-caps"]}]);this.setState({mobileOffsetsString:e})};onBodyCopyResize=e=>{e=parseInt(e),this.lastWidth!==e&&(this.setState({resizeParentWidth:e+"px"}),this.lastWidth=e)};onWindowResize=()=>{this.setState(e=>this.state.windowHeight===nt.data.window.h?null:{windowHeight:nt.data.window.h})};onResize=(e,r=!0)=>{((this.isAboveViewport??this.pageRef.current?.getBoundingClientRect().bottom<1)||this.props.position==="above"&&this.firstResizeOccurred!==!0)&&(Vu+=e.height-this.currentHeight,r||(document.scrollingElement.scrollTop+=Vu,Vu=0)),this.currentHeight=e.height,this.firstResizeOccurred=!0};onAboveViewPort=e=>{e.rootBounds.height!==0&&(this.isAboveViewport=e.boundingClientRect.bottom<0)};onViewportBoundaryIntersection=e=>{let r=e.isIntersecting;he&&(r=!0),this.setFullRenderState(r)};setFullRenderState=(e,r)=>{this.setState({fullyRender:e,lastPageLayoutHeight:this.pageLayoutRef.current?.getBoundingClientRect().height||100},r)};updateAdminState=e=>{store.dispatch({type:"UPDATE_ADMIN_STATE",payload:e})};zIndexLayerPosition=e=>e?.toString().padStart(2,"0");findPageAdjusteeStatus=e=>{let r={top:null,bottom:null},i=ys.default.pickBy(this.context?.adjustPairs,n=>n.adjusts.indexOf(this.props.pid)!==-1);return ys.default.keys(i).length>0&&ys.default.each(i,function(n){r[n.location]=n.adjustedHeight}),r};getPageInfoContextValue(){return(this.props.isEditingPage!==this.lastProps?.isEditingPage||this.props.pid!==this.lastProps?.pid)&&(this.pageInfoContextValue={isEditing:this.props.isEditingPage,pid:this.props.pid}),this.lastProps=this.props,this.pageInfoContextValue}onItemClick=e=>{if(e.button!==2||!this.state.zoomedOut)return;let r=e?.target.closest("media-item");r&&(e.preventDefault(),this.setState({zoomedOut:!1},()=>{setTimeout(()=>{r?.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{transitionTime:0,preventQuickViewClose:!0,lazyScroll:!1}})),r.classList.add("hey-listen"),this.flashInterval=setInterval(()=>{r.classList.contains("hey-listen")?r.classList.remove("hey-listen"):r.classList.add("hey-listen")},300),setTimeout(()=>{r.classList.remove("hey-listen"),clearInterval(this.flashInterval)},1200)},0)}),console.log(e))};render(){if(!this.props.hasPage)return null;let e=null,r=!1;if(this.state.fullyRender){let i=this.props.contentPad.top+this.state.pageLayoutPad.top+this.state.pageContentPad.top+this.state.pageContentPad.bottom+this.state.pageLayoutPad.bottom+this.props.contentPad.bottom,n=Math.max(10,this.state.windowHeight-i),o=null;this.props.access_level==="password"?o=S(Hu,{target:this.props.pid,onSucces:()=>{this.props.fetchContent(this.props.pid,{force:!0})}}):this.hasOwnProperty("lockedContent")?o=this.lockedContent:o=this.lockedContent=this.props.content,e=S(de,{children:S(jf,{pageRef:this.pageRef,value:this.getPageInfoContextValue(),children:[S("style",{id:"img-style",children:`
							body.mobile .page-content{
								${this.state.zoomedOut?"padding: 1px 1px 8rem 1px;":"padding: 2rem 2rem 8rem 2rem;"}
							}
							.page-content {
								${this.state.zoomedOut?"padding: 1px;":"padding: 3rem 3rem 8rem 3rem;"}
							}
							body.mobile .caption {
								font-size: 3rem;
							}
							.caption {

							    margin-top: 1rem;
							    font-size: .75rem;
							    font-weight: 400;
							    color: rgba(0, 0, 0, 0.35);
							    font-style: normal;
							    line-height: 1.3;
							}

							.caption a {
							    color: rgba(0, 0, 0, 0.35);
								text-decoration:none;
							}

							.hey-listen::part(media){
			                	opacity: 0.3;
							}
									

							media-item::part(media){
								transition: opacity ease-in-out 0.1s;								
								outline: 1px solid rgba(0,0,0,0.08);
								outline-offset: -1px;
							}

							media-item:hover a.original {
								display: block;
							}
							.caption a.original {
								padding: 8px;
								margin: -8px;
								display:none;
								float: right;
							}

							.quick-view-background {
								background-color: rgba(21,21,21, 0.8);
							}

							body.mobile .sort-controls text-icon {
								height: 5rem;
								border: 1rem solid white;								
							}

							.sort-controls {
								display: grid;
								position: fixed;
								bottom: 1.8rem;
								left: 1.4rem;
								z-index: 1000;
								column-gap: 1px;
								grid-template-columns: 1fr 1fr 1fr 1fr;
								filter: drop-shadow(0px 1px 2px rgba(0,0,0, 0.2));
							}

							.sort-controls text-icon.active {
								color: black;
							}

							.sort-controls text-icon:active {
								transform: translate3d(0px, 2px, 0px);
							}

							.sort-controls text-icon {
								user-select:none;
								transform: translate3d(0px, 0px, 0px);
								transition: .05s transform linear;
								color: #ccc;
								background-color: white;
								border: .5rem solid white;
								border-radius: 100%;
								height: 2.5rem;
								cursor: pointer;
							}

							.sort-controls text-icon.zoom {
								color: black;
							}

							${this.state.zoomedOut?`
							media-item:hover .caption a.page-link {
								display: block;
							}

							media-item .caption {
								margin: 0;
								padding: 0;
								position: absolute;
								inset: 0;
								pointer-events:none;
							}
							media-item .caption a {
								display: none;
								color: transparent;
								pointer-events:auto;
							}

							media-item .caption a.page-link {
								pointer-events: auto;
								overflow: hidden;
								font-size: 0;

								border-style: solid;
								position: absolute;
								top: 0px;
								right: 0px;
								z-index: 99;
							}

							media-item .caption a.page-link::after {
								display: block;
								padding: 5px;
								content: '\u{1F517}';
								font-size: 14px;
								font-family:monospace;
								color: black;
								filter:saturate(0);
							}

							`:""}
						`}),S("div",{className:"page-layout",ref:this.pageLayoutRef,children:S("div",{className:"page-content",ref:this.pageContentRef,children:[this.state.authorized?S("div",{className:"sort-controls",children:[S("text-icon",{icon:"downwards-arrow",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({imageSort:"forward"})},className:this.state.imageSort==="forward"?"active":""}),S("text-icon",{icon:"upwards-arrow",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({imageSort:"reverse"})},className:this.state.imageSort==="reverse"?"active":""}),S("text-icon",{icon:"shuffle",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.state.imageSort==="shuffle"?this.galleryRef.current.dispatchEvent(new Event("refresh-thumbnail-index")):this.setState({imageSort:"shuffle"})},className:this.state.imageSort==="shuffle"?"active":""}),S("text-icon",{icon:this.state.zoomedOut?"expand-arrows":"collapse-arrows",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({zoomedOut:!this.state.zoomedOut})},className:"zoom"})]}):null,S(Jm,{pageInfo:this.getPageInfoContextValue(),adminMode:this.props.adminMode,bodycopyRef:this.bodycopyRef,children:[S(Io,{portalHost:this.bodycopyRef}),S("bodycopy",{style:{"--fit-height":n+"px","--resize-parent-width":this.state.resizeParentWidth},ref:this.bodycopyRef,children:this.state.authorized?S("gallery-justify",{onContextMenu:this.onItemClick,ref:this.galleryRef,"thumbnail-index":"img:all",sort:this.state.imageSort,"row-height":this.state.zoomedOut?"10vw":"15vw","mobile-row-height":this.state.zoomedOut?"200px":"100vh","show-title":!0,gutter:this.state.zoomedOut?"1px":"2rem 3rem"}):null})]})]})})]})})}else e=S("div",{style:{height:this.state.lastPageLayoutHeight+"px"}});return S("div",{"page-url":this.props.purl?.toLowerCase(),className:"page",ref:this.pageRef,editing:!1,children:[S("a",{id:this.props.purl}),S(du,{passthrough:!1,scrollingElement:this.scrollingElement,children:e})]})}componentDidUpdate=(e,r,i)=>{this.bindObservers(),this.state.fullyRender===!0&&r.fullyRender===!1?this.onFullComponentRender():this.state.fullyRender===!1&&r.fullyRender===!0&&this.onSparseComponentRender(),(e.activePURL!==this.props.activePURL||e.adminMode!==this.props.adminMode)&&this.updateShowCartLinkCounts(),this.props.local_css!==e.local_css&&this.setMobileOffsets(),e.isMobile!==this.props.isMobile&&this.setMobileOffsets(),this.props.hashPurl!==e.hashPurl&&this.runHashScroll()};shouldComponentUpdate(e,r,i){return!(this.props===e&&this.state===r&&this.context===i||this.hasOwnProperty("lockedContent")&&this.props.content!==e.content&&Vf({...this.props,content:null},{...e,content:null})&&this.state===r&&this.context===i)}bindObservers=(e=!1)=>{(this.pageRef.current!==this.lastPageRef.current||e)&&(this.lastPageRef.current&&(cl.delete(this.lastPageRef.current),bs.unobserve(this.lastPageRef.current),Eg.unobserve(this.lastPageRef.current),t1.unobserve(this.lastPageRef.current)),this.pageRef.current&&!e&&(cl.set(this.pageRef.current,this),bs.observe(this.pageRef.current),Eg.observe(this.pageRef.current),t1.observe(this.pageRef.current)),this.lastPageRef.current=this.pageRef.current),(this.pageLayoutRef.current!==this.lastPageLayoutRef.current||e)&&(this.lastPageLayoutRef.current&&(_g.delete(this.lastPageLayoutRef.current),bs.unobserve(this.lastPageLayoutRef.current)),this.pageLayoutRef.current&&!e&&(_g.set(this.pageLayoutRef.current,this),bs.observe(this.pageLayoutRef.current)),this.lastPageLayoutRef.current=this.pageLayoutRef.current),(this.pageContentRef.current!==this.lastPageContentRef.current||e)&&(this.lastPageContentRef.current&&(rp.delete(this.lastPageContentRef.current),bs.unobserve(this.lastPageContentRef.current)),this.pageContentRef.current&&!e&&(rp.set(this.pageContentRef.current,this),bs.observe(this.pageContentRef.current)),this.lastPageContentRef.current=this.pageContentRef.current),(this.bodycopyRef.current!==this.lastBodycopyRef.current||e)&&(this.lastBodycopyRef.current&&(Sg.delete(this.lastBodycopyRef.current),bs.unobserve(this.lastBodycopyRef.current)),this.bodycopyRef.current&&!e&&(Sg.set(this.bodycopyRef.current,this),bs.observe(this.bodycopyRef.current)),this.lastBodycopyRef.current=this.bodycopyRef.current)};runHashScroll(){if(this.props.hashPurl===this.props.purl){if(window.PRESERVE_SCROLL_ON_NEXT_NAVIGATION){window.PRESERVE_SCROLL_ON_NEXT_NAVIGATION=!1;return}this.state.fullyRender!==!0?this.setFullRenderState(!0,()=>{this.pageRef.current.scrollIntoView()}):this.pageRef.current.scrollIntoView()}}checkLocalStorage=()=>{localStorage.getItem("images-include-offline")&&!this.state.authorized&&(this.setState({authorized:!0}),clearInterval(this.checkStorageInterval))};onKeyDown=e=>{e.keyCode===27&&!store.getState().frontendState.quickView.inited&&(e.preventDefault(),window.location=window.location.origin)};componentDidMount(){window.addEventListener("keydown",this.onKeyDown),this.checkStorageInterval=setInterval(()=>{this.checkLocalStorage()},180);var e=document.body.querySelectorAll("style");e.forEach(r=>{r.id!=="img-style"&&(r.disabled=!0)}),setTimeout(()=>{e.forEach(r=>{r.id!=="img-style"&&(r.disabled=!0)})},100),this.runHashScroll(),nt.on("window-resize",this.onWindowResize),this.state.fullyRender===!0&&this.onFullComponentRender()}onFullComponentRender(){if(this.pageLayoutRef.current){let e=function(r){r.childNodes.forEach(i=>i.setSaveable(!0));for(let i of r.childNodes)e(i)};e(this.pageLayoutRef.current)}this.pageRef.current&&(this.initializeScriptTags(),this.props.pageMounted(this.pageRef.current).then(()=>{this.updateShowCartLinkCounts(),this.fetchCommerceProductsByLink()})),this.props.isMobile&&this.setMobileOffsets(),this.bindObservers()}componentWillUnmount(){document.body.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1}),window.removeEventListener("keydown",this.onKeyDown),clearInterval(this.checkStorageInterval);var e=document.body.querySelectorAll("style");e.forEach(r=>{r.disabled=!1}),nt.off("window-resize",this.onWindowResize),this.onSparseComponentRender(!0),this.onResize({height:0},!1)}onSparseComponentRender(e=!1){this.bindObservers(e),this.pageRef.current&&this.props.pageUnMounted(this.pageRef.current)}fetchCommerceProductsByLink=()=>{if(!this.pageRef.current||!this.props.has_shop)return;let e=this.pageRef.current.querySelectorAll('[rel="add-to-cart"], [rel="add_to_cart"]'),r=[];ys.default.each(e,i=>{let n=i.getAttribute("data-product");n&&r.push(n)}),this.props.fetchCommerceProducts({idArray:r,onlyNew:!0})};updateShowCartLinkCounts=()=>{if(!this.pageRef.current||!this.props.has_shop||!this.props.cartData||ys.default.isEmpty(this.props.cartData)||this.props.adminFrame)return;let e=ys.default.keys(this.props.cartData).length,r=this.pageRef.current.querySelectorAll('a[rel="show-cart"], a[rel="show_cart"]');ys.default.each(r,i=>{if(i.hasAttribute("show-count")){let n=i.innerHTML.replace(/ *\([^)]*\) */g,"");i.innerText=n+" ("+e+")"}})};initializeScriptTags=()=>{let e=!1,r=function(i){e=!0};window.addEventListener("error",r,!1),ys.default.each(this.bodycopyRef.current?.querySelectorAll("script"),i=>{if(i.getAttribute("type")==="text/thumbnail-metadata")return;e=!1;let n=document.createElement("script");[...i.attributes].forEach(o=>{n.setAttribute(o.nodeName,o.nodeValue)}),n.innerHTML=i.textContent,i.replaceWith(n),e&&(e=!1,n.parentNode.insertBefore(document.createComment(n.outerHTML),n),n.remove(),this.props.adminMode&&window.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"One or more scripts on this page are broken and were disabled.",type:"notice"}}}))}),window.removeEventListener("error",r)}};ip.defaultProps={contentPad:{top:0,left:0,bottom:0,right:0}};ip.contextType=us;Mz=Ue((t,e)=>{let r={id:"img",purl:"/img",pin:!1,title:"Images",backdrops:{},content:"",access_level:"public"},i=(t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID])?.purl;return!he&&!i&&(i=window.location.pathname.replace(/^\//,"").toLowerCase()),typeof i=="string"&&(i=i.toLowerCase()),{inAdminFrame:!1,isMobile:t.frontendState.isMobile,adminMode:!1,isEditingPage:!1,hasPage:r!==void 0,pid:r?.id,purl:r?.purl,isPin:r?.pin,title:r?.title,backdrops:r?.backdrops,content:r?.content,access_level:r?.access_level,local_css:r?.local_css,pin_options:r?.pin_options,PIDBeingEdited:t.frontendState.PIDBeingEdited,activePID:t.frontendState.activePID,activePURL:i,pageDepth:$e.getParentSetList(t,e.id).length-1,has_shop:t.site.shop_id!==null,cartData:t.commerce?.cart,Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}},Xae)(ip)});var kz,MRe,r1,Nz,Oz=$(()=>{ke();kz=ve(kn(),1);Zs();Fe();MRe=ve(Ie(),1);fe();r1=class extends me{constructor(e){super(e),this.state={error:!1},this.inputRef=_e()}submit=e=>{e.preventDefault(),this.setState({error:!1,downloadStarted:!1});let r=this.inputRef.current?.value;if(!r)return this.setState({error:"Email address is not valid."});kz.default.post(`https://${Qh?Ka:"dev.cargo.site"}/c3filedownload/validate/${r}/${this.props.hash}`).then(i=>{if(i?.data?.jdata?.valid)return this.setState({error:!1,downloadStarted:!0}),window.location.href=`https://${Qh?Ka:"dev.cargo.site"}/c3filedownload/download/${r}/${this.props.hash}`;this.setState({error:i?.data?.error||"Email address is not valid."})}).catch(i=>{this.setState({error:"Email address is not valid."})})};onKeyDown=e=>{this.setState({error:!1})};render(){return S(de,{children:[S("style",{children:`

					body {
						letter-spacing: 0;
						padding: 30px;
						color: rgba(0,0,0,.85);
						font-size: 18px;
						line-height: 1;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons;
					}

					.message {
						margin-bottom: 15px;
					}

					.error {
						color: #f00;
					}

					input[type="email"] {
						border-radius: 100px;
						border: 1px solid rgba(0,0,0,0.75);
						padding: 10px 20px;
						font-family: Helvetica;
						font-size: 18px;
						font-style: normal;
						font-weight: 400;
						line-height: 21px;
						letter-spacing: -0.004em;
						text-align: left;
						width: 340px;
					}

					input[type="email"]:placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]::-webkit-input-placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]::-moz-placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]:-moz-placeholder {
						color: rgba(0,0,0,0.75);
					}
					
					.submit {
						-webkit-appearance: none;
						border: none;
						cursor: pointer;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
						font-size: 14.5px;
						white-space: nowrap;
						display: flex;
						margin: 0;
						width: 130px;
						justify-content: flex-start;
						padding: 6.5px 12px 7.5px 15px;
						font-weight: 500;
						flex: 1 1;
						text-align: center;
						height: auto;
						min-height: 28.5px;
						line-height: 1;
						border-radius: 100px;
						user-select: none;
						position: relative;
						background: #262626;
						color: #fff;
						padding-right: 5px;
						margin-top: 10px;
					}
					.submit:active {
						opacity: .7;
					}
				`}),this.state.downloadStarted?S("span",{className:"message",children:"Your download will begin shortly..."}):S(de,{children:[S("span",{className:"message",children:"Please verify your email address:"}),S("form",{noValidate:!0,onSubmit:this.submit,children:[S("input",{name:"email",type:"Email",placeholder:"Email address...",autofocus:"true",onKeyDown:this.onKeyDown,ref:this.inputRef,formNoValidate:!0}),S("button",{className:"submit",type:"submit",children:"Submit"})]}),this.state.error&&S(de,{children:[S("br",{}),S("span",{class:"error",children:this.state.error})]})]})]})}},Nz=r1});var Fz={};hr(Fz,{default:()=>tle});function Jae(t,e){return{siteId:t.site.id,contactForm:t.frontendState.contactForm,colorTheme:t.siteDesign?.contact_form?.theme||"auto",adminMode:zr}}function Qae(t){return Bt({updateFrontendState:Ye.updateFrontendState},t)}var Dz,Lz,Cg,o1,i1,URe,n1,Zae,ele,tle,zz=$(()=>{ke();Ze();Hs();Dz=ve(kn(),1);mt();xr();tr();Lz=ve(Ie(),1);Fe();fe();Cg={},o1=window.matchMedia("(max-aspect-ratio: 1/1)"),i1=o1.matches,URe=o1.addEventListener("change",t=>{i1=t.matches,Cg[1]&&Cg[1].setState({isMobile:i1})}),n1=class extends me{constructor(e){super(e),this.state={loaded:!1,showContents:!1,animate:!1,sent:!1,loading:!1,emailValue:"",messageValue:"",emailError:!1,messageError:!1,isMobile:i1,shadowRoot:null,systemTheme:window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light",transitioningTheme:!1},this.cssLinkRef=_e(),this.contactFormRef=_e(),this.startTime=null,this.inputRef=_e(),this.throttledResize=Lz.default.throttle(this.resizeHandler,200)}componentDidMount(){this.contactFormRef.current&&!this.contactFormRef.current.shadowRoot&&this.contactFormRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.contactFormRef.current?.shadowRoot}),this.props.contactForm.inited||this.props.updateFrontendState({contactForm:{transition:!1,inited:!0}}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.darkModeMediaQueryCallback),this.props.adminMode&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}})}darkModeMediaQueryCallback=e=>{let r=window.matchMedia("(prefers-color-scheme: dark)");this.setState({systemTheme:r.matches?"dark":"light"})};resizeHandler=()=>{let e=(window.innerHeight-30)*.01,r=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--contact-form-vh",`${e}px`),document.documentElement.style.setProperty("--contact-form-vw",`${r}px`)};handleEmailChange=e=>{this.setState({emailValue:e.target.value,emailError:!1})};handleMessageChange=e=>{this.setState({messageValue:e.target.value,messageError:!1})};submitForm=()=>{this.validate()&&this.setState({loading:!0},()=>{this.startTime=new Date;let e={from:this.state.emailValue,site_id:this.props.siteId,message:this.state.messageValue};Dz.default.post("https://cargo.site/dispatch/notifications/sendContactMessage",e,{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(i=>{let o=new Date-this.startTime;if(this.startTime=null,o<=2500){let s=2500-o;setTimeout(()=>{this.closeForm(null,"submit")},s)}else this.closeForm(null,"submit")}).catch(i=>{window.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"Message failed to send, please try again.",type:"notice"}}}),this.startTime=null,this.handleFormError()})})};closeForm=(e,r)=>{this.startTime===null&&(document.body.style.overflow="",window.removeEventListener("resize",this.throttledResize),r?window.requestAnimationFrame(()=>{this.setState({sent:!0},()=>{this.resetForm()})}):window.requestAnimationFrame(()=>{this.setState({animate:!1},()=>{this.resetForm()})}))};resetForm=()=>{delete Cg[1],setTimeout(()=>{this.props.closeOverlay()},280)};componentDidUpdate=e=>{this.props.contactForm.transition!==e.contactForm.transition&&!e.contactForm.transition&&this.props.contactForm.transition&&this.startTime===null&&this.state.animate&&this.closeForm(),this.props.colorTheme!==e.colorTheme&&this.setState({transitioningTheme:!0},()=>{setTimeout(()=>{this.setState({transitioningTheme:!1})},500)})};componentWillUnmount=()=>{this.props.contactForm.inited&&this.props.updateFrontendState({contactForm:{transition:!1,inited:!1}}),this.props.adminMode&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}}),document.body.style.overflow="",document.documentElement.style.removeProperty("--contact-form-vh"),document.documentElement.style.removeProperty("--contact-form-vw")};handleFormError=()=>{this.setState({loading:!1})};handleTransitionEnd=()=>{};focusInput=()=>{this.inputRef?.current?.focus()};validate=()=>{let e=/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+$/i,r=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)+$/i,i=!0,n=!0,o=this.state.emailValue,s=this.state.messageValue;o.length<=0&&(i=!1),s.length<=0&&(n=!1);let a=o.split("@");return a.length!==2&&(i=!1),e.test(a[0])||(i=!1),r.test(a[1])||(i=!1),i||this.setState({emailError:!0}),n||this.setState({messageError:!0}),!(!i||!n)};onCSSLoad=()=>{this.setState({showContents:!0,isMobile:o1.matches},()=>{let e=(window.innerHeight-30)*.01,r=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--contact-form-vh",`${e}px`),document.documentElement.style.setProperty("--contact-form-vw",`${r}px`),window.addEventListener("resize",this.throttledResize),document.body.style.overflow="hidden",Cg[1]=this,setTimeout(()=>{this.setState({animate:!0})},33)})};render(){let e=this.props.colorTheme==="auto"||!this.props.colorTheme?this.state.systemTheme:this.props.colorTheme;return S("div",{className:"contact-form",ref:this.contactFormRef,children:[" ",this.state.shadowRoot&&rt(S(de,{children:[S("link",{rel:"stylesheet",onLoad:this.onCSSLoad,ref:this.cssLinkRef,type:"text/css",href:"https://build.cargo.site/frontend/da62ba/css/front-end/contact-form.css"}),this.state.showContents===!0?S("div",{className:`background${this.state.animate?" active":""}${this.state.sent?" sent":""}${e?" "+e:""}${this.state.transitioningTheme?" transitioning-theme":""}`,children:S("div",{className:`modal${this.state.animate?" active":""}${this.state.sent?" sent":""}${this.state.isMobile?" mobile":""}`,onTransitionEnd:r=>{this.state.sent===!0&&this.handleTransitionEnd(r)},children:S("div",{className:"modal-inner",children:[S("div",{className:"header",children:[S("div",{className:"title"}),S("div",{className:"exit",onPointerUp:r=>{this.closeForm(r)},children:S("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[S("circle",{opacity:"var(--contact-form-close-circle-opacity)",cx:"10",cy:"10",r:"10",fill:"var(--contact-form-color-flat-reverse)"}),S("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0002 11.0607L14.3099 15.3703L15.3705 14.3096L11.0609 10L15.3705 5.69036L14.3099 4.6297L10.0002 8.93934L5.69054 4.62964L4.62988 5.6903L8.93958 10L4.62988 14.3097L5.69054 15.3704L10.0002 11.0607Z",fill:"var(--contact-form-color-flat)"})]})})]}),S("hr",{}),S("div",{onPointerUp:r=>{this.focusInput(r)},className:"email",children:[S("label",{htmlfor:"email",children:["From:","\xA0"]}),S("div",{className:`text-input${this.state.emailError?" error":""}`,children:S("input",{ref:this.inputRef,type:"email",name:"email",autocomplete:"email",value:this.state.emailValue,onChange:r=>{this.handleEmailChange(r)},placeholder:"(enter your email address)..."})})]}),S("hr",{}),S("div",{className:`text-area${this.state.messageError?" error":""}`,children:S("textarea",{name:"message",type:"text",placeholder:"Write your message...",rows:"1",resize:"false",value:this.state.messageValue,onChange:r=>{this.handleMessageChange(r)}})}),S("hr",{}),S("div",{className:"button-area",children:this.state.loading?S(de,{children:S("button",{className:"send",children:["Sending",S(Zae,{})]})}):S(de,{children:[S("button",{className:"cancel",onPointerUp:r=>{this.closeForm(r)},children:"Cancel"}),S("button",{className:"send",onPointerUp:r=>{this.submitForm(r)},children:"Send"})]})})]})})}):null]}),this.state.shadowRoot)]})}},Zae=()=>S("div",{className:"caution-processing"});ele=Ue(Jae,Qae)(n1),tle=ele});var Bz={};hr(Bz,{default:()=>nle,validateShopModel:()=>Ag});function rle(t){return Bt({updateFrontendState:Ye.updateFrontendState,fetchCommerceProducts:Ye.fetchCommerceProducts,fetchContent:Ye.fetchContent,fetchShopModel:Ye.fetchShopModel,addCommerceProductToCart:Ye.addCommerceProductToCart,resetCommerceCart:Ye.resetCommerceCart},t)}var YRe,Ig,Pg,np,s1,Ag,a1,ile,nle,l1=$(()=>{ke();Ze();ns();mt();xr();tr();pa();Fe();YRe=ve(kn(),1),Ig=ve(Ie(),1);fe();he||(Pg=window.matchMedia("(prefers-color-scheme: dark)"),np=window.matchMedia("(max-aspect-ratio: 1/1)"),np.addEventListener("change",()=>{s1?.setState({isMobile:np.matches})}));Ag=async()=>{if(Ht.getState().site.shop_id===null)throw"site does not have shop setup";let e=await Ht.dispatch(Ye.fetchShopModel());if(Ig.default.isEmpty(e))throw"no model data";if(zr===!1&&e.has_valid_config===!1&&!Ht.getState().site?.is_template)throw Ht.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{header:"Coming Soon",type:"notice"}}}),"shop modal contains invalid config";return e},a1=class extends me{constructor(e){super(e),Ag().then(r=>{this.setState({shopModel:r},()=>{this.openOverlay()})}).catch(r=>{console.warn(r),this.closeOverlay()}),this.state={shopModel:null,loaded:!1,animate:!1,isMobile:np.matches,shadowRoot:null,theme:this.getTheme()},this.cartElementRef=_e(),this.iframeRef=_e(),this.startTime=null,this.inputRef=_e(),this.throttledResize=Ig.default.throttle(this.resizeHandler,200)}closeOverlay=()=>{Ht.getState().frontendState.cartOpen!==!0?this.props.closeOverlay({replaceHistory:!0}):window.requestAnimationFrame(()=>{this.setState({closing:!0},()=>{setTimeout(this.props.closeOverlay,280)}),document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no")})};onKeyDown=e=>{if(e.key==="Escape"||e.keyCode===9){let i=window.store?.getState()?.frontendState.alertModal!==!1,n=document.querySelector(".alert-window")!==null;if(i||n)return;this.closeOverlay(e)}};openOverlay(){this.cartElementRef.current&&!this.cartElementRef.current.shadowRoot&&this.cartElementRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.cartElementRef.current?.shadowRoot}),this.props.updateFrontendState({cartOpen:!0}),window.addEventListener("keydown",this.onKeyDown,!0),requestAnimationFrame(()=>{this.iframeRef.current&&(document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1"),this.iframeRef.current.src="/following_frame.html")})}onBeforeCartInit=()=>{this.iframeRef.current.contentWindow.__fetchCommerceProducts__=this.props.fetchCommerceProducts,this.iframeRef.current.contentWindow.__fetchContent__=this.props.fetchContent,this.iframeRef.current.contentWindow.__frontend_history__=this.props.history,this.iframeRef.current.contentWindow.__add_to_cart__=this.props.addCommerceProductToCart,this.iframeRef.current.contentWindow.__reset_cart__=this.props.resetCommerceCart,this.iframeRef.current.contentWindow.__close_overlay__=()=>{this.closeOverlay()}};onCartReady=()=>{this.proxyRoute(),this.proxyTheme()};onCSSLoad=()=>{this.setState({loaded:!0,isMobile:np.matches},()=>{let e=(window.innerHeight-30)*.01,r=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--cart-vh",`${e}px`),document.documentElement.style.setProperty("--cart-vw",`${r}px`),window.addEventListener("resize",this.throttledResize),document.body.style.overflow="hidden",requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.setState({animate:!0})})})})})})})};resizeHandler=()=>{let e=(window.innerHeight-30)*.01,r=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--cart-vh",`${e}px`),document.documentElement.style.setProperty("--cart-vw",`${r}px`)};componentWillUnmount=()=>{this.props.updateFrontendState({cartOpen:!1}),s1=null,Pg.removeEventListener("change",this.onThemeChange),window.removeEventListener("cart-before-init",this.onBeforeCartInit),window.removeEventListener("cart-ready",this.onCartReady),document.body.style.overflow="",window.removeEventListener("resize",this.throttledResize),window.removeEventListener("keydown",this.onKeyDown,!0),document.documentElement.style.removeProperty("--cart-vh"),document.documentElement.style.removeProperty("--cart-vw"),document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no")};componentDidMount(){s1=this,Pg.addEventListener("change",this.onThemeChange),window.addEventListener("cart-before-init",this.onBeforeCartInit,!1),window.addEventListener("cart-ready",this.onCartReady,!1)}componentDidUpdate(e,r){this.props.requestedTheme!==e.requestedTheme&&this.onThemeChange(),this.state.theme!==r.theme&&this.proxyTheme(),this.proxyRoute()}onThemeChange=()=>{this.setState({theme:this.getTheme()})};getTheme=()=>this.props.requestedTheme==="auto"?Pg.matches?"dark":"light":this.props.requestedTheme;proxyRoute(){!this.iframeRef||!this.iframeRef.current||Ig.default.isEqual(this.props.match,this.currentMatch)||this.iframeRef.current.contentWindow.renderRoute&&(this.currentMatch=this.props.match,this.iframeRef.current.contentWindow.renderRoute?.(this.currentMatch))}proxyTheme(){try{this.iframeRef.current.contentWindow.dispatchEvent(new CustomEvent("colorScheme",{detail:this.state.theme}))}catch{}}render(){return this.state.shopModel?S("div",{className:"cart",ref:this.cartElementRef,children:[" ",this.state.shadowRoot&&rt(S(de,{children:[S("link",{rel:"stylesheet",onLoad:this.onCSSLoad,type:"text/css",href:"https://build.cargo.site/frontend/da62ba/css/front-end/cart.css"}),S("div",{className:`background${this.state.animate?" active":""}${this.state.closing?" closing ":" "}${this.state.theme}`,onMouseDown:()=>{this.currentMatch&&!this.currentMatch.url.match("checkout")&&this.closeOverlay()},style:{height:this.state.loaded?"":"0"},children:S("div",{className:`modal${this.state.animate?" active":""}${this.state.closing?" closing":""}${this.state.isMobile?" mobile":""}`,style:{visibility:this.state.loaded?"":"hidden"},children:S("div",{className:"modal-inner",children:S("iframe",{ref:this.iframeRef,src:"about:blank"})})})})]}),this.state.shadowRoot)]}):null}};ile=$n(Ue(t=>({requestedTheme:t.siteDesign.cart?.theme||"light"}),rle)(a1)),nle=ile});function ole(t){return Bt({fetchContent:Ye.fetchContent,updateFrontendState:Ye.updateFrontendState},t)}var op,dl,Tg,Uz,qz,sp,u1,Hz,c1=$(()=>{ke();ns();xr();_k();mt();Fe();tr();Ja();_r();Pd();e1();Rz();Oz();op=ve(Ie(),1);_i();fe();dl={ROOT_PATH:"/",IMG_PATH:"/siteimages",SITE_PREVIEW_PROXY_PATH:"/site.preview/*",ADMIN_CLIENT_SIDE_RENDERING_PATH:"/client-side-rendering.html",PAGE_PATH:"/:page",PAGE_BY_ID_PATH:"/pid/:pid/:args?",DIGITAL_PRODUCT_DOWNLOAD:"/filedownload/:hash"},Tg={CART:"/cart/:section?/:order_id?",CONTACT:"/contact-form"};he||(Uz=(zz(),Nc(Fz)).default,qz=(l1(),Nc(Bz)).default);sp={runAnchorScroll:()=>{},getAnchorForHash:()=>{}},u1=class extends me{constructor(e){super(e),this.currentHashPurl="",this.checkForOverlayPath(this.props.location),this.hashPurlLoadsInProgress=[],this.contentLoadsInProgress=[],this.currentAnchorScrollAttempt=0,this.fixedPinScrollOffset=0,he||(sp.runAnchorScroll=this.runAnchorScroll,sp.getAnchorForHash=this.getAnchorForHash,window.addEventListener("click",r=>{let i=r.target;i.shadowRoot?i=r.composedPath().find(n=>n.tagName==="A")||i:i.closest("a")&&(i=i.closest("a")),i.nodeName==="A"&&i.hash&&i.hash===window.location.hash&&(r.preventDefault(),this.runAnchorScroll(this.getAnchorForHash(i.hash.substring(1).toLowerCase())))}))}shouldComponentUpdate(e){return this.props.location!==e.location&&this.checkForOverlayPath(e.location),!0}checkForOverlayPath=e=>{for(let r in Tg){let i=Tg[r],n=qa(e.pathname,{path:i});if(n){if(op.default.isEqual(n,this.lastMatch))return;this.lastMatch=n,this.lockedUnderlayLocation||(this.lockedUnderlayLocation={...this.props.location},this.lockedUnderlayLocation.pathname===n.url&&(this.lockedUnderlayLocation.pathname="/"));return}else delete this.lastMatch}this.lockedUnderlayLocation&&(this.lockedUnderlayLocation=null)};getAnchorForHash=e=>{let r=null;try{r=document.querySelector(`a#${e}`)}catch{}if(!r){let i=document.getElementById(e);i&&i.nodeName==="A"&&(r=i)}return r};runAnchorScroll=(e,r={})=>{if(!e)throw"Unable to scroll to anchor";if(window.PRESERVE_SCROLL_ON_NEXT_NAVIGATION){window.PRESERVE_SCROLL_ON_NEXT_NAVIGATION=!1;return}let i=document.documentElement.clientHeight,n=e.closest(".fixed.page.allow-scroll")||document.scrollingElement,o=n.scrollHeight,s=n.scrollTop,a=e.getBoundingClientRect(),l=o-i-(s+a.top);r.snapScrollDistance||(a.top>i*1.5?r.snapScrollDistance=-200:a.top<-i*1.5&&(r.snapScrollDistance=200)),l<200&&delete r.snapScrollDistance;let p={transitionTime:300,callback:null,verticalAlign:"top",windowAlign:"top",easing:"easeOutExponential",offset:{x:0,y:this.fixedPinScrollOffset},preventQuickViewClose:!1,lazyScroll:!1};r.hasOwnProperty("snapScrollDistance")&&(p.offset.y=r.snapScrollDistance+this.fixedPinScrollOffset,p.easing="linear",p.transitionTime=0,p.callback=()=>{requestAnimationFrame(()=>{e.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{...p,offset:{x:0,y:this.fixedPinScrollOffset},callback:null,easing:"easeOutExponential",transitionTime:350}}))})}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:p}))})})};deferredContentRenderer(e,r){let i=(this.lockedUnderlayLocation||this.props.location).hash.substring(1).toLowerCase(),n=this.props.store.getState(),o=r==="purl"?$e.getContentByPurl(n,e):$e.getContentById(n,e);if(!this.currentId&&o?.overlay&&(e=Tb(n,$e,o.id),r="pid"),he)return S(Qx,{id:e,idType:r});if(this.lastRequestedId=e,this.lastRequestedIdType=r,this.lastRequestedHashPurl=i,!this.currentId)this.currentId=this.lastRequestedId,this.currentIdType=this.lastRequestedIdType;else if(this.currentId!==this.lastRequestedId||this.currentIdType!==this.lastRequestedIdType){let s=this.lastRequestedId+"/"+this.lastRequestedIdType;this.contentLoadsInProgress.includes(s)||(this.contentLoadsInProgress.push(s),window.__deferred_page_load_promise__=new Promise(a=>{((l,p)=>{this.props.fetchContent(l,{idType:p}).catch(()=>{}).finally(()=>{this.contentLoadsInProgress=this.contentLoadsInProgress.filter(f=>f!==s),this.lastRequestedId===l&&this.lastRequestedIdType===p&&(this.currentId=l,this.currentIdType=p,this.forceUpdate()),delete window.__deferred_page_load_promise__,a()})})(this.lastRequestedId,this.lastRequestedIdType)}))}return this.lastRequestedHashPurl&&this.currentHashPurl!==this.lastRequestedHashPurl?(s=>{if(!this.hashPurlLoadsInProgress.includes(s)){if(this.hashPurlLoadsInProgress.push(s),o?.purl!==s)try{if(this.getAnchorForHash(s)){this.currentHashPurl=s,this.forceUpdate(()=>{this.hashPurlLoadsInProgress=this.hashPurlLoadsInProgress.filter(l=>l!==s),this.runAnchorScroll(this.getAnchorForHash(s))});return}}catch(a){console.error(a),this.hashPurlLoadsInProgress=this.hashPurlLoadsInProgress.filter(l=>l!==s)}this.props.fetchContent(s,{idType:"purl"}).finally(()=>{if(this.hashPurlLoadsInProgress=this.hashPurlLoadsInProgress.filter(v=>v!==s),this.lastRequestedHashPurl!==s)return;let a=this.props.store.getState(),l=$e.getContentByPurl(a,s);if(!l||l.page_type!=="page"||l.pin){console.log("No valid target found. Just scroll to an anchor if it exists"),this.currentHashPurl=s;try{this.getAnchorForHash(s)?.scrollIntoView()}catch(v){console.error(v)}return}if(!o||o.stack!==!0||$e.getParentSetList(a,l.id).includes(o.id)!==!0){if(this.props.adminMode){this.currentHashPurl=s,this.forceUpdate();return}let g=$e.getParentSetList(a,l.id).map(x=>a.sets.byId[x]).find(x=>x.stack);g?(this.props.history.replace(`/${g.id==="root"?"":g.purl}#${s}`),document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"})):(this.currentHashPurl="",this.props.history.replace(`/${s}`),document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"}));return}let p=[],f=a.sets.byId[$e.getItemParentId(a,l.id)],c=5;as(a.structure,a.pages,a.sets,f,a.structure.indexById[l.id]-1,{reverse:!0,traverseUp:!!this.props.isFeed,callback:(v,g,x)=>{if(x||p.push({parent:v,index:g}),c--===0)return"break"}}),c=5,as(a.structure,a.pages,a.sets,f,a.structure.indexById[l.id]+1,{reverse:!1,traverseUp:!!this.props.isFeed,callback:(v,g,x)=>{if(x||p.push({parent:v,index:g}),c--===0)return"break"}});let m=op.default.map(op.default.groupBy(p,"parent"),(v,g)=>this.props.fetchContent(g,{indexes:op.default.map(v,"index"),idType:"pid"}));Promise.all(m).finally(()=>{if(this.lastRequestedHashPurl!==s)return;this.currentHashPurl=s;let v=this.props.store.getState(),g=document.querySelector("body > .content > .pages .page"),x=!1;g&&v.structure.bySort[l.id]<v.structure.bySort[g.id]&&(x=!0),this.forceUpdate(()=>{if(this.lastRequestedHashPurl!==s)return;let _=this.getAnchorForHash(s);_&&this.runAnchorScroll(_,{snapScrollDistance:x?200:-200})})})})}})(this.lastRequestedHashPurl):this.lastRequestedHashPurl||(this.currentHashPurl=""),S(Ak,{children:[S(us.Consumer,{children:s=>{this.fixedPinScrollOffset=(s.totalTopFixedPinsHeight||0)*-1}}),S(Qx,{id:this.currentId,idType:this.currentIdType,hashPurl:this.currentHashPurl})]})}setHomepageClass=()=>{this.props.location?.pathname==="/"||this.props.location?.pathname.includes(this.props.homepageId)?document.querySelector("body").classList.add("home"):document.querySelector("body").classList.remove("home")};componentDidUpdate=()=>{this.setHomepageClass()};componentDidMount=()=>{this.setHomepageClass()};render(){if(this.props.adminMode&&this.props.adminInitialized===!1||!this.props.hasSite)return null;let e=null,r=null,i=this.props.location;return this.lockedUnderlayLocation&&(i=this.lockedUnderlayLocation,r=this.props.location,e=S("div",{class:"overlay",children:S(Xh,{location:r,children:[S(Rn,{exact:!0,path:Tg.CART,render:({match:n})=>S(qz,{closeOverlay:(o={})=>{this.props.history[o.replaceHistory?"replace":"push"](this.lockedUnderlayLocation.pathname+this.lockedUnderlayLocation.hash,{preventScrollReset:!0})}})}),S(Rn,{exact:!0,path:Tg.CONTACT,render:({match:n})=>S(Uz,{closeOverlay:()=>{this.props.history.push(this.lockedUnderlayLocation.pathname+this.lockedUnderlayLocation.hash,{preventScrollReset:!0})}})})]})})),S(de,{children:[e,S(Xh,{location:i,children:[S(Rn,{exact:!0,path:dl.ROOT_PATH,render:({match:n})=>this.props.isFeed?this.deferredContentRenderer("root","pid"):this.deferredContentRenderer(this.props.homepageId||"root","pid")}),S(Rn,{exact:!0,path:dl.DIGITAL_PRODUCT_DOWNLOAD,render:({match:n})=>S(Nz,{hash:n.params.hash})}),S(Rn,{exact:!0,path:dl.IMG_PATH,render:({match:n})=>S(Mz,{})}),S(Rn,{exact:!0,path:dl.SITE_PREVIEW_PROXY_PATH,render:({match:n})=>this.props.isFeed?this.deferredContentRenderer("root","pid"):this.deferredContentRenderer(this.props.homepageId||"root","pid")}),S(Rn,{exact:!0,path:dl.ADMIN_CLIENT_SIDE_RENDERING_PATH,render:({match:n})=>null}),S(Rn,{exact:!0,path:dl.PAGE_PATH,render:({match:n})=>this.deferredContentRenderer(n.params.page.toLowerCase(),"purl")}),S(Rn,{exact:!0,path:dl.PAGE_BY_ID_PATH,render:({match:n})=>this.deferredContentRenderer(n.params.pid,"pid")}),S(Rn,{path:"*",render:({location:n})=>this.deferredContentRenderer(n.pathname.substring(1),"purl")})]})]})}};Hz=Nn($n(Ue((t,e)=>({hasSite:!!t.site,homepageId:$e.getHomepageId(t),isFeed:t.sets.byId.root.stack,adminInitialized:t.adminState?.initialized||!1,adminMode:t.frontendState.adminMode}),ole)(u1)))});var Wz=se((exports,module)=>{"use strict";var numeric=typeof exports>"u"?function(){}:exports;typeof global<"u"&&(global.numeric=numeric);numeric.version="1.2.6";numeric.bench=function(e,r){var i,n,o,s;for(typeof r>"u"&&(r=15),o=.5,i=new Date;;){for(o*=2,s=o;s>3;s-=4)e(),e(),e(),e();for(;s>0;)e(),s--;if(n=new Date,n-i>r)break}for(s=o;s>3;s-=4)e(),e(),e(),e();for(;s>0;)e(),s--;return n=new Date,1e3*(3*o-1)/(n-i)};numeric._myIndexOf=function(e){var r=this.length,i;for(i=0;i<r;++i)if(this[i]===e)return i;return-1};numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf;numeric.Function=Function;numeric.precision=4;numeric.largeArray=50;numeric.prettyPrint=function(e){function r(o){if(o===0)return"0";if(isNaN(o))return"NaN";if(o<0)return"-"+r(-o);if(isFinite(o)){var s=Math.floor(Math.log(o)/Math.log(10)),a=o/Math.pow(10,s),l=a.toPrecision(numeric.precision);return parseFloat(l)===10&&(s++,a=1,l=a.toPrecision(numeric.precision)),parseFloat(l).toString()+"e"+s.toString()}return"Infinity"}var i=[];function n(o){var s;if(typeof o>"u")return i.push(Array(numeric.precision+8).join(" ")),!1;if(typeof o=="string")return i.push('"'+o+'"'),!1;if(typeof o=="boolean")return i.push(o.toString()),!1;if(typeof o=="number"){var a=r(o),l=o.toPrecision(numeric.precision),p=parseFloat(o.toString()).toString(),f=[a,l,p,parseFloat(l).toString(),parseFloat(p).toString()];for(s=1;s<f.length;s++)f[s].length<a.length&&(a=f[s]);return i.push(Array(numeric.precision+8-a.length).join(" ")+a),!1}if(o===null)return i.push("null"),!1;if(typeof o=="function"){i.push(o.toString());var c=!1;for(s in o)o.hasOwnProperty(s)&&(c?i.push(`,
`):i.push(`
{`),c=!0,i.push(s),i.push(`: 
`),n(o[s]));return c&&i.push(`}
`),!0}if(o instanceof Array){if(o.length>numeric.largeArray)return i.push("...Large Array..."),!0;var c=!1;for(i.push("["),s=0;s<o.length;s++)s>0&&(i.push(","),c&&i.push(`
 `)),c=n(o[s]);return i.push("]"),!0}i.push("{");var c=!1;for(s in o)o.hasOwnProperty(s)&&(c&&i.push(`,
`),c=!0,i.push(s),i.push(`: 
`),n(o[s]));return i.push("}"),!0}return n(e),i.join("")};numeric.parseDate=function(e){function r(i){if(typeof i=="string")return Date.parse(i.replace(/-/g,"/"));if(!(i instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n=[],o;for(o=0;o<i.length;o++)n[o]=r(i[o]);return n}return r(e)};numeric.parseFloat=function(e){function r(i){if(typeof i=="string")return parseFloat(i);if(!(i instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n=[],o;for(o=0;o<i.length;o++)n[o]=r(i[o]);return n}return r(e)};numeric.parseCSV=function(e){var r=e.split(`
`),i,n,o=[],s=/(([^'",]*)|('[^']*')|("[^"]*")),/g,a=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,l=function(m){return m.substr(0,m.length-1)},p=0;for(n=0;n<r.length;n++){var f=(r[n]+",").match(s),c;if(f.length>0){for(o[p]=[],i=0;i<f.length;i++)c=l(f[i]),a.test(c)?o[p][i]=parseFloat(c):o[p][i]=c;p++}}return o};numeric.toCSV=function(e){var r=numeric.dim(e),i,n,o,s,a,l;for(o=r[0],s=r[1],l=[],i=0;i<o;i++){for(a=[],n=0;n<o;n++)a[n]=e[i][n].toString();l[i]=a.join(", ")}return l.join(`
`)+`
`};numeric.getURL=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(),r};numeric.imageURL=function(e){function r(L){var O=L.length,M,D,P,U,N,F,V,q,J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Y="";for(M=0;M<O;M+=3)D=L[M],P=L[M+1],U=L[M+2],N=D>>2,F=((D&3)<<4)+(P>>4),V=((P&15)<<2)+(U>>6),q=U&63,M+1>=O?V=q=64:M+2>=O&&(q=64),Y+=J.charAt(N)+J.charAt(F)+J.charAt(V)+J.charAt(q);return Y}function i(L,O,M){typeof O>"u"&&(O=0),typeof M>"u"&&(M=L.length);var D=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],P=-1,U=0,N=L.length,F;for(F=O;F<M;F++)U=(P^L[F])&255,P=P>>>8^D[U];return P^-1}var n=e[0].length,o=e[0][0].length,s,a,l,p,f,c,m,v,g,x,_,E=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,o>>24&255,o>>16&255,o>>8&255,o&255,n>>24&255,n>>16&255,n>>8&255,n&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(_=i(E,12,29),E[29]=_>>24&255,E[30]=_>>16&255,E[31]=_>>8&255,E[32]=_&255,s=1,a=0,v=0;v<n;v++){for(v<n-1?E.push(0):E.push(1),c=3*o+1+(v===0)&255,m=3*o+1+(v===0)>>8&255,E.push(c),E.push(m),E.push(~c&255),E.push(~m&255),v===0&&E.push(0),g=0;g<o;g++)for(p=0;p<3;p++)c=e[p][v][g],c>255?c=255:c<0?c=0:c=Math.round(c),s=(s+c)%65521,a=(a+s)%65521,E.push(c);E.push(0)}return x=(a<<16)+s,E.push(x>>24&255),E.push(x>>16&255),E.push(x>>8&255),E.push(x&255),f=E.length-41,E[33]=f>>24&255,E[34]=f>>16&255,E[35]=f>>8&255,E[36]=f&255,_=i(E,37),E.push(_>>24&255),E.push(_>>16&255),E.push(_>>8&255),E.push(_&255),E.push(0),E.push(0),E.push(0),E.push(0),E.push(73),E.push(69),E.push(78),E.push(68),E.push(174),E.push(66),E.push(96),E.push(130),"data:image/png;base64,"+r(E)};numeric._dim=function(e){for(var r=[];typeof e=="object";)r.push(e.length),e=e[0];return r};numeric.dim=function(e){var r,i;return typeof e=="object"?(r=e[0],typeof r=="object"?(i=r[0],typeof i=="object"?numeric._dim(e):[e.length,r.length]):[e.length]):[]};numeric.mapreduce=function(e,r){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+r+`;
if(typeof x === "number") { var xi = x; `+e+`; return accum; }
if(typeof _s === "undefined") _s = numeric.dim(x);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i,xi;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) {
        accum = arguments.callee(x[i],accum,_s,_k+1);
    }    return accum;
}
for(i=_n-1;i>=1;i-=2) { 
    xi = x[i];
    `+e+`;
    xi = x[i-1];
    `+e+`;
}
if(i === 0) {
    xi = x[i];
    `+e+`
}
return accum;`)};numeric.mapreduce2=function(e,r){return Function("x",`var n = x.length;
var i,xi;
`+r+`;
for(i=n-1;i!==-1;--i) { 
    xi = x[i];
    `+e+`;
}
return accum;`)};numeric.same=function t(e,r){var i,n;if(!(e instanceof Array)||!(r instanceof Array)||(n=e.length,n!==r.length))return!1;for(i=0;i<n;i++)if(e[i]!==r[i])if(typeof e[i]=="object"){if(!t(e[i],r[i]))return!1}else return!1;return!0};numeric.rep=function(e,r,i){typeof i>"u"&&(i=0);var n=e[i],o=Array(n),s;if(i===e.length-1){for(s=n-2;s>=0;s-=2)o[s+1]=r,o[s]=r;return s===-1&&(o[0]=r),o}for(s=n-1;s>=0;s--)o[s]=numeric.rep(e,r,i+1);return o};numeric.dotMMsmall=function(e,r){var i,n,o,s,a,l,p,f,c,m,v,g,x,_;for(s=e.length,a=r.length,l=r[0].length,p=Array(s),i=s-1;i>=0;i--){for(f=Array(l),c=e[i],o=l-1;o>=0;o--){for(m=c[a-1]*r[a-1][o],n=a-2;n>=1;n-=2)v=n-1,m+=c[n]*r[n][o]+c[v]*r[v][o];n===0&&(m+=c[0]*r[0][o]),f[o]=m}p[i]=f}return p};numeric._getCol=function(e,r,i){var n=e.length,o;for(o=n-1;o>0;--o)i[o]=e[o][r],--o,i[o]=e[o][r];o===0&&(i[0]=e[0][r])};numeric.dotMMbig=function(e,r){var i=numeric._getCol,n=r.length,o=Array(n),s=e.length,a=r[0].length,l=new Array(s),p,f=numeric.dotVV,c,m,v,g;for(--n,--s,c=s;c!==-1;--c)l[c]=Array(a);for(--a,c=a;c!==-1;--c)for(i(r,c,o),m=s;m!==-1;--m)g=0,p=e[m],l[m][c]=f(p,o);return l};numeric.dotMV=function(e,r){var i=e.length,n=r.length,o,s=Array(i),a=numeric.dotVV;for(o=i-1;o>=0;o--)s[o]=a(e[o],r);return s};numeric.dotVM=function(e,r){var i,n,o,s,a,l,p,f,c,m,v,g,x,_,E,L,O,M,D;for(s=e.length,a=r[0].length,p=Array(a),o=a-1;o>=0;o--){for(m=e[s-1]*r[s-1][o],n=s-2;n>=1;n-=2)v=n-1,m+=e[n]*r[n][o]+e[v]*r[v][o];n===0&&(m+=e[0]*r[0][o]),p[o]=m}return p};numeric.dotVV=function(e,r){var i,n=e.length,o,s=e[n-1]*r[n-1];for(i=n-2;i>=1;i-=2)o=i-1,s+=e[i]*r[i]+e[o]*r[o];return i===0&&(s+=e[0]*r[0]),s};numeric.dot=function(e,r){var i=numeric.dim;switch(i(e).length*1e3+i(r).length){case 2002:return r.length<10?numeric.dotMMsmall(e,r):numeric.dotMMbig(e,r);case 2001:return numeric.dotMV(e,r);case 1002:return numeric.dotVM(e,r);case 1001:return numeric.dotVV(e,r);case 1e3:return numeric.mulVS(e,r);case 1:return numeric.mulSV(e,r);case 0:return e*r;default:throw new Error("numeric.dot only works on vectors and matrices")}};numeric.diag=function(e){var r,i,n,o=e.length,s=Array(o),a;for(r=o-1;r>=0;r--){for(a=Array(o),i=r+2,n=o-1;n>=i;n-=2)a[n]=0,a[n-1]=0;for(n>r&&(a[n]=0),a[r]=e[r],n=r-1;n>=1;n-=2)a[n]=0,a[n-1]=0;n===0&&(a[0]=0),s[r]=a}return s};numeric.getDiag=function(t){var e=Math.min(t.length,t[0].length),r,i=Array(e);for(r=e-1;r>=1;--r)i[r]=t[r][r],--r,i[r]=t[r][r];return r===0&&(i[0]=t[0][0]),i};numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))};numeric.pointwise=function(e,r,i){typeof i>"u"&&(i="");var n=[],o,s=/\[i\]$/,a,l="",p=!1;for(o=0;o<e.length;o++)s.test(e[o])?(a=e[o].substring(0,e[o].length-3),l=a):a=e[o],a==="ret"&&(p=!0),n.push(a);return n[e.length]="_s",n[e.length+1]="_k",n[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+l+`);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i`+(p?"":", ret = Array(_n)")+`;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(`+e.join(",")+`,_s,_k+1);
    return ret;
}
`+i+`
for(i=_n-1;i!==-1;--i) {
    `+r+`
}
return ret;`,Function.apply(null,n)};numeric.pointwise2=function(e,r,i){typeof i>"u"&&(i="");var n=[],o,s=/\[i\]$/,a,l="",p=!1;for(o=0;o<e.length;o++)s.test(e[o])?(a=e[o].substring(0,e[o].length-3),l=a):a=e[o],a==="ret"&&(p=!0),n.push(a);return n[e.length]="var _n = "+l+`.length;
var i`+(p?"":", ret = Array(_n)")+`;
`+i+`
for(i=_n-1;i!==-1;--i) {
`+r+`
}
return ret;`,Function.apply(null,n)};numeric._biforeach=function t(e,r,i,n,o){if(n===i.length-1){o(e,r);return}var s,a=i[n];for(s=a-1;s>=0;s--)t(typeof e=="object"?e[s]:e,typeof r=="object"?r[s]:r,i,n+1,o)};numeric._biforeach2=function t(e,r,i,n,o){if(n===i.length-1)return o(e,r);var s,a=i[n],l=Array(a);for(s=a-1;s>=0;--s)l[s]=t(typeof e=="object"?e[s]:e,typeof r=="object"?r[s]:r,i,n+1,o);return l};numeric._foreach=function t(e,r,i,n){if(i===r.length-1){n(e);return}var o,s=r[i];for(o=s-1;o>=0;o--)t(e[o],r,i+1,n)};numeric._foreach2=function t(e,r,i,n){if(i===r.length-1)return n(e);var o,s=r[i],a=Array(s);for(o=s-1;o>=0;o--)a[o]=t(e[o],r,i+1,n);return a};numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="};numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"];numeric.mathfuns2=["atan2","pow","max","min"];numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""};numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]};(function(){var t,e;for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],numeric.ops2[e]=e;for(t in numeric.ops2)if(numeric.ops2.hasOwnProperty(t)){e=numeric.ops2[t];var r,i,n="";numeric.myIndexOf.call(numeric.mathfuns2,t)!==-1?(n="var "+e+" = Math."+e+`;
`,r=function(o,s,a){return o+" = "+e+"("+s+","+a+")"},i=function(o,s){return o+" = "+e+"("+o+","+s+")"}):(r=function(o,s,a){return o+" = "+s+" "+e+" "+a},numeric.opseq.hasOwnProperty(t+"eq")?i=function(o,s){return o+" "+e+"= "+s}:i=function(o,s){return o+" = "+o+" "+e+" "+s}),numeric[t+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),n),numeric[t+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),n),numeric[t+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),n),numeric[t]=Function(`var n = arguments.length, i, x = arguments[0], y;
var VV = numeric.`+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+`SV;
var dim = numeric.dim;
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof x === "object") {
      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);
      else x = numeric._biforeach2(x,y,dim(x),0,VS);
  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);
  else `+i("x","y")+`
}
return x;
`),numeric[e]=numeric[t],numeric[t+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),n),numeric[t+"eqS"]=numeric.pointwise2(["ret[i]","x"],i("ret[i]","x"),n),numeric[t+"eq"]=Function(`var n = arguments.length, i, x = arguments[0], y;
var V = numeric.`+t+"eqV, S = numeric."+t+`eqS
var s = numeric.dim(x);
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);
  else numeric._biforeach(x,y,s,0,S);
}
return x;
`)}for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],delete numeric.ops2[e];for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],numeric.ops1[e]=e;for(t in numeric.ops1)numeric.ops1.hasOwnProperty(t)&&(n="",e=numeric.ops1[t],numeric.myIndexOf.call(numeric.mathfuns,t)!==-1&&Math.hasOwnProperty(e)&&(n="var "+e+" = Math."+e+`;
`),numeric[t+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+e+"(ret[i]);",n),numeric[t+"eq"]=Function("x",'if(typeof x !== "object") return '+e+`x
var i;
var V = numeric.`+t+`eqV;
var s = numeric.dim(x);
numeric._foreach(x,s,0,V);
return x;
`),numeric[t+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+e+"(x[i]);",n),numeric[t]=Function("x",'if(typeof x !== "object") return '+e+`(x)
var i;
var V = numeric.`+t+`V;
var s = numeric.dim(x);
return numeric._foreach2(x,s,0,V);
`));for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],delete numeric.ops1[e];for(t in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(t)&&(e=numeric.mapreducers[t],numeric[t+"V"]=numeric.mapreduce2(e[0],e[1]),numeric[t]=Function("x","s","k",e[1]+`if(typeof x !== "object") {    xi = x;
`+e[0]+`;
    return accum;
}if(typeof s === "undefined") s = numeric.dim(x);
if(typeof k === "undefined") k = 0;
if(k === s.length-1) return numeric.`+t+`V(x);
var xi;
var n = x.length, i;
for(i=n-1;i!==-1;--i) {
   xi = arguments.callee(x[i]);
`+e[0]+`;
}
return accum;
`))})();numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;");numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;");numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;");numeric.trunc=function(e,r){return typeof e=="object"?typeof r=="object"?numeric.truncVV(e,r):numeric.truncVS(e,r):typeof r=="object"?numeric.truncSV(e,r):Math.round(e/r)*r};numeric.inv=function(x){var r=numeric.dim(x),i=Math.abs,n=r[0],o=r[1],s=numeric.clone(x),a,l,p=numeric.identity(n),f,c,m,v,g,x;for(v=0;v<o;++v){var _=-1,E=-1;for(m=v;m!==n;++m)g=i(s[m][v]),g>E&&(_=m,E=g);for(l=s[_],s[_]=s[v],s[v]=l,c=p[_],p[_]=p[v],p[v]=c,x=l[v],g=v;g!==o;++g)l[g]/=x;for(g=o-1;g!==-1;--g)c[g]/=x;for(m=n-1;m!==-1;--m)if(m!==v){for(a=s[m],f=p[m],x=a[v],g=v+1;g!==o;++g)a[g]-=l[g]*x;for(g=o-1;g>0;--g)f[g]-=c[g]*x,--g,f[g]-=c[g]*x;g===0&&(f[0]-=c[0]*x)}}return p};numeric.det=function(e){var r=numeric.dim(e);if(r.length!==2||r[0]!==r[1])throw new Error("numeric: det() only works on square matrices");var i=r[0],n=1,o,s,a,l=numeric.clone(e),p,f,c,m,v,g,x;for(s=0;s<i-1;s++){for(a=s,o=s+1;o<i;o++)Math.abs(l[o][s])>Math.abs(l[a][s])&&(a=o);for(a!==s&&(m=l[a],l[a]=l[s],l[s]=m,n*=-1),p=l[s],o=s+1;o<i;o++){for(f=l[o],c=f[s]/p[s],a=s+1;a<i-1;a+=2)v=a+1,f[a]-=p[a]*c,f[v]-=p[v]*c;a!==i&&(f[a]-=p[a]*c)}if(p[s]===0)return 0;n*=p[s]}return n*l[s][s]};numeric.transpose=function(e){var r,i,n=e.length,o=e[0].length,s=Array(o),a,l,p;for(i=0;i<o;i++)s[i]=Array(n);for(r=n-1;r>=1;r-=2){for(l=e[r],a=e[r-1],i=o-1;i>=1;--i)p=s[i],p[r]=l[i],p[r-1]=a[i],--i,p=s[i],p[r]=l[i],p[r-1]=a[i];i===0&&(p=s[0],p[r]=l[0],p[r-1]=a[0])}if(r===0){for(a=e[0],i=o-1;i>=1;--i)s[i][0]=a[i],--i,s[i][0]=a[i];i===0&&(s[0][0]=a[0])}return s};numeric.negtranspose=function(e){var r,i,n=e.length,o=e[0].length,s=Array(o),a,l,p;for(i=0;i<o;i++)s[i]=Array(n);for(r=n-1;r>=1;r-=2){for(l=e[r],a=e[r-1],i=o-1;i>=1;--i)p=s[i],p[r]=-l[i],p[r-1]=-a[i],--i,p=s[i],p[r]=-l[i],p[r-1]=-a[i];i===0&&(p=s[0],p[r]=-l[0],p[r-1]=-a[0])}if(r===0){for(a=e[0],i=o-1;i>=1;--i)s[i][0]=-a[i],--i,s[i][0]=-a[i];i===0&&(s[0][0]=-a[0])}return s};numeric._random=function t(e,r){var i,n=e[r],o=Array(n),s;if(r===e.length-1){for(s=Math.random,i=n-1;i>=1;i-=2)o[i]=s(),o[i-1]=s();return i===0&&(o[0]=s()),o}for(i=n-1;i>=0;i--)o[i]=t(e,r+1);return o};numeric.random=function(e){return numeric._random(e,0)};numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))};numeric.linspace=function(e,r,i){if(typeof i>"u"&&(i=Math.max(Math.round(r-e)+1,1)),i<2)return i===1?[e]:[];var n,o=Array(i);for(i--,n=i;n>=0;n--)o[n]=(n*r+(i-n)*e)/i;return o};numeric.getBlock=function(e,r,i){var n=numeric.dim(e);function o(s,a){var l,p=r[a],f=i[a]-p,c=Array(f);if(a===n.length-1){for(l=f;l>=0;l--)c[l]=s[l+p];return c}for(l=f;l>=0;l--)c[l]=o(s[l+p],a+1);return c}return o(e,0)};numeric.setBlock=function(e,r,i,n){var o=numeric.dim(e);function s(a,l,p){var f,c=r[p],m=i[p]-c;if(p===o.length-1)for(f=m;f>=0;f--)a[f+c]=l[f];for(f=m;f>=0;f--)s(a[f+c],l[f],p+1)}return s(e,n,0),e};numeric.getRange=function(e,r,i){var n=r.length,o=i.length,s,a,l=Array(n),p,f;for(s=n-1;s!==-1;--s)for(l[s]=Array(o),p=l[s],f=e[r[s]],a=o-1;a!==-1;--a)p[a]=f[i[a]];return l};numeric.blockMatrix=function(e){var r=numeric.dim(e);if(r.length<4)return numeric.blockMatrix([e]);var i=r[0],n=r[1],o,s,a,l,p;for(o=0,s=0,a=0;a<i;++a)o+=e[a][0].length;for(l=0;l<n;++l)s+=e[0][l][0].length;var f=Array(o);for(a=0;a<o;++a)f[a]=Array(s);var c=0,m,v,g,x,_;for(a=0;a<i;++a){for(m=s,l=n-1;l!==-1;--l)for(p=e[a][l],m-=p[0].length,g=p.length-1;g!==-1;--g)for(_=p[g],v=f[c+g],x=_.length-1;x!==-1;--x)v[m+x]=_[x];c+=e[a][0].length}return f};numeric.tensor=function(e,r){if(typeof e=="number"||typeof r=="number")return numeric.mul(e,r);var i=numeric.dim(e),n=numeric.dim(r);if(i.length!==1||n.length!==1)throw new Error("numeric: tensor product is only defined for vectors");var o=i[0],s=n[0],a=Array(o),l,p,f,c;for(p=o-1;p>=0;p--){for(l=Array(s),c=e[p],f=s-1;f>=3;--f)l[f]=c*r[f],--f,l[f]=c*r[f],--f,l[f]=c*r[f],--f,l[f]=c*r[f];for(;f>=0;)l[f]=c*r[f],--f;a[p]=l}return a};numeric.T=function(e,r){this.x=e,this.y=r};numeric.t=function(e,r){return new numeric.T(e,r)};numeric.Tbinop=function(e,r,i,n,o){var s=numeric.indexOf;if(typeof o!="string"){var a;o="";for(a in numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||r.indexOf(a)>=0||i.indexOf(a)>=0||n.indexOf(a)>=0)&&a.length>1&&(o+="var "+a+" = numeric."+a+`;
`)}return Function(["y"],`var x = this;
if(!(y instanceof numeric.T)) { y = new numeric.T(y); }
`+o+`
if(x.y) {  if(y.y) {    return new numeric.T(`+n+`);
  }
  return new numeric.T(`+i+`);
}
if(y.y) {
  return new numeric.T(`+r+`);
}
return new numeric.T(`+e+`);
`)};numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");numeric.T.prototype.reciprocal=function(){var e=numeric.mul,r=numeric.div;if(this.y){var i=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(r(this.x,i),r(numeric.neg(this.y),i))}return new T(r(1,this.x))};numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var r=numeric.div;return this.y?new numeric.T(r(this.x,e.x),r(this.y,e.x)):new numeric.T(r(this.x,e.x))};numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");numeric.T.prototype.transpose=function(){var e=numeric.transpose,r=this.x,i=this.y;return i?new numeric.T(e(r),e(i)):new numeric.T(e(r))};numeric.T.prototype.transjugate=function(){var e=numeric.transpose,r=this.x,i=this.y;return i?new numeric.T(e(r),numeric.negtranspose(i)):new numeric.T(e(r))};numeric.Tunop=function(e,r,i){return typeof i!="string"&&(i=""),Function(`var x = this;
`+i+`
if(x.y) {  `+r+`;
}
`+e+`;
`)};numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;");numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;");numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;");numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));",`var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();
return new numeric.T(numeric.log(r.x),theta.x);`);numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);",`var f = numeric.norm2Squared;
return Math.sqrt(f(x.x)+f(x.y));`);numeric.T.prototype.inv=function(){var e=this;if(typeof e.y>"u")return new numeric.T(numeric.inv(e.x));var r=e.x.length,x,_,E,i=numeric.identity(r),n=numeric.rep([r,r],0),o=numeric.clone(e.x),s=numeric.clone(e.y),a,l,p,f,c,m,v,g,x,_,E,L,O,M,D,P,U,N;for(x=0;x<r;x++){for(M=o[x][x],D=s[x][x],L=M*M+D*D,E=x,_=x+1;_<r;_++)M=o[_][x],D=s[_][x],O=M*M+D*D,O>L&&(E=_,L=O);for(E!==x&&(N=o[x],o[x]=o[E],o[E]=N,N=s[x],s[x]=s[E],s[E]=N,N=i[x],i[x]=i[E],i[E]=N,N=n[x],n[x]=n[E],n[E]=N),a=o[x],l=s[x],c=i[x],m=n[x],M=a[x],D=l[x],_=x+1;_<r;_++)P=a[_],U=l[_],a[_]=(P*M+U*D)/L,l[_]=(U*M-P*D)/L;for(_=0;_<r;_++)P=c[_],U=m[_],c[_]=(P*M+U*D)/L,m[_]=(U*M-P*D)/L;for(_=x+1;_<r;_++){for(p=o[_],f=s[_],v=i[_],g=n[_],M=p[x],D=f[x],E=x+1;E<r;E++)P=a[E],U=l[E],p[E]-=P*M-U*D,f[E]-=U*M+P*D;for(E=0;E<r;E++)P=c[E],U=m[E],v[E]-=P*M-U*D,g[E]-=U*M+P*D}}for(x=r-1;x>0;x--)for(c=i[x],m=n[x],_=x-1;_>=0;_--)for(v=i[_],g=n[_],M=o[_][x],D=s[_][x],E=r-1;E>=0;E--)P=c[E],U=m[E],v[E]-=M*P-D*U,g[E]-=M*U+D*P;return new numeric.T(i,n)};numeric.T.prototype.get=function(e){var r=this.x,i=this.y,n=0,o,s=e.length;if(i){for(;n<s;)o=e[n],r=r[o],i=i[o],n++;return new numeric.T(r,i)}for(;n<s;)o=e[n],r=r[o],n++;return new numeric.T(r)};numeric.T.prototype.set=function(e,r){var i=this.x,n=this.y,o=0,s,a=e.length,l=r.x,p=r.y;if(a===0)return p?this.y=p:n&&(this.y=void 0),this.x=i,this;if(p){for(n||(n=numeric.rep(numeric.dim(i),0),this.y=n);o<a-1;)s=e[o],i=i[s],n=n[s],o++;return s=e[o],i[s]=l,n[s]=p,this}if(n){for(;o<a-1;)s=e[o],i=i[s],n=n[s],o++;return s=e[o],i[s]=l,l instanceof Array?n[s]=numeric.rep(numeric.dim(l),0):n[s]=0,this}for(;o<a-1;)s=e[o],i=i[s],o++;return s=e[o],i[s]=l,this};numeric.T.prototype.getRows=function(e,r){var i=r-e+1,n,o=Array(i),s,a=this.x,l=this.y;for(n=e;n<=r;n++)o[n-e]=a[n];if(l){for(s=Array(i),n=e;n<=r;n++)s[n-e]=l[n];return new numeric.T(o,s)}return new numeric.T(o)};numeric.T.prototype.setRows=function(e,r,i){var n,o=this.x,s=this.y,a=i.x,l=i.y;for(n=e;n<=r;n++)o[n]=a[n-e];if(l)for(s||(s=numeric.rep(numeric.dim(o),0),this.y=s),n=e;n<=r;n++)s[n]=l[n-e];else if(s)for(n=e;n<=r;n++)s[n]=numeric.rep([a[n-e].length],0);return this};numeric.T.prototype.getRow=function(e){var r=this.x,i=this.y;return i?new numeric.T(r[e],i[e]):new numeric.T(r[e])};numeric.T.prototype.setRow=function(e,r){var i=this.x,n=this.y,o=r.x,s=r.y;return i[e]=o,s?(n||(n=numeric.rep(numeric.dim(i),0),this.y=n),n[e]=s):n&&(n=numeric.rep([o.length],0)),this};numeric.T.prototype.getBlock=function(e,r){var i=this.x,n=this.y,o=numeric.getBlock;return n?new numeric.T(o(i,e,r),o(n,e,r)):new numeric.T(o(i,e,r))};numeric.T.prototype.setBlock=function(e,r,i){i instanceof numeric.T||(i=new numeric.T(i));var n=this.x,o=this.y,s=numeric.setBlock,a=i.x,l=i.y;if(l)return o||(this.y=numeric.rep(numeric.dim(this),0),o=this.y),s(n,e,r,a),s(o,e,r,l),this;s(n,e,r,a),o&&s(o,e,r,numeric.rep(numeric.dim(a),0))};numeric.T.rep=function(e,r){var i=numeric.T;r instanceof i||(r=new i(r));var n=r.x,o=r.y,s=numeric.rep;return o?new i(s(e,n),s(e,o)):new i(s(e,n))};numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var r=e.x,i=e.y,n=numeric.diag;return i?new numeric.T(n(r),n(i)):new numeric.T(n(r))};numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)};numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))};numeric.T.prototype.getDiag=function(){var e=numeric,r=this.x,i=this.y;return i?new e.T(e.getDiag(r),e.getDiag(i)):new e.T(e.getDiag(r))};numeric.house=function(e){var r=numeric.clone(e),i=e[0]>=0?1:-1,n=i*numeric.norm2(e);r[0]+=n;var o=numeric.norm2(r);if(o===0)throw new Error("eig: internal error");return numeric.div(r,o)};numeric.toUpperHessenberg=function(e){var r=numeric.dim(e);if(r.length!==2||r[0]!==r[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var i=r[0],n,o,s,a,l,p=numeric.clone(e),f,c,m,v,g=numeric.identity(i),x;for(o=0;o<i-2;o++){for(a=Array(i-o-1),n=o+1;n<i;n++)a[n-o-1]=p[n][o];if(numeric.norm2(a)>0){for(l=numeric.house(a),f=numeric.getBlock(p,[o+1,o],[i-1,i-1]),c=numeric.tensor(l,numeric.dot(l,f)),n=o+1;n<i;n++)for(m=p[n],v=c[n-o-1],s=o;s<i;s++)m[s]-=2*v[s-o];for(f=numeric.getBlock(p,[0,o+1],[i-1,i-1]),c=numeric.tensor(numeric.dot(f,l),l),n=0;n<i;n++)for(m=p[n],v=c[n],s=o+1;s<i;s++)m[s]-=2*v[s-o-1];for(f=Array(i-o-1),n=o+1;n<i;n++)f[n-o-1]=g[n];for(c=numeric.tensor(l,numeric.dot(l,f)),n=o+1;n<i;n++)for(x=g[n],v=c[n-o-1],s=0;s<i;s++)x[s]-=2*v[s]}}return{H:p,Q:g}};numeric.epsilon=2220446049250313e-31;numeric.QRFrancis=function(t,e){typeof e>"u"&&(e=1e4),t=numeric.clone(t);var r=numeric.clone(t),i=numeric.dim(t),n=i[0],o,s,a,l,p,f,c,m,v,g=numeric.identity(n),x,_,E,L,O,M,D,P,U;if(n<3)return{Q:g,B:[[0,n-1]]};var N=numeric.epsilon;for(U=0;U<e;U++){for(D=0;D<n-1;D++)if(Math.abs(t[D+1][D])<N*(Math.abs(t[D][D])+Math.abs(t[D+1][D+1]))){var F=numeric.QRFrancis(numeric.getBlock(t,[0,0],[D,D]),e),V=numeric.QRFrancis(numeric.getBlock(t,[D+1,D+1],[n-1,n-1]),e);for(E=Array(D+1),M=0;M<=D;M++)E[M]=g[M];for(L=numeric.dot(F.Q,E),M=0;M<=D;M++)g[M]=L[M];for(E=Array(n-D-1),M=D+1;M<n;M++)E[M-D-1]=g[M];for(L=numeric.dot(V.Q,E),M=D+1;M<n;M++)g[M]=L[M-D-1];return{Q:g,B:F.B.concat(numeric.add(V.B,D+1))}}if(a=t[n-2][n-2],l=t[n-2][n-1],p=t[n-1][n-2],f=t[n-1][n-1],m=a+f,c=a*f-l*p,v=numeric.getBlock(t,[0,0],[2,2]),m*m>=4*c){var q,J;q=.5*(m+Math.sqrt(m*m-4*c)),J=.5*(m-Math.sqrt(m*m-4*c)),v=numeric.add(numeric.sub(numeric.dot(v,v),numeric.mul(v,q+J)),numeric.diag(numeric.rep([3],q*J)))}else v=numeric.add(numeric.sub(numeric.dot(v,v),numeric.mul(v,m)),numeric.diag(numeric.rep([3],c)));for(o=[v[0][0],v[1][0],v[2][0]],s=numeric.house(o),E=[t[0],t[1],t[2]],L=numeric.tensor(s,numeric.dot(s,E)),M=0;M<3;M++)for(_=t[M],O=L[M],P=0;P<n;P++)_[P]-=2*O[P];for(E=numeric.getBlock(t,[0,0],[n-1,2]),L=numeric.tensor(numeric.dot(E,s),s),M=0;M<n;M++)for(_=t[M],O=L[M],P=0;P<3;P++)_[P]-=2*O[P];for(E=[g[0],g[1],g[2]],L=numeric.tensor(s,numeric.dot(s,E)),M=0;M<3;M++)for(x=g[M],O=L[M],P=0;P<n;P++)x[P]-=2*O[P];var Y;for(D=0;D<n-2;D++){for(P=D;P<=D+1;P++)if(Math.abs(t[P+1][P])<N*(Math.abs(t[P][P])+Math.abs(t[P+1][P+1]))){var F=numeric.QRFrancis(numeric.getBlock(t,[0,0],[P,P]),e),V=numeric.QRFrancis(numeric.getBlock(t,[P+1,P+1],[n-1,n-1]),e);for(E=Array(P+1),M=0;M<=P;M++)E[M]=g[M];for(L=numeric.dot(F.Q,E),M=0;M<=P;M++)g[M]=L[M];for(E=Array(n-P-1),M=P+1;M<n;M++)E[M-P-1]=g[M];for(L=numeric.dot(V.Q,E),M=P+1;M<n;M++)g[M]=L[M-P-1];return{Q:g,B:F.B.concat(numeric.add(V.B,P+1))}}for(Y=Math.min(n-1,D+3),o=Array(Y-D),M=D+1;M<=Y;M++)o[M-D-1]=t[M][D];for(s=numeric.house(o),E=numeric.getBlock(t,[D+1,D],[Y,n-1]),L=numeric.tensor(s,numeric.dot(s,E)),M=D+1;M<=Y;M++)for(_=t[M],O=L[M-D-1],P=D;P<n;P++)_[P]-=2*O[P-D];for(E=numeric.getBlock(t,[0,D+1],[n-1,Y]),L=numeric.tensor(numeric.dot(E,s),s),M=0;M<n;M++)for(_=t[M],O=L[M],P=D+1;P<=Y;P++)_[P]-=2*O[P-D-1];for(E=Array(Y-D),M=D+1;M<=Y;M++)E[M-D-1]=g[M];for(L=numeric.tensor(s,numeric.dot(s,E)),M=D+1;M<=Y;M++)for(x=g[M],O=L[M-D-1],P=0;P<n;P++)x[P]-=2*O[P]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")};numeric.eig=function(e,r){var i=numeric.toUpperHessenberg(e),n=numeric.QRFrancis(i.H,r),o=numeric.T,ie=e.length,s,a,l=!1,p=n.B,f=numeric.dot(n.Q,numeric.dot(i.H,numeric.transpose(n.Q))),c=new o(numeric.dot(n.Q,i.Q)),m,v=p.length,g,x,_,E,L,O,M,D,P,U,N,F,V,q,J=Math.sqrt;for(a=0;a<v;a++)if(s=p[a][0],s!==p[a][1]){if(g=s+1,x=f[s][s],_=f[s][g],E=f[g][s],L=f[g][g],_===0&&E===0)continue;O=-x-L,M=x*L-_*E,D=O*O-4*M,D>=0?(O<0?P=-.5*(O-J(D)):P=-.5*(O+J(D)),V=(x-P)*(x-P)+_*_,q=E*E+(L-P)*(L-P),V>q?(V=J(V),N=(x-P)/V,F=_/V):(q=J(q),N=E/q,F=(L-P)/q),m=new o([[F,-N],[N,F]]),c.setRows(s,g,m.dot(c.getRows(s,g)))):(P=-.5*O,U=.5*J(-D),V=(x-P)*(x-P)+_*_,q=E*E+(L-P)*(L-P),V>q?(V=J(V+U*U),N=(x-P)/V,F=_/V,P=0,U/=V):(q=J(q+U*U),N=E/q,F=(L-P)/q,P=U/q,U=0),m=new o([[F,-N],[N,F]],[[P,U],[U,-P]]),c.setRows(s,g,m.dot(c.getRows(s,g))))}var Y=c.dot(e).dot(c.transjugate()),ie=e.length,oe=numeric.T.identity(ie);for(g=0;g<ie;g++)if(g>0)for(a=g-1;a>=0;a--){var Z=Y.get([a,a]),K=Y.get([g,g]);if(numeric.neq(Z.x,K.x)||numeric.neq(Z.y,K.y))P=Y.getRow(a).getBlock([a],[g-1]),U=oe.getRow(g).getBlock([a],[g-1]),oe.set([g,a],Y.get([a,g]).neg().sub(P.dot(U)).div(Z.sub(K)));else{oe.setRow(g,oe.getRow(a));continue}}for(g=0;g<ie;g++)P=oe.getRow(g),oe.setRow(g,P.div(P.norm2()));return oe=oe.transpose(),oe=c.transjugate().dot(oe),{lambda:Y.getDiag(),E:oe}};numeric.ccsSparse=function(e){var r=e.length,a,i,n,o,s=[];for(n=r-1;n!==-1;--n){i=e[n];for(o in i){for(o=parseInt(o);o>=s.length;)s[s.length]=0;i[o]!==0&&s[o]++}}var a=s.length,l=Array(a+1);for(l[0]=0,n=0;n<a;++n)l[n+1]=l[n]+s[n];var p=Array(l[a]),f=Array(l[a]);for(n=r-1;n!==-1;--n){i=e[n];for(o in i)i[o]!==0&&(s[o]--,p[l[o]+s[o]]=n,f[l[o]+s[o]]=i[o])}return[l,p,f]};numeric.ccsFull=function(e){var r=e[0],i=e[1],n=e[2],o=numeric.ccsDim(e),s=o[0],a=o[1],l,p,f,c,m,v=numeric.rep([s,a],0);for(l=0;l<a;l++)for(f=r[l],c=r[l+1],p=f;p<c;++p)v[i[p]][l]=n[p];return v};numeric.ccsTSolve=function(e,r,i,n,o){var s=e[0],a=e[1],l=e[2],p=s.length-1,f=Math.max,c=0;typeof n>"u"&&(i=numeric.rep([p],0)),typeof n>"u"&&(n=numeric.linspace(0,i.length-1)),typeof o>"u"&&(o=[]);function m(P){var U;if(i[P]===0){for(i[P]=1,U=s[P];U<s[P+1];++U)m(a[U]);o[c]=P,++c}}var v,g,x,_,E,L,O,M,D;for(v=n.length-1;v!==-1;--v)m(n[v]);for(o.length=c,v=o.length-1;v!==-1;--v)i[o[v]]=0;for(v=n.length-1;v!==-1;--v)g=n[v],i[g]=r[g];for(v=o.length-1;v!==-1;--v){for(g=o[v],x=s[g],_=f(s[g+1],x),E=x;E!==_;++E)if(a[E]===g){i[g]/=l[E];break}for(D=i[g],E=x;E!==_;++E)L=a[E],L!==g&&(i[L]-=D*l[E])}return i};numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)};numeric.ccsDFS.prototype.dfs=function(e,r,i,n,o,s){var a=0,l,p=o.length,f=this.k,c=this.k1,m=this.j,v,g;if(n[e]===0)for(n[e]=1,m[0]=e,f[0]=v=r[e],c[0]=g=r[e+1];;)if(v>=g){if(o[p]=m[a],a===0)return;++p,--a,v=f[a],g=c[a]}else l=s[i[v]],n[l]===0?(n[l]=1,f[a]=v,++a,m[a]=l,v=r[l],c[a]=g=r[l+1]):++v};numeric.ccsLPSolve=function(e,r,i,n,o,s,a){var l=e[0],p=e[1],f=e[2],c=l.length-1,m=0,v=r[0],g=r[1],x=r[2],_,E,L,O,M,D,P,U,N,F,V,q;for(E=v[o],L=v[o+1],n.length=0,_=E;_<L;++_)a.dfs(s[g[_]],l,p,i,n,s);for(_=n.length-1;_!==-1;--_)i[n[_]]=0;for(_=E;_!==L;++_)O=s[g[_]],i[O]=x[_];for(_=n.length-1;_!==-1;--_){for(O=n[_],D=l[O],P=l[O+1],U=D;U<P;++U)if(s[p[U]]===O){i[O]/=f[U];break}for(q=i[O],U=D;U<P;++U)N=s[p[U]],N!==O&&(i[N]-=q*f[U])}return i};numeric.ccsLUP1=function(e,r){var i=e[0].length-1,n=[numeric.rep([i+1],0),[],[]],o=[numeric.rep([i+1],0),[],[]],s=n[0],a=n[1],l=n[2],p=o[0],f=o[1],c=o[2],m=numeric.rep([i],0),v=numeric.rep([i],0),g,x,_,E,L,O,M,D,P,U,N=numeric.ccsLPSolve,F=Math.max,V=Math.abs,q=numeric.linspace(0,i-1),J=numeric.linspace(0,i-1),Y=new numeric.ccsDFS(i);for(typeof r>"u"&&(r=1),g=0;g<i;++g){for(N(n,e,m,v,g,J,Y),O=-1,M=-1,x=v.length-1;x!==-1;--x)_=v[x],!(_<=g)&&(D=V(m[_]),D>O&&(M=_,O=D));for(V(m[g])<r*O&&(x=q[g],O=q[M],q[g]=O,J[O]=g,q[M]=x,J[x]=M,O=m[g],m[g]=m[M],m[M]=O),O=s[g],M=p[g],P=m[g],a[O]=q[g],l[O]=1,++O,x=v.length-1;x!==-1;--x)_=v[x],D=m[_],v[x]=0,m[_]=0,_<=g?(f[M]=_,c[M]=D,++M):(a[O]=q[_],l[O]=D/P,++O);s[g+1]=O,p[g+1]=M}for(x=a.length-1;x!==-1;--x)a[x]=J[a[x]];return{L:n,U:o,P:q,Pinv:J}};numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)};numeric.ccsDFS0.prototype.dfs=function(e,r,i,n,o,s,a){var l=0,p,f=o.length,c=this.k,m=this.k1,v=this.j,g,x;if(n[e]===0)for(n[e]=1,v[0]=e,c[0]=g=r[s[e]],m[0]=x=r[s[e]+1];;){if(isNaN(g))throw new Error("Ow!");if(g>=x){if(o[f]=s[v[l]],l===0)return;++f,--l,g=c[l],x=m[l]}else p=i[g],n[p]===0?(n[p]=1,c[l]=g,++l,v[l]=p,p=s[p],g=r[p],m[l]=x=r[p+1]):++g}};numeric.ccsLPSolve0=function(e,r,i,n,o,s,a,l){var p=e[0],f=e[1],c=e[2],m=p.length-1,v=0,g=r[0],x=r[1],_=r[2],E,L,O,M,D,P,U,N,F,V,q,J;for(L=g[o],O=g[o+1],n.length=0,E=L;E<O;++E)l.dfs(x[E],p,f,i,n,s,a);for(E=n.length-1;E!==-1;--E)M=n[E],i[a[M]]=0;for(E=L;E!==O;++E)M=x[E],i[M]=_[E];for(E=n.length-1;E!==-1;--E){for(M=n[E],F=a[M],P=p[M],U=p[M+1],N=P;N<U;++N)if(f[N]===F){i[F]/=c[N];break}for(J=i[F],N=P;N<U;++N)i[f[N]]-=J*c[N];i[F]=J}};numeric.ccsLUP0=function(e,r){var i=e[0].length-1,n=[numeric.rep([i+1],0),[],[]],o=[numeric.rep([i+1],0),[],[]],s=n[0],a=n[1],l=n[2],p=o[0],f=o[1],c=o[2],m=numeric.rep([i],0),v=numeric.rep([i],0),g,x,_,E,L,O,M,D,P,U,N=numeric.ccsLPSolve0,F=Math.max,V=Math.abs,q=numeric.linspace(0,i-1),J=numeric.linspace(0,i-1),Y=new numeric.ccsDFS0(i);for(typeof r>"u"&&(r=1),g=0;g<i;++g){for(N(n,e,m,v,g,J,q,Y),O=-1,M=-1,x=v.length-1;x!==-1;--x)_=v[x],!(_<=g)&&(D=V(m[q[_]]),D>O&&(M=_,O=D));for(V(m[q[g]])<r*O&&(x=q[g],O=q[M],q[g]=O,J[O]=g,q[M]=x,J[x]=M),O=s[g],M=p[g],P=m[q[g]],a[O]=q[g],l[O]=1,++O,x=v.length-1;x!==-1;--x)_=v[x],D=m[q[_]],v[x]=0,m[q[_]]=0,_<=g?(f[M]=_,c[M]=D,++M):(a[O]=q[_],l[O]=D/P,++O);s[g+1]=O,p[g+1]=M}for(x=a.length-1;x!==-1;--x)a[x]=J[a[x]];return{L:n,U:o,P:q,Pinv:J}};numeric.ccsLUP=numeric.ccsLUP0;numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]};numeric.ccsGetBlock=function(e,r,i){var n=numeric.ccsDim(e),o=n[0],s=n[1];typeof r>"u"?r=numeric.linspace(0,o-1):typeof r=="number"&&(r=[r]),typeof i>"u"?i=numeric.linspace(0,s-1):typeof i=="number"&&(i=[i]);var a,l,p,f=r.length,c,m=i.length,v,g,x,_=numeric.rep([s],0),E=[],L=[],O=[_,E,L],M=e[0],D=e[1],P=e[2],U=numeric.rep([o],0),N=0,F=numeric.rep([o],0);for(c=0;c<m;++c){g=i[c];var V=M[g],q=M[g+1];for(a=V;a<q;++a)v=D[a],F[v]=1,U[v]=P[a];for(a=0;a<f;++a)x=r[a],F[x]&&(E[N]=a,L[N]=U[r[a]],++N);for(a=V;a<q;++a)v=D[a],F[v]=0;_[c+1]=N}return O};numeric.ccsDot=function(e,r){var i=e[0],n=e[1],o=e[2],s=r[0],a=r[1],l=r[2],p=numeric.ccsDim(e),f=numeric.ccsDim(r),c=p[0],m=p[1],v=f[1],g=numeric.rep([c],0),x=numeric.rep([c],0),_=Array(c),E=numeric.rep([v],0),L=[],O=[],M=[E,L,O],D,P,U,N,F,V,q,J,Y,ie,oe;for(U=0;U!==v;++U){for(N=s[U],F=s[U+1],Y=0,P=N;P<F;++P)for(ie=a[P],oe=l[P],V=i[ie],q=i[ie+1],D=V;D<q;++D)J=n[D],x[J]===0&&(_[Y]=J,x[J]=1,Y=Y+1),g[J]=g[J]+o[D]*oe;for(N=E[U],F=N+Y,E[U+1]=F,P=Y-1;P!==-1;--P)oe=N+P,D=_[P],L[oe]=D,O[oe]=g[D],x[D]=0,g[D]=0;E[U+1]=E[U]+Y}return M};numeric.ccsLUPSolve=function(e,r){var i=e.L,n=e.U,o=e.P,s=r[0],a=!1;typeof s!="object"&&(r=[[0,r.length],numeric.linspace(0,r.length-1),r],s=r[0],a=!0);var l=r[1],p=r[2],f=i[0].length-1,c=s.length-1,m=numeric.rep([f],0),v=Array(f),g=numeric.rep([f],0),x=Array(f),_=numeric.rep([c+1],0),E=[],L=[],O=numeric.ccsTSolve,M,D,P,U,N,F,V=0;for(M=0;M<c;++M){for(N=0,P=s[M],U=s[M+1],D=P;D<U;++D)F=e.Pinv[l[D]],x[N]=F,g[F]=p[D],++N;for(x.length=N,O(i,g,m,x,v),D=x.length-1;D!==-1;--D)g[x[D]]=0;if(O(n,m,g,v,x),a)return g;for(D=v.length-1;D!==-1;--D)m[v[D]]=0;for(D=x.length-1;D!==-1;--D)F=x[D],E[V]=F,L[V]=g[F],g[F]=0,++V;_[M+1]=V}return[_,E,L]};numeric.ccsbinop=function(e,r){return typeof r>"u"&&(r=""),Function("X","Y",`var Xi = X[0], Xj = X[1], Xv = X[2];
var Yi = Y[0], Yj = Y[1], Yv = Y[2];
var n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;
var Zi = numeric.rep([n+1],0), Zj = [], Zv = [];
var x = numeric.rep([m],0),y = numeric.rep([m],0);
var xk,yk,zk;
var i,j,j0,j1,k,p=0;
`+r+`for(i=0;i<n;++i) {
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Xj[j];
    x[k] = 1;
    Zj[p] = k;
    ++p;
  }
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Yj[j];
    y[k] = Yv[j];
    if(x[k] === 0) {
      Zj[p] = k;
      ++p;
    }
  }
  Zi[i+1] = p;
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];
  j0 = Zi[i]; j1 = Zi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Zj[j];
    xk = x[k];
    yk = y[k];
`+e+`
    Zv[j] = zk;
  }
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;
}
return [Zi,Zj,Zv];`)};(function(){var k,A,B,C;for(k in numeric.ops2)isFinite(eval("1"+numeric.ops2[k]+"0"))?A="[Y[0],Y[1],numeric."+k+"(X,Y[2])]":A="NaN",isFinite(eval("0"+numeric.ops2[k]+"1"))?B="[X[0],X[1],numeric."+k+"(X[2],Y)]":B="NaN",isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?C="numeric.ccs"+k+"MM(X,Y)":C="NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+`;
if(typeof Y === "number") return `+B+`;
return `+C+`;
`)})();numeric.ccsScatter=function t(e){var r=e[0],i=e[1],n=e[2],o=numeric.sup(i)+1,s=r.length,a=numeric.rep([o],0),l=Array(s),p=Array(s),f=numeric.rep([o],0),c;for(c=0;c<s;++c)f[i[c]]++;for(c=0;c<o;++c)a[c+1]=a[c]+f[c];var m=a.slice(0),v,g;for(c=0;c<s;++c)g=i[c],v=m[g],l[v]=r[c],p[v]=n[c],m[g]=m[g]+1;return[a,l,p]};numeric.ccsGather=function t(e){var r=e[0],i=e[1],n=e[2],o=r.length-1,s=i.length,a=Array(s),l=Array(s),p=Array(s),f,c,m,v,g;for(g=0,f=0;f<o;++f)for(m=r[f],v=r[f+1],c=m;c!==v;++c)l[g]=f,a[g]=i[c],p[g]=n[c],++g;return[a,l,p]};numeric.sdim=function t(e,r,i){if(typeof r>"u"&&(r=[]),typeof e!="object")return r;typeof i>"u"&&(i=0),i in r||(r[i]=0),e.length>r[i]&&(r[i]=e.length);var n;for(n in e)e.hasOwnProperty(n)&&t(e[n],r,i+1);return r};numeric.sclone=function t(e,r,i){typeof r>"u"&&(r=0),typeof i>"u"&&(i=numeric.sdim(e).length);var n,o=Array(e.length);if(r===i-1){for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o}for(n in e)e.hasOwnProperty(n)&&(o[n]=t(e[n],r+1,i));return o};numeric.sdiag=function t(e){var r=e.length,i,n=Array(r),o,s,a;for(i=r-1;i>=1;i-=2)o=i-1,n[i]=[],n[i][i]=e[i],n[o]=[],n[o][o]=e[o];return i===0&&(n[0]=[],n[0][0]=e[i]),n};numeric.sidentity=function t(e){return numeric.sdiag(numeric.rep([e],1))};numeric.stranspose=function t(e){var r=[],i=e.length,n,o,s;for(n in e)if(e.hasOwnProperty(n)){s=e[n];for(o in s)s.hasOwnProperty(o)&&(typeof r[o]!="object"&&(r[o]=[]),r[o][n]=s[o])}return r};numeric.sLUP=function t(e,r){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")};numeric.sdotMM=function t(e,r){var i=e.length,n=r.length,o=numeric.stranspose(r),s=o.length,a,l,p,f,c,m,v=Array(i),g;for(p=i-1;p>=0;p--){for(g=[],a=e[p],c=s-1;c>=0;c--){m=0,l=o[c];for(f in a)a.hasOwnProperty(f)&&f in l&&(m+=a[f]*l[f]);m&&(g[c]=m)}v[p]=g}return v};numeric.sdotMV=function t(e,r){var i=e.length,n,o,s,a=Array(i),l;for(o=i-1;o>=0;o--){n=e[o],l=0;for(s in n)n.hasOwnProperty(s)&&r[s]&&(l+=n[s]*r[s]);l&&(a[o]=l)}return a};numeric.sdotVM=function t(e,r){var i,n,o,s,a=[],l;for(i in e)if(e.hasOwnProperty(i)){o=r[i],s=e[i];for(n in o)o.hasOwnProperty(n)&&(a[n]||(a[n]=0),a[n]+=s*o[n])}return a};numeric.sdotVV=function t(e,r){var i,n=0;for(i in e)e[i]&&r[i]&&(n+=e[i]*r[i]);return n};numeric.sdot=function t(e,r){var i=numeric.sdim(e).length,n=numeric.sdim(r).length,o=i*1e3+n;switch(o){case 0:return e*r;case 1001:return numeric.sdotVV(e,r);case 2001:return numeric.sdotMV(e,r);case 1002:return numeric.sdotVM(e,r);case 2002:return numeric.sdotMM(e,r);default:throw new Error("numeric.sdot not implemented for tensors of order "+i+" and "+n)}};numeric.sscatter=function t(e){var r=e[0].length,i,n,o,s=e.length,a=[],l;for(n=r-1;n>=0;--n)if(e[s-1][n]){for(l=a,o=0;o<s-2;o++)i=e[o][n],l[i]||(l[i]=[]),l=l[i];l[e[o][n]]=e[o+1][n]}return a};numeric.sgather=function t(e,r,i){typeof r>"u"&&(r=[]),typeof i>"u"&&(i=[]);var n,o,s;n=i.length;for(o in e)if(e.hasOwnProperty(o))if(i[n]=parseInt(o),s=e[o],typeof s=="number"){if(s){if(r.length===0)for(o=n+1;o>=0;--o)r[o]=[];for(o=n;o>=0;--o)r[o].push(i[o]);r[n+1].push(s)}}else t(s,r,i);return i.length>n&&i.pop(),r};numeric.cLU=function t(e){var r=e[0],i=e[1],n=e[2],F=r.length,o=0,s,a,l,p,f,c;for(s=0;s<F;s++)r[s]>o&&(o=r[s]);o++;var m=Array(o),v=Array(o),g=numeric.rep([o],1/0),x=numeric.rep([o],-1/0),O,M,_;for(l=0;l<F;l++)s=r[l],a=i[l],a<g[s]&&(g[s]=a),a>x[s]&&(x[s]=a);for(s=0;s<o-1;s++)x[s]>x[s+1]&&(x[s+1]=x[s]);for(s=o-1;s>=1;s--)g[s]<g[s-1]&&(g[s-1]=g[s]);var E=0,L=0;for(s=0;s<o;s++)v[s]=numeric.rep([x[s]-g[s]+1],0),m[s]=numeric.rep([s-g[s]],0),E+=s-g[s]+1,L+=x[s]-s+1;for(l=0;l<F;l++)s=r[l],v[s][i[l]-g[s]]=n[l];for(s=0;s<o-1;s++)for(p=s-g[s],O=v[s],a=s+1;g[a]<=s&&a<o;a++)if(f=s-g[a],c=x[s]-s,M=v[a],_=M[f]/O[p],_){for(l=1;l<=c;l++)M[l+f]-=_*O[l+p];m[a][s-g[a]]=_}var O=[],M=[],D=[],P=[],U=[],N=[],F,V,q;for(F=0,V=0,s=0;s<o;s++){for(p=g[s],f=x[s],q=v[s],a=s;a<=f;a++)q[a-p]&&(O[F]=s,M[F]=a,D[F]=q[a-p],F++);for(q=m[s],a=p;a<s;a++)q[a-p]&&(P[V]=s,U[V]=a,N[V]=q[a-p],V++);P[V]=s,U[V]=s,N[V]=1,V++}return{U:[O,M,D],L:[P,U,N]}};numeric.cLUsolve=function t(e,r){var i=e.L,n=e.U,o=numeric.clone(r),s=i[0],a=i[1],l=i[2],p=n[0],f=n[1],c=n[2],m=p.length,v=s.length,g=o.length,x,_,E;for(E=0,x=0;x<g;x++){for(;a[E]<x;)o[x]-=l[E]*o[a[E]],E++;E++}for(E=m-1,x=g-1;x>=0;x--){for(;f[E]>x;)o[x]-=c[E]*o[f[E]],E--;o[x]/=c[E],E--}return o};numeric.cgrid=function t(e,r){typeof e=="number"&&(e=[e,e]);var i=numeric.rep(e,-1),n,o,s;if(typeof r!="function")switch(r){case"L":r=function(a,l){return a>=e[0]/2||l<e[1]/2};break;default:r=function(a,l){return!0};break}for(s=0,n=1;n<e[0]-1;n++)for(o=1;o<e[1]-1;o++)r(n,o)&&(i[n][o]=s,s++);return i};numeric.cdelsq=function t(e){var r=[[-1,0],[0,-1],[0,1],[1,0]],i=numeric.dim(e),n=i[0],o=i[1],s,a,l,p,f,c=[],m=[],v=[];for(s=1;s<n-1;s++)for(a=1;a<o-1;a++)if(!(e[s][a]<0)){for(l=0;l<4;l++)p=s+r[l][0],f=a+r[l][1],!(e[p][f]<0)&&(c.push(e[s][a]),m.push(e[p][f]),v.push(-1));c.push(e[s][a]),m.push(e[s][a]),v.push(4)}return[c,m,v]};numeric.cdotMV=function t(e,r){var i,n=e[0],o=e[1],s=e[2],a,l=n.length,p;for(p=0,a=0;a<l;a++)n[a]>p&&(p=n[a]);for(p++,i=numeric.rep([p],0),a=0;a<l;a++)i[n[a]]+=s[a]*r[o[a]];return i};numeric.Spline=function t(e,r,i,n,o){this.x=e,this.yl=r,this.yr=i,this.kl=n,this.kr=o};numeric.Spline.prototype._at=function t(l,r){var i=this.x,n=this.yl,o=this.yr,s=this.kl,a=this.kr,l,p,f,c,m=numeric.add,v=numeric.sub,g=numeric.mul;p=v(g(s[r],i[r+1]-i[r]),v(o[r+1],n[r])),f=m(g(a[r+1],i[r]-i[r+1]),v(o[r+1],n[r])),c=(l-i[r])/(i[r+1]-i[r]);var x=c*(1-c);return m(m(m(g(1-c,n[r]),g(c,o[r+1])),g(p,x*(1-c))),g(f,x*c))};numeric.Spline.prototype.at=function t(e){if(typeof e=="number"){var r=this.x,f=r.length,i,n,o,s=Math.floor,a,l,p;for(i=0,n=f-1;n-i>1;)o=s((i+n)/2),r[o]<=e?i=o:n=o;return this._at(e,i)}var f=e.length,c,m=Array(f);for(c=f-1;c!==-1;--c)m[c]=this.at(e[c]);return m};numeric.Spline.prototype.diff=function t(){var e=this.x,r=this.yl,i=this.yr,n=this.kl,o=this.kr,s=r.length,a,l,p,f=n,c=o,m=Array(s),v=Array(s),g=numeric.add,x=numeric.mul,_=numeric.div,E=numeric.sub;for(a=s-1;a!==-1;--a)l=e[a+1]-e[a],p=E(i[a+1],r[a]),m[a]=_(g(x(p,6),x(n[a],-4*l),x(o[a+1],-2*l)),l*l),v[a+1]=_(g(x(p,-6),x(n[a],2*l),x(o[a+1],4*l)),l*l);return new numeric.Spline(e,f,c,m,v)};numeric.Spline.prototype.roots=function t(){function e(xe){return xe*xe}function r(xe,Re,be,Me,We){var Pe=be*2-(Re-xe),Ve=-Me*2+(Re-xe),Le=(We+1)*.5,He=Le*(1-Le);return(1-Le)*xe+Le*Re+Pe*He*(1-Le)+Ve*He*Le}var M=[],i=this.x,n=this.yl,o=this.yr,s=this.kl,a=this.kr;typeof n[0]=="number"&&(n=[n],o=[o],s=[s],a=[a]);var l=n.length,p=i.length-1,f,c,m,v,g,x,_,E,L,O,M=Array(l),D,P,U,N,F,V,q,J,Y,ie,oe,Z,K,Q,te,ee,ae,ue=Math.sqrt;for(f=0;f!==l;++f){for(_=n[f],E=o[f],L=s[f],O=a[f],D=[],c=0;c!==p;c++){for(c>0&&E[c]*_[c]<0&&D.push(i[c]),Y=i[c+1]-i[c],ie=i[c],N=_[c],F=E[c+1],P=L[c]/Y,U=O[c+1]/Y,J=e(P-U+3*(N-F))+12*U*N,V=U+3*N+2*P-3*F,q=3*(U+P+2*(N-F)),J<=0?(Z=V/q,Z>i[c]&&Z<i[c+1]?oe=[i[c],Z,i[c+1]]:oe=[i[c],i[c+1]]):(Z=(V-ue(J))/q,K=(V+ue(J))/q,oe=[i[c]],Z>i[c]&&Z<i[c+1]&&oe.push(Z),K>i[c]&&K<i[c+1]&&oe.push(K),oe.push(i[c+1])),te=oe[0],Z=this._at(te,c),m=0;m<oe.length-1;m++){if(ee=oe[m+1],K=this._at(ee,c),Z===0){D.push(te),te=ee,Z=K;continue}if(K===0||Z*K>0){te=ee,Z=K;continue}for(var le=0;ae=(Z*ee-K*te)/(Z-K),!(ae<=te||ae>=ee);)if(Q=this._at(ae,c),Q*K>0)ee=ae,K=Q,le===-1&&(Z*=.5),le=-1;else if(Q*Z>0)te=ae,Z=Q,le===1&&(K*=.5),le=1;else break;D.push(ae),te=oe[m+1],Z=this._at(te,c)}K===0&&D.push(ee)}M[f]=D}return typeof this.yl[0]=="number"?M[0]:M};numeric.spline=function t(e,r,i,n){var o=e.length,s=[],a=[],l=[],p,f=numeric.sub,c=numeric.mul,m=numeric.add;for(p=o-2;p>=0;p--)a[p]=e[p+1]-e[p],l[p]=f(r[p+1],r[p]);(typeof i=="string"||typeof n=="string")&&(i=n="periodic");var v=[[],[],[]];switch(typeof i){case"undefined":s[0]=c(3/(a[0]*a[0]),l[0]),v[0].push(0,0),v[1].push(0,1),v[2].push(2/a[0],1/a[0]);break;case"string":s[0]=m(c(3/(a[o-2]*a[o-2]),l[o-2]),c(3/(a[0]*a[0]),l[0])),v[0].push(0,0,0),v[1].push(o-2,0,1),v[2].push(1/a[o-2],2/a[o-2]+2/a[0],1/a[0]);break;default:s[0]=i,v[0].push(0),v[1].push(0),v[2].push(1);break}for(p=1;p<o-1;p++)s[p]=m(c(3/(a[p-1]*a[p-1]),l[p-1]),c(3/(a[p]*a[p]),l[p])),v[0].push(p,p,p),v[1].push(p-1,p,p+1),v[2].push(1/a[p-1],2/a[p-1]+2/a[p],1/a[p]);switch(typeof n){case"undefined":s[o-1]=c(3/(a[o-2]*a[o-2]),l[o-2]),v[0].push(o-1,o-1),v[1].push(o-2,o-1),v[2].push(1/a[o-2],2/a[o-2]);break;case"string":v[1][v[1].length-1]=0;break;default:s[o-1]=n,v[0].push(o-1),v[1].push(o-1),v[2].push(1);break}typeof s[0]!="number"?s=numeric.transpose(s):s=[s];var g=Array(s.length);if(typeof i=="string")for(p=g.length-1;p!==-1;--p)g[p]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(v)),s[p]),g[p][o-1]=g[p][0];else for(p=g.length-1;p!==-1;--p)g[p]=numeric.cLUsolve(numeric.cLU(v),s[p]);return typeof r[0]=="number"?g=g[0]:g=numeric.transpose(g),new numeric.Spline(e,r,r,g,g)};numeric.fftpow2=function t(e,r){var i=e.length;if(i!==1){var n=Math.cos,o=Math.sin,s,a,l=Array(i/2),p=Array(i/2),f=Array(i/2),c=Array(i/2);for(a=i/2,s=i-1;s!==-1;--s)--a,f[a]=e[s],c[a]=r[s],--s,l[a]=e[s],p[a]=r[s];t(l,p),t(f,c),a=i/2;var m,v=-6.283185307179586/i,g,x;for(s=i-1;s!==-1;--s)--a,a===-1&&(a=i/2-1),m=v*s,g=n(m),x=o(m),e[s]=l[a]+g*f[a]-x*c[a],r[s]=p[a]+g*c[a]+x*f[a]}};numeric._ifftpow2=function t(e,r){var i=e.length;if(i!==1){var n=Math.cos,o=Math.sin,s,a,l=Array(i/2),p=Array(i/2),f=Array(i/2),c=Array(i/2);for(a=i/2,s=i-1;s!==-1;--s)--a,f[a]=e[s],c[a]=r[s],--s,l[a]=e[s],p[a]=r[s];t(l,p),t(f,c),a=i/2;var m,v=6.283185307179586/i,g,x;for(s=i-1;s!==-1;--s)--a,a===-1&&(a=i/2-1),m=v*s,g=n(m),x=o(m),e[s]=l[a]+g*f[a]-x*c[a],r[s]=p[a]+g*c[a]+x*f[a]}};numeric.ifftpow2=function t(e,r){numeric._ifftpow2(e,r),numeric.diveq(e,e.length),numeric.diveq(r,r.length)};numeric.convpow2=function t(e,r,i,n){numeric.fftpow2(e,r),numeric.fftpow2(i,n);var o,s=e.length,a,l,p,f;for(o=s-1;o!==-1;--o)a=e[o],p=r[o],l=i[o],f=n[o],e[o]=a*l-p*f,r[o]=a*f+p*l;numeric.ifftpow2(e,r)};numeric.T.prototype.fft=function t(){var e=this.x,r=this.y,i=e.length,n=Math.log,o=n(2),s=Math.ceil(n(2*i-1)/o),a=Math.pow(2,s),l=numeric.rep([a],0),p=numeric.rep([a],0),f=Math.cos,c=Math.sin,m,v=-3.141592653589793/i,g,x=numeric.rep([a],0),_=numeric.rep([a],0),E=Math.floor(i/2);for(m=0;m<i;m++)x[m]=e[m];if(typeof r<"u")for(m=0;m<i;m++)_[m]=r[m];for(l[0]=1,m=1;m<=a/2;m++)g=v*m*m,l[m]=f(g),p[m]=c(g),l[a-m]=f(g),p[a-m]=c(g);var L=new numeric.T(x,_),O=new numeric.T(l,p);return L=L.mul(O),numeric.convpow2(L.x,L.y,numeric.clone(O.x),numeric.neg(O.y)),L=L.mul(O),L.x.length=i,L.y.length=i,L};numeric.T.prototype.ifft=function t(){var e=this.x,r=this.y,i=e.length,n=Math.log,o=n(2),s=Math.ceil(n(2*i-1)/o),a=Math.pow(2,s),l=numeric.rep([a],0),p=numeric.rep([a],0),f=Math.cos,c=Math.sin,m,v=3.141592653589793/i,g,x=numeric.rep([a],0),_=numeric.rep([a],0),E=Math.floor(i/2);for(m=0;m<i;m++)x[m]=e[m];if(typeof r<"u")for(m=0;m<i;m++)_[m]=r[m];for(l[0]=1,m=1;m<=a/2;m++)g=v*m*m,l[m]=f(g),p[m]=c(g),l[a-m]=f(g),p[a-m]=c(g);var L=new numeric.T(x,_),O=new numeric.T(l,p);return L=L.mul(O),numeric.convpow2(L.x,L.y,numeric.clone(O.x),numeric.neg(O.y)),L=L.mul(O),L.x.length=i,L.y.length=i,L.div(i)};numeric.gradient=function t(e,r){var i=r.length,n=e(r);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var g=Math.max,o,s=numeric.clone(r),a,l,p=Array(i),f=numeric.div,c=numeric.sub,m,v,g=Math.max,x=.001,_=Math.abs,E=Math.min,L,O,M,D=0,P,U,N;for(o=0;o<i;o++)for(var F=g(1e-6*n,1e-8);;){if(++D,D>20)throw new Error("Numerical gradient fails");if(s[o]=r[o]+F,a=e(s),s[o]=r[o]-F,l=e(s),s[o]=r[o],isNaN(a)||isNaN(l)){F/=16;continue}if(p[o]=(a-l)/(2*F),L=r[o]-F,O=r[o],M=r[o]+F,P=(a-n)/F,U=(n-l)/F,N=g(_(p[o]),_(n),_(a),_(l),_(L),_(O),_(M),1e-8),m=E(g(_(P-p[o]),_(U-p[o]),_(P-U))/N,F/N),m>x)F/=16;else break}return p};numeric.uncmin=function t(e,r,i,n,o,s,a){var l=numeric.gradient;typeof a>"u"&&(a={}),typeof i>"u"&&(i=1e-8),typeof n>"u"&&(n=function(Me){return l(e,Me)}),typeof o>"u"&&(o=1e3),r=numeric.clone(r);var p=r.length,f=e(r),c,m;if(isNaN(f))throw new Error("uncmin: f(x0) is a NaN!");var v=Math.max,g=numeric.norm2;i=v(i,numeric.epsilon);var x,_,E,L=a.Hinv||numeric.identity(p),O=numeric.dot,M=numeric.inv,D=numeric.sub,P=numeric.add,U=numeric.tensor,N=numeric.div,F=numeric.mul,V=numeric.all,q=numeric.isFinite,J=numeric.neg,Y=0,ie,oe,Z,K,Q,te,ee,ae,ue,le,xe,Re,be="";for(_=n(r);Y<o;){if(typeof s=="function"&&s(Y,r,f,_,L)){be="Callback returned true";break}if(!V(q(_))){be="Gradient has Infinity or NaN";break}if(x=J(O(L,_)),!V(q(x))){be="Search direction has Infinity or NaN";break}if(le=g(x),le<i){be="Newton step smaller than tol";break}for(ue=1,m=O(_,x),Z=r;Y<o&&!(ue*le<i);){if(oe=F(x,ue),Z=P(r,oe),c=e(Z),c-f>=.1*ue*m||isNaN(c)){ue*=.5,++Y;continue}break}if(ue*le<i){be="Line search step size smaller than tol";break}if(Y===o){be="maxit reached during line search";break}E=n(Z),K=D(E,_),ee=O(K,oe),Q=O(L,K),L=D(P(L,F((ee+O(K,Q))/(ee*ee),U(oe,oe))),N(P(U(Q,oe),U(oe,Q)),ee)),r=Z,f=c,_=E,++Y}return{solution:r,f,gradient:_,invHessian:L,iterations:Y,message:be}};numeric.Dopri=function t(e,r,i,n,o,s,a){this.x=e,this.y=r,this.f=i,this.ymid=n,this.iterations=o,this.events=a,this.message=s};numeric.Dopri.prototype._at=function t(_,r){function i(V){return V*V}var n=this,o=n.x,s=n.y,a=n.f,l=n.ymid,p=o.length,f,c,m,v,g,x,_,E=Math.floor,L,O=.5,M=numeric.add,D=numeric.mul,P=numeric.sub,U,N,F;return f=o[r],c=o[r+1],v=s[r],g=s[r+1],L=c-f,m=f+O*L,x=l[r],U=P(a[r],D(v,1/(f-m)+2/(f-c))),N=P(a[r+1],D(g,1/(c-m)+2/(c-f))),F=[i(_-c)*(_-m)/i(f-c)/(f-m),i(_-f)*i(_-c)/i(f-m)/i(c-m),i(_-f)*(_-m)/i(c-f)/(c-m),(_-f)*i(_-c)*(_-m)/i(f-c)/(f-m),(_-c)*i(_-f)*(_-m)/i(f-c)/(c-m)],M(M(M(M(D(v,F[0]),D(x,F[1])),D(g,F[2])),D(U,F[3])),D(N,F[4]))};numeric.Dopri.prototype.at=function t(e){var r,i,n,o=Math.floor;if(typeof e!="number"){var s=e.length,a=Array(s);for(r=s-1;r!==-1;--r)a[r]=this.at(e[r]);return a}var l=this.x;for(r=0,i=l.length-1;i-r>1;)n=o(.5*(r+i)),l[n]<=e?r=n:i=n;return this._at(e,r)};numeric.dopri=function t(e,r,i,n,o,s,a){typeof o>"u"&&(o=1e-6),typeof s>"u"&&(s=1e3);var l=[e],p=[i],f=[n(e,i)],c,m,v,g,x,_,E=[],L=1/5,O=[3/40,9/40],M=[44/45,-56/15,32/9],D=[19372/6561,-25360/2187,64448/6561,-212/729],P=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],U=[35/384,0,500/1113,125/192,-2187/6784,11/84],N=[.5*6025192743/30085553152,0,.5*51252292925/65400821598,.5*-2691868925/45128329728,.5*187940372067/1594534317056,.5*-1776094331/19743644256,.5*11237099/235043384],F=[1/5,3/10,4/5,8/9,1,1],V=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],q=0,J,Y,ie=(r-e)/10,oe=0,Z=numeric.add,K=numeric.mul,Q,te,ee=Math.max,ae=Math.min,ue=Math.abs,le=numeric.norminf,xe=Math.pow,Re=numeric.any,be=numeric.lt,Me=numeric.and,We=numeric.sub,Pe,Ve,Le,He=new numeric.Dopri(l,p,f,E,-1,"");for(typeof a=="function"&&(Pe=a(e,i));e<r&&oe<s;){if(++oe,e+ie>r&&(ie=r-e),c=n(e+F[0]*ie,Z(i,K(L*ie,f[q]))),m=n(e+F[1]*ie,Z(Z(i,K(O[0]*ie,f[q])),K(O[1]*ie,c))),v=n(e+F[2]*ie,Z(Z(Z(i,K(M[0]*ie,f[q])),K(M[1]*ie,c)),K(M[2]*ie,m))),g=n(e+F[3]*ie,Z(Z(Z(Z(i,K(D[0]*ie,f[q])),K(D[1]*ie,c)),K(D[2]*ie,m)),K(D[3]*ie,v))),x=n(e+F[4]*ie,Z(Z(Z(Z(Z(i,K(P[0]*ie,f[q])),K(P[1]*ie,c)),K(P[2]*ie,m)),K(P[3]*ie,v)),K(P[4]*ie,g))),Q=Z(Z(Z(Z(Z(i,K(f[q],ie*U[0])),K(m,ie*U[2])),K(v,ie*U[3])),K(g,ie*U[4])),K(x,ie*U[5])),_=n(e+ie,Q),J=Z(Z(Z(Z(Z(K(f[q],ie*V[0]),K(m,ie*V[2])),K(v,ie*V[3])),K(g,ie*V[4])),K(x,ie*V[5])),K(_,ie*V[6])),typeof J=="number"?te=ue(J):te=le(J),te>o){if(ie=.2*ie*xe(o/te,.25),e+ie===e){He.msg="Step size became too small";break}continue}if(E[q]=Z(Z(Z(Z(Z(Z(i,K(f[q],ie*N[0])),K(m,ie*N[2])),K(v,ie*N[3])),K(g,ie*N[4])),K(x,ie*N[5])),K(_,ie*N[6])),++q,l[q]=e+ie,p[q]=Q,f[q]=_,typeof a=="function"){var it,Je=e,st=e+.5*ie,ot;if(Ve=a(st,E[q-1]),Le=Me(be(Pe,0),be(0,Ve)),Re(Le)||(Je=st,st=e+ie,Pe=Ve,Ve=a(st,Q),Le=Me(be(Pe,0),be(0,Ve))),Re(Le)){for(var vt,bt,je,Lt,Kt=0,Ir=1,pt=1;;){if(typeof Pe=="number")ot=(pt*Ve*Je-Ir*Pe*st)/(pt*Ve-Ir*Pe);else for(ot=st,Y=Pe.length-1;Y!==-1;--Y)Pe[Y]<0&&Ve[Y]>0&&(ot=ae(ot,(pt*Ve[Y]*Je-Ir*Pe[Y]*st)/(pt*Ve[Y]-Ir*Pe[Y])));if(ot<=Je||ot>=st)break;it=He._at(ot,q-1),Lt=a(ot,it),je=Me(be(Pe,0),be(0,Lt)),Re(je)?(st=ot,Ve=Lt,Le=je,pt=1,Kt===-1?Ir*=.5:Ir=1,Kt=-1):(Je=ot,Pe=Lt,Ir=1,Kt===1?pt*=.5:pt=1,Kt=1)}return Q=He._at(.5*(e+ot),q-1),He.f[q]=n(ot,it),He.x[q]=ot,He.y[q]=it,He.ymid[q-1]=Q,He.events=Le,He.iterations=oe,He}}e+=ie,i=Q,Pe=Ve,ie=ae(.8*ie*xe(o/te,.25),4*ie)}return He.iterations=oe,He};numeric.LU=function(t,e){e=e||!1;var r=Math.abs,i,n,o,s,a,l,p,f,c,m=t.length,v=m-1,g=new Array(m);for(e||(t=numeric.clone(t)),o=0;o<m;++o){for(p=o,l=t[o],c=r(l[o]),n=o+1;n<m;++n)s=r(t[n][o]),c<s&&(c=s,p=n);for(g[o]=p,p!=o&&(t[o]=t[p],t[p]=l,l=t[o]),a=l[o],i=o+1;i<m;++i)t[i][o]/=a;for(i=o+1;i<m;++i){for(f=t[i],n=o+1;n<v;++n)f[n]-=f[o]*l[n],++n,f[n]-=f[o]*l[n];n===v&&(f[n]-=f[o]*l[n])}}return{LU:t,P:g}};numeric.LUsolve=function t(e,r){var i,n,o=e.LU,s=o.length,a=numeric.clone(r),l=e.P,p,f,c,m;for(i=s-1;i!==-1;--i)a[i]=r[i];for(i=0;i<s;++i)for(p=l[i],l[i]!==i&&(m=a[i],a[i]=a[p],a[p]=m),f=o[i],n=0;n<i;++n)a[i]-=a[n]*f[n];for(i=s-1;i>=0;--i){for(f=o[i],n=i+1;n<s;++n)a[i]-=a[n]*f[n];a[i]/=f[i]}return a};numeric.solve=function t(e,r,i){return numeric.LUsolve(numeric.LU(e,i),r)};numeric.echelonize=function t(e){var r=numeric.dim(e),i=r[0],n=r[1],o=numeric.identity(i),s=Array(i),a,l,p,f,c,m,v,g,x=Math.abs,_=numeric.diveq;for(e=numeric.clone(e),a=0;a<i;++a){for(p=0,c=e[a],m=o[a],l=1;l<n;++l)x(c[p])<x(c[l])&&(p=l);for(s[a]=p,_(m,c[p]),_(c,c[p]),l=0;l<i;++l)if(l!==a){for(v=e[l],g=v[p],f=n-1;f!==-1;--f)v[f]-=c[f]*g;for(v=o[l],f=i-1;f!==-1;--f)v[f]-=m[f]*g}}return{I:o,A:e,P:s}};numeric.__solveLP=function t(e,r,i,n,o,s,a){var l=numeric.sum,p=numeric.log,f=numeric.mul,c=numeric.sub,m=numeric.dot,v=numeric.div,g=numeric.add,x=e.length,_=i.length,E,L=!1,O,M=0,D=1,P,U,N=numeric.transpose(r),F=numeric.svd,V=numeric.transpose,q=numeric.leq,J=Math.sqrt,Y=Math.abs,ie=numeric.muleq,oe=numeric.norminf,Z=numeric.any,K=Math.min,Q=numeric.all,te=numeric.gt,ee=Array(x),ae=Array(_),ue=numeric.rep([_],1),le,xe=numeric.solve,Re=c(i,m(r,s)),be,Me=m(e,e),We;for(be=M;be<o;++be){var Pe,Ve,Le;for(Pe=_-1;Pe!==-1;--Pe)ae[Pe]=v(r[Pe],Re[Pe]);var He=V(ae);for(Pe=x-1;Pe!==-1;--Pe)ee[Pe]=l(He[Pe]);D=.25*Y(Me/m(e,ee));var it=100*J(Me/m(ee,ee));for((!isFinite(D)||D>it)&&(D=it),We=g(e,f(D,ee)),le=m(He,ae),Pe=x-1;Pe!==-1;--Pe)le[Pe][Pe]+=1;Le=xe(le,v(We,D),!0);var Je=v(Re,m(r,Le)),st=1;for(Pe=_-1;Pe!==-1;--Pe)Je[Pe]<0&&(st=K(st,-.999*Je[Pe]));if(E=c(s,f(Le,st)),Re=c(i,m(r,E)),!Q(te(Re,0)))return{solution:s,message:"",iterations:be};if(s=E,D<n)return{solution:E,message:"",iterations:be};if(a){var ot=m(e,We),vt=m(r,We);for(L=!0,Pe=_-1;Pe!==-1;--Pe)if(ot*vt[Pe]<0){L=!1;break}}else s[x-1]>=0?L=!1:L=!0;if(L)return{solution:E,message:"Unbounded",iterations:be}}return{solution:s,message:"maximum iteration count exceeded",iterations:be}};numeric._solveLP=function t(e,r,i,n,o){var s=e.length,a=i.length,O,l=numeric.sum,p=numeric.log,f=numeric.mul,c=numeric.sub,m=numeric.dot,v=numeric.div,g=numeric.add,x=numeric.rep([s],0).concat([1]),_=numeric.rep([a,1],-1),E=numeric.blockMatrix([[r,_]]),L=i,O=numeric.rep([s],0).concat(Math.max(0,numeric.sup(numeric.neg(i)))+1),M=numeric.__solveLP(x,E,L,n,o,O,!1),D=numeric.clone(M.solution);D.length=s;var P=numeric.inf(c(i,m(r,D)));if(P<0)return{solution:NaN,message:"Infeasible",iterations:M.iterations};var U=numeric.__solveLP(e,r,i,n,o-M.iterations,D,!0);return U.iterations+=M.iterations,U};numeric.solveLP=function t(e,r,i,n,o,s,a){if(typeof a>"u"&&(a=1e3),typeof s>"u"&&(s=numeric.epsilon),typeof n>"u")return numeric._solveLP(e,r,i,s,a);var l=n.length,p=n[0].length,f=r.length,c=numeric.echelonize(n),m=numeric.rep([p],0),v=c.P,g=[],x;for(x=v.length-1;x!==-1;--x)m[v[x]]=1;for(x=p-1;x!==-1;--x)m[x]===0&&g.push(x);var _=numeric.getRange,E=numeric.linspace(0,l-1),L=numeric.linspace(0,f-1),O=_(n,E,g),M=_(r,L,v),D=_(r,L,g),P=numeric.dot,U=numeric.sub,N=P(M,c.I),F=U(D,P(N,O)),V=U(i,P(N,o)),q=Array(v.length),J=Array(g.length);for(x=v.length-1;x!==-1;--x)q[x]=e[v[x]];for(x=g.length-1;x!==-1;--x)J[x]=e[g[x]];var Y=U(J,P(q,P(c.I,O))),ie=numeric._solveLP(Y,F,V,s,a),oe=ie.solution;if(oe!==oe)return ie;var Z=P(c.I,U(o,P(O,oe))),K=Array(e.length);for(x=v.length-1;x!==-1;--x)K[v[x]]=Z[x];for(x=g.length-1;x!==-1;--x)K[g[x]]=oe[x];return{solution:K,message:ie.message,iterations:ie.iterations}};numeric.MPStoLP=function t(e){e instanceof String&&e.split(`
`);var r=0,i=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],n=e.length,o,s,a,l=0,p={},f=[],c=0,m={},v=0,g,x=[],_=[],E=[];function L(U){throw new Error("MPStoLP: "+U+`
Line `+o+": "+e[o]+`
Current state: `+i[r]+`
`)}for(o=0;o<n;++o){a=e[o];var O=a.match(/\S*/g),M=[];for(s=0;s<O.length;++s)O[s]!==""&&M.push(O[s]);if(M.length!==0){for(s=0;s<i.length&&a.substr(0,i[s].length)!==i[s];++s);if(s<i.length){if(r=s,s===1&&(g=M[1]),s===6)return{name:g,c:x,A:numeric.transpose(_),b:E,rows:p,vars:m};continue}switch(r){case 0:case 1:L("Unexpected line");case 2:switch(M[0]){case"N":l===0?l=M[1]:L("Two or more N rows");break;case"L":p[M[1]]=c,f[c]=1,E[c]=0,++c;break;case"G":p[M[1]]=c,f[c]=-1,E[c]=0,++c;break;case"E":p[M[1]]=c,f[c]=0,E[c]=0,++c;break;default:L("Parse error "+numeric.prettyPrint(M))}break;case 3:m.hasOwnProperty(M[0])||(m[M[0]]=v,x[v]=0,_[v]=numeric.rep([c],0),++v);var D=m[M[0]];for(s=1;s<M.length;s+=2){if(M[s]===l){x[D]=parseFloat(M[s+1]);continue}var P=p[M[s]];_[D][P]=(f[P]<0?-1:1)*parseFloat(M[s+1])}break;case 4:for(s=1;s<M.length;s+=2)E[p[M[s]]]=(f[p[M[s]]]<0?-1:1)*parseFloat(M[s+1]);break;case 5:break;case 6:L("Internal error")}}}L("Reached end of file without ENDATA")};numeric.seedrandom={pow:Math.pow,random:Math.random};(function(t,e,r,i,n,o,s){e.seedrandom=function(m,v){var g=[],x;return m=p(l(v?[m,t]:arguments.length?m:[new Date().getTime(),t,window],3),g),x=new a(g),p(x.S,t),e.random=function(){for(var E=x.g(i),L=s,O=0;E<n;)E=(E+O)*r,L*=r,O=x.g(1);for(;E>=o;)E/=2,L/=2,O>>>=1;return(E+O)/L},m};function a(c){var m,v,g=this,x=c.length,_=0,E=g.i=g.j=g.m=0;for(g.S=[],g.c=[],x||(c=[x++]);_<r;)g.S[_]=_++;for(_=0;_<r;_++)m=g.S[_],E=f(E+m+c[_%x]),v=g.S[E],g.S[_]=v,g.S[E]=m;g.g=function(O){var M=g.S,D=f(g.i+1),P=M[D],U=f(g.j+P),N=M[U];M[D]=N,M[U]=P;for(var F=M[f(P+N)];--O;)D=f(D+1),P=M[D],U=f(U+P),N=M[U],M[D]=N,M[U]=P,F=F*r+M[f(P+N)];return g.i=D,g.j=U,F},g.g(r)}function l(c,m,v,g,x){if(v=[],x=typeof c,m&&x=="object"){for(g in c)if(g.indexOf("S")<5)try{v.push(l(c[g],m-1))}catch{}}return v.length?v:c+(x!="string"?"\0":"")}function p(c,m,v,g){for(c+="",v=0,g=0;g<c.length;g++)m[f(g)]=f((v^=m[f(g)]*19)+c.charCodeAt(g));c="";for(g in m)c+=String.fromCharCode(m[g]);return c}function f(c){return c&r-1}s=e.pow(r,i),n=e.pow(2,n),o=n*2,p(e.random(),t)})([],numeric.seedrandom,256,6,52);(function(t){function e(l){if(typeof l!="object")return l;var p=[],f,c=l.length;for(f=0;f<c;f++)p[f+1]=e(l[f]);return p}function r(l){if(typeof l!="object")return l;var p=[],f,c=l.length;for(f=1;f<c;f++)p[f-1]=r(l[f]);return p}function i(l,p,f){var c,m,v,g,x;for(v=1;v<=f;v=v+1){for(l[v][v]=1/l[v][v],x=-l[v][v],c=1;c<v;c=c+1)l[c][v]=x*l[c][v];if(g=v+1,f<g)break;for(m=g;m<=f;m=m+1)for(x=l[v][m],l[v][m]=0,c=1;c<=v;c=c+1)l[c][m]=l[c][m]+x*l[c][v]}}function n(l,p,f,c){var m,v,g,x;for(v=1;v<=f;v=v+1){for(x=0,m=1;m<v;m=m+1)x=x+l[m][v]*c[m];c[v]=(c[v]-x)/l[v][v]}for(g=1;g<=f;g=g+1)for(v=f+1-g,c[v]=c[v]/l[v][v],x=-c[v],m=1;m<v;m=m+1)c[m]=c[m]+x*l[m][v]}function o(l,p,f,c){var m,v,g,x,_,E;for(v=1;v<=f;v=v+1){if(c[1]=v,E=0,g=v-1,g<1){if(E=l[v][v]-E,E<=0)break;l[v][v]=Math.sqrt(E)}else{for(x=1;x<=g;x=x+1){for(_=l[x][v],m=1;m<x;m=m+1)_=_-l[m][v]*l[m][x];_=_/l[x][x],l[x][v]=_,E=E+_*_}if(E=l[v][v]-E,E<=0)break;l[v][v]=Math.sqrt(E)}c[1]=0}}function s(l,p,f,c,m,v,g,x,_,E,L,O,M,D,P,U){var N,F,V,q,J,Y,ie,oe,Z,K,Q,te,ee,ae,ue,le,xe,Re,be,Me,We,Pe,Ve,Le,He,it,Je;ee=Math.min(c,E),V=2*c+ee*(ee+5)/2+2*E+1,Le=1e-60;do Le=Le+Le,He=1+.1*Le,it=1+.2*Le;while(He<=1||it<=1);for(N=1;N<=c;N=N+1)P[N]=p[N];for(N=c+1;N<=V;N=N+1)P[N]=0;for(N=1;N<=E;N=N+1)O[N]=0;if(J=[],U[1]===0){if(o(l,f,c,J),J[1]!==0){U[1]=2;return}n(l,f,c,p),i(l,f,c)}else{for(F=1;F<=c;F=F+1)for(m[F]=0,N=1;N<=F;N=N+1)m[F]=m[F]+l[N][F]*p[N];for(F=1;F<=c;F=F+1)for(p[F]=0,N=F;N<=c;N=N+1)p[F]=p[F]+l[F][N]*m[N]}for(v[1]=0,F=1;F<=c;F=F+1)for(m[F]=p[F],v[1]=v[1]+P[F]*m[F],P[F]=0,N=F+1;N<=c;N=N+1)l[N][F]=0;for(v[1]=-v[1]/2,U[1]=0,ie=c,oe=ie+c,Q=oe+ee,Z=Q+ee+1,K=Z+ee*(ee+1)/2,ae=K+E,N=1;N<=E;N=N+1){for(le=0,F=1;F<=c;F=F+1)le=le+g[F][N]*g[F][N];P[ae+N]=Math.sqrt(le)}M=0,D[1]=0,D[2]=0;function st(){for(D[1]=D[1]+1,V=K,N=1;N<=E;N=N+1){for(V=V+1,le=-x[N],F=1;F<=c;F=F+1)le=le+g[F][N]*m[F];if(Math.abs(le)<Le&&(le=0),N>L)P[V]=le;else if(P[V]=-Math.abs(le),le>0){for(F=1;F<=c;F=F+1)g[F][N]=-g[F][N];x[N]=-x[N]}}for(N=1;N<=M;N=N+1)P[K+O[N]]=0;for(te=0,ue=0,N=1;N<=E;N=N+1)P[K+N]<ue*P[ae+N]&&(te=N,ue=P[K+N]/P[ae+N]);return te===0?999:0}function ot(){for(N=1;N<=c;N=N+1){for(le=0,F=1;F<=c;F=F+1)le=le+l[F][N]*g[F][te];P[N]=le}for(q=ie,N=1;N<=c;N=N+1)P[q+N]=0;for(F=M+1;F<=c;F=F+1)for(N=1;N<=c;N=N+1)P[q+N]=P[q+N]+l[N][F]*P[F];for(Pe=!0,N=M;N>=1;N=N-1){for(le=P[N],V=Z+N*(N+3)/2,q=V-N,F=N+1;F<=M;F=F+1)le=le-P[V]*P[oe+F],V=V+F;if(le=le/P[q],P[oe+N]=le,O[N]<L||le<0)break;Pe=!1,Y=N}if(!Pe)for(xe=P[Q+Y]/P[oe+Y],N=1;N<=M&&!(O[N]<L||P[oe+N]<0);N=N+1)ue=P[Q+N]/P[oe+N],ue<xe&&(xe=ue,Y=N);for(le=0,N=ie+1;N<=ie+c;N=N+1)le=le+P[N]*P[N];if(Math.abs(le)<=Le){if(Pe)return U[1]=1,999;for(N=1;N<=M;N=N+1)P[Q+N]=P[Q+N]-xe*P[oe+N];return P[Q+M+1]=P[Q+M+1]+xe,700}else{for(le=0,N=1;N<=c;N=N+1)le=le+P[ie+N]*g[N][te];for(Re=-P[K+te]/le,Ve=!0,Pe||xe<Re&&(Re=xe,Ve=!1),N=1;N<=c;N=N+1)m[N]=m[N]+Re*P[ie+N],Math.abs(m[N])<Le&&(m[N]=0);for(v[1]=v[1]+Re*le*(Re/2+P[Q+M+1]),N=1;N<=M;N=N+1)P[Q+N]=P[Q+N]-Re*P[oe+N];if(P[Q+M+1]=P[Q+M+1]+Re,Ve){for(M=M+1,O[M]=te,V=Z+(M-1)*M/2+1,N=1;N<=M-1;N=N+1)P[V]=P[N],V=V+1;if(M===c)P[V]=P[c];else{for(N=c;N>=M+1&&!(P[N]===0||(be=Math.max(Math.abs(P[N-1]),Math.abs(P[N])),Me=Math.min(Math.abs(P[N-1]),Math.abs(P[N])),P[N-1]>=0?ue=Math.abs(be*Math.sqrt(1+Me*Me/(be*be))):ue=-Math.abs(be*Math.sqrt(1+Me*Me/(be*be))),be=P[N-1]/ue,Me=P[N]/ue,be===1));N=N-1)if(be===0)for(P[N-1]=Me*ue,F=1;F<=c;F=F+1)ue=l[F][N-1],l[F][N-1]=l[F][N],l[F][N]=ue;else for(P[N-1]=ue,We=Me/(1+be),F=1;F<=c;F=F+1)ue=be*l[F][N-1]+Me*l[F][N],l[F][N]=We*(l[F][N-1]+ue)-l[F][N],l[F][N-1]=ue;P[V]=P[M]}}else{for(le=-x[te],F=1;F<=c;F=F+1)le=le+m[F]*g[F][te];if(te>L)P[K+te]=le;else if(P[K+te]=-Math.abs(le),le>0){for(F=1;F<=c;F=F+1)g[F][te]=-g[F][te];x[te]=-x[te]}return 700}}return 0}function vt(){if(V=Z+Y*(Y+1)/2+1,q=V+Y,P[q]===0||(be=Math.max(Math.abs(P[q-1]),Math.abs(P[q])),Me=Math.min(Math.abs(P[q-1]),Math.abs(P[q])),P[q-1]>=0?ue=Math.abs(be*Math.sqrt(1+Me*Me/(be*be))):ue=-Math.abs(be*Math.sqrt(1+Me*Me/(be*be))),be=P[q-1]/ue,Me=P[q]/ue,be===1))return 798;if(be===0){for(N=Y+1;N<=M;N=N+1)ue=P[q-1],P[q-1]=P[q],P[q]=ue,q=q+N;for(N=1;N<=c;N=N+1)ue=l[N][Y],l[N][Y]=l[N][Y+1],l[N][Y+1]=ue}else{for(We=Me/(1+be),N=Y+1;N<=M;N=N+1)ue=be*P[q-1]+Me*P[q],P[q]=We*(P[q-1]+ue)-P[q],P[q-1]=ue,q=q+N;for(N=1;N<=c;N=N+1)ue=be*l[N][Y]+Me*l[N][Y+1],l[N][Y+1]=We*(l[N][Y]+ue)-l[N][Y+1],l[N][Y]=ue}return 0}function bt(){for(q=V-Y,N=1;N<=Y;N=N+1)P[q]=P[V],V=V+1,q=q+1;return P[Q+Y]=P[Q+Y+1],O[Y]=O[Y+1],Y=Y+1,Y<M?797:0}function je(){return P[Q+M]=P[Q+M+1],P[Q+M+1]=0,O[M]=0,M=M-1,D[2]=D[2]+1,0}for(Je=0;;){if(Je=st(),Je===999)return;for(;Je=ot(),Je!==0;){if(Je===999)return;if(Je===700)if(Y===M)je();else{for(;vt(),Je=bt(),Je===797;);je()}}}}function a(l,p,f,c,m,v){l=e(l),p=e(p),f=e(f);var g,x,_,E,L,O=[],M=[],D=[],P=[],U=[],N;if(m=m||0,v=v?e(v):[void 0,0],c=c?e(c):[],x=l.length-1,_=f[1].length-1,!c)for(g=1;g<=_;g=g+1)c[g]=0;for(g=1;g<=_;g=g+1)M[g]=0;for(E=0,L=Math.min(x,_),g=1;g<=x;g=g+1)D[g]=0;for(O[1]=0,g=1;g<=2*x+L*(L+5)/2+2*_+1;g=g+1)P[g]=0;for(g=1;g<=2;g=g+1)U[g]=0;return s(l,p,x,x,D,O,f,c,x,_,m,M,E,U,P,v),N="",v[1]===1&&(N="constraints are inconsistent, no solution!"),v[1]===2&&(N="matrix D in quadratic function is not positive definite!"),{solution:r(D),value:r(O),unconstrained_solution:r(p),iterations:r(U),iact:r(M),message:N}}t.solveQP=a})(numeric);numeric.svd=function t(e){var r,i=numeric.epsilon,n=1e-64/i,o=50,s=0,a=0,l=0,p=0,f=0,c=numeric.clone(e),m=c.length,v=c[0].length;if(m<v)throw"Need more rows than columns";var g=new Array(v),x=new Array(v);for(a=0;a<v;a++)g[a]=x[a]=0;var _=numeric.rep([v,v],0);function E(J,Y){return J=Math.abs(J),Y=Math.abs(Y),J>Y?J*Math.sqrt(1+Y*Y/J/J):Y==0?J:Y*Math.sqrt(1+J*J/Y/Y)}var L=0,O=0,M=0,D=0,P=0,U=0,N=0;for(a=0;a<v;a++){for(g[a]=O,N=0,f=a+1,l=a;l<m;l++)N+=c[l][a]*c[l][a];if(N<=n)O=0;else for(L=c[a][a],O=Math.sqrt(N),L>=0&&(O=-O),M=L*O-N,c[a][a]=L-O,l=f;l<v;l++){for(N=0,p=a;p<m;p++)N+=c[p][a]*c[p][l];for(L=N/M,p=a;p<m;p++)c[p][l]+=L*c[p][a]}for(x[a]=O,N=0,l=f;l<v;l++)N=N+c[a][l]*c[a][l];if(N<=n)O=0;else{for(L=c[a][a+1],O=Math.sqrt(N),L>=0&&(O=-O),M=L*O-N,c[a][a+1]=L-O,l=f;l<v;l++)g[l]=c[a][l]/M;for(l=f;l<m;l++){for(N=0,p=f;p<v;p++)N+=c[l][p]*c[a][p];for(p=f;p<v;p++)c[l][p]+=N*g[p]}}P=Math.abs(x[a])+Math.abs(g[a]),P>D&&(D=P)}for(a=v-1;a!=-1;a+=-1){if(O!=0){for(M=O*c[a][a+1],l=f;l<v;l++)_[l][a]=c[a][l]/M;for(l=f;l<v;l++){for(N=0,p=f;p<v;p++)N+=c[a][p]*_[p][l];for(p=f;p<v;p++)_[p][l]+=N*_[p][a]}}for(l=f;l<v;l++)_[a][l]=0,_[l][a]=0;_[a][a]=1,O=g[a],f=a}for(a=v-1;a!=-1;a+=-1){for(f=a+1,O=x[a],l=f;l<v;l++)c[a][l]=0;if(O!=0){for(M=c[a][a]*O,l=f;l<v;l++){for(N=0,p=f;p<m;p++)N+=c[p][a]*c[p][l];for(L=N/M,p=a;p<m;p++)c[p][l]+=L*c[p][a]}for(l=a;l<m;l++)c[l][a]=c[l][a]/O}else for(l=a;l<m;l++)c[l][a]=0;c[a][a]+=1}for(i=i*D,p=v-1;p!=-1;p+=-1)for(var F=0;F<o;F++){var V=!1;for(f=p;f!=-1;f+=-1){if(Math.abs(g[f])<=i){V=!0;break}if(Math.abs(x[f-1])<=i)break}if(!V){s=0,N=1;var q=f-1;for(a=f;a<p+1&&(L=N*g[a],g[a]=s*g[a],!(Math.abs(L)<=i));a++)for(O=x[a],M=E(L,O),x[a]=M,s=O/M,N=-L/M,l=0;l<m;l++)P=c[l][q],U=c[l][a],c[l][q]=P*s+U*N,c[l][a]=-P*N+U*s}if(U=x[p],f==p){if(U<0)for(x[p]=-U,l=0;l<v;l++)_[l][p]=-_[l][p];break}if(F>=o-1)throw"Error: no convergence.";for(D=x[f],P=x[p-1],O=g[p-1],M=g[p],L=((P-U)*(P+U)+(O-M)*(O+M))/(2*M*P),O=E(L,1),L<0?L=((D-U)*(D+U)+M*(P/(L-O)-M))/D:L=((D-U)*(D+U)+M*(P/(L+O)-M))/D,s=1,N=1,a=f+1;a<p+1;a++){for(O=g[a],P=x[a],M=N*O,O=s*O,U=E(L,M),g[a-1]=U,s=L/U,N=M/U,L=D*s+O*N,O=-D*N+O*s,M=P*N,P=P*s,l=0;l<v;l++)D=_[l][a-1],U=_[l][a],_[l][a-1]=D*s+U*N,_[l][a]=-D*N+U*s;for(U=E(L,M),x[a-1]=U,s=L/U,N=M/U,L=s*O+N*P,D=-N*O+s*P,l=0;l<m;l++)P=c[l][a-1],U=c[l][a],c[l][a-1]=P*s+U*N,c[l][a]=-P*N+U*s}g[f]=0,g[p]=L,x[p]=D}for(a=0;a<x.length;a++)x[a]<i&&(x[a]=0);for(a=0;a<v;a++)for(l=a-1;l>=0;l--)if(x[l]<x[a]){for(s=x[l],x[l]=x[a],x[a]=s,p=0;p<c.length;p++)r=c[p][a],c[p][a]=c[p][l],c[p][l]=r;for(p=0;p<_.length;p++)r=_[p][a],_[p][a]=_[p][l],_[p][l]=r;a=l}return{U:c,S:x,V:_}}});function ale(t,e){var r,i,n,o,s,a,l,p,f,c,m,v;for(r=[],s=a=0;a<4;s=++a)r.push([t[s].x,t[s].y,1,0,0,0,-t[s].x*e[s].x,-t[s].y*e[s].x]),r.push([0,0,0,t[s].x,t[s].y,1,-t[s].x*e[s].y,-t[s].y*e[s].y]);for(n=[],s=p=0;p<4;s=++p)n.push(e[s].x),n.push(e[s].y);for(o=ap.default.solve(r,n),i=[[o[0],o[1],0,o[2]],[o[3],o[4],0,o[5]],[0,0,1,0],[o[6],o[7],0,1]],s=c=0;c<4;s=++c)f=ap.default.dot(i,[t[s].x,t[s].y,0,1]),l=f[3],v=ap.default.dot(l,[e[s].x,e[s].y,0,1]);return i}function lle(t,e,r){var i,n,o,s,a,l,p,f;for(n=function(){var c,m;for(f=[],c=0,m=t.length;c<m;c++)l=t[c],f.push({x:l[0]-t[0][0],y:l[1]-t[0][1]});return f}(),p=function(){var c,m,v;for(v=[],c=0,m=e.length;c<m;c++)l=e[c],v.push({x:l[0]-t[0][0],y:l[1]-t[0][1]});return v}(),i=ale(n,p),f=[],o=a=0;a<4;o=++a)f.push(function(){var c,m;for(m=[],s=c=0;c<4;s=++c)m.push(i[s][o]);return m}());return f.reduce((c,m)=>[...c,...m],[])}var ap,$z,jz,sle,Vz,Gz=$(()=>{Br();lp();ap=ve(Wz(),1),$z=ve(Ie(),1);Fe();jz={};he||(window.numeric=ap.default,jz=window.lightbox={});sle=t=>{let e=window.getComputedStyle(t),r={leftPad:parseFloat(e.getPropertyValue("padding-left"))||0,rightPad:parseFloat(e.getPropertyValue("padding-right"))||0,leftBorder:parseFloat(e.getPropertyValue("border-right-width"))||0,rightBorder:parseFloat(e.getPropertyValue("border-left-width"))||0,topPad:parseFloat(e.getPropertyValue("padding-top"))||0,bottomPad:parseFloat(e.getPropertyValue("padding-bottom"))||0,bottomBorder:parseFloat(e.getPropertyValue("border-bottom-width"))||0,topBorder:parseFloat(e.getPropertyValue("border-top-width"))||0};return{...r,vertPadSize:r.topPad+r.bottomPad+r.topBorder+r.bottomBorder,horizPadSize:r.leftPad+r.rightPad+r.leftBorder+r.rightBorder}},Vz=(t,e={x:0,y:0})=>{let{leftPad:r,leftBorder:i,rightPad:n,rightBorder:o,topPad:s,topBorder:a,bottomPad:l,bottomBorder:p}=sle(t),{x:f,y:c}=e,v=[{left:r+i+e.x+"px",right:"auto",top:s+a+e.y+"px",bottom:"auto"},{left:r+i+e.x+"px",right:"auto",top:"auto",bottom:l+p+-e.y+"px"},{left:"auto",right:n+o+-e.x+"px",top:s+a+e.y+"px",bottom:"auto"},{left:"auto",right:n+o+-e.x+"px",top:"auto",bottom:l+p+-e.y+"px"}].map(x=>{let _=document.createElement("div");return _.style.position="absolute",_.style.top=x.top,_.style.left=x.left,_.style.right=x.right,_.style.bottom=x.bottom,_.style.width="0px",_.style.height="0px",_.style.visibility="hidden",_.style.pointerEvents="none",t.parentElement.parentElement.appendChild(_),_}),g=v.map(x=>{let _=x.getBoundingClientRect();return[_.left,_.top]});return v.forEach(x=>{x.remove()}),g};(function(){"use strict";(function(r,i){r===void 0&&window!==void 0&&(r=window),r.PhotoSwipe=i()})(this,function(){"use strict";var r=function(i,n,o,s){var a={features:null,bind:function(R,H,X,G){var Se=(G?"remove":"add")+"EventListener";H=H.split(" ");for(var Te=0;Te<H.length;Te++)H[Te]&&R[Se](H[Te],X,!1)},isArray:function(R){return R instanceof Array},createEl:function(R,H){var X=document.createElement(H||"div");return R&&(X.className=R),X},getScrollY:function(){var R=window.pageYOffset;return R!==void 0?R:document.documentElement.scrollTop},unbind:function(R,H,X){a.bind(R,H,X,!0)},removeClass:function(R,H){var X=new RegExp("(\\s|^)"+H+"(\\s|$)");R.className=R.className.replace(X," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(R,H){a.hasClass(R,H)||(R.className+=(R.className?" ":"")+H)},hasClass:function(R,H){return R.className&&new RegExp("(^|\\s)"+H+"(\\s|$)").test(R.className)},getChildByClass:function(R,H){for(var X=R.firstChild;X;){if(a.hasClass(X,H))return X;X=X.nextSibling}},arraySearch:function(R,H,X){for(var G=R.length;G--;)if(R[G][X]===H)return G;return-1},extend:function(R,H,X){for(var G in H)if(H.hasOwnProperty(G)){if(X&&R.hasOwnProperty(G))continue;R[G]=H[G]}},easing:{sine:{out:function(R){return Math.sin(R*(Math.PI/2))},inOut:function(R){return-(Math.cos(Math.PI*R)-1)/2}},cubic:{out:function(R){return--R*R*R+1}}},detectFeatures:function(){if(a.features)return a.features;var R=a.createEl(),H=R.style,X="",G={};if(G.oldIE=document.all&&!document.addEventListener,G.touch="ontouchstart"in window,window.requestAnimationFrame&&(G.raf=window.requestAnimationFrame,G.caf=window.cancelAnimationFrame),G.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!G.pointerEvent){var Se=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var Te=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);Te&&Te.length>0&&(Te=parseInt(Te[1],10),Te>=1&&Te<8&&(G.isOldIOSPhone=!0))}var De=Se.match(/Android\s([0-9\.]*)/),tt=De?De[1]:0;tt=parseFloat(tt),tt>=1&&(tt<4.4&&(G.isOldAndroid=!0),G.androidVersion=tt),G.isMobileOpera=/opera mini|opera mobi/i.test(Se)}for(var ft=["transform","perspective","animationName"],xt=["","webkit","Moz","ms","O"],Ge,It,Vt=0;Vt<4;Vt++){X=xt[Vt];for(var mi=0;mi<3;mi++)Ge=ft[mi],It=X+(X?Ge.charAt(0).toUpperCase()+Ge.slice(1):Ge),!G[Ge]&&It in H&&(G[Ge]=It);X&&!G.raf&&(X=X.toLowerCase(),G.raf=window[X+"RequestAnimationFrame"],G.raf&&(G.caf=window[X+"CancelAnimationFrame"]||window[X+"CancelRequestAnimationFrame"]))}if(!G.raf){var Zt=0;G.raf=function(Jt){var pr=new Date().getTime(),Tr=Math.max(0,16-(pr-Zt)),sn=window.setTimeout(function(){Jt(pr+Tr)},Tr);return Zt=pr+Tr,sn},G.caf=function(Jt){clearTimeout(Jt)}}return G.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a.features=G,G}};a.detectFeatures(),a.features.oldIE&&(a.bind=function(R,H,X,G){H=H.split(" ");for(var Se=(G?"detach":"attach")+"Event",Te,De=function(){X.handleEvent.call(X)},tt=0;tt<H.length;tt++)if(Te=H[tt],Te)if(typeof X=="object"&&X.handleEvent){if(!G)X["oldIE"+Te]=De;else if(!X["oldIE"+Te])return!1;R[Se]("on"+Te,X["oldIE"+Te])}else R[Se]("on"+Te,X)});var l=this,p=25,f=3,c={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,animatedCloseOnScroll:!0,showCaption:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:222,showAnimationDuration:222,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(R){return R.tagName==="A"},getDoubleTapZoom:function(R,H){return R||H.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};a.extend(c,s);var Ms=null,m=function(){var R=a.getScrollY();Ms===null&&(Ms=R),Ca||(hi=hi+(R-Ms),Ms=R,J<=l.currItem.fitRatio&&!fi&&c.modal&&(!c.animatedCloseOnScroll||zo||Hi?hi=0:We&&Math.abs(hi)>0&&!pt&&(go(),Pa()),on&&clearTimeout(on),c.animatedCloseOnScroll,on=setTimeout(function(){go(),yc()},200)))},v=function(){return{x:0,y:0}},g,x,_,E,L,O,M=v(),D=v(),P=v(),U,N,F,V={},q={},J,Y,ie,oe,Z,K,Q=0,te={},ee=v(),ae,ue,le=0,xe,Re,be,Me,We,Pe,Ve=!0,Le,He=[],it,Je,st,ot,vt,bt,je,Lt={},Kt=!1,Ir,pt=!1,Ai=function(R,H){a.extend(l,H.publicMethods),He.push(R)},Ti=function(R){var H=pi();return R>H-1?R-H:R<0?H+R:R},vn={},Ar=function(R,H){return vn[R]||(vn[R]=[]),vn[R].push(H)},_t=function(R){var H=vn[R];if(H){var X=Array.prototype.slice.call(arguments);X.shift();for(var G=0;G<H.length;G++)H[G].apply(l,X)}},qi=function(){return new Date().getTime()},Mi=function(R){Is=R,l.bg.style.opacity=R*c.bgOpacity},gl=function(R,H,X,G,Se){(!Kt||Se&&Se!==l.currItem)&&(G=G/(Se?Se.fitRatio:l.currItem.fitRatio)),X=X+q.top,R[We]=ie+H+"px, "+X+"px"+oe+" scale("+G+")"},mr=function(R){ci&&(R&&(J>l.currItem.fitRatio?Kt||(ii(l.currItem,!1,!0),Kt=!0):Kt&&(ii(l.currItem),Kt=!1)),gl(ci,P.x,P.y,J))},lo=function(R){R.container&&gl(R.container.style,R.initialPosition.x,R.initialPosition.y,R.initialZoomLevel,R)},uo=function(R,H,X){X[We]=ie+R+"px, "+H+"px"+oe},Ss=function(R,H){if(!c.loop&&H){var X=E+(ee.x*Q-R)/ee.x,G=R-wn.x;(X<0&&G>0||X>=pi()-1&&G<0)&&(R=wn.x+G*c.mainScrollEndFriction)}wn.x=R,uo(R,0,L)},Qu=function(R,H){var X=wa[R]-te[R];return D[R]+M[R]+X-X*(H/Y)},ai=function(R,H){R.x=H.x,R.y=H.y,H.id&&(R.id=H.id)},xp=function(R){R.x=Math.round(R.x),R.y=Math.round(R.y)},vl=null,yl=function(){vl&&(a.unbind(document,"mousemove",yl),a.addClass(i,"quick-view-has-mouse"),c.mouseUsed=!0,_t("mouseUsed")),vl=setTimeout(function(){vl=null},100)},av=function(){a.bind(document,"keydown",l),je.transform&&a.bind(l.scrollWrap,"click",l),c.mouseUsed||a.bind(document,"mousemove",yl),a.bind(window,"resize scroll orientationchange",l),_t("bindEvents")},lv=function(){a.unbind(window,"resize scroll orientationchange",l),a.unbind(window,"scroll",F.scroll),a.unbind(document,"keydown",l),a.unbind(document,"mousemove",yl),je.transform&&a.unbind(l.scrollWrap,"click",l),Hi&&a.unbind(window,U,l),clearTimeout(Ir),_t("unbindEvents")},ec=function(R,H){var X=As(l.currItem,V,R);return H&&(wt=X),X},Sp=function(R){return R||(R=l.currItem),R.initialZoomLevel},tc=function(R){return R||(R=l.currItem),R.w>0?c.maxSpreadZoom:1},_p=function(R,H,X,G){return G===l.currItem.initialZoomLevel?(X[R]=l.currItem.initialPosition[R],!0):(X[R]=Qu(R,G),X[R]>H.min[R]?(X[R]=H.min[R],!0):X[R]<H.max[R]?(X[R]=H.max[R],!0):!1)},uv=function(){if(We){var R=je.perspective&&!Le;ie="translate"+(R?"3d(":"("),oe=je.perspective?", 0px)":")";return}We="left",a.addClass(i,"quick-view-ie"),uo=function(H,X){X.left=H+"px"},lo=function(H){var X=H.fitRatio>1?1:H.fitRatio,G=H.container.style,Se=X*H.w,Te=X*H.h;G.width=Se+"px",G.height=Te+"px",G.left=H.initialPosition.x+"px",G.top=H.initialPosition.y+"px"},mr=function(){if(ci){var H=ci,X=l.currItem,G=X.fitRatio>1?1:X.fitRatio,Se=G*X.w,Te=G*X.h;H.width=Se+"px",H.height=Te+"px",H.left=P.x+"px",H.top=P.y+"px"}}},cv=function(R){var H="";c.escKey&&R.keyCode===27?H="close":c.arrowKeys&&(R.keyCode===37?H="prev":R.keyCode===39&&(H="next")),R.keyCode===32&&(R.preventDefault(),R.stopImmediatePropagation(),H="close"),H&&!R.ctrlKey&&!R.altKey&&!R.shiftKey&&!R.metaKey&&(R.preventDefault?R.preventDefault():R.returnValue=!1,l[H]())},rc=function(R){R&&(ho||po||Vr||Cs)&&(R.preventDefault(),R.stopPropagation())},Ep=function(){l.setScrollOffset(0,a.getScrollY())};he||window.addEventListener("scroll",m);var ti={},zo=0,ma=function(R){ti[R]&&(ti[R].raf&&Je(ti[R].raf),zo--,delete ti[R])},ic=function(R){ti[R]&&ma(R),ti[R]||(zo++,ti[R]={})},ga=function(){for(var R in ti)ti.hasOwnProperty(R)&&ma(R)},_s=function(R,H,X,G,Se,Te,De){var tt=qi(),ft;ic(R);var xt=function(){if(ti[R]){if(ft=qi()-tt,ft>=G){ma(R),Te(X),De&&De();return}Te((X-H)*Se(ft/G)+H),ti[R].raf=it(xt)}};xt()},dv={shout:_t,listen:Ar,viewportSize:V,options:c,isMainScrollAnimating:function(){return Vr},getZoomLevel:function(){return J},getCurrentIndex:function(){return E},isDragging:function(){return Hi},isZooming:function(){return bn},setScrollOffset:function(R,H){te.x=R,bt=te.y=H,_t("updateScrollOffset",te)},applyZoomPan:function(R,H,X,G){P.x=H,P.y=X,J=R,mr(G)},init:function(){if(!(g||x)){e("init",l);var R;l.framework=a,l.template=i,l.bg=a.getChildByClass(i,"quick-view-bg"),l.captionPositioner=a.getChildByClass(i,"quick-view-caption-positioner"),l.captionWrapper=a.getChildByClass(l.captionPositioner,"quick-view-caption-wrapper"),l.caption=a.getChildByClass(l.captionWrapper,"quick-view-caption"),st=i.className,g=!0,je=a.detectFeatures(),it=je.raf,Je=je.caf,We=je.transform,vt=je.oldIE,l.scrollWrap=a.getChildByClass(i,"quick-view-scroll-wrap"),l.container=a.getChildByClass(l.scrollWrap,"quick-view-container"),L=l.container.style,l.itemHolders=ae=[{el:l.container.children[0],wrap:0,index:-1},{el:l.container.children[1],wrap:0,index:-1},{el:l.container.children[2],wrap:0,index:-1}],ae[0].el.style.display=ae[2].el.style.display="none",uv(),F={resize:l.updateSize,orientationchange:function(){clearTimeout(Ir),Ir=setTimeout(function(){V.x!==l.scrollWrap.clientWidth&&l.updateSize()},500)},scroll:Ep,keydown:cv,click:rc};var H=je.isOldIOSPhone||je.isOldAndroid||je.isMobileOpera;for((!je.animationName||!je.transform||H)&&(c.showAnimationDuration=c.hideAnimationDuration=0),R=0;R<He.length;R++)l["init"+He[R]]();if(n){var X=l.ui=new n(l,a);X.init()}_t("firstUpdate"),E=E||c.index||0,(isNaN(E)||E<0||E>=pi())&&(E=0),l.currItem=xn(E),(je.isOldIOSPhone||je.isOldAndroid)&&(Ve=!1),i.setAttribute("aria-hidden","false"),c.modal&&(Ve?i.style.position="fixed":(i.style.position="absolute",i.style.top=a.getScrollY()+"px")),i.classList.add("quick-view-vertical-align-"+c.alignVertical),i.classList.add("quick-view-horizontal-align-"+c.alignHorizontal),bt===void 0&&(_t("initialLayout"),bt=ot=a.getScrollY());var G="quick-view-open ";for(c.mainClass&&(G+=c.mainClass+" "),c.showHideOpacity&&(G+="quick-view-animate_opacity "),G+=Le?"quick-view-touch":"quick-view-notouch",G+=je.animationName?" quick-view-css_animation":"",G+=je.svg?" quick-view-svg":"",a.addClass(i,G),l.updateSize(),O=-1,le=null,R=0;R<f;R++)uo((R+O)*ee.x+q.left,0,ae[R].el.style);vt||a.bind(l.scrollWrap,N,l),Ar("initialZoomInEnd",function(){l.setContent(ae[0],E-1),l.setContent(ae[2],E+1),ae[0].el.style.display=ae[2].el.style.display="block",c.focus&&i.focus(),av()}),l.setContent(ae[1],E),l.updateCurrItem(),setTimeout(l.updateCaption,c.showAnimationDuration+50),_t("afterInit",E),e("after-init",l),Ve||(Z=setInterval(function(){!zo&&!Hi&&!bn&&J===l.currItem.initialZoomLevel&&l.updateSize()},1e3)),a.addClass(i,"quick-view-visible")}},close:function(){g&&(g=!1,x=!0,_t("close"),e("closing",l),lv(),_l(l.currItem,null,!0,l.destroy))},destroy:function(){_t("destroy"),e("destroy",l),or&&clearTimeout(or),i.setAttribute("aria-hidden","true"),i.className=st,Z&&clearInterval(Z),a.unbind(l.scrollWrap,N,l),a.unbind(window,"scroll",l),window.removeEventListener("scroll",m),xl(),ga(),vn=null},panTo:function(R,H,X){X||(R>wt.min.x?R=wt.min.x:R<wt.max.x&&(R=wt.max.x),H>wt.min.y?H=wt.min.y:H<wt.max.y&&(H=wt.max.y)),P.x=R,P.y=H,mr()},handleEvent:function(R){R=R||window.event,F[R.type]&&F[R.type](R)},goTo:function(R){R=Ti(R);var H=R-E;le=H,E=R,l.currItem=xn(E),Q-=H,Ss(ee.x*Q),ga(),Vr=!1,l.updateCurrItem()},next:function(){l.goTo(E+1)},prev:function(){l.goTo(E-1)},updateCurrZoomItem:function(R){if(R&&(_t("beforeChange",0),e("before-slide-change",l,0)),ae[1].el.children.length){var H=ae[1].el.children[0];a.hasClass(H,"quick-view-zoom-wrap")?ci=H.style:ci=null}else ci=null;wt=l.currItem.bounds,Y=J=l.currItem.initialZoomLevel,P.x=wt.center.x,P.y=wt.center.y,R&&(_t("afterChange",E),e("after-slide-change",l))},invalidateCurrItems:function(){K=!0;for(var R=0;R<f;R++)ae[R].item&&(ae[R].item.needsUpdate=!0)},updateCaption:function(){if(l.currItem.caption&&c.showCaption){for(;l.caption.childNodes.length>0;)l.caption.childNodes[0].parentNode.removeChild(l.caption.childNodes[0]);l.caption.appendChild(l.currItem.caption),_a(l.currItem),l.caption.classList.remove("hidden")}else if(c.showCaption){var R=function(){for(;l.caption.childNodes.length>0;)l.caption.childNodes[0].parentNode.removeChild(l.caption.childNodes[0]);l.caption.removeEventListener("transitionend",R)};l.caption.classList.contains("hidden")?R():(l.caption.addEventListener("transitionend",R),l.caption.classList.add("hidden"))}},updateCurrItem:function(R){if(le!==0){var H=Math.abs(le),X;if(!(R&&H<2)){l.currItem=xn(E),Kt=!1,_t("beforeChange",le);var G=le;G===null&&(G=0),e("slide-change",l,G),H>=f&&(O+=le+(le>0?-f:f),H=f);for(var Se=0;Se<H;Se++)le>0?(X=ae.shift(),ae[f-1]=X,O++,uo((O+2)*ee.x+q.left,0,X.el.style),l.setContent(X,E-H+Se+1+1)):(X=ae.pop(),ae.unshift(X),O--,uo(O*ee.x+q.left,0,X.el.style),l.setContent(X,E+H-Se-1-1));if(ci&&Math.abs(le)===1){var tt=xn(ue);tt.initialZoomLevel!==J&&(As(tt,V),ii(tt),lo(tt))}var Te=1+-le,De=ae[Te];le=0,l.updateCurrZoomItem(),ue!==void 0&&l.updateCaption();var tt=xn(ue),ft=tt?.container?.querySelector("media-item");ft&&(ft.pause?.(),ft.getAttribute("autoplay")!="true"&&ft.setCurrentTime?.(0),ft.removeAttribute("autoplay"));var xt=xn(E),Ge=xt?.container?.querySelector("media-item");Ge&&(Ge.setAttribute("force-visible",!0),Ge.onload=()=>{xt.autoplay?Ge.play?.():setTimeout(()=>{Ge?.play?.()},400)}),ue=E,_t("afterChange",E)}}},updateSize:function(R){if(!Ve&&c.modal){var H=a.getScrollY();if(bt!==H&&(i.style.top=H+"px",bt=H),!R&&Lt.x===window.innerWidth&&Lt.y===window.innerHeight)return;Lt.x=window.innerWidth,Lt.y=window.innerHeight,i.style.height=Lt.y+"px"}var X=window.getComputedStyle(l.template),G=parseFloat(X.getPropertyValue("padding-left"))+parseFloat(X.getPropertyValue("border-left-width")),Se=parseFloat(X.getPropertyValue("margin-left")),Te=parseFloat(X.getPropertyValue("padding-right"))+parseFloat(X.getPropertyValue("border-right-width")),De=parseFloat(X.getPropertyValue("margin-right")),tt=parseFloat(X.getPropertyValue("padding-top"))+parseFloat(X.getPropertyValue("border-top-width")),ft=parseFloat(X.getPropertyValue("margin-top")),xt=parseFloat(X.getPropertyValue("padding-bottom"))+parseFloat(X.getPropertyValue("border-bottom-width")),Ge=parseFloat(X.getPropertyValue("margin-bottom"));let It="quick-view-vertical-align-"+c.alignVertical,Vt="quick-view-horizontal-align-"+c.alignHorizontal;It!=="quick-view-vertical-align-center"&&i.classList.remove("quick-view-vertical-align-center"),It!=="quick-view-vertical-align-top"&&i.classList.remove("quick-view-vertical-align-top"),It!=="quick-view-vertical-align-bottom"&&i.classList.remove("quick-view-vertical-align-bottom"),Vt!=="quick-view-horizontal-align-center"&&i.classList.remove("quick-view-horizontal-align-center"),Vt!=="quick-view-horizontal-align-left"&&i.classList.remove("quick-view-horizontal-align-left"),Vt!=="quick-view-horizontal-align-right"&&i.classList.remove("quick-view-horizontal-align-right"),i.classList.add(It),i.classList.add(Vt),q.top=tt,q.left=G,q.bottom=xt,q.right=Te,q.marginTop=ft,q.marginLeft=Se,q.marginBottom=Ge,q.marginRight=De;var mi=l.scrollWrap.getBoundingClientRect();if(V.x=mi.width,V.y=mi.height,Ep(),ee.x=V.x+V.x*c.spacing,ee.y=V.y,Ss(ee.x*Q),_t("beforeResize"),O!==void 0){for(var Zt,Jt,pr,Tr=0;Tr<f;Tr++)Zt=ae[Tr],uo((Tr+O)*ee.x+q.left,0,Zt.el.style),pr=E+Tr-1,c.loop&&pi()>2&&(pr=Ti(pr)),Jt=xn(pr),Jt&&(K||Jt.needsUpdate||!Jt.bounds)?(l.cleanSlide(Jt),l.setContent(Zt,pr),Tr===1&&(l.currItem=Jt,l.updateCurrZoomItem(!0)),Jt.needsUpdate=!1):Zt.index===-1&&pr>=0&&l.setContent(Zt,pr),Jt&&Jt.container&&(As(Jt,V),ii(Jt),lo(Jt));K=!1}Y=J=l.currItem.initialZoomLevel,wt=l.currItem.bounds,wt&&(P.x=wt.center.x,P.y=wt.center.y,mr(!0)),_t("resize")},zoomTo:function(R,H,X,G,Se){H&&(Y=J,wa.x=Math.abs(H.x)-P.x,wa.y=Math.abs(H.y)-P.y,ai(D,P));var Te=ec(R,!1),De={};_p("x",Te,De,R),_p("y",Te,De,R);var tt=J,ft={x:P.x,y:P.y};xp(De);var xt=function(Ge){Ge===1?(J=R,P.x=De.x,P.y=De.y,l.currItem.caption&&c.showCaption&&(Math.abs(J-l.currItem.fitRatio)>.01?l.caption.classList.add("hidden"):l.caption.classList.remove("hidden"))):(J=(R-tt)*Ge+tt,P.x=(De.x-ft.x)*Ge+ft.x,P.y=(De.y-ft.y)*Ge+ft.y),Se&&Se(Ge),mr(Ge===1)};X?_s("customZoomTo",0,1,X,G||a.easing.sine.inOut,xt):xt(1)}},Cp=30,nc=10,oc,bl,li={},Bo={},ui={},Wr={},Uo={},rn=[],qo={},co,Ho=[],Es={},sc,Cs,Ps,va=0,wl=v(),ac=0,Hi,lc,po,ho,ya,yn,Ri,bn,ba,uc,wt,wn=v(),ci,Vr,wa=v(),Wo=v(),Wi,xa,Fn,Is,Sa,pv=function(R,H){return R.x===H.x&&R.y===H.y},Pp=function(R,H){return Math.abs(R.x-H.x)<p&&Math.abs(R.y-H.y)<p},cc=function(R,H){return Es.x=Math.abs(R.x-H.x),Es.y=Math.abs(R.y-H.y),Math.sqrt(Es.x*Es.x+Es.y*Es.y)},xl=function(){ya&&(Je(ya),ya=null)},dc=function(){Hi&&(ya=it(dc),vv())},hv=function(){return!(c.scaleMode==="fit"&&J===l.currItem.initialZoomLevel)},Ip=function(R,H){return!R||R===document||R.getAttribute("class")&&R.getAttribute("class").indexOf("quick-view-scroll-wrap")>-1?!1:H(R)?R:Ip(R.parentNode,H)},pc={},hc=function(R,H){return pc.prevent=!Ip(R.target,c.isClickableElement),_t("preventDragEvent",R,H,pc),pc.prevent},Ap=function(R,H){return H.x=R.pageX+-q.left+-q.marginLeft,H.y=R.pageY+-q.top+-q.marginTop,H.clientY=R.clientY,H.id=R.identifier,H},Tp=function(R,H,X){X.x=(R.x+H.x)*.5,X.y=(R.y+H.y)*.5},fv=function(R,H,X){if(R-bl>50){var G=Ho.length>2?Ho.shift():{};G.x=H,G.y=X,Ho.push(G),bl=R}},Mp=function(){var R=P.y-l.currItem.initialPosition.y;return Math.min(1.2-Math.abs(R/(V.y/2)),1)},fo={},mv={},mo=[],Sl,fc=function(R){for(;mo.length>0;)mo.pop();return Pe?(Sl=0,rn.forEach(function(H){Sl===0?mo[0]=H:Sl===1&&(mo[1]=H),Sl++})):R.type.indexOf("touch")>-1?R.touches&&R.touches.length>0&&(mo[0]=Ap(R.touches[0],fo),R.touches.length>1&&(mo[1]=Ap(R.touches[1],mv))):(fo.x=R.pageX,fo.y=R.pageY,fo.clientY=R.clientY,fo.id="",mo[0]=fo),mo},Rp=function(R,H){var X,G=0,Se=P[R]+H[R],Te,De=H[R]>0,tt=wn.x+H.x,ft=wn.x-qo.x,xt,Ge;if(Se>wt.min[R]||Se<wt.max[R]?X=c.panEndFriction:X=1,Se=P[R]+H[R]*X,(c.allowPanToNext||J===l.currItem.initialZoomLevel)&&(ci?Wi==="h"&&R==="x"&&!po&&(De?(Se>wt.min[R]&&(X=c.panEndFriction,G=wt.min[R]-Se,Te=Math.round(wt.min[R]-D[R])),(Te<=0||ft<0)&&pi()>1?(Ge=tt,ft<0&&tt>qo.x&&(Ge=qo.x)):wt.min.x!==wt.max.x&&(xt=Se)):(Se<wt.max[R]&&(X=c.panEndFriction,G=Se-wt.max[R],Te=Math.round(D[R]-wt.max[R])),(Te<=0||ft>0)&&pi()>1?(Ge=tt,ft>0&&tt<qo.x&&(Ge=qo.x)):wt.min.x!==wt.max.x&&(xt=Se))):Ge=tt,R==="x"))return Ge!==void 0&&(Ss(Ge,!0),Ge===qo.x?yn=!1:yn=!0),wt.min.x!==wt.max.x&&(xt!==void 0?P.x=xt:yn||(P.x+=H.x*X)),Ge!==void 0;Vr||yn||J>l.currItem.fitRatio&&(P[R]+=H[R]*X)},Yt=null,Xt=function(R){if(!(R.type==="mousedown"&&R.button>0)){if(Vo){R.preventDefault();return}if(!(Ps&&R.type==="mousedown")){if(hc(R,!0)&&R.preventDefault(),Pl=R.type,Yt=setTimeout(function(){l.template.classList.add("mouse-down")},200),_t("pointerDown"),Pe){var H=a.arraySearch(rn,R.pointerId,"id");H<0&&(H=rn.length),rn[H]={x:R.pageX,y:R.pageY,clientY:R.clientY,id:R.pointerId}}var X=fc(R),G=X.length;Ri=null,ga(),(!Hi||G===1)&&(Hi=xa=!0,a.bind(window,U,l),sc=fi=Sa=Fn=Cs=yn=ho=lc=po=!1,Wi=null,gc=X[0].y+-bt,_t("firstTouchStart",X),ai(D,P),M.x=M.y=0,ai(Wr,X[0]),ai(Uo,Wr),qo.x=ee.x*Q,Ho=[{x:Wr.x,y:Wr.y}],bl=oc=qi(),ec(J,!0),xl(),dc()),!bn&&G>1&&!Vr&&!yn&&(Y=J,po=!1,bn=lc=!0,M.y=M.x=0,ai(D,P),ai(li,X[0]),ai(Bo,X[1]),Tp(li,Bo,Wo),wa.x=Math.abs(Wo.x)-P.x,wa.y=Math.abs(Wo.y)-P.y,ba=uc=cc(li,Bo))}}},gv=function(R){if(R.preventDefault(),Pe){var H=a.arraySearch(rn,R.pointerId,"id");if(H>-1){var X=rn[H];X.x=R.pageX,X.y=R.pageY,X.clientY=R.clientY}}if(Hi){var G=fc(R);if(!Wi&&!ho&&!bn)if(wn.x!==ee.x*Q)Wi="h";else{var Se=Math.abs(G[0].x-Wr.x)-Math.abs(G[0].y-Wr.y);Math.abs(Se)>=nc&&(Wi=Se>0?"h":"v",Ri=G)}else Ri=G;$o=$o+(gc-G[0].clientY),gc=G[0].clientY}},vv=function(){if(Ri){var R=Ri.length;if(R!==0)if(ai(li,Ri[0]),ui.x=li.x-Wr.x,ui.y=li.y-Wr.y,bn&&R>1){if(Wr.x=li.x,Wr.y=li.y,!ui.x&&!ui.y&&pv(Ri[1],Bo))return;ai(Bo,Ri[1]),po||(po=!0,_t("zoomGestureStarted"),l.currItem.caption&&c.showCaption&&l.caption.classList.add("hidden"));var H=cc(li,Bo),X=kp(H);X>l.currItem.initialZoomLevel+l.currItem.initialZoomLevel/15&&(Sa=!0);var G=1,Se=Sp(),Te=tc();if(X<Se)if(c.pinchToClose&&!Sa&&Y<=l.currItem.initialZoomLevel){var De=Se-X,tt=1-De/(Se/1.2);Mi(tt),_t("onPinchClose",tt),Fn=!0}else G=(Se-X)/Se,G>1&&(G=1),X=Se-G*(Se/3);else X>Te&&(G=(X-Te)/(Se*6),G>1&&(G=1),X=Te+G*Se);G<0&&(G=0),ba=H,Tp(li,Bo,wl),M.x+=wl.x-Wo.x,M.y+=wl.y-Wo.y,ai(Wo,wl),P.x=Qu("x",X),P.y=Qu("y",X),sc=X>J,J=X,mr()}else{if(!Wi||(xa&&(xa=!1,Math.abs(ui.x)>=nc&&(ui.x-=Ri[0].x-Uo.x),Math.abs(ui.y)>=nc&&(ui.y-=Ri[0].y-Uo.y,$o-=-(Ri[0].y-Uo.y))),Wr.x=li.x,Wr.y=li.y,ui.x===0&&ui.y===0))return;if(Wi==="v"&&c.animatedCloseOnScroll&&Pl==="touchstart"){if(hi=$o,$o=0,!fi&&!pt){fi=!0,go(),Pa();var ft=!1,xt=0,Ge=1,It=0;nn=0,Ts=0;var Vt=Wr.y,mi=Wr.y,Zt,Jt,pr=document.documentElement.scrollTop,Tr=document.documentElement.scrollHeight,sn=V.y,gi=!1,vi=function(){gi||(gi=!0,Jt=requestAnimationFrame(function(){transformTargets.style.transform="translateY("+-Ts+"px)",gi=!1}))},an=function($r){if($r.touches.length==0||$r.touches.length>1){vo(),Or();return}$r.preventDefault(),nn=mi-$r.touches[0].pageY,Ts=nn,nn+pr<=0?(scrollMonitor.__frozen=!0,Ts=-pr):nn+pr+sn>=Tr?(scrollMonitor.__frozen=!0,Ts=0):scrollMonitor.__frozen&&delete scrollMonitor.__frozen,It=Vt-$r.touches[0].pageY,Vt=$r.touches[0].pageY,vi()},vo=function(){window.removeEventListener("touchmove",an),window.removeEventListener("touchend",vo),window.addEventListener("touchstart",Or),cancelAnimationFrame(Jt),transformTargets.style.transform="",document.documentElement.scrollTop=document.documentElement.scrollTop+nn,ks(),requestAnimationFrame(function(){scrollMonitor.__frozen&&delete scrollMonitor.__frozen,Cargo.View.Backdrop.updateBackdropScrollPosition(!0),Cargo.Event.trigger("lightbox-scroll-finished")})},Or=function(){It=0,cancelAnimationFrame(Zt),window.removeEventListener("touchstart",Or)},ks=function(){Ge=Ge*.95;var $r=It*Ge;document.documentElement.scrollTop=document.documentElement.scrollTop+$r,Math.abs($r)>.5?Zt=requestAnimationFrame(function(){ks()}):Or()};window.addEventListener("touchmove",an),window.addEventListener("touchend",vo)}return}else if(Wi==="v"&&c.closeOnVerticalDrag&&!hv()){M.y+=ui.y,P.y+=ui.y;var Go=Mp();Cs=!0,_t("onVerticalDrag",Go),Mi(Go),mr();return}fv(qi(),li.x,li.y),Wi==="h"&&c.showCaption&&!ho&&l.caption.classList.add("hidden"),ho=!0,wt=l.currItem.bounds;var Ev=Rp("x",ui);Ev||(Rp("y",ui),xp(P),mr())}}},yv=function(R){if(Pl="",je.isOldAndroid){if(Ps&&R.type==="mouseup")return;R.type.indexOf("touch")>-1&&(clearTimeout(Ps),Ps=setTimeout(function(){Ps=0},600))}clearTimeout(Yt),l.template.classList.remove("mouse-down"),_t("pointerUp"),hc(R,!1)&&R.preventDefault();var H;if(Pe){var X=a.arraySearch(rn,R.pointerId,"id");if(X>-1)if(H=rn.splice(X,1)[0],navigator.pointerEnabled)H.type=R.pointerType||"mouse";else{var G={4:"mouse",2:"touch",3:"pen"};H.type=G[R.pointerType],H.type||(H.type=R.pointerType||"mouse")}}var Se=fc(R),Te,De=Se.length;if(R.type==="mouseup"&&(De=0),De===2)return Ri=null,!0;De===1&&ai(Uo,Se[0]),De===0&&!Wi&&!Vr&&(H||(R.type==="mouseup"?H={x:R.pageX+-q.left+-q.marginLeft,y:R.pageY+-q.top+-q.marginTop,type:"mouse"}:R.changedTouches&&R.changedTouches[0]&&(H={x:R.changedTouches[0].pageX+-q.left+-q.marginLeft,y:R.changedTouches[0].pageY+-q.top+-q.marginTop,type:"touch"})),_t("touchRelease",R,H));var tt=-1;if(De===0&&(Hi=!1,a.unbind(window,U,l),xl(),bn?tt=0:ac!==-1&&(tt=qi()-ac)),ac=De===1?qi():-1,tt!==-1&&tt<150?Te="zoom":Te="swipe",bn&&De<2&&(bn=!1,De===1&&(Te="zoomPointerUp"),_t("zoomGestureEnded")),Ri=null,!(!ho&&!po&&!Vr&&!Cs&&!fi)){if(ga(),co||(co=bv()),co.calculateSwipeSpeed("x"),fi)on&&clearTimeout(on),fi=!1,go(),yc();else if(Cs){var ft=Mp();if(ft<c.verticalDragRange)l.close();else{var xt=P.y,Ge=Is;_s("verticalDrag",0,1,300,a.easing.cubic.out,function(Vt){P.y=(l.currItem.initialPosition.y-xt)*Vt+xt,Mi((1-Ge)*Vt+Ge),mr()}),_t("onVerticalDrag",1)}return}if((yn||Vr)&&De===0){var It=xv(Te,co);if(It)return;Te="zoomPointerUp"}if(!Vr){if(Te!=="swipe"){Sv();return}!yn&&J>l.currItem.fitRatio&&wv(co)}}},bv=function(){var R,H,X={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(G){Ho.length>1?(R=qi()-bl+50,H=Ho[Ho.length-2][G]):(R=qi()-oc,H=Uo[G]),X.lastFlickOffset[G]=Wr[G]-H,X.lastFlickDist[G]=Math.abs(X.lastFlickOffset[G]),X.lastFlickDist[G]>20?X.lastFlickSpeed[G]=X.lastFlickOffset[G]/R:X.lastFlickSpeed[G]=0,Math.abs(X.lastFlickSpeed[G])<.1&&(X.lastFlickSpeed[G]=0),X.slowDownRatio[G]=.95,X.slowDownRatioReverse[G]=1-X.slowDownRatio[G],X.speedDecelerationRatio[G]=1},calculateOverBoundsAnimOffset:function(G,Se){X.backAnimStarted[G]||(P[G]>wt.min[G]?X.backAnimDestination[G]=wt.min[G]:P[G]<wt.max[G]&&(X.backAnimDestination[G]=wt.max[G]),X.backAnimDestination[G]!==void 0&&(X.slowDownRatio[G]=.7,X.slowDownRatioReverse[G]=1-X.slowDownRatio[G],X.speedDecelerationRatioAbs[G]<.05&&(X.lastFlickSpeed[G]=0,X.backAnimStarted[G]=!0,_s("bounceZoomPan"+G,P[G],X.backAnimDestination[G],Se||300,a.easing.sine.out,function(Te){P[G]=Te,mr()}))))},calculateAnimOffset:function(G){X.backAnimStarted[G]||(X.speedDecelerationRatio[G]=X.speedDecelerationRatio[G]*(X.slowDownRatio[G]+X.slowDownRatioReverse[G]-X.slowDownRatioReverse[G]*X.timeDiff/10),X.speedDecelerationRatioAbs[G]=Math.abs(X.lastFlickSpeed[G]*X.speedDecelerationRatio[G]),X.distanceOffset[G]=X.lastFlickSpeed[G]*X.speedDecelerationRatio[G]*X.timeDiff,P[G]+=X.distanceOffset[G])},panAnimLoop:function(){if(ti.zoomPan&&(ti.zoomPan.raf=it(X.panAnimLoop),X.now=qi(),X.timeDiff=X.now-X.lastNow,X.lastNow=X.now,X.calculateAnimOffset("x"),X.calculateAnimOffset("y"),mr(),X.calculateOverBoundsAnimOffset("x"),X.calculateOverBoundsAnimOffset("y"),X.speedDecelerationRatioAbs.x<.05&&X.speedDecelerationRatioAbs.y<.05)){P.x=P.x,P.y=P.y,mr(),ma("zoomPan");return}}};return X},wv=function(R){if(R.calculateSwipeSpeed("y"),wt=l.currItem.bounds,R.backAnimDestination={},R.backAnimStarted={},Math.abs(R.lastFlickSpeed.x)<=.05&&Math.abs(R.lastFlickSpeed.y)<=.05)return R.speedDecelerationRatioAbs.x=R.speedDecelerationRatioAbs.y=0,R.calculateOverBoundsAnimOffset("x"),R.calculateOverBoundsAnimOffset("y"),!0;ic("zoomPan"),R.lastNow=qi(),R.panAnimLoop()},xv=function(R,H){var X;Vr||(va=E);var G;if(R==="swipe"){var Se=Wr.x-Uo.x,Te=H.lastFlickDist.x<10;Se>Cp&&(Te||H.lastFlickOffset.x>20)?G=-1:Se<-Cp&&(Te||H.lastFlickOffset.x<-20)&&(G=1)}var De;G&&(E+=G,E<0?(E=c.loop?pi()-1:0,De=!0):E>=pi()&&(E=c.loop?0:pi()-1,De=!0),(!De||c.loop)&&(le+=G,Q-=G,X=!0));var tt=ee.x*Q,ft=Math.abs(tt-wn.x),xt;return!X&&tt>wn.x!=H.lastFlickSpeed.x>0?xt=333:(xt=Math.abs(H.lastFlickSpeed.x)>0?ft/Math.abs(H.lastFlickSpeed.x):333,xt=Math.min(xt,400),xt=Math.max(xt,250)),va===E&&(X=!1),Vr=!0,_t("mainScrollAnimStart"),_s("mainScroll",wn.x,tt,xt,a.easing.cubic.out,Ss,function(){ga(),Vr=!1,va=-1,(X||va!==E)&&l.updateCurrItem(),_t("mainScrollAnimComplete")}),X?l.updateCurrItem(!0):l.updateCaption(),X},kp=function(R){return 1/uc*R*Y},Sv=function(){var R=J,H=Sp(),X=tc();J<H?R=H:J>X&&(R=X);var G=1,Se,Te=Is;return Fn&&!sc&&!Sa&&J<H?(l.close(),!0):(Fn&&(Se=function(De){Mi((G-Te)*De+Te)}),l.zoomTo(R,0,200,a.easing.cubic.out,Se),!0)};Ai("Gestures",{publicMethods:{initGestures:function(){var R=function(H,X,G,Se,Te){xe=H+X,Re=H+G,be=H+Se,Te?Me=H+Te:Me=""};Pe=je.pointerEvent,Pe&&je.touch&&(je.touch=!1),Pe?navigator.pointerEnabled?R("pointer","down","move","up","cancel"):R("MSPointer","Down","Move","Up","Cancel"):je.touch?(R("touch","start","move","end","cancel"),Le=!0):R("mouse","down","move","up"),U=Re+" "+be+" "+Me,N=xe,Pe&&!Le&&(Le=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),l.likelyTouchDevice=Le,F[xe]=Xt,F[Re]=gv,F[be]=yv,Me&&(F[Me]=F[be]),je.touch&&(N+=" mousedown",U+=" mousemove mouseup",F.mousedown=F[xe],F.mousemove=F[Re],F.mouseup=F[be]),Le||(c.allowPanToNext=!1)}}});var or,_l=function(R,H,X,G){if(or&&clearTimeout(or),Vo=!0,di=!0,X){let Ge=R.el?.closest?.("gallery-slideshow");if(Ge){let It=R.el?.assignedSlot?.name?.replace("slot-","")??-1;It!==-1&&Ge.goToSlide(parseInt(It))}}let Se=R.el?.shadowRoot?.querySelector('[part*="media"]'),Te=R.container.querySelector("media-item")?.shadowRoot?.querySelector('[part*="media"]');var De=X?c.hideAnimationDuration:c.showAnimationDuration;let tt=!1;if(Se){tt=!0;let Ge=Se.closest("marquee-set, gallery-slideshow"),It=Se.getBoundingClientRect(),Vt=Ge?Ge.getBoundingClientRect():{top:0,left:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight};(It.bottom<Vt.top||It.top>Vt.bottom||It.right<Vt.left||It.left>Vt.right)&&(tt=!1)}if(tt&&Te&&Se){mr(),R.container.style.width=Te.offsetWidth+"px",R.container.style.height=Te.offsetHeight+"px";let Ge={x:Te.offsetWidth/2,y:Te.offsetHeight/2},It={x:Se.offsetWidth/2,y:Se.offsetHeight/2},Vt=Vz(Se,It),mi=Vz(Te,Ge);Vt.forEach(Or=>{Or[0]+=P.x,Or[1]+=P.y+q.top});let Zt=lle(mi,Vt),Jt=Math.sqrt(Zt[12]*Zt[12]+Zt[13]*Zt[13]),pr=Math.max(0,20/Jt),Tr=[1,0,0,0,0,1,0,0,0,0,1,0,P.x,P.y+q.top,0,1],sn=getComputedStyle(R.el.shadowRoot.querySelector(".sizing-frame")),gi=getComputedStyle(Se),vi=gi.getPropertyValue("opacity")!=1||gi.getPropertyValue("filter")!="none"||sn.getPropertyValue("opacity")!=1||sn.getPropertyValue("filter")!="none",an=[{offset:0,transform:"matrix3d("+Zt.map(Or=>Number(Or).toFixed(10)).join(",")+")"},{offset:1,transform:"matrix3d("+Tr.map(Or=>Number(Or).toFixed(10)).join(",")+")"}];vi&&(an[0].filter=sn.getPropertyValue("filter"),an[0].opacity=0,an.splice(1,0,{opacity:sn.getPropertyValue("opacity")/3,offset:pr/2},{opacity:sn.getPropertyValue("opacity")/2,offset:pr},{opacity:sn.getPropertyValue("opacity"),offset:Math.min(1,pr*5)}),an[an.length-1].opacity=1);let vo={fill:X?"forwards":"none",direction:X?"reverse":"normal",easing:"ease-in-out",duration:De};requestAnimationFrame(()=>{let Or=R.container.animate(an,vo)})}var ft=function(){if(ma("initialZoom"),X)l.template.removeAttribute("style"),l.bg.removeAttribute("style");else{if(Mi(1),H&&(H.style.display="block"),R.autoplay){let Ge=R.container.querySelector("media-item");Ge&&(Ge.onload=()=>{Ge.play?.()})}a.addClass(i,"quick-view-hide-overflow"),a.addClass(i,"quick-view-animated-in"),_t("initialZoom"+(X?"OutEnd":"InEnd"))}G&&G(),Vo=!1};if(!De){_t("initialZoom"+(X?"Out":"In")),J=R.initialZoomLevel,ai(P,R.initialPosition),mr(),i.style.opacity=X?0:1,Mi(1),De?setTimeout(function(){ft()},De):ft();return}var xt=function(){var Ge=_||X,It=l.currItem.loadError||c.showHideOpacity||!tt,Vt=fi,mi=0;if(R.container.style.backfaceVisibility="hidden",X||(l[It?"template":"bg"].style.opacity=.001,mr()),ic("initialZoom"),X&&!Ge&&a.removeClass(i,"quick-view-animated-in"),X){a.removeClass(i,"quick-view-hide-overflow");var Zt=l.getCurrentIndex();$z.default.each(l.itemHolders,function(Tr){Tr.index!==Zt&&(Tr.el.style.display="none")}),c.showCaption&&l.caption.classList.add("hidden")}let Jt=l.currItem.el?.getAttribute?.("rel")==="quick-view";(It||Vt||Jt)&&(X?a[(Ge?"remove":"add")+"Class"](i,"quick-view-animate_opacity"):setTimeout(function(){a.addClass(i,"quick-view-animate_opacity")},30));var pr=function(){if(_t("initialZoom"+(X?"Out":"In")),X){var Tr={x:P.x,y:P.y},sn=J,gi=Is,vi=document.documentElement.scrollTop,an=Ts,vo=function(Or){if(mr(),Vt){var ks=1-Or;if(Math.hasOwnProperty("cbrt")){var Go=1-Math.cbrt(ks);ks=1-Go*Go*Go*Go}i.style.opacity=ks}else It?i.style.opacity=1-Or:Mi(gi-Or*gi)};Ge?_s("initialZoom",0,1,De,a.easing.cubic.out,vo,ft):(vo(1),or=setTimeout(ft,De+20))}else{if(J=R.initialZoomLevel,ai(P,R.initialPosition),mr(),Mi(1),ci){ci.opacity="",ci.transitionDuration="";let Or=R.container.offsetHeight}It?i.style.opacity=1:Mi(1),or=setTimeout(ft,De+20)}};mi===0?pr():or=setTimeout(function(){pr()},mi)};xt()},Vi,Nr={},zn=[],di,Vo,Np={index:0,errorMsg:'<div class="quick-view-error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Vi.length}},xn,pi,Op,Dp=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},ki=function(R,H,X){var G=R.bounds;c.alignHorizontal==="left"?G.center.x=0:c.alignHorizontal==="right"?G.center.x=Nr.x-H+R.hGap.left:G.center.x=(Nr.x-H)/2+R.hGap.left,c.alignVertical==="top"?G.center.y=0:c.alignVertical==="bottom"?G.center.y=Nr.y-X+R.vGap.top:G.center.y=(Nr.y-X)/2+R.vGap.top,G.max.x=H>Nr.x?Nr.x-H+R.hGap.left:G.center.x,G.max.y=X>Nr.y?Nr.y-X+R.vGap.top:G.center.y,G.min.x=H>Nr.x?R.hGap.left:G.center.x,G.min.y=X>Nr.y?R.vGap.top:G.center.y},As=function(R,H,X){var G=!X;if(G&&(R.vGap||(R.vGap={top:0,bottom:0}),R.hGap||(R.hGap={left:0,right:0}),_t("parseVerticalMargin",R)),R.useViewportHeight||R.useViewportWidth?(Nr.x=H.x-R.hGap.left-R.hGap.right,Nr.y=H.y-R.vGap.top-R.vGap.bottom):(Nr.x=H.x-R.hGap.left-R.hGap.right+-(q.left+q.right),Nr.y=H.y-R.vGap.top-R.vGap.bottom+-(q.top+q.bottom)),G){var tt=R.w,ft=R.h;R.useViewportWidth&&(tt=(H.x-(q.left+q.right))*R.viewportWidthPercentage),R.useViewportHeight&&(ft=(H.y-(q.top+q.bottom))*R.viewportHeightPercentage);var Se=Nr.x/tt,Te=Nr.y/ft;R.useViewportHeight||R.useViewportWidth?R.fitRatio=1:R.fitRatio=Se<Te?Se:Te;var De=c.scaleMode;De==="orig"?X=1:De==="fit"&&(X=R.fitRatio),X>1&&(X=1),X==0&&(X=.01),R.initialZoomLevel=X,R.bounds||(R.bounds=Dp())}if(X){var tt=R.w,ft=R.h;return R.useViewportWidth&&(tt=H.x*R.viewportWidthPercentage),R.useViewportHeight&&(ft=H.y*R.viewportHeightPercentage),(R.useViewportHeight||R.useViewportWidth)&&(X=1),ki(R,tt*X,ft*X),G&&X===R.initialZoomLevel&&(R.initialPosition=R.bounds.center),R.bounds}},ri=function(R,H,X,G,Se,Te){if(!H.loadError&&G){H.imageAppended=!0,ii(H,G,H===l.currItem&&Kt),X.appendChild(G),Te&&(H.placeholder&&H.placeholder.classList.remove("quick-view-item"),setTimeout(function(){H&&H.loaded&&H.placeholder&&(H.placeholder.style.display="none",H.placeholder=null)},500));let tt=["allow","allowfullscreen","referrerpolicy","sandbox","srcdoc","controlslist","disablepictureinpicture","disableremoteplayback","x-webkit-airplay","playsinline"].reduce((Ge,It)=>H.el?.hasAttribute(It)?{...Ge,[It]:H.el.getAttribute(It)}:Ge,{});for(let[Ge,It]of Object.entries(tt))G.setAttribute(Ge,It);G.setAttribute("force-visible",!0),G.setAttribute("disable-scroll-animation",!0),G.setAttribute("disable-zoom",!0),G.setAttribute("width",H.w),G.setAttribute("height",H.h),G.setAttribute("uses","inline-part-styles"),G.setAttribute("media-style","padding: 0px; border-width: 0px; border-radius: 0px; outline-width: 0px;"),G.style.padding=G.style.borderWidth=G.style.borderRadius=G.style.outlineWidth="0px",H.usePlaceholder?G.setAttribute("hash","placeholder"):H.hash?G.setAttribute("hash",H.hash):H.src&&G.setAttribute("src",H.src);let ft=ae.find(Ge=>Ge.index==R);if(H.fileType=="video"||H.fileType.startsWith("vimeo")||H.fileType.startsWith("youtube"))H.fileType!=="video"&&ft.el.classList.add("iframe-item"),H.autoplay?(H.el?.getCurrentTime?.().then(Ge=>{G.onload=()=>{setTimeout(()=>{G.setCurrentTime?.(Ge)},0)}}),G.setAttribute("muted",!0),G.setAttribute("loop",!0),G.setAttribute("autoplay",!0),G.setAttribute("browser-default",!1)):(H.poster?G.setAttribute("poster",H.poster):H.posterSrc&&G.setAttribute("poster",H.posterSrc),H.el?.pause?.(),G.setAttribute("browser-default",!0));else if(H.fileType==="image"){ft.el.classList.remove("iframe-item");var De=H.el?.shadowRoot?.querySelector('img[part*="media"]')?.src;De&&H.src&&De!==H.src&&(De=H.src)}else H.fileType==="url"&&ft.el.classList.add("iframe-item");H.hash&&H.hash!=="placeholder"&&G.hasAttribute("src")?(G.setAttribute("hash",H.hash),G.removeAttribute("src")):H.src&&G.getAttribute("src")!==H.src?(H.posterSrc&&!G.poster&&G.setAttribute("poster",H.posterSrc),G.setAttribute("src",H.src)):H.model&&(G.model=H.model),G.itemDragStart=Ge=>{Ge.preventDefault()};let xt=G.shadowRoot.querySelector("video");xt&&(xt.style.display="table",setTimeout(()=>{xt.style.display=""},0)),H.autoplay&&(G.onload=()=>{setTimeout(()=>{G?.play?.()})})}},Lp=function(R){R.loading=!0,R.loaded=!1;var H=R.img=a.createEl("quick-view-item","media-item");H.setAttribute("suppress-placeholder-ui","true"),Mg(R.el,R,!0).then(X=>{for(let[G,Se]of Object.entries(X))R[G]=Se;if(R.loaded=!0,R.loading=!1,R.loadError){R.loadComplete&&R.loadComplete(R);return}R.img&&(R.hash?R.img.setAttribute("hash",R.hash):R.src&&R.img.setAttribute("src",R.src),R.fileType=="video"&&R.autoplay&&(R.img.setAttribute("autoplay",!0),R.img.setAttribute("muted",!0),R.img.setAttribute("loop",!0))),R.loadComplete?R.loadComplete(R):R.img=null})},mc=function(R,H){if((R.src||R.hash)&&R.loadError&&R.container)return H&&(R.container.innerHTML=""),R.container.innerHTML=c.errorMsg.replace("%url%",R.src),!0},ii=function(R,H,X){H||(H=R.container.lastChild);var G=X?R.w:R.w*R.fitRatio,Se=X?R.h:R.h*R.fitRatio,Te=R.w*R.fitRatio,De=R.h*R.fitRatio;R.useViewportWidth&&(G=V.x*R.viewportWidthPercentage,G=Te=G-(q.left+q.right)),R.useViewportHeight&&(Se=V.y*R.viewportHeightPercentage,Se=De=Se-(q.top+q.bottom)),R.renderedSize={w:Te,h:De},R===l.currItem&&_a(R),!Hi&&q.top>5&&q.right>5&&q.bottom>5&&q.left>5&&(G=Math.round(G),Se=Math.round(Se)),H&&(H.style.transform="translate3d(0,0,0)",H.style.width=G+"px",H.style.height=Se+"px",H.style.setProperty("--frame-padding",Se+"px"),H.style.setProperty("padding","0px"),H.style.setProperty("border","none"),H.style.setProperty("outline","none"),H.style.setProperty("background","none"))},_a=function(R){if(R.renderedSize){var H=R.renderedSize.w,X=R.renderedSize.h,G=Math.max(1,R.fitRatio);l.captionWrapper.style.width=H/G+"px",l.captionWrapper.style.right=q.right+"px",l.captionWrapper.style.left=q.left+"px";var Se=0;switch(c.alignVertical){case"center":Se=(V.y+-q.bottom+-q.top+-X/G)*.5+q.bottom;break;case"top":Se=V.y+-q.bottom+-q.top+-X/G+q.bottom;break;case"bottom":Se=q.bottom;break}l.captionWrapper.style.height=Se+"px"}},El=function(){if(zn.length){for(var R,H=0;H<zn.length;H++)R=zn[H],R.holder.index===R.index&&ri(R.index,R.item,R.baseDiv,R.img,!1,R.clearPlaceholder);zn=[]}};Ai("Controller",{publicMethods:{lazyLoadItem:function(R){R=Ti(R);var H=xn(R);!H||(H.loaded||H.loading)&&!K||(_t("gettingData",R,H),Lp(H))},initController:function(){a.extend(c,Np,!0),l.items=Vi=o,xn=l.getItemAt,pi=c.getNumItemsFn,Op=c.loop,pi()<3&&(c.loop=!1),Ar("beforeChange",function(R){var H=c.preload,X=R===null?!0:R>=0,G=Math.min(H[0],pi()),Se=Math.min(H[1],pi()),Te;for(Te=1;Te<=(X?Se:G);Te++)l.lazyLoadItem(E+Te);for(Te=1;Te<=(X?G:Se);Te++)l.lazyLoadItem(E-Te)}),Ar("initialLayout",function(){l.currItem}),Ar("mainScrollAnimComplete",El),Ar("initialZoomInEnd",El),Ar("destroy",function(){for(var R,H=0;H<Vi.length;H++)R=Vi[H],R.container&&(R.container=null),R.placeholder&&(R.placeholder=null),R.img&&(R.img=null),R.preloader&&(R.preloader=null),R.loadError&&(R.loaded=R.loadError=!1);zn=null})},getItemAt:function(R){return R>=0&&Vi[R]!==void 0?Vi[R]:!1},allowProgressiveImg:function(){return!0},setContent:function(R,H){c.loop&&(H=Ti(H));var X=l.getItemAt(R.index);X&&(X.container=null);var G=l.getItemAt(H),Se;if(!G){R.el.innerHTML="";return}_t("gettingData",H,G),R.index=H,R.item=G;var Te=G.container=a.createEl("quick-view-zoom-wrap");mc(G),As(G,V),(G.src||G.hash||G.usePlaceholder)&&!G.loadError&&!G.loaded?(G.loadComplete=function(De){if(g){if(R&&R.index===H){if(mc(De,!0)){De.loadComplete=De.img=null,As(De,V),lo(De),R.index===E&&l.updateCurrZoomItem();return}De.imageAppended?!Vo&&De.placeholder&&(De.placeholder.style.display="none",De.placeholder=null):je.transform&&(Vr||Vo)?zn.push({item:De,baseDiv:Te,img:De.img,index:H,holder:R,clearPlaceholder:!0}):ri(H,De,Te,De.img,Vr||Vo,!0),As(De,V),ii(De),lo(De)}De.loadComplete=null,De.img=null,_t("imageLoadComplete",H,De)}},a.features.transform,G.loading||Lp(G),l.allowProgressiveImg()&&(!di&&je.transform?zn.push({item:G,baseDiv:Te,img:G.img,index:H,holder:R}):ri(H,G,Te,G.img,!0,!0))):(G.src||G.hash||G.usePlaceholder)&&!G.loadError?(Se=a.createEl("quick-view-item","media-item"),Se.setAttribute("suppress-placeholder-ui","true"),Se.style.opacity=1,ii(G,Se),ri(H,G,Te,Se,!0)):!G.src&&!G.hash&&G.html&&ii(G,null),!di&&H===E?(G.preloadedImage&&Se&&Se.setAttribute("src",G.preloadedImage.getAttribute("src")),G.container.style.opacity=0,ci=Te.style,setTimeout(()=>{_l(G,Se||G.img),G.container.style.opacity=null},0)):lo(G),R.el.innerHTML="",R.el.appendChild(Te)},cleanSlide:function(R){R.img&&(R.img.onload=R.img.onerror=null),R.loaded=R.loading=R.img=R.imageAppended=!1}}});var Nt,Sn={},Ea=function(R,H,X){var G=document.createEvent("CustomEvent"),Se={origEvent:R,target:R.target,releasePoint:H,pointerType:X||"touch"};G.initCustomEvent("pswpTap",!0,!0,Se),R.target.dispatchEvent(G)};Ai("Tap",{publicMethods:{initTap:function(){Ar("firstTouchStart",l.onTapStart),Ar("touchRelease",l.onTapRelease),Ar("destroy",function(){Sn={},Nt=null})},onTapStart:function(R){R.length>1&&(clearTimeout(Nt),Nt=null)},onTapRelease:function(R,H){if(H&&!ho&&!lc&&!zo){var X=H;if(Nt&&(clearTimeout(Nt),Nt=null,Pp(X,Sn))){_t("doubleTap",X);return}if(H.type==="mouse"){Ea(R,H,"mouse");return}var G=R.target.tagName.toUpperCase();if(G==="BUTTON"||a.hasClass(R.target,"quick-view-single-tap")){Ea(R,H);return}ai(Sn,X),Nt=setTimeout(function(){Ea(R,H),Nt=null},300)}}}});var Cl,$o=0,gc=0,hi=0,vc=!1,jo=0,fi=!1,nn=0,Ts=0,Pl="",Ms=null,Ca=!1,Pa=function(){pt=!0,Il()},go=function(){Cl&&(Je(Cl),Cl=null,jo=0,hi=0,pt=!1)},yc=function(){if(!(pt||Rs)){var R=P.y,H=P.x,X=Is,G=J;_s("resetVertical",0,1,300,a.easing.cubic.out,function(Se){J=l.currItem.initialZoomLevel*Se+(1-Se)*G,P.y=(l.currItem.initialPosition.y-R)*Se+R;var Te=(l.currItem.initialZoomLevel*parseFloat(l.currItem.w)-J*parseFloat(l.currItem.w))*.5;P.x=l.currItem.initialPosition.x+Te,Mi((1-X)*Se+X),mr()})}},Il=function(){vc||(vc=!0,pt&&(Cl=it(Il),_v(),vc=!1))},Rs=!1,_v=function(){!fi&&Ca&&(document.documentElement.scrollTop=document.documentElement.scrollTop+hi);var R=Math.min(V.y,V.x),H=Math.abs(hi)/R,X=Math.max(0,Math.min(1.3-Math.abs(jo/(R/3)),1));if(X<.85||Rs||H>.2){go(),on&&clearTimeout(on),Rs||(Rs=!0,fi?(_=!0,l.close()):setTimeout(function(){_=!0,l.close()},25));return}Mi(X);var G=Math.abs(jo)/(V.y*.75);if(l.currItem.hasOwnProperty("thumbRect")){var Se=l.currItem.initialZoomLevel*parseFloat(l.currItem.h)*.5<l.currItem.thumbRect.h;Se&&(G=0)}J=(1-G*G)*l.currItem.initialZoomLevel;var Te=(l.currItem.initialZoomLevel*parseFloat(l.currItem.w)-J*parseFloat(l.currItem.w))*.5,De=(l.currItem.initialZoomLevel*parseFloat(l.currItem.h)-J*parseFloat(l.currItem.h))*.5;P.y=l.currItem.initialPosition.y+De+-jo,P.x=l.currItem.initialPosition.x+Te,mr(),jo=jo+hi,hi=0},on,Wt;Ai("DesktopZoom",{publicMethods:{initDesktopZoom:function(){vt||(Le?l.setupDesktopZoom():l.setupDesktopZoom(!0))},setupDesktopZoom:function(R){Wt={};var H="wheel mousewheel DOMMouseScroll";Ar("bindEvents",function(){a.bind(i,H,l.handleMouseWheel)}),Ar("unbindEvents",function(){Wt&&a.unbind(i,H,l.handleMouseWheel)}),l.mouseZoomedIn=!1;var X,G=function(){l.mouseZoomedIn&&(a.removeClass(i,"quick-view-zoomed-in"),l.mouseZoomedIn=!1),J<1?a.addClass(i,"quick-view-zoom-allowed"):a.removeClass(i,"quick-view-zoom-allowed"),Se()},Se=function(){X&&(a.removeClass(i,"quick-view-dragging"),X=!1)};Ar("resize",G),Ar("afterChange",G),Ar("pointerDown",function(){l.mouseZoomedIn&&(X=!0,a.addClass(i,"quick-view-dragging"))}),Ar("pointerUp",Se),R||G()},handleMouseWheel:function(R){if(Ca=!0,J<=l.currItem.fitRatio&&c.modal&&(!c.closeOnScroll||zo||Hi?R.preventDefault():We&&Math.abs(R.deltaY)>2&&(_=!0,l.close())),Wt.x=0,"deltaX"in R)R.deltaMode===1?(Wt.x=R.deltaX*18,Wt.y=R.deltaY*18):(Wt.x=R.deltaX,Wt.y=R.deltaY);else if("wheelDelta"in R)R.wheelDeltaX&&(Wt.x=-.16*R.wheelDeltaX),R.wheelDeltaY?Wt.y=-.16*R.wheelDeltaY:Wt.y=-.16*R.wheelDelta;else if("detail"in R)Wt.y=R.detail;else return;if(J<=l.currItem.fitRatio&&!fi){hi=hi+Wt.y,c.modal&&(!c.animatedCloseOnScroll||zo||Hi?(R.preventDefault(),hi=0):We&&Math.abs(Wt.y)>0&&!pt&&(go(),Pa()),on&&clearTimeout(on),on=setTimeout(function(){go(),yc()},200));return}else hi=0,R.stopPropagation();ec(J,!0);var H=P.x-Wt.x,X=P.y-Wt.y;(c.modal||H<=wt.min.x&&H>=wt.max.x&&X<=wt.min.y&&X>=wt.max.y)&&R.preventDefault(),l.panTo(H,X)},toggleDesktopZoom:function(R){R=R||{x:V.x/2+te.x,y:V.y/2+te.y};var H=c.getDoubleTapZoom(!0,l.currItem),X=J===H;l.mouseZoomedIn=!X,l.zoomTo(X?l.currItem.initialZoomLevel:H,R,333),a[(X?"remove":"add")+"Class"](i,"quick-view-zoomed-in"),l.currItem.caption&&c.showCaption&&(X?l.caption.classList.remove("hidden"):l.caption.classList.add("hidden"))}}}),a.extend(l,dv)};return r}),this.template=`<div class="quick-view" tabindex="-1" role="dialog" aria-hidden="true"> 
	

</div>`;var t=function(){var r=document.querySelector(".quick-view-container");r.outerHTML=this.template,r=null}.bind(this),e=function(){};this.setEventProxy=function(r){typeof r=="function"&&(e=r)},this.isActive=!1,this.activeGallery=void 0,this.openImageArray=function(r,i,n){if(!(r===void 0||this.activeGallery!==void 0)){var o=document.querySelectorAll(".quick-view")[0],s=this,a=n.alignVertical||"center",l=n.alignHorizontal||"center",p=n.useControls,f=n.animatedCloseOnScroll,c=n.showCaption,m={index:i,maxSpreadZoom:1,getThumbMatrixTransform:function(L){if(n&&n.preventAnimation||s.activeGallery==null)return!1;var O=s.activeGallery.getItemAt(L),M;if(!O||!O.el)return!1;O.el.tagName==="A"?M=O.el.querySelector("media-item, video, iframe, img")||O.el:M=O.el;let D=M.closest("marquee-set");if(D){let U=D.querySelector('marquee-inner[slot="contents"]'),N=D.querySelector('marquee-inner[slot="contents-clone"]');if(s.isActive&&N)return!1}if(M&&M.tagName==="MEDIA-ITEM"&&(M=M.shadowRoot.querySelector('[part*="media"]')),!M)return!1;let P=M.getRootNode();for(;P&&P!==document;)P instanceof ShadowRoot?P=P.host.getRootNode():P=void 0;return P?matrix:!1},closeEl:!0,arrowEl:!1,tapToClose:!0,closeOnScroll:!1,alignHorizontal:l,alignVertical:a,useControls:p,animatedCloseOnScroll:f,showCaption:c},v=!1,g=!1,x=function(){g=!0},_=function(){g=!1};if(window.addEventListener("touchend",_),window.addEventListener("touchstart",x),n!==void 0&&typeof n=="object"){for(var E in n)n.hasOwnProperty(E)&&(m[E]=n[E]);n.disableZoom===!0&&(v=!0,m.zoomEl=!1,m.getDoubleTapZoom=function(L,O){return O.initialZoomLevel},m.pinchToClose=!1)}return this.activeGallery=new this.PhotoSwipe(o,this.PhotoSwipeUI_Default,r,m),n.afterInit&&this.activeGallery.listen("afterInit",n.afterInit),v?o.classList.add("quick-view-zoom-disabled"):o.classList.remove("quick-view-zoom-disabled"),this.activeGallery.init(),this.isActive=!0,this.activeGallery.elementArray=r,this.activeGallery.listen("destroy",function(){o.parentNode!==null?(o.parentNode.removeChild(o),window.removeEventListener("touchend",_),window.removeEventListener("touchstart",x)):(window.removeEventListener("touchend",_),window.removeEventListener("touchstart",x)),s.isActive=!1,s.activeGallery=void 0}),this.activeGallery}};(function(r,i){r===void 0&&window!==void 0&&(r=window),r.PhotoSwipeUI_Default=i()})(this,function(){"use strict";var r=function(i,n){var o=this,s=!1,a=!0,l,p,f,c,m,v,g,x={closeElClasses:["holder","caption","zoom-wrap","ui","top-menu-bar","container"],timeToIdle:1500,timeToIdleOutside:1500,closeEl:!0,fullscreenEl:!0,zoomEl:!0,counterEl:!0,arrowEl:!0,tapToClose:!1,tapToToggleControls:!0,useControls:!1,clickToCloseNonZoomable:!0,fitControlsWidth:1200},_,E,L=function(K){if(_)return!0;K=K||window.event,g.timeToIdle&&g.mouseUsed&&!c&&V();for(var Q=K.target||K.srcElement;Q.nodeName==="svg"||Q.nodeName==="path"||Q.nodeName==="circle"||Q.nodeName==="polyline"||Q.nodeName==="g"||Q.nodeName==="foreignObject"||Q.nodeName==="line";)Q=Q.parentNode;for(var te,ee=Q.getAttribute("class")||"",ae,ue=0;ue<oe.length;ue++)te=oe[ue],te.onTap&&ee.indexOf("quick-view-"+te.name)>-1&&(te.onTap(),ae=!0);if(ae){K.stopPropagation&&K.stopPropagation(),_=!0;var le=n.features.isOldAndroid?600:30;E=setTimeout(function(){_=!1},le)}},O=function(){return!i.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},M=function(K,Q,te){n[(te?"add":"remove")+"Class"](K,"quick-view-"+Q)},D=function(K){for(var Q=0;Q<g.closeElClasses.length;Q++)if(n.hasClass(K,"quick-view-"+g.closeElClasses[Q]))return!0},P,U,N=0,F=!1,V=function(K){if(K){var Q=Wa(K.target,function(te){if(te&&te.nodeType===Node.ELEMENT_NODE)return te.classList.contains("left-arrow")||te.classList.contains("right-arrow")||te.classList.contains("close-button")});F=!!Q}clearTimeout(U),N=0,c&&o.setIdle(!1)},q=function(K){K=K||window.event;var Q=K.relatedTarget||K.toElement;(!Q||Q.nodeName==="HTML")&&(clearTimeout(U),U=setTimeout(function(){o.setIdle(!0)},g.timeToIdleOutside))},J=function(){g.fullscreenEl&&!n.features.isOldAndroid&&(l||(l=o.getFullscreenAPI()),l?(n.bind(document,l.eventK,o.updateFullscreen),o.updateFullscreen(),n.addClass(i.template,"quick-view-supports-fs")):n.removeClass(i.template,"quick-view-supports-fs"))},Y=function(){g.timeToIdle&&m("mouseUsed",function(){n.bind(document,"mousemove",V),n.bind(document,"mouseout",q),P=setInterval(function(){N++,N===2&&o.setIdle(!0)},g.timeToIdle/2)})},ie=function(){m("onVerticalDrag",function(Q){a&&Q<.95?o.hideControls():!a&&Q>=.95&&o.showControls()});var K;m("onPinchClose",function(Q){a&&Q<.9?(o.hideControls(),K=!0):K&&!a&&Q>.9&&o.showControls()}),m("zoomGestureEnded",function(){K=!1,K&&!a&&o.showControls()})},oe=[{name:"button--zoom",option:"zoomEl",onTap:i.toggleDesktopZoom},{name:"button-close",option:"closeEl",onTap:i.close},{name:"button-prev",option:"arrowEl",onTap:i.prev},{name:"button-next",option:"arrowEl",onTap:i.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){l.isFullscreen()?l.exit():l.enter()}}],Z=function(){var K,Q,te,ee=function(le){if(le){for(var xe=le.length,Re=[],be=0;be<xe;be++){K=le[be],Q=K.className;for(var Me=0;Me<oe.length;Me++)te=oe[Me],Q.indexOf("quick-view-"+te.name)>-1&&(g[te.option]?(n.removeClass(K,"quick-view-element--disabled"),Re.push(K),te.onInit&&te.onInit(K)):n.addClass(K,"quick-view-element--disabled"))}Re.length>0}};ee(p.children);for(var ae=p.querySelectorAll(".quick-view-group"),ue=0;ue<ae.length;ue++)ee(ae[ue].children)};o.init=function(){n.extend(i.options,x,!0),g=i.options,p=n.getChildByClass(i.scrollWrap,"quick-view-ui"),m=i.listen,m("beforeChange",o.update),m("doubleTap",function(K){var Q=i.currItem.initialZoomLevel;i.getZoomLevel()!==Q?i.zoomTo(Q,K,333):i.zoomTo(g.getDoubleTapZoom(!1,i.currItem),K,333)}),m("preventDragEvent",function(K,Q,te){var ee=K.target||K.srcElement;ee&&ee.getAttribute("class")&&K.type.indexOf("mouse")>-1&&(ee.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(ee.tagName))&&(te.prevent=!1)}),m("destroy",function(){g.captionEl&&(_fakeCaptionContainer&&p.removeChild(_fakeCaptionContainer),n.removeClass(_captionContainer,"quick-view-caption--empty"))}),o.bindEvents(),J()},o.unbindEvents=function(){P&&clearInterval(P),n.unbind(document,"mouseout",q),n.unbind(document,"mousemove",V),n.unbind(i.scrollWrap,"pswpTap",o.onGlobalTap),window.removeEventListener("mousedown",o.onGlobalClick),l&&(n.unbind(document,l.eventK,o.updateFullscreen),l.isFullscreen()&&(g.hideAnimationDuration=0,l.exit()),l=null)},o.setupIdle=function(){Y()},o.bindEvents=function(){g.useControls,window.addEventListener("mousedown",o.onGlobalClick),n.bind(i.scrollWrap,"pswpTap",o.onGlobalTap),i.likelyTouchDevice},o.setIdle=function(K){window.store?.getState()?.frontendState?.adminMode||F||(c=K)},o.update=function(){a&&i.currItem?s=!0:s=!1},o.updateFullscreen=function(K){K&&setTimeout(function(){i.setScrollOffset(0,n.getScrollY())},50),n[(l.isFullscreen()?"add":"remove")+"Class"](i.template,"quick-view-fs")},o.onGlobalClick=function(K){let Q=K.target.closest('.quick-view, media-item:not([disable-zoom="true"]), href[rel="quick-view"]');Q&&(Q.getAttribute("rel")=="quick-view"||Q.nodeName==="MEDIA-ITEM")?i.elementArray.findIndex(ee=>ee.el==Q)===-1&&i.close():Q||i.close()},o.onGlobalTap=function(K){K=K||window.event;var Q=K.target||K.srcElement;if(!_){if(K.detail&&K.detail.pointerType==="mouse"){if(D(Q)){i.close();return}if(n.hasClass(Q,"quick-view-item")){if(g.disableZoom){let te=Q.getFileType?.();if(te&&!i.currItem.autoplay&&(te.startsWith("vimeo")||te.startsWith("youtube")||te==="video"))return;i.close();return}if(i.getZoomLevel()===1&&i.getZoomLevel()<=i.currItem.fitRatio){if(g.clickToCloseNonZoomable){i.close();return}}else i.toggleDesktopZoom(K.detail.releasePoint)}}else if(g.tapToToggleControls&&(a?o.hideControls():o.showControls()),g.tapToClose&&(n.hasClass(Q,"quick-view-item")||D(Q))){(!Q.getFileType||Q.getFileType?.()==="image")&&i.close();return}}},o.onMouseOver=function(K){K=K||window.event;var Q=K.target||K.srcElement;M(p,"ui--over-close",D(Q))},o.hideControls=function(){},o.showControls=function(){},o.toggleFullscreen=function(){l.isFullscreen()?l.exit():l.enter()},o.supportsFullscreen=function(){var K=document;return!!(K.exitFullscreen||K.mozCancelFullScreen||K.webkitExitFullscreen||K.msExitFullscreen)},o.getFullscreenAPI=function(){var K=document.documentElement,Q,te="fullscreenchange";return K.requestFullscreen?Q={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:te}:K.mozRequestFullScreen?Q={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+te}:K.webkitRequestFullscreen?Q={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+te}:K.msRequestFullscreen&&(Q={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),Q&&(Q.enter=function(){if(f=g.closeOnScroll,g.closeOnScroll=!1,this.enterK==="webkitRequestFullscreen")i.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);else return i.template[this.enterK]()},Q.exit=function(){return g.closeOnScroll=f,document[this.exitK]()},Q.isFullscreen=function(){return document[this.elementK]}),Q}};return r})}).call(jz)});var Kz=se((yke,ule)=>{ule.exports={}});var h1={};hr(h1,{default:()=>ple,getLightboxItemAndPreloadFromElement:()=>Mg,openQuickViewFromElement:()=>p1});function cle(t,e){let r=t?.css?.stylesheet||"",i=document.createElement("style");i.disabled=!0,i.innerHTML=r,document.body.appendChild(i);let n=!1;if(i.sheet&&i.sheet.cssRules)for(let o=0;o<i.sheet.cssRules.length;o++){let s=i.sheet.cssRules[o];s.selectorText&&s.selectorText.includes(".mobile")&&s.selectorText.includes(".quick-view::part(slideshow-nav)")&&Array.from(s.style).indexOf("opacity")>-1&&(n=!0)}return i.remove(),{mobileOpacityIsOverridden:n,imageSettings:t.siteDesign.images,settings:t.siteDesign.quick_view,quickView:t.frontendState.quickView,adminMode:t.frontendState.adminMode}}function dle(t){return Bt({updateFrontendState:actions.updateFrontendState},t)}var Rg,d1,Xz,Yz,Mg,p1,ple,lp=$(()=>{ke();Ze();mt();xr();_r();Br();Fe();pa();ns();Gz();Rg=ve(Ie(),1);fe();d1=class extends me{constructor(e){super(e),this.state={closing:!0,lightboxActive:!1,navigationElement:null,showInterface:!1,showArrows:!0,navTransitioning:!1,pointerDown:!1},this.template=_e(),this.navigationRef=_e(),this.lightbox=window.lightbox,this.QuickView=window.QuickView,Promise.resolve().then(()=>ve(Kz(),1)),this.htmlTemplate=`
			<div class="quick-view-bg quick-view-background"></div> 
			<div class="quick-view-scroll-wrap"> 

				<div class="quick-view-container"> 
					<div class="quick-view-holder"></div> 
					<div class="quick-view-holder"></div> 
					<div class="quick-view-holder"></div> 
				</div> 

			</div>

			<div class="quick-view-caption-positioner"> 
				<div class="quick-view-caption-wrapper"> 
					<div class="quick-view-caption caption hidden" data-quick-view-caption><span></span></div>
				</div> 
			</div>`}onPointerDown=e=>{this.setState({pointerDown:!0})};onPointerUp=e=>{this.setState({pointerDown:!1})};onPointerMove=e=>{!this.state.showInterface&&!this.state.pointerDown&&this.setState({showInterface:!0});let r=document.querySelector(".quick-view-caption");e&&e.target&&(this.state.navigationElement?.contains(e.target)||e.target===r||r&&r.contains(e.target))&&this.hideInterface.cancel()};isInAdmin=()=>zr&&this.props.adminMode===!0;hideInterface=Rg.default.debounce(()=>{this.isInAdmin()||this.setState({showInterface:!1})},1500);hideArrows=Rg.default.debounce(()=>{this.isInAdmin()||this.setState({showArrows:!1})},500);bindEvents(){document.addEventListener("pointerleave",this.hideInterface),window.addEventListener("pointerdown",this.onPointerDown),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerdown",this.onPointerMove)}unbindEvents(){document.removeEventListener("pointerleave",this.hideInterface),window.removeEventListener("pointerdown",this.onPointerDown),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerdown",this.onPointerMove)}componentDidUpdate(e,r){this.state.navigationElement!==this.navigationRef.current&&(this.navigationRef.current&&!this.navigationRef.current.shadowRoot&&this.navigationRef.current.attachShadow({mode:"open"}),this.setState({navigationElement:this.navigationRef.current})),this.props.location!==e.location&&this.closeQuickView(),!e.quickView.inited&&this.props.quickView.inited&&this.setState({lightboxActive:!0,showInterface:!1},()=>{this.props.quickView.mode==="preview"?(window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}}),this.previewInAdmin()):this.launchQuickView(),this.bindEvents(),this.lightbox.activeGallery?.listen("initialZoomInEnd",()=>{this.setState({closing:!1,showInterface:!0,showArrows:!1})}),this.lightbox.activeGallery?.listen("onVerticalDrag",n=>{this.state.showInterface&&n<.95?this.setState({showInterface:!1}):!this.state.showInterface&&n>=.95&&this.setState({showInterface:!0})});var i;this.lightbox.activeGallery?.listen("onPinchClose",n=>{this.state.showInterface&&n<.9?(this.setState({showInterface:!1}),i=!0):i&&!this.state.showInterface&&n>.9&&this.setState({showInterface:!0})}),this.lightbox.activeGallery?.listen("zoomGestureEnded",()=>{i=!1,i&&!this.state.showInterface&&this.setState({showInterface:!1})}),this.lightbox?.activeGallery?.listen("close",()=>{this.setState({closing:!0,showInterface:!1,showArrows:!1}),this.unbindEvents()}),this.lightbox?.activeGallery?.listen("destroy",()=>{window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}}),this.props.updateFrontendState({quickView:{mode:"default",inited:!1,autoScrolling:!1,activeGallery:null,elementArray:void 0,activeIndex:0}}),this.setState({lightboxActive:!1,showInterface:!1,showArrows:!1})})}),e.quickView.inited&&!this.props.quickView.inited&&this.lightbox.isActive&&this.lightbox.activeGallery.close(),e.quickView.autoScrolling!==this.props.quickView.autoScrolling&&this.lightbox.activeGallery&&(this.props.quickView.autoScrolling?this.lightbox.activeGallery.options.animatedCloseOnScroll=!1:this.lightbox.activeGallery.options.animatedCloseOnScroll=this.props.settings.close_on_scroll),!Rg.default.isEqual(e.settings,this.props.settings)&&this.lightbox.activeGallery&&(e.settings.show_ui!==this.props.settings.show_ui&&this.props.settings.show_ui&&(this.setState({showInterface:!0}),this.hideInterface()),this.lightbox.activeGallery.options.alignHorizontal=this.props.settings.contentAlignHorizontal,this.lightbox.activeGallery.options.alignVertical=this.props.settings.contentAlignVertical,this.lightbox.activeGallery.options.animatedCloseOnScroll=this.props.settings.close_on_scroll,this.props.settings.captions!==e.settings.captions&&(this.lightbox.activeGallery.options.showCaption=this.props.settings.captions,this.props.settings.captions?(this.lightbox.activeGallery.caption.style.display="",this.lightbox.activeGallery.updateCaption()):this.lightbox.activeGallery.caption.style.display="none"),this.lightbox.activeGallery.updateSize(!0))}closeQuickView=e=>{Ht.getState().frontendState?.quickView?.inited!==!1&&this.props.updateFrontendState({quickView:{inited:!1}})};render(){return this.state.lightboxActive||this.state.navTransitioning?S(de,{children:[S("div",{ref:this.template,className:"quick-view",dangerouslySetInnerHTML:{__html:this.htmlTemplate}}),this.props.settings.show_ui?S("div",{className:"quick-view quick-view-navigation",ref:this.navigationRef,children:[this.state.navigationElement?S("style",{children:`
							.quick-view-caption {
								opacity: ${this.state.showInterface?"1":"0"};
							}
						`}):null,this.state.navigationElement?rt(S(de,{children:[S("style",{children:`
								[part="slideshow-nav"], .quick-view-caption {
									${this.state.closing?`
										opacity: 0!important;`:`
										opacity: ${this.state.showInterface?"1":"0"};`}
								}

								${!this.props.mobileOpacityIsOverridden&&this.props.isMobile?`

									[part="slideshow-nav-next-button"], [part="slideshow-nav-previous-button"] {
										pointer-events:none;
										opacity: 0;
									}

								`:""}
								
							`}),S("div",{part:"slideshow-nav",onTransitionStart:e=>{this.setState({navTransitioning:!0})},onTransitionEnd:e=>{this.setState({navTransitioning:!1})},children:[this.isInAdmin()||this.props.quickView.elementArray?.length>1?S(de,{children:[S("div",{part:"slideshow-nav-previous-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.prev()},children:S("svg",{part:"slideshow-nav-prev",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),S("div",{part:"slideshow-nav-next-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.next()},children:S("svg",{part:"slideshow-nav-next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})})]},"slideshow-nav-buttons"):null,S("div",{part:"slideshow-nav-close-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.close()},children:S("svg",{part:"slideshow-nav-close",x:"0px",y:"0px",width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-x",d:"M9.3,9.3L18,18l-8.7,8.7 M26.7,9.3L18,18l8.7,8.7"})]})})]})]}),this.state.navigationElement.shadowRoot):null]}):null]}):null}launchQuickView=()=>{if(!this.props.quickView.elementArray)return;let e=this.props.quickView.activeIndex;(e===-1||isNaN(e))&&(e=0);let r=this.props.quickView.elementArray[e],i=!1,n=r?.el?.getAttribute?.("rel")==="quick-view";lightbox.openImageArray(this.props.quickView.elementArray,e,{disableZoom:!this.props.imageSettings.image_full_zoom,preventAnimation:!1,showHideOpacity:n,animatedCloseOnScroll:!!this.props.settings?.close_on_scroll,alignHorizontal:this.props.settings?.contentAlignHorizontal||"center",alignVertical:this.props.settings?.contentAlignVertical||"center",useControls:!1,showCaption:!!this.props.settings?.captions,isAdmin:!1,afterInit:o=>{let s=lightbox.activeGallery.template,a=window.getComputedStyle(s),l=parseInt(a.getPropertyValue("width")),p=parseInt(a.getPropertyValue("height"));this.props.updateFrontendState({quickView:{activeIndex:o}})}}),lightbox?.activeGallery?.listen("afterChange",o=>{this.props.quickView.inited&&this.props.updateFrontendState({quickView:{activeIndex:o}})})};previewInAdmin=()=>{let r=[[6800,5e3],[5e3,6800],[5e3,5e3]].map(i=>{let n=document.createElement("media-item"),o=document.createElement("span");return o.classList.add("caption-background"),o.innerHTML="Lorem ipsum dolor sit amet, consectetur adipiscing",n.setAttribute("suppress-placeholder-ui","true"),n.setAttribute("width",i[0]),n.setAttribute("height",i[1]),{useViewportWidth:!1,useViewportHeight:!1,viewportWidthPercentage:1,viewportHeightPercentage:1,autoplay:!1,fileType:"placeholder",w:i[0],h:i[1],caption:o,hash:"placeholder",src:null,usePlaceholder:!1,el:n}});this.lightbox.openImageArray(r,0,{disableZoom:!this.props.imageSettings.image_full_zoom,preventAnimation:!1,animatedCloseOnScroll:!!this.props.settings?.close_on_scroll,alignHorizontal:this.props.settings?.contentAlignHorizontal||"center",alignVertical:this.props.settings?.contentAlignVertical||"center",useControls:!1,showCaption:!!this.props.settings?.captions,isAdmin:!1})}};Xz=Ue(cle,dle)(d1),Yz=(t="")=>{let e="none";if(t){let s=t.toLowerCase();if(s.endsWith(".mov")||s.endsWith(".mp4")||s.endsWith(".webm"))e="video";else if(s.endsWith(".png")||s.endsWith(".webp")||s.endsWith(".jpg")||s.endsWith(".jpeg")||s.endsWith(".gif")||s.endsWith(".avif")||s.endsWith(".apng")||s.endsWith(".svg"))e="image";else{e="url";var r,i=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,o=t.match(i);if(o&&o[3]){r=o[3];let a=t.split("/");a[a.length-1]!=r&&(r+="/"+a[a.length-1]),e="vimeo:"+r}var n=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,o=t.match(n);o&&o[7].length==11&&(r=o[7],e="youtube:"+r)}}return e},Mg=(t,e={},r=!0)=>{var i=!1,n=t?.querySelector("figcaption"),o=n?.innerHTML;n&&o!==""&&(i=document.createElement("span"),i.classList.add("caption-background"),i.innerHTML=o);let s=!1,a=!1,l=1,p=1,f=1600,c=1600,m=!1,v="url",g=t.getAttribute("hash")||null,x=t.getAttribute("href")||null;t.getAttribute("rel")=="quick-view"?v=Yz(t.getAttribute("href")):t.tagName==="MEDIA-ITEM"&&t.getFileType?v=t.getFileType():v=Yz(t.getAttribute("src"));let _=x||t.getAttribute("src");return x&&(g=null),new Promise(E=>{if(g&&g!=="placeholder"&&t.tagName==="MEDIA-ITEM"&&!x){let O=t.getAttribute("poster");var L=t?.shadowRoot?.querySelector("video")?.getAttribute("poster");L||(L=t?.shadowRoot?.querySelector('img[part*="poster"]')?.getAttribute("src"));let M=screen.width,D=screen.height,P=Math.max(Math.ceil(screen.width/t._size.width),Math.ceil(screen.height/t._size.height));switch(!0){case v==="url":s=!0,a=!0;break;case v.startsWith("youtube"):case v.startsWith("vimeo"):case v=="video":f=t._size.width*P,c=t._size.height*P;break;default:f=t._size.width*P,c=t._size.height*P;break}let U,N=()=>{E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,fileType:v,poster:t.getAttribute("poster"),loaded:!0,loading:!1,w:f,h:c,caption:i,hash:g,src:_,posterSrc:L,autoplay:t.getAttribute("autoplay")=="true",usePlaceholder:!1,el:t,model:t.model,preloadedImage:U})},F=t.shadowRoot.querySelector("img")?.getAttribute("src");r&&v=="image"&&F?(U=document.createElement("img"),U.onload=()=>{U.onload=void 0,U.decode().then(()=>{N()})},U.src=F):N()}else if(g&&g=="placeholder")E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:!1,fileType:v,w:t.getAttribute("width")||16e3,h:t.getAttribute("height")||9e3,caption:i,hash:"placeholder",src:_,loaded:!1,loading:!1,usePlaceholder:!0,el:t,model:t.model});else if(t.hasAttribute("width")&&t.hasAttribute("height")?t.getAttribute("width").indexOf("%")>-1&&t.getAttribute("height").indexOf("%")>-1?(s=!0,a=!0,l=parseFloat(t.getAttribute("width"))/100,p=parseFloat(t.getAttribute("height"))/100):(f=parseFloat(t.getAttribute("width")),c=parseFloat(t.getAttribute("height"))):v==="url"&&(s=!0,a=!0,l=1,p=1),v.startsWith("vimeo")||v.startsWith("youtube")){let O="";v.startsWith("vimeo")?O="https://vimeo.com/api/oembed.json?url="+_+"&width=640":O="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+_,r?fetch(O,{mode:"cors"}).then(M=>{M.json().then(D=>{E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:t.tagName!=="MEDIA-ITEM"&&t.getAttribute("autoplay")=="true",fileType:v,w:D.width*20,h:D.height*20,caption:i,hash:null,src:_,loaded:!0,loading:!1,usePlaceholder:!1,el:t,model:t.model})})}):E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:t.tagName!=="MEDIA-ITEM"&&t.getAttribute("autoplay")=="true",fileType:v,w:1600,h:900,caption:i,hash:null,src:_,loaded:!1,loading:!1,usePlaceholder:!1,el:t,model:t.model})}else if(v==="url"){let O=ld()&&_.indexOf(".pdf")>-1&&_.indexOf("docs.google.com/viewer")==-1,M=O?`https://docs.google.com/viewer?url=${_}&embedded=true&chrome=false`:_;E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,fileType:v,loaded:!0,loading:!1,noLazyLoading:!!O,w:3200,h:2e3,caption:i,hash:null,src:M,usePlaceholder:!1,el:t,model:t.model})}else if(v==="image")if(r){let O=document.createElement("img");O.onerror=function(){O.onload=null,E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,loadError:!0,autoplay:!1,fileType:v,loaded:!0,loading:!1,w:1600,h:1e3,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null})},O.onload=M=>{O.onload=null,f=O.naturalWidth,c=O.naturalHeight,s=!1,a=!1,O.decode().then(()=>{E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:!1,fileType:v,loaded:!0,loading:!1,w:f*100,h:c*100,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null,preloadedImage:O})})},O.setAttribute("src",_)}else E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:!1,fileType:v,loaded:!1,loading:!1,w:1600,h:900,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null});else if(v==="video")if(r){let O=document.createElement("video");O.setAttribute("preload","metadata"),O.onerror=function(M){O.onloadedmetadata=null,O.onerror=null,O.src="",O.load(),E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,loadError:!0,loaded:!0,loading:!1,autoplay:!1,fileType:v,w:1600,h:1e3,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null})},O.onloadedmetadata=M=>{O.onloadedmetadata=null,O.onerror=null,f=O.videoWidth,c=O.videoHeight,s=!1,a=!1,O.src="",O.load(),E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:t.getAttribute("autoplay")=="true",loaded:!0,loading:!1,fileType:v,w:f*100,h:c*100,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null})},O.setAttribute("src",_),O.load()}else E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:t.getAttribute("autoplay")=="true",loaded:!1,loading:!1,fileType:v,w:1600,h:900,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null})})},p1=t=>{let e=Ht.getState();if(t&&t.nodeName!=="MEDIA-ITEM"&&(t=t.closest('a[rel="quick-view"]')||t),window.lightbox.activeGallery&&e.frontendState.quickView.elementArray){let f=e.frontendState.quickView.elementArray.findIndex(c=>c.el==t);if(f!==-1){window.lightbox.activeGallery.goTo(f);return}}let r=t.closest(".page"),i=t.getAttribute("hash"),n=[],o=Wa(t,f=>f?.tagName?.startsWith("GALLERY-")),s=!1,a=t.closest("marquee-set");if(o){if(o.getAttribute("thumbnail-index")==="img:all")s=!0;else if(o&&o.getAttribute("disable-zoom")==="true")return;n=Array.from(o.querySelectorAll('media-item:not([disable-zoom="true"]):not([href]), a[rel="quick-view"], media-item[rel="quick-view"], media-item[force-quick-view="true"]'))}else{r?n=Array.from(r.querySelector("bodycopy")?.querySelectorAll('media-item:not([disable-zoom="true"]):not([href]), a[rel="quick-view"], media-item[rel="quick-view"], media-item[force-quick-view="true"]')):n=Array.from(document.querySelectorAll('bodycopy media-item:not([disable-zoom="true"]):not([href]), bodycopy a[rel="quick-view"], bodycopy media-item[rel="quick-view"], bodycopy media-item[force-quick-view="true"]'));let f=a&&t.closest('[slot="contents-clone"]');n=n.filter(c=>!Wa(c,m=>!!(m?.tagName?.startsWith("GALLERY-")||m?.classList?.contains("flying-object")||m.tagName==="MARQUEE-INNER"&&(m.slot==="contents-clone"&&!f||m.slot==="contents"&&f))))}n=n.filter(f=>{if(f.tagName!=="A")return!0;let c=f.getAttribute("href")||"";return!(c===""||c=="#"||c.indexOf("mailto:")==0||c.indexOf("tel:")==0)});let l=n.indexOf(t),p=0;Promise.all(n.map((f,c)=>{let m=n.length*.5,v=m-Math.abs((l+-c)%(2*m)-m);return v<-m&&v<0&&(v=v+n.length),Mg(f,{},Math.abs(v)<=p)})).then(f=>{Ht.dispatch(actions.updateFrontendState({quickView:{mode:"default",inited:!0,autoScrolling:!1,elementArray:f,activeIndex:l===-1?0:l}}))})};Xz.defaultProps={settings:{show_ui:!0,captions:!1,quickViewAlignment:"center-center",contentAlignVertical:"center",contentAlignHorizontal:"center"}};ple=$n(Xz)});var m1,f1,g1,Zz=$(()=>{ke();Fe();ns();Ja();xr();mt();tr();_r();m1=ve(Ie(),1);wg();c1();l1();he||(window.logSiteStructure=()=>{let t=window.store.getState(),e=t.structure.bySort,r=Object.keys(e);r.sort((n,o)=>e[n]-e[o]);let i={};r.forEach(n=>{let o=t.pages.byId[n]||t.sets.byId[n];i[n]={title:o.title,sort:e[n],index:t.structure.indexById[n],page_count:o.page_count}}),console.table(i)});f1=class extends me{constructor(e){super(e),this.state={},this.isMac=!1,he||(Promise.resolve().then(()=>(lp(),h1)).then(({openQuickViewFromElement:r})=>{this.setState({openQuickViewFromElement:r})}),this.isMac=ad())}handleGlobalClick=e=>{let r=e.target,i=r;r.shadowRoot?r=e.composedPath().find(s=>s.tagName==="A")||r:r.closest("a")&&(r=r.closest("a")),Qr.handleGlobalClick(r,i);let n=document.querySelectorAll('cargo-map[follow-navigation="true"]');for(let s of n)s.handleGlobalClick(r,i);if(!e.defaultPrevented&&r&&(r.nodeName==="A"||r.nodeName==="a")&&r.getAttribute("href")&&r.getAttribute("href")!==""){let s=r.getAttribute("rel");if(this.props.adminMode){e.preventDefault();return}let a=r.getAttribute("href")||"",l=r.getAttribute("target"),p;switch(s){case"history":e.preventDefault();let f=this.props.store.getState(),c=a.substring(0,1)==="#",m=!1,v=$e.getContentByPurl(store.getState(),a.replace(/\//,""));if(v?.overlay){Qr.toggleOverlay(v.id);return}if(!c){if(p=r.getAttribute("data-tags"),p?.length>0)a=p;else{let E=$e.getHomepagePurl(f);a.toLowerCase()===E&&!f.sets.byId.root.stack&&(a="/")}a.startsWith("/")||(a="/"+a),a==="/contact-form"&&(m=!0),i.nodeName==="MEDIA-ITEM"&&i?.classList.contains("thumbnail")&&a.replace(/\//,"")===this.props.activePURL&&document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"})}this.isMac&&e.metaKey===!0||!this.isMac&&e.ctrlKey===!0?window.open(a,"_blank"):this.props.history.push(a,{preventScrollReset:m});break;case"prev_page":case"prev-page":e.preventDefault(),this.loadNeighboringPage("prev");break;case"next_page":case"next-page":e.preventDefault(),this.loadNeighboringPage("next");break;case"home_page":case"home-page":e.preventDefault(),this.props.history.push("/");break;case"random_page":case"random-page":e.preventDefault(),this.loadRandomPage();break;case"top":e.preventDefault();let g=r.closest?.(".pinned.allow-scroll .page-content, .overlay-content.overlay-allow-scroll");g?this.scrollToTop(g):(this.scrollToTop(document.scrollingElement),m1.default.each(document.querySelectorAll(".pinned.allow-scroll .page-content, .overlay-content.overlay-allow-scroll"),this.scrollToTop));break;case"quick-view":case"quick_view":e.preventDefault(),this.state.openQuickViewFromElement?.(e.target);break;case"close-overlay":case"close_overlay":e.preventDefault();let x=i.closest("[page-url]")?.id;Qr.getOverlay(x)?Qr.closeOverlay(x):this.props.history.push("/");break;case"map-coordinates":e.preventDefault();break;case"map-marker":e.preventDefault();break;case"add-to-cart":case"add_to_cart":e.preventDefault(),this.props.addCommerceProductToCart((r.getAttribute("data-product")||e.target.getAttribute("data-product"))??null,(r.getAttribute("data-variant")||e.target.getAttribute("data-variant"))??null,{callback:()=>{this.props.history.push("/cart",{preventScrollReset:!0})},failureCallback:E=>{this.props.updateFrontendState({alertModal:{header:E,type:"notice"}})}});break;case"show_cart":case"show-cart":e.preventDefault(),Ag().then(E=>{this.props.history.push("/cart",{preventScrollReset:!0})}).catch(E=>{console.warn(E)});break;case"filter-index":case"filter_index":e.preventDefault(),p=r.getAttribute("data-tags");let _=r.getAttribute("data-set");var o=new CustomEvent("filter-thumbnail-index",{bubbles:!0,cancelable:!0,composed:!0,detail:{filter:p?"tag:"+p:_?"set:"+_:"all"}});r.dispatchEvent(o);break;default:this.props.isInHomepagePreview?(e.preventDefault(),parent.window.open(a)):l!=="_blank"&&(e.preventDefault(),parent.location.href=a);break}}};openAdmin=()=>{if(window.parent!==window)return;let e=this.props.activePID;if(this.props.store.getState().sets.byId[e]!==void 0){let r=document.querySelector(".content .pages .page");r?e=r.id:e=""}e?window.location.href="/edit/"+e:window.location.href="/edit"};showCargoSiteIndicator=()=>{let e=new Image;e.onload=function(){let r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.zIndex="2147483647",r.style.position="fixed",r.style.background='url("https://static.cargo.site/assets/C3/c3label.svg") center center / contain no-repeat',r.style.backgroundSize="60%",r.style.transform="rotate(-30deg)",setTimeout(function(){r.style.transition="opacity 500ms",setTimeout(function(){r.parentNode.removeChild(r)},700),setTimeout(function(){r.style.opacity="0"})},1e3),document.body.appendChild(r)},e.src="https://static.cargo.site/assets/C3/c3label.svg"};handleGlobalKeyDown=e=>{let r=e.target;if(r.shadowRoot&&(r=e.composedPath()[0]||r),r.closest?.('[contenteditable]:not([contenteditable="false"]),input,textarea')||r.classList?.contains("mcforms-wrapper"))return;let i=this.props.store.getState();if(!this.props.adminMode){if(this.isMac&&e.metaKey&&e.which===191||!this.isMac&&e.ctrlKey&&e.which===191){this.showCargoSiteIndicator();return}if(this.isMac&&e.metaKey&&e.which===27||this.isMac&&e.metaKey&&e.which===220||!this.isMac&&e.ctrlKey&&e.which===27){this.openAdmin();return}if(e.shiftKey&&(e.keyCode===65||e.keyCode===69)&&!i.frontendState.contactForm.inited&&!i.frontendState.cartOpen&&!i.frontendState?.quickView?.inited&&(this.props.inAdminFrame?this.props.editorRole!=="Viewer"&&(this.props.activePID&&this.props.activePID.length>0&&this.props.activePID!=="root"?parent.navigateAdmin("/"+this.props.activePID):parent.navigateAdmin("/")):this.openAdmin()),e.keyCode===82&&!i.frontendState.contactForm.inited&&!i.frontendState.cartOpen&&!i.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey?(e.preventDefault(),this.loadRandomPage()):e.keyCode===37&&!i.frontendState.contactForm.inited&&!i.frontendState.cartOpen&&!i.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey?(e.preventDefault(),this.loadNeighboringPage("prev")):e.keyCode===39&&!i.frontendState.contactForm.inited&&!i.frontendState.cartOpen&&!i.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),this.loadNeighboringPage("next")),e.which===27&&!e.metaKey&&!e.ctrlKey){if(i.frontendState?.contactForm?.inited){this.props.updateFrontendState({contactForm:{transition:!0,inited:!0}}),setTimeout(()=>{this.props.updateFrontendState({contactForm:{transition:!1,inited:!1}})},300);return}if(i.frontendState.quickView.inited||i.frontendState.cartOpen||i.frontendState?.contactForm?.inited||i.frontendState.alertModal)return;if(!this.props.inAdminFrame){let n=Qr.getAllOverlays();n.length>0?Qr.closeOverlay(n[n.length-1].pid):this.props.history.location.pathname!=="/"&&this.props.history.push("/")}}}};componentDidMount(){he||(window.addEventListener("click",this.handleGlobalClick),window.addEventListener("keydown",this.handleGlobalKeyDown))}componentWillUnmount(){he||(window.removeEventListener("click",this.handleGlobalClick),window.removeEventListener("keydown",this.handleGlobalKeyDown))}render(){return this.props.children}loadRandomPage=()=>{let e=this.props.store.getState(),r=e.pages.byId[this.props.activePID]||e.sets.byId[this.props.activePID];if(!r||r.page_type==="set"&&!r.stack)return;let i=r.id==="root"?e.sets.byId.root:$e.getContentById(e,$e.getItemParentId(e,r.id)),n=[i.id,...$e.getSetContents(e,i.id).filter(l=>l.stack).map(l=>l.id)];r.stack&&(n=[...n,...this.getSetContentsDeep(e,r.id).filter(l=>e.sets.byId.hasOwnProperty(l))]);let o=$e.getSortedListOfIndexPairs(e,i.id).filter(([l,p])=>{if(!n.includes(l))return!1;let c=$e.getSetContentsByIndex(e,l)[p];return!c||c.id!==e.frontendState.activePID&&c.id!==e.frontendState.lastVisiblePid&&c.purl!==e.frontendState.activeHashPurl&&c.id!==e.site.homepage_id&&c.id!==e.site.mobile_homepage_id&&c.page_type!=="set"&&c.pin!==!0});if(o.length===0)return;let s=o[Math.floor(Math.random()*o.length)],a=e.sets.byId[s[0]];s.length===2?this.props.fetchContent(a.id,{indexes:[s[1]],idType:"pid"}).then(l=>{l.data&&l.data[0]?this.navigateOrScrollToContent(l.data[0]):this.loadRandomPage()}):s.length===1&&this.navigateOrScrollToContent(a)};navigateOrScrollToContent=e=>{if(!e)return;let r=store.getState(),i=$e.getContentById(r,this.props.activePID);if(i&&i.stack)if(window.location.hash!==e.purl){let n=document.scrollingElement.scrollTop;window.location.hash=e.purl,document.scrollingElement.scrollTop=n}else sp.runAnchorScroll(sp.getAnchorForHash(e.purl));else this.props.history.push("/"+e.purl)};doScroll=(e,r,i,n)=>{let s=r-i,a=s/(12*12);s!==0&&(n+=(n+a)/s);let l=Math.abs(i-r)<1,p=l?i+s:i+s*(-Math.pow(2,-20*n/1)+1);n>0&&(e.classList.contains("top-scrollable-overlay")?e:document.scrollingElement).scrollTo({top:p,left:0,behavior:"instant"}),l||requestAnimationFrame(()=>{this.doScroll(e,r,p,n)})};scrollToTop=e=>{let r=e.scrollTop,i=Math.round(r*.2);r>e.clientHeight?this.doScroll(e,0,i,0):this.doScroll(e,0,r,0)};getSetContentsDeep=(e,r)=>{let i=[],n=e.structure.byParent[r];return n&&n.forEach(o=>{i.push(o),e.structure.byParent[o]&&(i=[...i,...this.getSetContentsDeep(e,o)])}),i};loadNeighboringPage=(e="next",r={})=>{let i=this.props.store.getState(),n=$e.getContentById(i,this.props.activePID);if(!n||n.page_type==="set"&&!n.stack)return;let o=n.id==="root"?i.sets.byId.root:$e.getContentById(i,$e.getItemParentId(i,n.id)),s=[o.id,...$e.getSetContents(i,o.id).filter(m=>m.stack).map(m=>m.id)];if(n.stack){s=[...s,...this.getSetContentsDeep(i,n.id).filter(v=>i.sets.byId.hasOwnProperty(v))];let m=i.frontendState.lastVisiblePid;i.frontendState.renderedPages.some(v=>v.id===m)?n=$e.getContentById(i,m):i.frontendState.activeHashPurl&&(n=$e.getContentByPurl(i,i.frontendState.activeHashPurl))}let a=i.structure.indexById[n.id],l=$e.getItemParentId(i,n.id),p=$e.getSortedListOfIndexPairs(i,o.id).filter(([m])=>s.includes(m)),f=p.findIndex(([m,v])=>m===l&&v===a),c=null;for(let m=1;m<p.length;m++){let v=e==="prev"?p[((f-m)%p.length+p.length)%p.length]:p[(f+m)%p.length],[g,x]=v,E=$e.getSetContentsByIndex(i,g)[x];if(!E||E.purl!==i.frontendState.activeHashPurl&&E.id!==i.site.homepage_id&&E.id!==i.site.mobile_homepage_id&&E.page_type!=="set"&&E.pin!==!0){c=E||v;break}}if(c){if(c.id)this.navigateOrScrollToContent(c);else if(r.preventContentFetch!==!0){let[m,v]=c;this.props.fetchContent(m,{indexes:[v],idType:"pid"}).then(g=>{this.loadNeighboringPage(e,{preventContentFetch:!0})})}}}},g1=Nn($n(Ue((t,e)=>{let r;return t.auth.data?.id&&(r=m1.default.find(t.site?.editors,i=>i.id===parseInt(t.auth.data.id))?.role),{editorRole:r,adminMode:t.frontendState.adminMode,inAdminFrame:t.frontendState.inAdminFrame,activePID:t.frontendState.activePID,isInHomepagePreview:t.auth.previewing,activePURL:(t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID])?.purl}},t=>Bt({updateFrontendState:Ye.updateFrontendState,fetchContent:Ye.fetchContent,addCommerceProductToCart:Ye.addCommerceProductToCart},t))(f1)))});var Jz=$(()=>{});var Qz=$(()=>{Ze();Jz();fe()});var e3=$(()=>{});var t3,kg,r3=$(()=>{Ze();t3=ve(Ie());Qz();Uf();e3();fe();kg=class extends me{constructor(e){super(e),this.ref=ze.createRef(),this.maxValue=100,this.speed=9,this.currValue=null,this.rafID=null,this.state={value:0,complete:!1,successLoading:!1}}componentDidMount=()=>{this.ref.current.addEventListener("mousestart",this.unlockStartHandler,!1)};unlockStartHandler=()=>{window.cancelAnimationFrame(this.rafID),this.currValue=this.state.value};unlockEndHandler=()=>{this.currValue=+this.state.value,this.currValue>=this.maxValue?this.successHandler():(this.rafID=window.requestAnimationFrame(this.animateHandler),this.setState({complete:!1}))};animateHandler=()=>{this.setState({value:this.currValue}),this.currValue>-1&&window.requestAnimationFrame(this.animateHandler),this.currValue=this.currValue-this.speed,setTimeout(t3.default.bind(function(){this.setState({value:0})},this),150)};successHandler=()=>{this.setState({successLoading:!0,complete:!1}),setTimeout(()=>{this.props.onConfirm()},800)};onRangeChange(e){e.persist(),this.setState({value:e.currentTarget.value}),this.setState({complete:e.currentTarget.value>=100})}componentWillUnmount=()=>{this.ref?.current?.removeEventListener("mousestart",this.unlockStartHandler,!1)};render(){return S("div",{className:`slide-confirm-slider${this.state.successLoading?" success-loading":""}`,ref:this.ref,onMouseDown:e=>{this.unlockStartHandler(e)},onMouseUp:e=>{this.unlockEndHandler(e)},onTouchEnd:e=>{this.unlockEndHandler(e)},children:[S("span",{className:"slide-message",children:this.props.slideMessage}),S("div",{className:"slide-progress",style:{left:"calc("+this.state.value+"% - calc("+this.state.value/100+" * 40px))"}}),S("input",{type:"range",min:"0",value:this.state.value,className:`pullee${this.state.complete?" complete":""}`,onChange:e=>{this.onRangeChange(e)}}),this.state.successLoading?S(ss,{className:"accent"}):null]})}}});function fle(t){return t&&(["INPUT","TEXTAREA","SELECT"].includes(t.tagName)||t.isContentEditable)}var v1,hle,i3,y1,Ng,n3=$(()=>{Zm();v1=ve(Ie()),hle=0,i3=Qe.isMac();y1=class t{constructor(){if(!Qe.isServer)return t.instance||(this.shortcuts={},this.scopeOrder=[],this.onKeyDown=this.onKeyDown.bind(this),this.handleEditorKeyDown=e=>this.onKeyDown("editor",e),typeof window<"u"&&window.addEventListener("keydown",this.handleEditorKeyDown),window.__c3_admin__&&(this.handleInterfaceKeyDown=r=>this.onKeyDown("interface",r),document.getElementById("client-frame")?.contentWindow?.addEventListener("keydown",this.handleInterfaceKeyDown)),t.instance=this),t.instance}setScopeOrder(e){this.scopeOrder&&v1.default.isEmpty(this.scopeOrder)&&v1.default.each(e,r=>{this.scopeOrder.push(r)})}getConfigKey(e){let{keyCode:r,metaKey:i="false",shiftKey:n="false",altKey:o="false",macCtrlKey:s="false"}=e;return`${r}-${i}-${n}-${o}-${s}`}getEventConfig(e){return{keyCode:e.keyCode,metaKey:i3?e.metaKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,macCtrlKey:i3?e.ctrlKey:!1}}registerHotKey(e,r,i,n="default"){let{notWhileTyping:o=!1,...s}=r,a=!!o,l=hle++,p=this.getConfigKey(s);return this.shortcuts[n]||(this.shortcuts[n]={}),this.shortcuts[n][p]||(this.shortcuts[n][p]=[]),this.shortcuts[n][p].push({id:l,callback:i,notWhileTyping:a}),()=>{let f=this.shortcuts[n][p];if(f){let c=f.findIndex(m=>m.id===l);c!==-1&&(f.splice(c,1),f.length===0&&(delete this.shortcuts[n][p],Object.keys(this.shortcuts[n]).length===0&&delete this.shortcuts[n]))}}}shouldSkip(e,r){return e.notWhileTyping&&fle(r)}onKeyDown(e,r){if(r.repeat)return;let i=this.getEventConfig(r),n=this.getConfigKey(i);if(!store.getState()?.frontendState?.contactForm.inited){for(let s=0;s<this.scopeOrder.length;s++){let a=this.scopeOrder[s],l=this.shortcuts[a];if(l&&l[n]){let p=l[n];if(p&&p.length>0){let f=p[p.length-1];if(f&&f.callback){if(this.shouldSkip(f,r.target))return;r.preventDefault(),f.callback(r);return}}}}if(!this.scopeOrder.includes("default")&&this.shortcuts.default&&this.shortcuts.default[n]){let s=this.shortcuts.default[n];if(s&&s.length>0){let a=s[s.length-1];if(a&&a.callback){if(this.shouldSkip(a,r.target))return;r.preventDefault(),a.callback(r)}}}}}},Ng=new y1;Object.freeze(Ng)});var o3=$(()=>{});var up,b1,Og,s3=$(()=>{Ze();up=ve(Ie());r3();Uf();n3();o3();fe();b1=ze.createContext({header:null,message:null,slideMessage:null,placeholder:null,existingValue:null,type:"alert",children:null,customElement:null,preventCancelButtonRender:!1,preventClose:!1,cancelButton:!1,overCart:!1,checkBoxConfirmation:null,checkBoxConfirmationValue:!1,confirmButton:"Yes",denyButton:"No",maxInputLength:null,dialogInputType:"text",validateInput:()=>!0,onOpen:()=>null,onConfirm:()=>null,onCancel:()=>null,onDeny:()=>null,onClose:()=>null,updateModal:()=>null}),Og=class extends me{constructor(e){super(e),this.modalDefaults={header:null,htmlHeader:null,message:null,slideMessage:null,htmlMessage:null,type:"alert",children:null,customElement:null,preventCancelButtonRender:!1,preventClose:!1,confirmButton:"OK",denyButton:"Cancel",cancelButton:!1,overCart:!1,checkBoxConfirmation:null,checkBoxConfirmationValue:!1,frontendData:null,maxInputLength:null,dialogInputType:"text",closeManually:!1,validateInput:()=>!0,onOpen:()=>null,onConfirm:()=>null,onCancel:()=>null,onDeny:()=>null,onClose:()=>null},this.state={modalOpen:!1,animate:!1,processConfirm:!1,...this.modalDefaults},this.overlayRef=ze.createRef(),this.inputRef=ze.createRef(),this.transitioning=!1,this.ignoreUnmount=!1,this.internalHotKeySet=!1,this.alterEventExecution=!0,this.clickStartedInModal=!1,this.unregisterEscapeHotKey=null,this.unregisterEnterHotKey=null}openModal=e=>{if(this.transitioning||this.state.modalOpen||this.state.animate)return;document.activeElement?.blur(),this.transitioning=!0;let r=up.default.defaults(e,this.modalDefaults),i=new Event("openAlertModal");window.dispatchEvent(i),r.onOpen&&r.onOpen(),window.__c3_admin__===!0&&(window.store.getState().adminState.pauseGlobalEventExecution?this.alterEventExecution=!1:window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}})),r.manuallyBindHotkeys&&(this.internalHotKeySet=!0,window.addEventListener("keydown",this.onKeyDown,!0)),!this.state.HotKeyProxy&&!r.manuallyBindHotkeys&&!this.unregisterEscHotKey&&(this.unregisterEscHotKey=Ng.registerHotKey("escape",{keyCode:27},this.cancelModal,"alert")),!this.state.HotKeyProxy&&!r.manuallyBindHotkeys&&!this.unregisterEnterHotKey&&(this.unregisterEnterHotKey=Ng.registerHotKey("enter",{keyCode:13},this.confirmModal,"alert")),window.addEventListener("keydown",this.onTabKeyDown),r.ignoreUnmount&&(this.ignoreUnmount=!0),this.originalStyle=window.getComputedStyle(document.body).overflow,document.body.style.overflow="hidden",window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!1,...r},()=>{window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!0},()=>{setTimeout(()=>{this.transitioning=!1},280)})})})}),r.frontendData&&r.frontendData.contentWindow.getSelection().removeAllRanges(),window.focus()};dispatchCloseEvents=()=>{let e=new Event("closeAlertModal");window.dispatchEvent(e),window.__c3_admin__===!0&&this.alterEventExecution&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}})};unbindInternalHotkeys=()=>{this.internalHotKeySet&&(this.internalHotKeySet=!1,window.removeEventListener("keydown",this.onKeyDown,!0)),this.unregisterEscHotKey&&(this.unregisterEscHotKey(),this.unregisterEscHotKey=null),this.unregisterEnterHotKey&&(this.unregisterEnterHotKey(),this.unregisterEnterHotKey=null),window.removeEventListener("keydown",this.onTabKeyDown)};closeModal=e=>{if(!this.state.modalOpen)return;let r=up.default.defaults(e,this.modalDefaults);this.transitioning=!0,this.dispatchCloseEvents(),this.unbindInternalHotkeys(),document.body.style.overflow=this.originalStyle,window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!1},()=>{setTimeout(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!1,animate:!1},()=>{this.state.onClose&&(this.state.onClose(),this.setState({modalOpen:!1,animate:!1,processConfirm:!1,existingValue:null,...this.modalDefaults},()=>{this.transitioning=!1}))})},280)})})};validateInput=()=>{};confirmModal=e=>{if(this.state.closeManually){this.setState({processConfirm:!0}),this.state.onConfirm();return}if(this.state.type==="dialog"&&this.inputRef.current){if(this.state.onConfirm){let r=this.inputRef.current.value;this.setState({existingValue:r},()=>{this.state.onConfirm(r)})}}else{let r={};r.checkBoxConfirmationValue=this.state.checkBoxConfirmationValue??null,this.state.onConfirm(r)}this.closeModal()};onKeyDown=e=>{e?.key==="Enter"&&this.state.type!=="slide-confirm"&&this.confirmModal(e),e?.key==="Escape"&&(e.preventDefault(),e.stopImmediatePropagation(),this.cancelModal(e))};denyModal=()=>{if(!this.state.processConfirm){if(this.state.onDeny){let e={};e.checkBoxConfirmationValue=this.state.checkBoxConfirmationValue??null,this.state.onDeny(e)}this.closeModal()}};cancelModal=e=>{this.state.preventClose||(this.state.onDeny&&e==="action"&&this.state.onDeny(),e?.type==="keydown"&&(e.preventDefault(),e.stopImmediatePropagation()),this.state.onCancel&&this.state.onCancel(),this.closeModal())};updateModal=(e={})=>{if(!this.state.modalOpen)return;let r=["type","modalOpen","animate","manuallyBindHotkeys","closeManually","ignoreUnmount"],i=up.default.omit(e,r);this.setState(n=>({...n,...up.default.pickBy(i,o=>o!==void 0)}))};overlayClick=e=>{if(this.clickStartedInModal){this.clickStartedInModal=!1;return}e.target==this.overlayRef.current&&this.cancelModal()};onMouseDown=e=>{this.clickStartedInModal=!0};onTabKeyDown=e=>{let r=e.key==="Tab"||e.keyCode===9;this.state.modalOpen&&r&&e.preventDefault()};componentDidMount(){}componentWillUnmount(){this.unmounted=!0}render(){let e=this.state.confirmButton||"OK",r=this.state.denyButton||"Cancel",i=this.state.header&&S("div",{className:"header",children:this.state.header}),n=this.state.message&&S("div",{className:"sub-message",children:this.state.message}),o=this.state.htmlHeader&&S("div",{className:"header",dangerouslySetInnerHTML:{__html:this.state.htmlHeader}}),s=this.state.htmlMessage&&S("div",{className:"sub-message",dangerouslySetInnerHTML:{__html:this.state.htmlMessage}}),a=this.state.placeholder?this.state.placeholder:"",l=this.state.existingValue?this.state.existingValue:"",p=this.state.confirmButton!==!1&&S("button",{"button-style":"rounded-2",className:"confirm",onClick:L=>this.confirmModal(L,null),children:[e,this.state.processConfirm?S(ss,{className:"default-border-radius"}):""]}),f=!this.state.preventCancelButtonRender&&S("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:r}),c=this.state.children&&!this.state.wrapperlessChildren?S("div",{className:"form",children:this.state.children}):this.state.wrapperlessChildren?this.state.children:null,m=()=>S(de,{children:[S("div",{className:"message",children:[i,n]}),S("div",{className:"opt-buttons",children:[f,p]})]}),v=()=>S(de,{children:[S("div",{className:"message",children:[i,n,o,s]}),S("div",{className:"input"}),S("div",{className:"buttons",children:p})]}),g=()=>S(de,{children:[S("div",{className:"message",children:S("div",{className:"header",children:["Something went wrong. Please contact ",S("a",{className:"alert-action-link underlined",href:"https://support.cargo.site/contact",target:"_blank",children:"Cargo Support"})]})}),S("div",{className:"input"}),S("div",{className:"buttons",children:p})]}),x=()=>S(de,{children:[S("div",{className:"message",children:[i,o,n,s]}),c,S("div",{className:"input"}),S("div",{className:"buttons",children:[f,p]})]}),_=()=>S(de,{children:[S("div",{className:"message",children:[i,n]}),S("div",{className:"input",children:S("input",{type:this.state.dialogInputType,maxLength:this.state.maxInputLength??null,placeholder:a,autoFocus:!0,autoComplete:this.state.dialogInputType==="email"?"email":null,defaultValue:l,ref:this.inputRef})}),S("div",{className:"buttons",children:[S("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:"Cancel"}),S("button",{"button-style":"rounded-2",className:"confirm",onClick:L=>this.confirmModal(L,null),children:"OK"})]})]}),E=()=>S(de,{children:[S("div",{className:"message",children:[i,n]}),this.state.checkBoxConfirmation?S("div",{className:"footer",children:S("label",{onClick:L=>{L.preventDefault(),this.setState({checkBoxConfirmationValue:!this.state.checkBoxConfirmationValue})},className:"checkbox",htmlFor:"alert_checkbox_confirmation",children:[this.state.checkBoxConfirmation,S("input",{readOnly:!0,name:"alert_checkbox_confirmation",id:"alert_checkbox_confirmation",type:"checkbox",checked:this.state.checkBoxConfirmationValue?"checked":""})]})}):null,S("div",{className:"buttons",children:[this.state.cancelButton?S("button",{"button-style":"rounded-2",className:"deny",onClick:this.cancelModal,children:"Cancel"}):null,S("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:this.state.denyButton}),S("button",{"button-style":"rounded-2",className:"confirm",onClick:L=>this.confirmModal(L,null),children:this.state.confirmButton})]})]});return S(b1.Provider,{value:{openModal:this.openModal,closeModal:this.closeModal,updateModal:this.updateModal},children:[this.state.modalOpen?S(de,{children:S("div",{className:`alert-window${this.state.animate?" active":""}${this.state.preventCancelButtonRender||this.state.preventClose?" no-exit":""}${this.state.overCart?" over-cart":""}`,onClick:this.overlayClick,ref:this.overlayRef,children:[this.state.customElement?this.state.customElement:S("div",{onMouseDown:this.onMouseDown,className:`alert-modal${" "+this.state.type}${this.state.className?" "+this.state.className:""}`,children:[(this.state.type==="alert"||this.state.type==="notice")&&S(v,{}),this.state.type==="contact"&&S(g,{}),this.state.type==="confirm"&&S(x,{}),this.state.type==="dialog"&&S(_,{}),this.state.type==="publish"&&S(E,{}),this.state.type==="custom"&&S(de,{children:[S("div",{className:"message",children:[i,n]}),c]}),this.state.type==="slide-confirm"&&S(de,{children:[S("div",{className:"message",children:[i,n,o,s,c]}),S("div",{className:"buttons",children:[S("br",{}),S("br",{}),S("button",{className:"deny",onClick:this.denyModal,children:"Cancel"}),S(kg,{onConfirm:L=>this.confirmModal(L,null),slideMessage:this.state.slideMessage??"Slide to delete"})]})]})]}),S("div",{className:"background"})]})}):null,this.props.children]})}}});function gle(t,e){return{alertModal:t.frontendState.alertModal,adminMode:t.frontendState.adminMode}}function vle(t){return Bt({updateFrontendState:Ye.updateFrontendState},t)}var ENe,mle,yle,a3,l3=$(()=>{ke();mt();xr();tr();ENe=ve(Ie(),1);s3();fe();mle=({alertModal:t,adminMode:e,...r})=>S(Og,{children:S(b1.Consumer,{children:i=>{t&&!e&&i.openModal({...t,manuallyBindHotkeys:!0,onConfirm:n=>{r.onConfirm&&r.onConfirm(),r.updateFrontendState({alertModal:!1})},onClose:n=>{r.onClose&&r.onclose(),r.updateFrontendState({alertModal:!1})},onCancel:n=>{r.onCancel&&r.onCancel(),r.updateFrontendState({alertModal:!1})}})}})});yle=Ue(gle,vle)(mle),a3=yle});var Dg,w1=$(()=>{Dg=(t,e=window)=>new Promise((r,i)=>{var n=e.document.getElementsByTagName("head")[0],o=e.document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=t,o.media="all",o.onload=r,o.onError=i,n.appendChild(o)})});var u3,c3,d3=$(()=>{w1();u3="https://api.cargo.site/v1/fonts/css?family=",c3=(t,e)=>new Promise((r,i)=>{if(!e||e.length===0)return r();let n=e.join("%7C").replace(/[\. -]+/g,"");if(n+="&c=3",t.context==="server"){fetch(u3+n).then(async s=>{let a=await s.text();r(a)}).catch(i);return}let o=e.map(s=>{let a=t.context.document.createElement("span");return a.style=`display:block;position:absolute;top:-9999px;left:-9999px;
			font-size:300px;width:auto;height:auto;line-height:normal;margin:0;
			padding:0;font-variant:normal;white-space:nowrap;font-family:${s};`,a.textContent="BESbswy",a});o.forEach(s=>t.context.document.body.appendChild(s)),Dg(u3+n,t.context).then(s=>{t.context.document.fonts.ready.then(()=>{o.forEach(a=>a.remove()),r()})}).catch(i)})});var ble,wle,p3,h3=$(()=>{w1();ble="https://fonts.googleapis.com/css?family=",wle=["100","100italic","200","200italic","300","300italic","400","400italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],p3=(t,e)=>new Promise((r,i)=>{if(!e||e.length===0)return r();if(t.context==="server")return i("Google fonts should only be loaded by the client");let n=e.map(s=>s.indexOf(":")===-1?s+":"+wle.join(","):s).join("%7C").replace(/ /g,"+"),o=e.map(s=>{let a=t.context.document.createElement("span");return a.style=`display:block;position:absolute;top:-9999px;left:-9999px;
			font-size:300px;width:auto;height:auto;line-height:normal;margin:0;
			padding:0;font-variant:normal;white-space:nowrap;font-family:${s};`,a.textContent="BESbswy",a});o.forEach(s=>t.context.document.body.appendChild(s)),Dg(ble+n,t.context).then(s=>{t.context.document.fonts.ready.then(()=>{o.forEach(a=>a.remove()),r()})}).catch(i)})});var x1,f3=$(()=>{d3();h3();x1=t=>{if(!t)throw"No config given";t.context=t.context||window,t.active=t.active||function(){};let e=[];return e.push(p3(t,t.families?.reduce?.((r,i)=>(i.provider==="google"&&r.push(i.family),r),[]))),e.push(c3(t,t.families?.reduce?.((r,i)=>(i.provider==="cargo"&&r.push(i.family),r),[]))),Promise.all(e).catch(r=>{console.log("something went wrong while loading the site's fonts...",r)}).finally(r=>{t.active?.(r)})}});var g3,m3,S1,cp,_1=$(()=>{ke();Ze();mt();g3=ve(Ie(),1);_r();_i();fe();m3=new Set,S1=class extends me{constructor(e){super(e),this.state={src:null,lastSrc:null,loaded:!1},this.uid=g3.default.uniqueId(),this.decodingQueue=[]}blankURI="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";render(e,r){let{model:i,adminMode:n,isZoomable:o,alt:s,hash:a,src:l,decoding:p}=e,f=e.width??i?.width??1600,c=e.height??i?.height??1600,m=this.state.src||this.blankURI;return m3.has(this.state.src)||(m=this.state.lastSrc||this.blankURI),m=this.props.isLazyLoadable?m:this.blankURI,Ot("img",{onClick:this.props.onClick,crossorigin:"",alt:s||null,src:m,width:f,height:c,className:`media${o?" image-zoom":""} `+(this.props.className||""),ref:this.props.mediaRef,onLoad:this.onLoad,decoding:"sync",part:this.props.part||void 0})}onLoad=e=>{this.props.mediaRef.current&&(this.props.mediaRef.current.src===this.blankURI||this.props.mediaRef.current.src===""||(this.setState({loaded:!0}),this.props.onLoad&&(this.props.model?this.props.onLoad({width:this.props.model.width,height:this.props.model.width}):this.props.onLoad({width:this.props.mediaRef.current.naturalWidth,height:this.props.mediaRef.current.naturalHeight}))))};componentDidUpdate(e,r){let i=this.props["dynamic-src"]||this.props.src||void 0,n=e["dynamic-src"]||e.src||void 0;(this.props.renderWidth!==e.renderWidth||this.props.renderHeight!==e.renderHeight||e.isLazyLoadable!==this.props.isLazyLoadable||i!==n||this.props.model&&this.props.model?.hash!==e.model?.hash)&&this.onSizeChange()}componentDidMount(){this.firstLoad=!0,this.onSizeChange()}decodeImage=async(e,r)=>{if(this.decodingQueue.indexOf(e)>-1)return;this.decodingQueue.push(e);let i=document.createElement("img"),n=async()=>{i.onload=null,m3.add(i.src),this.state.src==i.src&&this.forceUpdate()};this.firstLoad?(this.firstLoad=!1,i.decoding="async",i.onload=n,i.onerror=this.props.onError,i.src=e):(i.decoding="async",i.src=e,i.onerror=this.props.onError,await i.decode().catch(o=>{console.log("error:",o),n()}),n())};onSizeChange=()=>{let e=this.props["dynamic-src"]||this.props.src||void 0,r=this.props.renderWidth,i=this.props.renderHeight;if(this.props.model){let l=this.props.model.width/this.props.model.height;r=Math.max(i*l,r)}let n=r<500?50:250,o=Math.ceil(r/n)*n,s=i<500?50:250,a=Math.ceil(i/s)*s;this.props.model&&o!==0&&a!==0&&(e=ls({w:o},this.props.model).url),this.props.isLazyLoadable&&e&&this.decodeImage(e),this.setState(l=>e==l.src||!e?null:{lastSrc:l.src,src:e})}},cp=Fi((t,e)=>{let r=t.model?.is_video&&t.model?.poster?t.model.poster:t.model;return r&&r.loading&&(r=null),S(S1,{...t,model:r,mediaRef:e})})});var v3,pl,dp,xle,hl,pp,Sle,E1,y3,b3=$(()=>{ke();Ze();v3=ve(Ie(),1);fe();pl=new Set,dp="unloaded",xle=function(){if(window?.YT&&(dp="loaded"),dp==="unloaded"){let r=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{dp="loaded",pl.forEach(i=>{i.initYoutubePlayer()}),pl.clear(),typeof r=="function"&&r()},dp="loading";var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}dp==="loaded"&&(pl.forEach(r=>{r.initYoutubePlayer()}),pl.clear())},hl=new Set,pp="unloaded",Sle=function(){if(window?.Vimeo&&(pp="loaded"),pp==="unloaded"){pp="loading";var t=document.createElement("script");t.onload=()=>{pp="loaded",hl.forEach(r=>{r.initVimeoPlayer()}),hl.clear()},t.src="https://player.vimeo.com/api/player.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}pp==="loaded"&&(hl.forEach(r=>{r.initVimeoPlayer()}),hl.clear())},E1=class extends me{constructor(e){super(e),this.state={apiPlayer:null,nativeSize:{width:1,height:1},wasInLazyLoadRange:e.isLazyLoadable},this.uid=v3.default.uniqueId(),this.html="",this.divRef=_e()}render(e){let{src:r,width:i,height:n,model:o}=e;return S(de,{children:[e.adminMode?S("div",{style:{position:"absolute",zIndex:3,pointerEvents:"auto",background:"transparent",inset:0}}):null,S("div",{onPointerEnter:this.props.onPointerEnter,onPointerOut:this.props.onPointerOut,dangerouslySetInnerHTML:{__html:this.html},style:{position:"absolute",inset:0},ref:this.divRef})]})}setIframeStyles=()=>{if(!this.divRef.current)return;let e=this.divRef.current.querySelector("iframe");if(e||this.props.fileType.startsWith("youtube:")||this.props.fileType.startsWith("vimeo:")&&this.state.apiPlayer&&(e=this.state.apiPlayer.element),!e)return;let r="margin: auto; position: absolute;";r+="width: 100%; height: 100%; inset: 0;",e.setAttribute("part","iframe iframe"+this.props.statusPartAppendix),e.setAttribute("style",r)};loadAPIPlayer=()=>{hl.delete(this),pl.delete(this),this.props.fileType.startsWith("youtube:")?(pl.add(this),xle()):this.props.fileType.startsWith("vimeo:")&&(hl.add(this),Sle())};initVimeoPlayer=()=>{for(;this.divRef.current?.childNodes?.[0];)this.divRef.current.childNodes[0].remove();let e=this.props.fileType.replace("vimeo:","").split("/"),r=new window.Vimeo.Player(this.divRef.current,{id:e.length>1&&this.props.src?this.props.src:e[0],h:e[1]||void 0,width:this.props.width||640,height:this.props.height||480,loop:this.props.loop,autopause:!1,autoplay:!1,volume:this.props.autoplay||this.props.muted?0:1,background:!this.props["browser-default"],pip:!1,speed:!0,portrait:!1,muted:this.props.autoplay||this.props.muted});this.setState({apiPlayer:r},()=>{Promise.all([r.getVideoWidth(),r.getVideoHeight()]).then(i=>{r.on("loaded",()=>{r.element?.setAttribute("id","vimeo-player-"+this.uid),r.element?.setAttribute("frameborder","0"),this.setIframeStyles()}),r.on("play",()=>{this.props.onPlay?.()}),r.on("pause",()=>{this.props.onPause?.()}),r.on("ended",()=>{this.props.onEnded?.()}),r.pause().then(r.setCurrentTime(0));var n=i[0],o=i[1];this.setState({nativeSize:{width:n,height:o}}),this.props.onNewPlayer&&this.props.onNewPlayer({play:()=>new Promise((s,a)=>{this.state.apiPlayer.play().then(l=>{s(!0)}).catch(l=>{a(l)})}),pause:()=>new Promise((s,a)=>{this.state.apiPlayer.pause().then(l=>{s(!0)})}),setCurrentTime:s=>new Promise((a,l)=>{this.state.apiPlayer.setCurrentTime(s).then(p=>{a(!0)})}),getCurrentTime:()=>new Promise((s,a)=>{this.state.apiPlayer.getCurrentTime().then(l=>{s(l)})}),setMute:s=>new Promise((a,l)=>{this.state.apiPlayer.setMuted(s).then(function(p){a(p)}).catch(function(p){})}),setVolume:s=>new Promise((a,l)=>{this.state.apiPlayer.setVolume(s).then(p=>{a(!0)})}),getVolume:()=>new Promise((s,a)=>{this.state.apiPlayer.getVolume().then(l=>{s(l)})}),getDuration:()=>new Promise((s,a)=>{this.state.apiPlayer.getDuration().then(l=>{s(!0)})}),stop:()=>new Promise((s,a)=>{Promise.all([r.pause(),r.setCurrentTime(0)]).then(()=>{s(!0)})}),setPlaybackRate:s=>new Promise((a,l)=>{this.state.apiPlayer.setPlaybackRate(s).then(p=>{a(!0)})}),size:{width:n,height:o}})})})};initYoutubePlayer=()=>{for(;this.divRef.current?.childNodes?.[0];)this.divRef.current.childNodes[0].remove();let e=document.createElement("iframe"),r=this.props.fileType.replace("youtube:","");e.setAttribute("style","display:none;"),this.divRef.current.appendChild(e);let i=this.props.src.indexOf("?")>-1?this.props.src.split("?")[0]:this.props.src,n=this.props.fileType?.replace("youtube:","")||null,o="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+i;n&&n.length>0&&(o="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v="+n),fetch(o,{mode:"cors"}).then(s=>{s.json().then(a=>{let l=this.props.fileType?.replace("youtube:","")||null;if(n!==l){this.initYoutubePlayer();return}let p=a.width*2||640,f=a.height*2||480;e.setAttribute("id","youtube-player"),e.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),e.setAttribute("allowfullscreen",""),e.setAttribute("frameborder","0");let c={autoplay:this.props.muted&&this.props.autoplay?1:0,width:p,height:f,modestbranding:1,loop:!1,host:"https://www.youtube.com",controls:this.props["browser-default"]?void 0:0,disablekb:this.props["browser-default"]?1:0,enablejsapi:1,origin:window.location.origin,rel:0},m=Object.entries(c).filter(([g,x])=>x!==void 0).map(([g,x])=>g+"="+x).join("&");e.setAttribute("src","https://www.youtube.com/embed/"+n+"?"+m),this.setState({nativeSize:{width:p,height:f}}),this.setIframeStyles();let v=new YT.Player(e,{videoId:n,playerVars:c,events:{onReady:()=>{this.setState({nativeSize:{width:p,height:f}}),this.props.onNewPlayer&&this.props.onNewPlayer({play:()=>new Promise((g,x)=>{this.state.apiPlayer.playVideo(),g(!0)}),pause:()=>new Promise((g,x)=>{this.state.apiPlayer.pauseVideo(),g(!0)}),stop:()=>new Promise((g,x)=>{this.state.apiPlayer.stopVideo(),esolve(!0)}),size:{width:p,height:f},setCurrentTime:g=>new Promise((x,_)=>{switch(this.state.apiPlayer.getPlayerState()){case 0:case 1:case 2:this.state.apiPlayer.seekTo(g,!1)}x(!0)}),getCurrentTime:()=>new Promise((g,x)=>{g(this.state.apiPlayer.getCurrentTime())}),setVolume:g=>new Promise((x,_)=>{this.state.apiPlayer.setVolume(g*100),x(!0)}),setMute:g=>new Promise((x,_)=>{g?this.state.apiPlayer.mute():this.state.apiPlayer.unMute(),x(!0)}),getVolume:g=>new Promise((x,_)=>{x(this.state.apiPlayer.getVolume()/100)}),getDuration:()=>new Promise((g,x)=>{g(this.state.apiPlayer.getDuration())}),setPlaybackRate:g=>new Promise((x,_)=>{this.state.apiPlayer.setPlaybackRate(g),x(!0)})})},onStateChange:g=>{switch(g.data){case YT.PlayerState.ENDED:this.props.loop?(v.seekTo(0,!1),v.playVideo()):this.props.onEnded?.();break;case YT.PlayerState.PAUSED:this.props.onPause?.();break;case YT.PlayerState.PLAYING:this.props.onPlay?.();break}}}});this.setState({apiPlayer:v})})})};componentDidUpdate(e,r){if((this.props.width!==e.width||this.props.height!==e.height||this.state.nativeSize!==r.nativeSize||this.props["image-fit"]!==e["image-fit"])&&this.setIframeStyles(),this.props.statusPartAppendix!==e.statusPartAppendix){let i=this.divRef.current?.querySelector("iframe");i&&i.setAttribute("part","iframe iframe"+this.props.statusPartAppendix)}e.isLazyLoadable!==this.props.isLazyLoadable&&this.props.isLazyLoadable&&this.setState({wasInLazyLoadRange:!0}),(e.src!==this.props.src||e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"]||e.loop!==this.props.loop||e.muted!==this.props.muted||r.wasInLazyLoadRange!==this.state.wasInLazyLoadRange)&&(e.src&&this.props.onNewPlayer(null),clearTimeout(this.initPlayerTimeout),this.initPlayerTimeout=setTimeout(()=>{e.fileType.startsWith("youtube")&&this.state.apiPlayer&&(this.state.apiPlayer?.destroy(),this.loadAPIPlayer()),e.fileType.startsWith("vimeo")&&this.state.apiPlayer&&(this.state.apiPlayer.off("loaded"),this.state.apiPlayer.off("play"),this.state.apiPlayer.off("pause"),this.state.apiPlayer?.destroy().then(()=>{this.loadAPIPlayer()}))},0))}componentDidMount(){this.loadAPIPlayer()}componentWillUnmount(){clearTimeout(this.initPlayerTimeout),pl.delete(this),hl.delete(this)}},y3=Fi((t,e)=>S(E1,{...t,mediaRef:e}))});var w3,C1,x3,S3=$(()=>{ke();mt();_1();b3();_i();Fe();Ze();w3=ve(Ie(),1);fe();C1=class extends me{constructor(e){super(e),this.nullPlayer={play:()=>new Promise((r,i)=>{i("null player play")}),pause:()=>new Promise((r,i)=>{i("null player pause")}),stop:()=>new Promise((r,i)=>{i("null player stop")}),getDuration:()=>new Promise((r,i)=>{i("null player getDuration")}),getCurrentTime:()=>new Promise((r,i)=>{i("null player getCurrentTime")}),setCurrentTime:()=>new Promise((r,i)=>{i("null player setCurrentTime")}),setMute:()=>new Promise((r,i)=>{i("null player setMute")}),getVolume:()=>new Promise((r,i)=>{i("null player getVolume")}),setVolume:()=>new Promise((r,i)=>{i("null player setVolume")}),setPlaybackRate:()=>new Promise((r,i)=>{i("null player setPlaybackRate")}),size:{width:0,height:0}},this.state={playing:!1,paused:!0,stopped:!0,hasPlayedThrough:!1,interacted:!1,hasAttention:!1,videoLoaded:!1,posterLoaded:!1,activePlayer:this.nullPlayer},this.posterRef=_e(),this.videoRef=_e(),this.videoPlayerRef=_e()}blankURI="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";render(e){let{model:r,posterModel:i,adminMode:n,isZoomable:o,alt:s,hash:a,src:l,fileType:p,decoding:f,"browser-default":c,"dynamic-src":m}=e,v=["controlslist","disablepictureinpicture","disableremoteplayback","x-webkit-airplay","playsinline"].reduce((F,V)=>this.props.baseNode.hasAttribute(V)?{...F,[V]:this.props.baseNode.getAttribute(V)}:F,{}),g=e.width??r?.width??1600,x=e.height??r?.height??1600,_=m||l||"",E=null;r&&(r.is_url?E=r.url:E="https://freight.cargo.site/i/"+r.hash+"/"+r.name);let L="";r?.loading||!E?L=_||"":L=E||"";let O=!this.props.muted&&!this.props.autoplay&&this.state.playing;p==="video"&&(L=O||this.props.isLazyLoadable?L:"");let M=null,D=this.props.renderWidth<500?50:250,P=Math.ceil(this.props.renderWidth/D)*D;i&&!i.loading?i.is_video&&i.poster?M=ls({w:P},i.poster).url||"":M=ls({w:P},i).url||"":r&&r.poster&&!r.poster.loading?M=ls({w:P},r.poster).url||"":(this.props["dynamic-poster"]||this.props.poster)&&(M=this.props["dynamic-poster"]||this.props.poster||null,M=M.startsWith("https://")?M:""),M=this.props.isLazyLoadable?M:"";let U=this.state.playing?"-playing":this.state.stopped?"-stopped":this.state.paused?"-paused":"",N=!c;return S("div",{onPointerEnter:this.onPointerEnter,onPointerOut:this.onPointerOut,part:"media video-player"+(U?" video-player"+U:""),ref:this.props.mediaRef,className:`media${o?" image-zoom":""}`,children:S("div",{className:"video-player-crop",children:[N?S(cp,{ref:this.posterRef,src:M||this.blankURI,isZoomable:o,onLoad:this.onPosterLoad,isLazyLoadable:this.props.isLazyLoadable,renderWidth:this.props.renderWidth,renderHeight:this.props.renderHeight,width:g,height:x,style:{transform:"rotate(1deg)"},part:"poster"+(U?" poster"+U:"")}):null,p==="video"?S("video",{...v,ref:this.videoRef,playsinline:"true",autoplay:this.props.autoplay,loop:this.props.loop,src:L,controls:c,onLoadedMetadata:this.onVideoLoad,preload:"metadata",part:"video"+(U?" video"+U:""),poster:c?M+"?cachebreak="+this.state.forceUpdate:null,onPlay:this.onPlay,onPause:this.onPause,onEnded:this.onEnded,width:g,height:x,onClick:this.onClick}):S(y3,{...this.props,statusPartAppendix:U,fileType:p,ref:this.videoRef,loop:this.props.loop,width:g,height:x,onPlay:this.onPlay,onPause:this.onPause,onEnded:this.onEnded,onNewPlayer:this.onNewPlayer,src:L})]})})}onClick=e=>{};componentDidMount(){this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime,Object.defineProperty(this.props.baseNode,"playing",{get:()=>this.state.playing,configurable:!0}),Object.defineProperty(this.props.baseNode,"paused",{get:()=>this.state.paused,configurable:!0}),Object.defineProperty(this.props.baseNode,"stopped",{get:()=>this.state.stopped,configurable:!0}),this.autoplayInterval=setInterval(()=>{this.props.autoplay&&!this.state.playing&&this.props.visible&&!this.state.interacted&&(this.props.loop||!this.state.hasPlayedThrough)&&this.state.activePlayer.setMute(!0).then(()=>{this.play()}).catch(e=>{clearInterval(this.autoplayInterval)})},1200),this.configurePlayer(),this.props.visible&&this.enteredView()}configurePlayer=()=>{this.props.muted||this.props.autoplay?this.state.activePlayer.setMute(!0).then(()=>{this.props.visible&&this.enteredView()}).catch(e=>{}):this.state.activePlayer.setVolume(1).catch(e=>{}),this.props["playback-rate"]!=1&&this.state.activePlayer.setPlaybackRate(this.props["playback-rate"]).catch(e=>{})};componentDidUpdate(e,r){r.activePlayer!=this.state.activePlayer&&(this.configurePlayer(),this.setState({interacted:!1})),(this.props.visible!=e.visible||r.activePlayer!=this.state.activePlayer)&&(this.props.visible?this.enteredView():this.exitedView()),this.props.poster!==e.poster&&this.resetVideoPlayer(),this.props.isLazyLoadable!==e.isLazyLoadable&&(this.props.isLazyLoadable||(this.videoRef.current?.pause(),this.videoRef.current?.removeAttribute("src"),this.videoRef.current?.load())),this.props.muted!==e.muted&&this.state.activePlayer.setVolume(this.props.muted||this.props.autoplay?0:1),this.props.fileType==="video"&&(r.videoLoaded!==this.state.videoLoaded||r.posterLoaded!==this.state.posterLoaded)&&(this.props.poster&&this.state.posterLoaded&&this.state.videoLoaded?this.initializeVideoElementPlayer():this.state.videoLoaded&&this.initializeVideoElementPlayer()),(e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"])&&(this.setState({interacted:!1}),this.state.activePlayer.setCurrentTime(0),this.props.autoplay?this.play():this.stop())}componentWillUnmount(){clearInterval(this.autoplayInterval),this.pause(),this.exitedView.cancel(),delete this.props.baseNode.playing,delete this.props.baseNode.paused,delete this.props.baseNode.stopped,delete this.props.baseNode.play,delete this.props.baseNode.pause,delete this.props.baseNode.getCurrentTime,delete this.props.baseNode.setCurrentTime}play=()=>{this.state.activePlayer&&this.state.activePlayer.play().then(()=>{this.setState({playing:!0,paused:!1,stopped:!1})}).catch(e=>{this.state.activePlayer.getVolume().then(r=>{r!==0&&this.state.activePlayer.setVolume(0).then(()=>{this.state.activePlayer.play().then(()=>{this.setState({playing:!0,paused:!1,stopped:!1})}).catch(i=>{})}).catch(i=>{})}).catch(r=>{})})};pause=()=>{this.state.activePlayer&&this.state.activePlayer.pause().then(()=>{this.setState({playing:!1,paused:!0})}).catch(e=>{})};stop=()=>{this.state.activePlayer&&(this.pause(),this.state.activePlayer.pause().then(()=>{this.setState({playing:!1,paused:!0,stopped:!0}),this.state.activePlayer.setCurrentTime(0)}).catch(e=>{}))};onPointerEnter=e=>{this.props["play-on"]==="hover"&&(this.props.poster&&this.state.activePlayer.setCurrentTime(0),this.play()),this.setState({hasAttention:!0})};onPointerOut=e=>{this.props["play-on"]==="hover"&&this.pause(),this.setState({hasAttention:!1})};onPosterLoad=()=>{this.setState({posterLoaded:!0})};onVideoLoad=()=>{this.setState({videoLoaded:!0})};onNewPlayer=e=>{if(!e){this.setState({playing:!1,stopped:!0,paused:!0,hasPlayedThrough:!1,activePlayer:this.nullPlayer},()=>{this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime});return}this.setState({playing:!1,stopped:!0,paused:!0,hasPlayedThrough:!1,activePlayer:e},()=>{this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime,this.props.onLoad&&this.props.onLoad({width:e.size.width,height:e.size.height}),this.props.visible&&this.enteredView()})};initializeVideoElementPlayer=()=>{this.videoRef.current.paused&&this.videoRef.current.currentTime!==0&&(this.videoRef.current.currentTime=0),this.onNewPlayer({play:()=>new Promise((e,r)=>{this.videoRef.current.play().then(function(){e(!0)}).catch(function(i){r(i)})}),pause:()=>new Promise((e,r)=>{this.videoRef.current.pause(),e(!0)}),stop:()=>new Promise((e,r)=>{this.videoRef.current.pause(),this.videoRef.current.currentTime=0,e(!0)}),getDuration:()=>new Promise((e,r)=>{e(this.videoRef.current.duration)}),getCurrentTime:()=>new Promise((e,r)=>{e(this.videoRef.current.currentTime)}),setCurrentTime:e=>new Promise((r,i)=>{this.videoRef.current.currentTime===e?r(!0):(this.videoRef.current.currentTime=e,this.videoRef.current.addEventListener("seeked",()=>{r(!0)},{once:!0}))}),setMute:e=>new Promise((r,i)=>{this.videoRef.current.muted=e,r(e)}),getVolume:()=>new Promise((e,r)=>{e(this.videoRef.current.volume)}),setVolume:e=>new Promise((r,i)=>{this.videoRef.current.volume=e,r(!0)}),setPlaybackRate:e=>new Promise((r,i)=>{this.videoRef.current.playbackRate=Math.max(.1,Math.min(2,parseFloat(e))),"preservesPitch"in this.videoRef.current?this.videoRef.current.preservesPitch=!1:"mozPreservesPitch"in this.videoRef.current?this.videoRef.current.mozPreservesPitch=!1:"webkitPreservesPitch"in this.videoRef.current&&(this.videoRef.current.webkitPreservesPitch=!1),r(!0)}),size:{width:this.videoRef.current.videoWidth||320,height:this.videoRef.current.videoHeight||240}})};onPlay=()=>{this.setState(e=>{let r={...e};return e.hasAttention&&(r.interacted=!0),r.playing=!0,r.paused=!1,r.stopped=!1,r})};onPause=()=>{this.setState(e=>{let r={...e};return e.hasAttention&&(r.interacted=!0),r.playing=!1,r.paused=!0,r})};onEnded=()=>{this.setState({hasPlayedThrough:!0})};resetVideoPlayer=()=>{Promise.all([this.state.activePlayer.setCurrentTime(0),this.state.activePlayer.pause()]).then(()=>{this.setState({hasPlayedThrough:!1,paused:!0,stopped:!0},()=>{if(this.props.poster&&this.videoRef.current&&this.props["browser-default"]){if(Ui()&&this.videoRef.current){let e=this.videoRef.current.cloneNode();this.videoRef.current.replaceWith(e),this.videoRef.current=e}this.videoRef.current.load()}})})};enteredView(){this.exitedView.cancel(),(this.props.autoplay==!0||this.props["play-on"]==="hover"&&this.state.hasAttention)&&!this.state.playing&&this.play()}exitedView=w3.default.debounce(()=>{!this.props.muted&&!this.props.autoplay&&this.state.playing||(this.pause(),Promise.all([this.state.activePlayer.pause(),this.state.activePlayer.getCurrentTime(),this.state.activePlayer.getDuration()]).then(([r,i,n=0])=>{(n-i<.1&&!this.props.loop||Number.isNaN(n)||i==0&&r)&&this.resetVideoPlayer()}))},500)},x3=Fi((t,e)=>S(C1,{...t,mediaRef:e}))});var yOe,P1,_3,E3=$(()=>{ke();mt();Ze();yOe=ve(Ie(),1);fe();P1=class extends me{constructor(e){super(e)}render(e){let{model:r,src:i,isLazyLoadable:n}=e,o=(r?.is_url?r.url:i)||"",s=["soundcloud.","mixcloud.","spotify.","bandcamp."].some(l=>o.includes(l));!n&&!s&&(o="");let a=["allow","allowfullscreen","referrerpolicy","sandbox","srcdoc"].reduce((l,p)=>this.props.baseNode.hasAttribute(p)?{...l,[p]:this.props.baseNode.getAttribute(p)}:l,{});return S("iframe",{part:"media iframe",allowfullscreen:!0,mozallowfullscreen:!0,webkitallowfullscreen:!0,frameborder:"0",...a,className:this.props.loaded?"loaded":"",onload:this.onLoad,ref:this.props.mediaRef,src:o})}onLoad=()=>{this.props.onLoad&&this.props.onLoad()};componentDidMount(){this.props.isLazyLoadable&&this.startGDocsLoadCheck()}componentDidUpdate(e,r){this.props.loaded!==e.loaded&&(clearInterval(this.gDocsTimeoutCheck),this.props.loaded||this.startGDocsLoadCheck()),this.props.isLazyLoadable!==e.isLazyLoadable&&(clearInterval(this.gDocsTimeoutCheck),this.props.isLazyLoadable&&this.startGDocsLoadCheck())}componentWillUnmount(){clearInterval(this.gDocsTimeoutCheck)}startGDocsLoadCheck=()=>{let e=this.props.model?.is_url?this.props.model.url:this.props.src;if(e.indexOf("https://docs.google.com/viewer")==0){let r=2500;this.gDocsTimeoutCheck=setInterval(()=>{this.props.mediaRef.current?.contentDocument?(this.props.mediaRef.current.setAttribute("src",""),this.props.mediaRef.current.setAttribute("src",e)):clearInterval(this.gDocsTimeoutCheck),r=r+500,r>4e3&&(console.warn("Google Docs Viewer failed to load"),clearInterval(this.gDocsTimeoutCheck))},r)}}},_3=Fi((t,e)=>S(P1,{...t,mediaRef:e}))});var ha,$u,I1,A1,C3,P3=$(()=>{ke();Ze();Dt();Fe();Rr();Xn();qr();ha=ve(Ie(),1);fe();$u=new Set,I1=ha.default.debounce(()=>{let t=Array.from($u),e=[],r=t.filter(o=>o.state.selected).length>1,i=0;if(r){let o=t.map(l=>{let p;return l.state.selected?p=l.props.baseNode.getBoundingClientRect():p={top:-9e9},{component:l,rect:p}});e=ha.default.sortBy(o,(l,p)=>l.rect.top);let s=e.filter(l=>l.component.state.selected),a=s[s.length-1].component.props.baseNode._size;i=s[s.length-1].rect.bottom+-s[0].rect.top+-a.mediaItemSize.padSize+-a.mediaSize.padSize,e=e.map(l=>l.component)}else e=t;let n=!1;e.forEach(o=>{!r||!o.state.selected?o.setState({pointerProxyAttention:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,multiSelectHeight:null}):n?o.setState({partOfMultipleSelection:!0,showMultipleSelectionButton:!1,multiSelectHeight:null}):(o.setState({pointerProxyAttention:!0,partOfMultipleSelection:!0,showMultipleSelectionButton:!0,multiSelectHeight:i},()=>{o.setEditorFrame()}),n=!0)})},100);he||(CargoEditor&&Object.keys(CargoEditor||{}).length>0?CargoEditor.events.on("cursor-activity",I1):window.addEventListener("CargoEditor-load",function(){CargoEditor.events.on("cursor-activity",I1)}),document.addEventListener("selectionchange",I1));A1=class extends me{constructor(e){super(e),this.state={selected:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,overlayPosition:{x:0,y:0},mediaItemEditorInfo:{},resizeCorner:0,pointerAttention:!1,pointerProxyAttention:!1,activeGallery:null,disabledFigureOptions:[],editorFramePosition:{x:0,y:0},editorMediaFramePosition:{x:0,y:0},UIWindow:!1,cursorOrientation:"nwse-resize",isResizing:!1,dragStartPosition:{x:0,y:0},dragDelta:{x:0,y:0},scalingLimit:1e3,resizeDimensions:{scale:"100%",scaleArray:[100,"%"],newWidth:"auto",newHeight:"auto",width:0,height:0,displayScale:null},initialDimensions:{scale:"100%",scaleArray:[100,"%"],newWidth:"auto",newHeight:"auto",width:0,height:0,displayScale:null},handlePos:{x:100,y:100,w:100,h:100},contextPos:{x:100,y:100,w:100,h:100},mediaCornerPositions:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],multiSelectHeight:null},this.renderElement=Xe.getPortal(this.props.baseNode,{noPointerEvents:!1,trackResize:!1,extraMargins:!1,component:this}),this.mediaGhostRef=_e(),this.observer=new MutationObserver(this.checkForEmptyCaption)}render(e,r){let{mediaItemEditorInfo:i,overlayPosition:n,resizeCorner:o,pointerAttention:s,pointerProxyAttention:a,disabledFigureOptions:l,editorFramePosition:p,editorMediaFramePosition:f,isResizing:c,dragStartPosition:m,dragDelta:v,scalingLimit:g,resizeDimensions:x,handlePos:_,mediaCornerPositions:E,cursorOrientation:L,partOfMultipleSelection:O,showMultipleSelectionButton:M,UIWindow:D,contextPos:P}=r,{rotation:U,dimensions:N,mediaDimensions:F,baseNode:V,size:q}=e;if(i?.disableAll==!0)return null;let J=x.width*x.overSize/q.mediaSize.width,Y=x.height*x.overSize/q.mediaSize.height,ie=1/J||1,oe=e.scale,Z=e.limitBy;c&&(x.displayScale?(Z="Width",oe=x.displayScale):x.scaleArray[1]=="px"?oe=parseFloat(x.scaleArray[0]).toFixed(0)+x.scaleArray[1]+"":oe=parseFloat(x.scaleArray[0]).toFixed(1)+x.scaleArray[1]+""),oe=oe==="100.0%"?"100%":oe;let K=e.rotation+"\xB0",Q=null;(s||a)&&!i?.disableButton&&!D&&!c&&(M&&O?Q=S("button",{"data-editor-overlay":"true",class:"media-options-button multiple",style:{transform:`translate(${Math.floor(P.x*2)/2}px, ${Math.floor(P.y*2)/2}px)`},onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,onMouseUp:this.onOptionsButtonContextMenu,children:"Edit Multiple"}):!M&&!O&&(Q=S("button",{"data-editor-overlay":"true",class:"media-options-button",style:{transform:`translate(${Math.floor(P.x*2)/2}px, ${Math.floor(P.y*2)/2}px)`},onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,children:S("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S("circle",{className:"inner-circle",cx:"8.5",cy:"8.65747",r:"7.5"}),S("circle",{className:"outer-circle",cx:"8.5",cy:"8.65747",r:"8"}),S("circle",{className:"dot",cx:"8.49977",cy:"8.65747",r:"1"}),S("circle",{className:"dot",cx:"5.07",cy:"8.65747",r:"1"}),S("circle",{className:"dot",cx:"11.9295",cy:"8.65747",r:"1"})]})})));let te=null;!c&&s&&!i?.disableResize&&!O&&(te=S("button",{class:`resize-handle ${L}`,style:{transform:`translate(${Math.floor(_.x*2)/2}px, ${Math.floor(_.y*2)/2}px)`},onMouseDown:this.onResizePointerDown,children:S("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 32 32",style:"enable-background:new 0 0 32 32;",children:[S("polygon",{class:"outline",points:"24,18 28,15 30,14 30,30 14,30 15,28 18,24 8,14 4,17 2,18 2,2 18,2 17,4 14,8 "}),S("polygon",{class:"inner",points:"8,11 4,14 4,4 14,4 11,8 24,21 28,18 28,28 18,28 21,24 "})]})}));let ee=i?.additionalUI?.(this,V)||null;return S(de,{children:[S("style",{children:`:host {
				${c?"visibility: hidden!important;":""}
			}
			`}),S(Jr,{baseNode:V,onSelectionChange:this.onSelectionChange}),rt(S("div",{class:"editor-overlay",style:{height:q.mediaItemSize.height+"px",width:q.mediaItemSize.width+"px",display:s||c||a?"block":"none",transform:`translate3d(${n.x}px, ${n.y}px, 1px) rotate(${e.rotation}deg)`},children:[S("div",{class:`figure-outline${this.state.usingLocalScale?" using-local-scale":""}`,style:{width:q.mediaItemSize.width+"px",height:q.mediaItemSize.height+"px",top:p.y+"px",left:p.x+"px",transform:`rotate(${-e.rotation}deg)`},children:[c&&s&&S("div",{className:"tool-tip figure-sizing visible",style:{transform:`translate(${Math.floor(P.x*2)/2}px, ${Math.floor(P.y*2)/2}px)`},children:S("div",{className:"tooltip-content",children:S("span",{children:`${Z}: ${oe}`})})}),Q,te,ee]}),S("div",{class:"media-ghost-container",style:{display:c?"block":"none",width:x.width+q.mediaSize.padSize+"px",height:x.height+q.mediaSize.padSize+"px",top:o===2||o===3?"0":"auto",right:o===1||o===2?"auto":"0",left:o===1||o===2?"0":"auto",bottom:o===2||o===3?"auto":"0"},children:S("div",{class:"media-ghost",ref:this.mediaGhostRef})})]}),this.renderElement)]},"media-item-editor")}onOptionsButtonContextMenu=e=>{e.metaKey||e.preventDefault()};onOptionsButtonClick=e=>{if(this.state.mediaItemEditorInfo?.disableAll||e.metaKey||e.target.closest("figcaption"))return;e.preventDefault();let r=[];$u.forEach(o=>{o.state.selected&&r.push(o.props.baseNode)}),r.indexOf(this.props.baseNode)===-1&&(r=[this.props.baseNode]);let i=this.props.baseNode.getBoundingClientRect(),n={x:i.x+10,y:i.y+10,left:i.left+10,right:i.right+10,top:i.top+10,bottom:i.top+10,width:i.width,height:0};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"imageoptions",positionRect:n,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,props:{selectedMediaItems:r,clickedMediaItem:this.props.baseNode}})};setUIWindow=e=>{this.setState({UIWindow:e})};onSelectionChange=e=>{!e&&this.state.showMultipleSelectionButton&&this.setState({pointerProxyAttention:!1,showMultipleSelectionButton:!1,pointerAttention:!1}),this.setState({selected:e})};checkForEmptyCaption=()=>{if(this.props.baseNode.closest("[thumbnail-index]"))return;clearTimeout(this.removeEmptyCaptionTimeout);let e=this.props.figCaptionElement;if(e)if(e.childNodes.length==0||Array.from(e.childNodes).every(i=>i.nodeType==Node.TEXT_NODE&&i.nodeValue.trim()==="")){let i=()=>{if(!CargoEditor||!CargoEditor.getActiveRange||!CargoEditor.mutationManager)return;let n=CargoEditor.getActiveRange();n&&e.contains(n.commonAncestorContainer)?this.removeEmptyCaptionTimeout=setTimeout(i,200):CargoEditor?.mutationManager?.execute?.(()=>{e.remove()},{preventDraft:!0})};i()}else e.classList.contains("caption")||e.classList.add("caption")};componentDidMount(){$u.add(this),this.props.baseNode._editorInterface=this,this.checkZoomable(),this.checkHref(),this.setState({usingLocalScale:this.props.baseNode?.hasAttribute("scale")&&this.props.baseNode?.hasAttribute("limit-by")}),ye.globalDragEventController.on("dragend",this.updatePosition),ye.globalDragEventController.on("drop",this.updatePosition),this.props.baseNode.addEventListener("contextmenu",this.onOptionsButtonClick),this.checkForEmptyCaption(),this.props.figCaptionElement&&this.observer.observe(this.props.figCaptionElement,{characterData:!0,subtree:!0,childList:!0})}componentWillUnmount(){if(clearTimeout(this.removeEmptyCaptionTimeout),cancelAnimationFrame(this.onScrollAnimFrame),$u.delete(this),this.observer.disconnect(),ye.globalDragEventController.off("dragend",this.updatePosition),ye.globalDragEventController.off("drop",this.updatePosition),this.state.UIWindow)if(this.props.baseNode.__willBeReplacedWith){let e=[...this.state.UIWindow.state.selectedMediaItems],r=e.indexOf(this.props.baseNode);r>-1&&(e[r]=this.props.baseNode.__willBeReplacedWith);let i=this.state.UIWindow.state.clickedMediaItem;this.props.baseNode==i&&(i=this.props.baseNode.__willBeReplacedWith),this.state.UIWindow.setState({selectedMediaItems:e,clickedMediaItem:i},()=>{this.state.UIWindow?.getSettingsFromNodes()})}else this.state.UIWindow?.onMutate();delete this.props.baseNode._editorInterface,Xe.removePortal(this.props.baseNode,this.renderElement),this.props.baseNode.removeEventListener("contextmenu",this.onOptionsButtonClick)}updatePosition=()=>{(this.state.pointerAttention||this.state.pointerProxyAttention||this.state.selected)&&this.onScroll()};onScroll=e=>{this.ticking||(this.ticking=!0,this.onScrollAnimFrame=requestAnimationFrame(()=>{let r=this.props.scrollContext.getScrollPosition().y,i=r-this.scrollPos;this.scrollPos=r,this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(i),Xe.testHover(),this.setEditorFrame(),this.ticking=!1}))};checkZoomable(e=this.props){let r=this.props["force-quick-view"]||this.props.imageSettings.image_zoom&&!this.props["disable-zoom"]&&!this.props.href&&!this.props.zoomTemporarilyDisabled,i=e["force-quick-view"]||e.imageSettings.image_zoom&&!e["disable-zoom"]&&!e.href&&!e.zoomTemporarilyDisabled;(r!=i||r&&!this.props.baseNode.classList.contains("zoomable")||!r&&this.props.baseNode.classList.contains("zoomable"))&&CargoEditor?.mutationManager?.execute?.(()=>{r?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable")},{preventDraft:!0})}checkHref(e=this.props){let r=this.props.href!==void 0&&this.props.href!==null,i=e.href!==void 0&&e.href!==null;(r!=i||r&&!this.props.baseNode.classList.contains("linked")||!r&&this.props.baseNode.classList.contains("linked"))&&CargoEditor?.mutationManager?.execute?.(()=>{r&&this.props.baseNode.classList.add("linked"),this.props.baseNode.classList.remove("linked")},{preventDraft:!0})}componentDidUpdate(e,r){this.checkZoomable(e),this.checkHref(e),this.props.figCaptionElement!==e.figCaptionElement&&(this.observer.disconnect(),this.props.figCaptionElement&&(this.checkForEmptyCaption(),this.observer.observe(this.props.figCaptionElement,{characterData:!0,subtree:!0,childList:!0}))),!this.props.baseNode.hasAttribute("data-placeholder")&&!this.props.baseNode.parentElement?.hasAttribute("thumbnail-index")&&!this.props["dynamic-width"]&&!this.props["dynamic-height"]&&!this.props["dynamic-src"]&&!this.props["dynamic-hash"]&&((!this.props.height||!this.props.width)&&(!this.props.model?.width||!this.props.model?.height)&&this.props.nativeMediaDimensions.width&&this.props.nativeMediaDimensions.height&&(this.props.nativeMediaDimensions.width!==e.nativeMediaDimensions.width||this.props.nativeMediaDimensions.height!==e.nativeMediaDimensions.height||this.props.height!==e.height||this.props.width!==e.width)&&CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("width",this.props.nativeMediaDimensions.width),this.props.baseNode.setAttribute("height",this.props.nativeMediaDimensions.height)},{preventDraft:!0}),(this.props.baseNode.hasAttribute("width")||this.props.baseNode.hasAttribute("height"))&&this.props.hash!="placeholder"&&(this.props.src!=e.src||this.props.model&&this.props.model.hash!==e.model?.hash)&&CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.removeAttribute("width"),this.props.baseNode.removeAttribute("height"),this.props.baseNode.removeAttribute("poster")},{preventDraft:!0})),(this.state.UIWindow!==r.UIWindow||this.state.pointerAttention!==r.pointerAttention||this.state.pointerProxyAttention!==r.pointerProxyAttention||this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement)&&(this.props.scrollContext.scrollingElement&&(this.state.UIWindow||this.state.pointerProxyAttention||this.state.pointerAttention)?(this.scrollPos=this.props.scrollContext.getScrollPosition().y,this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll)),(this.props.size.mediaSize.width!==e.size.mediaSize.width||this.props.size.mediaSize.height!==e.size.mediaSize.height||this.props.size.mediaItemSize.width!==e.size.mediaItemSize.width||this.props.size.mediaItemSize.height!==e.size.mediaItemSize.height||this.props.size.mediaSize.padSize!==e.size.mediaSize.padSize||this.props.size.mediaItemSize.padSize!==e.size.mediaItemSize.padSize||this.props.rotation!==e.rotation)&&(this.state.pointerAttention||this.state.pointerProxyAttention)&&(this.setState({usingLocalScale:this.props.baseNode?.hasAttribute("scale")&&this.props.baseNode?.hasAttribute("limit-by")}),Xe.testHover(),this.setEditorFrame())}pointerIn=()=>{let e=this.props.baseNode?.parentNode?._mediaItemEditorInfo||{},r=this.props.baseNode.parentElement?.nodeName=="GALLERY-SLIDESHOW"?this.props.baseNode.parentElement:null;if(r&&!r.thumbnailsVisible&&!this.props.baseNode.assignedSlot?.parentElement?.hasAttribute?.("data-active-slide")){this.pointerOut();return}this.setState({mediaItemEditorInfo:e}),this.state.selected&&$u.forEach(i=>{i.state.showMultipleSelectionButton&&i.setState({pointerProxyAttention:!0})}),this.setState({pointerAttention:!0},()=>{this.setEditorFrame()})};pointerOut=()=>{this.state.selected&&$u.forEach(e=>{e.state.pointerProxyAttention&&e.setState({pointerProxyAttention:!1})}),this.setState({pointerAttention:!1})};onResizePointerDown=e=>{if(e.button==2)return;let r=this.props.mediaElement,i=this.mediaGhostRef.current;if(!r||!i||this.props.size.width?.indexOf?.("%")>-1)return;for(;i.lastChild;)i.lastChild.remove();if(r.tagName=="IMG"){let o=r.cloneNode(!0);o.setAttribute("decoding","sync"),i.appendChild(o)}else if(r.tagName==="VIDEO"&&r.hasAttribute("poster")){let o=document.createElement("img");o.setAttribute("decoding","sync"),o.setAttribute("src",r.getAttribute("poster")),i.appendChild(o)}else r.classList.contains("placeholder")?i.appendChild(r.cloneNode(!0)):i.appendChild(document.createElement("div"));let n=window.getComputedStyle(r);i.firstChild.style.border=n.getPropertyValue("border"),i.firstChild.style.borderRadius=n.getPropertyValue("border-radius"),i.firstChild.style.padding=n.getPropertyValue("padding"),i.firstChild.style.outline=n.getPropertyValue("outline"),this.startDrag(e)};startDrag=e=>{let{handlePos:r,mediaCornerPositions:i,cursorOrientation:n}=this.state,{baseNode:o,rotation:s,limitBy:a,size:l}=this.props,p=this.props.baseNode.closest("bodycopy, column-unit, gallery-freeform"),f=0;if(p){let _=window.getComputedStyle(p);f=p.offsetWidth+-parseFloat(_.getPropertyValue("padding-left"))+-parseFloat(_.getPropertyValue("padding-right"))}else f=window.innerWidth;f=f+-l.mediaSize.padSize+-l.mediaItemSize.padSize;let c={x:e.clientX,y:e.clientY};e.preventDefault();let m=this.props.scale??100,v=ur(m,a==="width"?"%":"rem");a!=="width"&&a!=="height"&&(v[1]=""),v[0]=parseFloat(v[0]),(v[0]===""||v[1].indexOf("calc(")>-1||v[1].indexOf("var(")>-1)&&(a==="width"?(v[0]=l.mediaSize.width/f*100,v[1]="%"):(v[0]=l.mediaSize.height/window.innerHeight*100,v[1]="vh"));let g=Math.min(v[0].toString().indexOf(".")>-1?v[0].toString().split(".").pop().length:0,3);v[0]=parseFloat(parseFloat(v[0]).toFixed(g));let x={width:l.mediaSize.width,height:l.mediaSize.height,atLimit:Math.abs(l.mediaSize.width-f)<2,scaleArray:v,scale:m,overSize:1,displayScale:null};this.state.mediaItemEditorInfo.beforeScaleChange&&(x=this.state.mediaItemEditorInfo.beforeScaleChange(this.props.baseNode,x)),this.setState({dragStartPosition:c,scalingLimit:f,dragDelta:{x:0,y:0},resizeDimensions:x,initialDimensions:{...x,scaleArray:[...x.scaleArray]},isResizing:!0},()=>{Xe.lock(),document.body.style.setProperty("cursor",n,"important"),document.body.classList.add("dragging-figure-in-editor"),ye.adminWindow.addEventListener("mouseup",this.onPointerUp),ye.adminWindow.addEventListener("pointermove",this.onDrag),window.addEventListener("pointermove",this.onDrag),window.addEventListener("mouseup",this.onPointerUp)})};onDrag=e=>{e.preventDefault();let{dragStartPosition:r,mediaCornerPositions:i,scalingLimit:n,resizeCorner:o,handlePos:s,handleTrack:a,initialDimensions:l}=this.state,{rotation:p,limitBy:f,baseNode:c,size:m}=this.props,{resizeDimensions:v}=this.state,{scale:g,scaleArray:x}=l,_={x:e.clientX-r.x,y:e.clientY+-r.y},E=p*(Math.PI/180)||0,L=i[o],O=i[(o+1)%4],M=i[(o+2)%4],D=i[(o+3)%4],P=this.getDistance(D,s),U=this.getDistance(M,s),N=parseInt(m.width),F=parseInt(m.height),V=45,q=this.getAngle(D,L),J=this.getAngle(L,O),Y={x:s.x+_.x,y:s.y+_.y},ie=[{x:s.x+Math.cos(J)*10,y:a.y+a.h+-V+Math.sin(J+Math.PI)*10},{x:s.x,y:a.y+a.h+-V}],oe=[{x:s.x+Math.cos(q)*10,y:a.y+a.h+-V+Math.sin(q+Math.PI)*10},{x:s.x,y:a.y+a.h+-V}],Z=0,K=0,Q=0,te,ee;if(o%2==0){let Me=this.getIntersection(ie,[O,M]),We=this.getIntersection(oe,[M,D]),Pe=this.getDistance(M,s),Ve=this.getDistance(M,Y),Le=this.getAngle(M,Y),He=this.getDistance(M,s);Q=Ve/He;let it=this.getDistance(M,Me);K=Ve/it;let Je=Math.abs(Math.sin(Le+E));K*=Je;let st=this.getDistance(We,M);Z=Ve/st;let ot=Math.cos(Le+E);Z*=ot}else{let Me=this.getIntersection(ie,[D,L]),We=this.getIntersection(oe,[L,O]),Pe=this.getDistance(M,s),Ve=this.getDistance(M,Y),Le=this.getAngle(M,Y),He=this.getDistance(M,s);Q=Ve/He;let it=this.getDistance(M,Me);K=Ve/it;let Je=Math.abs(Math.sin(Le+E));K*=Je;let st=this.getDistance(We,M);Z=Ve/st;let ot=Math.cos(Le+E);Z*=ot}let ae=Math.max(Z,Q,K),ue=Math.min(m.mediaSize.width/N,m.mediaSize.height/F),le=N/F;te=N*ue*ae,ee=F*ue*ae;let xe=!1,Re=1;if(te>n){let Me=n/te;xe=!0,te=n,ee=ee*Me}let be=e.altKey||e.metaKey;f==="width"?([x,te]=this.scaleDimension(x,te+m.mediaSize.padSize+m.mediaItemSize.padSize,m.mediaSize.width+m.mediaSize.padSize+m.mediaItemSize.padSize,be),te=te+-m.mediaSize.padSize+-m.mediaItemSize.padSize,ee=te/le):([x,ee]=this.scaleDimension(x,ee+m.mediaSize.padSize+m.mediaItemSize.padSize,m.mediaSize.height+m.mediaSize.padSize+m.mediaItemSize.padSize,be),te=le*(ee+-m.mediaSize.padSize+-m.mediaItemSize.padSize),ee=te/le),x[0]=parseFloat(x[0]),v={scale:x.join(""),scaleArray:x,limitBy:f,width:te,height:ee,atLimit:xe,overSize:Re,displayScale:null},x[1]=="%"&&f=="width"&&parseFloat(x[0])>=100&&(v.scale="100%",v.scaleArray=[100,"%"]),this.state.mediaItemEditorInfo.whileScaleChange&&(v=this.state.mediaItemEditorInfo.whileScaleChange(this.props.baseNode,{...v})),this.setState({resizeDimensions:v})};scaleDimension=(e,r,i,n)=>{let o=e[0]*(r/i),s=o;n?e[1]=="%"||e[1]=="vh"||e[1]=="vw"||e[1]=="vmax"||e[1]=="vmin"?o=Math.round(o/.5)*.5:o=Math.round(o/10)*10:e[1]=="px"?o=Math.round(o):o=Math.round(o*10)/10,o=Math.max(1,o);let a=o/s||0;return[[o,e[1]],r*a]};onPointerUp=e=>{let{resizeDimensions:r,scalingLimit:i}=this.state;e.preventDefault(),CargoEditor.mutationManager.execute(()=>{this.state.mediaItemEditorInfo.afterScaleChange?this.state.mediaItemEditorInfo.afterScaleChange(this.props.baseNode,r):this.props.baseNode.setAttribute("scale",r.scale),this.props.baseNode.flushMutationQueue()}),Xe.unlock(),this.setState({isResizing:!1},()=>{document.body.style.cursor="",ye.adminWindow.removeEventListener("mouseup",this.onPointerUp),ye.adminWindow.removeEventListener("pointermove",this.onDrag),document.body.classList.remove("dragging-figure-in-editor"),window.removeEventListener("pointermove",this.onDrag),window.removeEventListener("mouseup",this.onPointerUp)})};setEditorFrame=()=>{let{figureElement:e,mediaElement:r,sizingFrameElement:i,baseNode:n,rotation:o,size:s}=this.props;if(!e||!r||!r.parentElement||s.mediaItemSize.width==0||s.mediaItemSize.height==0||!i||!this.state.pointerAttention&&!this.state.pointerProxyAttention)return;let a=o*(Math.PI/180)||0,l=n.getBoundingClientRect(),p={w:s.mediaItemSize.width*Math.cos(a)-s.mediaItemSize.height*Math.sin(a),h:s.mediaItemSize.width*Math.sin(a)+s.mediaItemSize.height*Math.cos(a)},m={x:l.left+(l.width-p.w)*.5+-0,y:l.top+(l.height-p.h)*.5+-0},v=i.getBoundingClientRect(),g=45,x=45,_=this.state.showMultipleSelectionButton&&this.state.multiSelectHeight,E={x:e.offsetLeft,y:e.offsetTop,w:e.offsetWidth,h:e.offsetHeight};_&&(E.h=this.state.multiSelectHeight);let L=r.offsetLeft,O=r.offsetTop,M=r;for(;M&&M.parentNode&&M.parentNode!==n.shadowRoot&&M.parentNode!==e&&M.parentNode!==n;)L=L+M.offsetLeft,O=O+M.offsetTop,M=M.offsetParent;let D={x:L||0,y:O||0},P=[{x:D.x,y:D.y},{x:D.x+s.mediaSize.width+s.mediaSize.padSize,y:D.y},{x:D.x+s.mediaSize.width+s.mediaSize.padSize,y:D.y+s.mediaSize.height+s.mediaSize.padSize},{x:D.x,y:D.y+s.mediaSize.height+s.mediaSize.padSize}],U=[];if(_)U=P,U[2].y=D.y+this.state.multiSelectHeight,U[3].y=D.y+this.state.multiSelectHeight;else{let He={x:E.w*.5,y:E.h*.5};U=P.map(it=>{let Je={x:it.x-He.x,y:it.y-He.y},st={x:Je.x*Math.cos(a)-Je.y*Math.sin(a),y:Je.x*Math.sin(a)+Je.y*Math.cos(a)};return{x:st.x+He.x,y:st.y+He.y}})}if(ha.default.isEqual(U))return;let N,F,V,q;N=ha.default.minBy(U,He=>He.y);let J=U.indexOf(N);F=U[(J+1)%4],V=U[(J+2)%4],q=U[(J+3)%4];let Y={x:0,y:0,w:g,h:x},ie={x:0,y:0},oe={x:N.x,y:N.y},Z={w:F.x-q.x,h:V.y-N.y,x:q.x,y:N.y},K=[{x:Z.x+Z.w*.5,y:Z.y+Z.h*.5},{x:Z.x+Z.w,y:Z.y+Z.h}],Q=this.getIntersection(K,[F,V]),te=this.getIntersection(K,[q,V]),ee=!1,ae=ha.default.minBy([te,Q],He=>He.y<K[0].y?9e9:He.y);if(ae==te)Y.x=V.x,Y.y=V.y;else{let He=this.getDistance(F,ae);this.getDistance(V,ae)<He?(Y.x=V.x,Y.y=V.y):(Y.x=F.x,Y.y=F.y,ee=!0)}let ue,le=0,xe=0;if(ee){let He=this.getAngle(F,N),it=Math.PI-(Math.abs(He)+Math.PI*.5),Je=x*Math.cos(it),st=-Math.cos(it+Math.PI*.5)*Je,ot=-Math.sin(it+Math.PI*.5)*Je;oe={x:q.x+-st,y:q.y+-ot+x},Y.x=Y.x+st+-g,ue=Y.y+ot+x;let vt=[{x:N.x-g,y:ue},{x:N.x-g,y:ue-10}],bt=[{x:N.x,y:ue},{x:N.x,y:ue-10}],je=[this.getIntersection(vt,[q,N]),this.getIntersection(vt,[N,F]),this.getIntersection(bt,[q,N]),this.getIntersection(bt,[N,F])],Lt=ha.default.maxBy(je,pt=>pt.y);Y.y=Lt.y,Y.h=ue-Y.y;let Kt=Math.max(0,v.bottom+(x+ot)+-nt.data.window.h+-(V.y-F.y));xe=Y.h-x+-Kt,le=this.getIntersection([{x:Y.x,y:Y.y+xe},{x:Y.x-10,y:Y.y+xe}],[N,F]).x-Y.x+-g}else{let He=this.getAngle(V,F),it=Math.PI-(Math.abs(He)+Math.PI*.5),Je=g*Math.cos(it),st=-Math.cos(it)*Je,ot=-Math.sin(it)*Je;if(ue=Y.y+ot,Y.x=Y.x+st,Y.y=F.y,Y.h=ue-F.y,oe={x:N.x+-st+-g,y:N.y+-ot},Math.abs(this.getSlope(F,V))>1&&v.bottom+ot>=nt.data.window.h){let bt=v.bottom+-nt.data.window.h,je={x:V.x,y:V.y-bt},Lt=this.getIntersection([je,{x:je.x+10,y:je.y}],[V,F]);le=Lt.x-(Y.x+Y.w),xe=Lt.y-Y.y+-x}else{let bt=[{x:Y.x,y:ue},{x:Y.x,y:ue-10}],je=[{x:Y.x+Y.w,y:ue},{x:Y.x+Y.w,y:ue-10}],Lt=[this.getIntersection(bt,[q,N]),this.getIntersection(bt,[N,F]),this.getIntersection(je,[q,N]),this.getIntersection(je,[N,F])],Kt=ha.default.maxBy(Lt,pt=>pt.y);Y.y=Kt.y,Y.h=ue-Y.y;let Ir=Math.max(0,v.bottom+-nt.data.window.h+ot);xe=Y.h-x+-Ir,le=0}}ie.x=Y.x+le,ie.y=Math.max(Y.y,Y.y+xe);let Re=Math.max(0,v.left+v.width+-nt.data.window.w);ie.x=Math.min(ie.x,F.x-(Re+g));let be=Math.min(0,v.left),Me=Math.min(0,v.top);oe.x=Math.max(oe.x,-be+q.x),oe.y=Math.max(oe.y,-Me+N.y);let We=this.getIntersection([oe,{x:oe.x,y:oe.y+10}],[q,V]);oe.y=Math.min(oe.y,We.y+-x);let Pe=(J+2)%4;ee&&(Pe=(Pe+3)%4);let Ve="nwse-resize",Le=this.getAngle(ie,U[(Pe+2)%4]);Math.abs(Math.PI*.5-Le)<.4?Ve="ns-resize":Math.abs(Math.PI-Math.abs(Le))<.4&&(Ve="ew-resize"),this.setState({mediaCornerPositions:U,resizeCorner:Pe,contextPos:oe,handlePos:ie,cursorOrientation:Ve,handleTrack:Y,overlayPosition:m,editorMediaFramePosition:{x:D.x,y:D.y},editorFramePosition:{x:0,y:0}})};getAngle=(e,r)=>Math.atan2(-(r.y-e.y),r.x-e.x);getDistance=(e,r)=>Math.sqrt(Math.pow(r.y-e.y,2)+Math.pow(r.x-e.x,2));getSlope=(e,r)=>(r.y-e.y)/(r.x-e.x);getIntersection=(e,r)=>{let i=this.getSlope(...e),n=this.getSlope(...r),o,s;return i==0?(isFinite(n)?o=(n*r[0].x-(r[0].y-e[0].y))/n:o=r[0].x,s=e[0].y):isFinite(i)?(o=(n*r[0].x-i*e[0].x-(r[0].y-e[0].y))/(n-i),s=i*(o-e[0].x)+e[0].y):(o=e[0].x,s=n*(o-r[0].x)+r[0].y),isFinite(o)||(o=null),isFinite(s)||(s=null),{x:o,y:s}}},C3=A1});var T1,I3,A3=$(()=>{ke();Ze();Rr();Dt();_r();fe();T1=class extends me{constructor(e){super(e),this.state={}}onDragStart=()=>{this.props.setPlaceholderUIState({is_target:!1})};handlePlaceholderUIEvent=async e=>{if(!window?.CargoEditor?.getActiveEditor?.())return;let r=e.target.closest(".page[id]")?.getAttribute("id"),i=window?.CargoEditor?.getActiveEditor()?.pid;switch(i!==r&&(window?.parent.navigateAdmin("/"+r,{preserveScroll:!0}),window.parent.document.dispatchEvent(new CustomEvent("open-remote-message",{detail:{message:"Switched to Page",duration:1e3}})),await new Promise(n=>{CargoEditor.events.once("editor-instanciated",(o,s,a)=>{setTimeout(()=>{n()},150)})})),e.detail.action){case"open-images-window":let n=i===r;if(e.target.parentElement?.hasAttribute("thumbnail-index")){ye.adminWindow.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{session:{"page-thumbnail-image-picker-menu":!0}}});let f=this.props.baseNode.shadowRoot.querySelector(".placeholder-ui button")?.getBoundingClientRect(),c={x:f.x+10,y:f.y+10,left:f.left+10,right:f.right+10,top:f.top+10,bottom:f.top+10,width:f.width,height:0};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"imageoptions",positionRect:c,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,props:{selectedMediaItems:[this.props.baseNode],clickedMediaItem:this.props.baseNode}});return}let s=e.target.tagName==="MEDIA-ITEM"&&e.target?._isPlaceholder?.()===!0,a=!!ye.adminWindow.document.querySelector('[window-id="media-window"]');if(n&&s&&a)return;let l=ye.adminWindow.document.querySelector('button[name="images"]')?.getBoundingClientRect();ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"media",id:"media-window",positionRect:l,uiWindowType:"popover",props:{positionType:"center-under-button",acceptDrops:!0,closeOnSingleClickout:!0,shouldPreventClickout:(f,c)=>{let m=i===r,v=f.tagName==="MEDIA-ITEM"&&f?._isPlaceholder?.()===!0;if(m&&v){let x=f.shadowRoot.elementFromPoint(c.clientX,c.clientY);if(!!(x.closest(".placeholder-ui button")||x.tagName==="BUTTON"&&x.closest(".placeholder-ui")))return!0}return!1}}});break;case"open-backdrop-window":let p=ye.adminWindow.document.querySelector('button[name="backdrop"]')?.getBoundingClientRect();ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"backdrop-settings",id:"page-backdrop-window",positionRect:p,uiWindowType:"popover",props:{positionType:"center-under-button",acceptDrops:!0,closeOnSingleClickout:!0}});break}};componentDidMount(){this.props.baseNode.addEventListener("placeholder-ui",this.handlePlaceholderUIEvent),this.props.baseNode.addEventListener("dragstart",this.onDragStart)}componentWillUnmount(){this.props.baseNode.removeEventListener("placeholder-ui",this.handlePlaceholderUIEvent),this.props.baseNode.removeEventListener("dragstart",this.onDragStart)}componentDidUpdate(e,r){this.props.model?.hash!=e.model?.hash&&!this.props.getPlaceholderUIState()?.is_target&&this.props.setPlaceholderUIState({is_target:!1,visible:this.props.baseNode._isPlaceholder()})}onPointerMove=e=>{};render(e,r){return S(de,{},"placeholder-editor")}},I3=T1});var T3,hp,Lg,_le,Ele,M3=$(()=>{ke();Ze();mt();T3=ve(Ie(),1);Fe();Br();Ur();lp();_r();_1();S3();E3();Zr();P3();A3();sl();fe();ke();he||(hp=new ResizeObserver(function(t){t.forEach(function(e){if(e.contentRect.width==0&&e.contentRect.height==0&e.contentRect.top==0&&e.contentRect.left==0)return;let r=0,i=0,n=0,o=0,s=0,a=0,l=0,p=0,f=0,c=0,m=e.target.tagName==="DIV";if(e.contentBoxSize&&e.borderBoxSize&&!m)e.borderBoxSize.length?(r=e.borderBoxSize[0].blockSize-e.contentBoxSize[0].blockSize,i=e.borderBoxSize[0].inlineSize-e.contentBoxSize[0].inlineSize):(r=e.borderBoxSize.blockSize-e.contentBoxSize.blockSize,i=e.borderBoxSize.inlineSize-e.contentBoxSize.inlineSize);else{let v=window.getComputedStyle(e.target);n=parseFloat(v.getPropertyValue("padding-left"))||0,o=parseFloat(v.getPropertyValue("padding-right"))||0,s=parseFloat(v.getPropertyValue("border-right-width"))||0,a=parseFloat(v.getPropertyValue("border-left-width"))||0,l=parseFloat(v.getPropertyValue("padding-top"))||0,p=parseFloat(v.getPropertyValue("padding-bottom"))||0,f=parseFloat(v.getPropertyValue("border-bottom-width"))||0,c=parseFloat(v.getPropertyValue("border-top-width"))||0,r=l+p+c+f,i=n+o+s+a}Pt(e.target,"elementResize",{padSize:i,vertPadSize:r,horizPadSize:i,width:e.contentRect.width,height:e.contentRect.height,leftPad:n,rightPad:o,leftBorder:s,rightBorder:a,topPad:l,bottomPad:p,bottomBorder:f,topBorder:c},{bubbles:!1})})}));Lg=class extends Mr{constructor(e){super(e),this.state={zoomTemporarilyDisabled:!1,scrollTransitionDisabled:!1,slottedMediaNode:null,placeholderUI:this.isPlaceholder()?{visible:!0,is_target:!1}:null,nativeMediaDimensions:{width:null,height:null},dimensions:{padSize:0,vertPadSize:0,horizPadSize:0,width:0,height:0},mediaDimensions:{padSize:0,vertPadSize:0,horizPadSize:0,width:0,height:0,leftPad:0,rightPad:0,leftBorder:0,rightBorder:0,topPad:0,bottomPad:0,bottomBorder:0,topBorder:0},isVisible:!1,viewportIntersection:{hasLayout:!1,visible:!1,position:"unknown"},isLazyLoadable:!1,loaded:!1},this.uid=T3.default.uniqueId(),this.figureRef=_e(),this.mediaRef=_e(),this.lastMediaRef=_e(),this.figCaptionRef=_e(),this.sizingFrameRef=_e(),this.props.baseNode._setFXFrame=n=>{this.setState({fxFrame:n})},this.props.baseNode._setPlaceholderUIState=this.setPlaceholderUIState,this.props.baseNode._getPlaceholderUIState=this.getPlaceholderUIState,this.props.baseNode._isPlaceholder=this.isPlaceholder,Object.defineProperty(this.props.baseNode,"_size",{get:()=>({width:this.props["dynamic-width"]??this.props.width??this.props.model?.width??this.state.nativeMediaDimensions.width??1600,height:this.props["dynamic-height"]??this.props.height??this.props.model?.height??this.state.nativeMediaDimensions.height??1e3,mediaItemSize:this.state.dimensions,mediaSize:this.state.mediaDimensions}),configurable:!0}),Object.defineProperty(this.props.baseNode,"_nativeMediaDimensions",{get:()=>({width:this.state.nativeMediaDimensions.width??1600,height:this.state.nativeMediaDimensions.height??1600}),configurable:!0}),Object.defineProperty(this.props.baseNode,"_model",{get:()=>this.props.model||null,configurable:!0});let r=this.props.baseNode.onload;Object.defineProperty(this.props.baseNode,"onload",{get:()=>this.onloadCallback,set:n=>{this.onloadCallback=n,this.state.loaded&&n&&this.onLoad()},configurable:!0}),this.props.baseNode.onload=r;let i=this.props.baseNode.onerror;Object.defineProperty(this.props.baseNode,"onerror",{get:()=>this.onErrorCallback,set:n=>{this.onErrorCallback=n},configurable:!0}),this.props.baseNode.onerror=i,this.props.baseNode._disableZoom=n=>{this.setState(o=>o.zoomTemporarilyDisabled===n?null:{zoomTemporarilyDisabled:n})},this.props.baseNode._disableScrollTransition=n=>{this.setState(o=>o.scrollTransitionDisabled===n?null:{scrollTransitionDisabled:n})},this.props.baseNode._forceRedraw=n=>{this.setState({forceRedraw:Math.random()})},this.props.baseNode.getFileType=this.getFileType}isPlaceholder=()=>this.props.hash=="placeholder"||this.props.model?.is_placeholder;handleClick=e=>{if(e?.defaultPrevented)return;let r=e.composedPath();if(r.find(p=>p.tagName==="A"))return;if(this.pointerInteractionType=="mouse"&&!this.props.adminMode&&!this.state.hoveringOverFigure&&!this.state.hasOpaqueBG){e.preventDefault();return}let n=this.props.baseNode.shadowRoot.querySelector("a.sizing-frame"),o=!1,s=window.getSelection();if(s&&s.rangeCount>0&&!this.props.adminMode){let p=s.getRangeAt(0);p&&p.commonAncestorContainer&&!p.collapsed&&this.props.baseNode.contains(p.commonAncestorContainer)&&(o=!0)}if(n&&!o&&!this.props.adminMode){e.stopPropagation(),e.preventDefault(),n.click();return}let a=this.getFileType(),l=this.isZoomable();if((a==="video"||a.startsWith("vimeo")||a.startsWith("youtube"))&&(!this.props.adminMode&&e.detail==1||e.detail==2)&&!this.props.autoplay&&!l){if(r.some(p=>p.nodeName=="VIDEO"||p.nodeName==="IFRAME")&&this.props["browser-default"])return;e.preventDefault(),this.props.baseNode.playing?this.props.baseNode.pause():this.props.baseNode.play();return}!l||o||!r.find(p=>p&&p.classList?.contains("sizing-frame"))||this.props.adminMode||(e.preventDefault(),p1(this.props.baseNode))};isZoomable=()=>this.props["force-quick-view"]||this.props.imageSettings.image_zoom&&!this.props["disable-zoom"]&&!this.props.href&&!this.state.zoomTemporarilyDisabled;getFileType=()=>{let{model:e,src:r,"dynamic-src":i}=this.props;if(r=i||r,this.props["dynamic-filetype"]!==void 0&&this.props["dynamic-filetype"]!==null)return this.props["dynamic-filetype"];let n="none";if(e)e.is_image?n="image":e.is_video?n="video":e.is_url&&(n="url",e.url_type&&!e.url_id?n=e.url_type:e.url_id&&e.url_type&&(n=e.url_type+":"+e.url_id));else if(r){let f=r.toLowerCase();if(f.endsWith(".mov")||f.endsWith(".mp4")||f.endsWith(".webm"))n="video";else if(f.endsWith(".png")||f.endsWith(".webp")||f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".gif")||f.endsWith(".avif")||f.endsWith(".apng")||f.endsWith(".svg"))n="image";else{n="url";var o="",s=/(?:<iframe [^>]*src=")?(?:https?:\/\/(?:[\w]+\.)*vimeo\.com(?:[\/\w:]*(?:\/videos)?)?\/([0-9]+)[^\s]*)"?(?:[^>]*><\/iframe>)?(?:<p>.*<\/p>)?/,p=r.match(s);if(p&&p[0]){let c=p[0].split(/\/|\?h=|&|\?/);for(var a=0;a<c.length;a++)!c[a].includes(":")&&!c[a].includes(".")&&!c[a].includes("vimeo")&&!c[a].includes("=")&&!c[a].includes("video")&&!c[a].includes("showcase")&&!c[a].includes("player")&&c[a].length>3&&(o.length==0?o=c[a]:o+="/"+c[a]);n="vimeo:"+o}var l=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(shorts\/)|(watch\?))\??v?=?([^#\&\?]*).*/,p=r.match(l);p&&(p[7]&&p[7].length==11?(o=p[7],n="youtube:"+o):p[8]&&p[8].length==11&&(o=p[8],n="youtube:"+o))}}return n};onCaptionClick=e=>{this.props.adminMode||e.target.closest("a")&&e.stopPropagation()};render(e,r,i){let{dimensions:n,mediaDimensions:o,viewportIntersection:s,loading:a,nativeMediaDimensions:l,scrollTransitionDisabled:p}=r,{rotation:f,drag:c,"force-visible":m,"dynamic-src":v,adminMode:g,imageSettings:x,pageInfo:_,"dynamic-width":E,"dynamic-height":L,width:O,height:M,baseNode:D,model:P,posterModel:U,href:N,src:F,hash:V,isMobile:q}=e;O=E||O,M=L||M;let J=m??this.state.isVisible,Y=m??this.state.isLazyLoadable,{uid:ie}=this,oe=this.props.scale!==void 0?this.props.scale:q&&x.mobile_image_width_maximize?"100%":x.scale,Z=this.props["limit-by"]!==void 0?this.props["limit-by"]:q&&x.mobile_image_width_maximize?"width":x.limit_by;F=v||F;let K=O??P?.width??l.width??1600,Q=M??P?.height??l.height??1e3,te=ur(oe,Z=="height"?"rem":"%"),ee=Q/K,ue=o.width*ee,le=o.horizPadSize+n.horizPadSize,xe=o.vertPadSize+n.vertPadSize,Re=o.width+o.horizPadSize,Me=(ue+o.vertPadSize)/Re,We=te.join(""),Pe,Ve=null;isNaN(Me)&&(Me=Q/K);let Le=K.toString().trim().endsWith("%"),He=Q.toString().trim().endsWith("%"),it=ur(K,"%"),Je=ur(Q,"%");if(Le&&He)Z==="width"||Z=="height"?(We=`calc(${it[0]*.01} * var(--resize-parent-width, 100%) )`,Ve=`calc( var(--fit-height) * ${Je[0]*.01} )`,Pe="var(--custom-fit-height)"):(We=`calc(${it[0]*te[0]*1e-4} * var(--resize-parent-width, 100%) )`,Ve=`calc( var(--fit-height) * ${Je[0]*te[0]*1e-4} )`,Pe="var(--custom-fit-height)");else if(Z=="height")if(He)Ve=`calc( var(--fit-height) * ${Je[0]*.01} )`,Pe="var(--custom-fit-height)",We=`${it[0]*.01}px`;else{let pt="";te[1]=="%"?pt=`( ${te[0]*.01} * var(--resize-parent-width, 100%) )`:te[1].indexOf("calc(")>-1?(te[1]=te[1].replace(/[\d*\.]+%/g,function(Ai){return`( ${ur(Ai,"%")[0]*.01} * var(--resize-parent-width, 100%) )`}),pt=te[1].replace("calc(","(")):pt=te.join(""),Le?(We=`calc( ${it[0]*.01} * var(--resize-parent-width, 100%) )`,Pe=`calc( ${pt} )`):(We=`calc( ( ${pt} - ${xe}px ) * ( 1 / ${ee} ) + ${le}px )`,Pe=Me*100+"%")}else Z==="width"?Le?(We=`calc( ${it[0]*.01} * var(--resize-parent-width, 100%) )`,Pe=`${Je[0]}px`):(te[1]=="%"?We=`calc(${te[0]*.01} * var(--resize-parent-width, 100%) )`:(te[1].indexOf("calc(")>-1&&(te[1]=te[1].replace(/[\d*\.]+%/g,function(pt){return`( ${ur(pt,"%")[0]*.01} * var(--resize-parent-width, 100%) )`})),We=te.join("")),He?(Ve=`calc( var(--fit-height) * ${Je[0]*.01} )`,Pe="var(--custom-fit-height)"):Pe=Me*100+"%"):Le?(We=`calc(${it[0]*te[0]*1e-4} * var(--resize-parent-width, 100%) )`,Ve=`calc( min( var(--fit-height) * ${te[0]*.01} , ${Je[0]*te[0]*.01}px ) )`,Pe="var(--custom-fit-height)"):He?(We=`calc( min( ${te[0]*.01} * var(--resize-parent-width, 100%) , ${it[0]*te[0]*.01}px ) )`,Ve=`calc(  var(--fit-height) * ${te[0]*Je[0]*1e-4}  )`,Pe="var(--custom-fit-height)"):(We=`calc( ( ( var(--fit-height, 50vh) * ${te[0]/100} ) - ${le}px ) * ( 1 / ${ee} ) + ${le}px )`,Pe=Me*100+"%");let st=this.props.uses||"";st.indexOf("scroll-transition")===-1&&x?.scroll_animation&&this.props["disable-scroll-animation"]===!1&&!this.state.scrollTransitionDisabled&&(st=st+" scroll-transition");let ot=g&&!this.props["dynamic-src"]&&this.state.placeholderUI?.visible===!0?S("div",{className:"placeholder-ui",part:"placeholder-ui",children:S("button",{onMouseDown:pt=>{CargoEditor?.rangy&&(CargoEditor.forcedRange=null,CargoEditor.rangy.getSelection().removeAllRanges(),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor())),pt.stopPropagation(),this.setPlaceholderUIState({is_target:!0})},onMouseEnter:pt=>{this.setPlaceholderUIState({is_target:!0})},onMouseLeave:()=>{this.setPlaceholderUIState({is_target:!1})},onMouseUp:pt=>{pt.preventDefault(),pt.stopPropagation()},onClickCapture:pt=>{pt.preventDefault(),pt.stopPropagation(),CargoEditor.forcedRange=null,CargoEditor.rangy.getSelection().removeAllRanges(),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor());let Ai=!!this.props?.baseNode?.getRootNode()?.host?.classList?.contains("wallpaper"),Ti;Ai?Ti=new CustomEvent("placeholder-ui",{detail:{action:"open-backdrop-window",uid:this.uid,placeholderUI:this.state.placeholderUI}}):Ti=new CustomEvent("placeholder-ui",{detail:{action:"open-images-window",uid:this.uid,placeholderUI:this.state.placeholderUI}}),this.props.baseNode.dispatchEvent(Ti),this.setPlaceholderUIState({is_target:!1})},children:S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",children:[S("polygon",{points:"23.57 13.79 32.34 27.55 8.93 27.55 14.75 19.5 17.02 22.91 23.57 13.79"}),S("circle",{cx:"14.75",cy:"13.15",r:"2.68"})]})})}):null,vt=null,bt=this.getFileType()||"",je=this.isZoomable(),Lt=e.autoplay&&e.muted;switch(!0){case(!Lt&&je&&bt.startsWith("youtube")&&U&&!e["browser-default"]):case(!Lt&&je&&bt.startsWith("vimeo")&&U&&!e["browser-default"]):case(!Lt&&je&&bt==="video"&&U&&!e["browser-default"]):case(je&&bt==="url"&&U):vt=S(cp,{...e,model:U,isZoomable:je,ref:this.mediaRef,onLoad:this.onLoad,isLazyLoadable:Y,renderWidth:o.width,renderHeight:o.height,part:"media",onError:this.onErrorCallback});break;case bt=="video":case bt.startsWith("vimeo:"):case bt.startsWith("youtube:"):vt=S(x3,{...e,baseNode:this.props.baseNode,isZoomable:je,ref:this.mediaRef,onLoad:this.onLoad,visible:J,fileType:bt,isLazyLoadable:Y,renderWidth:n.width,renderHeight:n.height,src:F});break;case bt=="image":vt=S(cp,{...e,isZoomable:je,ref:this.mediaRef,onLoad:this.onLoad,isLazyLoadable:Y,renderWidth:o.width,renderHeight:o.height,part:"media",onError:this.onErrorCallback});break;case bt=="url":vt=S(_3,{...e,loaded:this.state.loaded,onLoad:this.onLoad,ref:this.mediaRef,isLazyLoadable:Y,src:F});break;default:vt=S("div",{ref:this.mediaRef,className:"placeholder",part:"media placeholder",width:"1600",height:"1000",draggable:"true",children:S("svg",{preserveAspectRatio:"none",part:"placeholder-svg",viewBox:"0 0 1600 1600",style:{display:"block",width:"100%",height:"100%"},children:[S("rect",{part:"placeholder-rect"}),S("line",{part:"placeholder-line","vector-effect":"non-scaling-stroke",x1:"0",y1:"0",x2:"1600",y2:"1600",stroke:"rgb(200,200,200)","stroke-width":"1"})]})});break}vt=S(de,{children:[this.state.fxFrame,vt,ot]});let Kt=S("slot",{onSlotChange:this.onMediaSlotChange,name:"custom-media",children:vt},"media-slot-key"),Ir=S(de,{children:[S("style",{id:"media-item",children:`

:host {

	${this.state.forceRedraw?`/* ${this.state.forceRedraw} */`:""}
	${(this.state.hoveringOverFigure||this.state.hasOpaqueBG)&&!g&&N&&N!==""?"cursor: pointer;":""}
	display: inline-flex;
	vertical-align: bottom;
	flex-direction: column; 
	position: relative;

	width: var(--resize-parent-width, 100%);
	max-width: ${We||"100%"};
	${Ve?`--custom-fit-height: ${Ve};`:""}
	transform-origin: center center;
	margin: 0;
	padding: 0;
	z-index: var(--z-index, initial);    
}


${g&&this.state.placeholderUI?.visible===!0?`
	:host {
		--editor-overlay-accent: rgb(0, 100, 225);
	}

	.placeholder-ui {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		display: grid;
		place-items: center;
		z-index: 4;
		box-shadow: ${this.state.placeholderUI?.is_target===!0?"inset 0 0 0 2px var(--editor-overlay-accent)":"none"};
		container-type: size;
		container-name: placeholder-size;
		${this.state.placeholderUI?.is_target===!0?"background-color: rgba(0, 100, 225, .1)":""};
	}

	${this.state.placeholderUI.skipOpacityTransition?"":`@keyframes fadeIn {
		from {opacity: 0;}
		to {opacity: 1;}
	}`}
	.placeholder-ui button {
		width: clamp(60px, 11cqw, 120px);
		aspect-ratio: 1/1;
		padding: 0;
		border-radius: 1cqw;
		pointer-events: all;
		background: ${this.state.placeholderUI?.is_target===!0?"var(--editor-overlay-accent)":"rgba(255,255,255,0.6)"};
		backdrop-filter: blur(8px);
  		-webkit-backdrop-filter: blur(8px);
		border: none !important;
		box-shadow: ${this.state.placeholderUI?.is_target===!0?`inset 0px 0px 0px 0.5px rgba(255, 255, 255, 0.1),
			  0 0 0 .5px rgba(0,0,0, 0)`:`inset 0px 0px 0px 0.5px rgba(255, 255, 255, 0.2),
			  0 0 0 .5px rgba(0,0,0, 0.15)`};
		display: flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		
		${this.state.placeholderUI.skipOpacityTransition?"opacity: 1;":"opacity: 0; animation: fadeIn 500ms cubic-bezier(0.25, 0.1, 0.25, 1) 0.3s forwards;"}
	}
	.placeholder-ui svg {
		width: 100%;
		height: 100%;
	}
	.placeholder-ui svg rect {
		fill: none;
	}
	.placeholder-ui svg polygon,
	.placeholder-ui svg circle {
		fill: none;
		stroke: ${this.state.placeholderUI?.is_target===!0?"#eee":"rgba(0,0,0,.7)"};
		stroke-width: 1px;
		vector-effect: non-scaling-stroke;
	}
	@container placeholder-size (max-width: 30vw) {
		.placeholder-ui button {
			border-radius: 1.5cqw;
			width: clamp(60px, 13cqw, 120px);
		}
	}
	@container placeholder-size (max-width: 20vw) {
		.placeholder-ui button {
			border-radius: 2cqw;
			width: clamp(50px, 19cqw, 120px);
		}
	}
	@container placeholder-size (max-width: 10vw) {
		.placeholder-ui button {
			border-radius: 4cqw;
			width: clamp(40px, 25cqw, 120px);
		}
	}
	@container placeholder-size (max-width: 50px) or (max-height: 50px) {
		.placeholder-ui button {
			display: none;
		}
	}
`:`
	.placeholder-ui {
		display: none;
	}
`}

:host, * {
	box-sizing: border-box;
}
a {
	cursor: inherit;
}

${(this.state.hoveringOverFigure||this.state.hasOpaqueBG)&&!g&&je?`[part*="media"]:active {
    opacity: 0.7;
}`:""}

${(this.state.hoveringOverFigure||this.state.hasOpaqueBG)&&!g&&N?`:host(:active) {
    opacity: 0.7;
}`:""}

figure {
	flex-direction: column;
	position: relative;
	display: flex;
	width: 100%;
	margin: 0;
	padding: 0;
	z-index: 2;
}

::slotted(figcaption){
	-webkit-user-select: text;	
	user-select: text;
	width: 100%;
}

:host([image-fit="fit"]) {
	--object-fit: contain;
}
:host([image-fit="fill"]) {
	--object-fit: cover;
}
:host([image-fit="stretch"]) {
	--object-fit: fill;
}

[part*="media"],
[part*="video"],
[part*="poster"] {
	object-fit: var(--object-fit, cover);
}

[part*="media"]:-webkit-full-screen,
[part*="media"]:fullscreen,
[part*="video"]:-webkit-full-screen,
[part*="video"]:fullscreen {
	object-fit: contain!important;
}

.sizing-frame {
	display: block;
	width: 100%;
	flex-grow: 1;
	height: 0;
	padding-bottom: var(--frame-padding, ${Pe});
	position: relative;
}

.frame {
	display:contents;
}

/* for images and custom media */
::slotted([slot="custom-media"]),
[part*="media"] {
	object-position: center center;
	display: block;
	margin: 0;
	width: 100%;
	min-width: 100%;
	min-height: 100%;
	height: 100%;
	position: absolute;
	overflow: clip;
	overflow-clip-margin: content-box;
	inset: 0;
}

/*
	for URL fileType and default setup for iframe-videos
*/
iframe {
	opacity: 0;
	pointer-events: ${!g&&!this.props.href&&!je?"auto":"none"};
}

iframe.loaded {
	opacity: 1;
}

/* enable proper padding cropping for videos, in most scenarios */
.video-player-crop {
	all: inherit;
	filter: unset;
	will-change: unset;
	width: unset;
	height: unset;
	padding: 0;
	border-left-width: ${o.leftPad+o.leftBorder}px;
	border-right-width: ${o.rightPad+o.rightBorder}px;
	border-top-width: ${o.topPad+o.topBorder}px;
	border-bottom-width: ${o.bottomPad+o.bottomBorder}px;
	top: ${-o.topBorder}px;
	left: ${-o.leftBorder}px;
	right: ${-o.rightBorder}px;
	bottom: ${-o.bottomBorder}px;

	min-width: unset;
	min-height: unset;

	margin: auto;
	border-color: transparent;
	background: transparent;
}

/* for video filetype */
[part*="video"], [part*="poster"] {
	object-position: 50% 50%;	
	display: block;
	margin: 0;
	width: 100%;
	height: 100%;
	position: absolute;
	inset: 0;
}

[part*="video"] iframe[part*="iframe"] {
	opacity: 1;
}

[part*="poster"] {
	object-fit: cover;
	z-index: 2;
	opacity: 0;
}
${e["browser-default"]?`[part*="poster-playing"],
[part*="poster-paused"]{
	pointer-events:none;
}
`:""}	
[part*="poster-stopped"]{
	opacity: 1;
}
${a?`[part*="media"] {
	opacity: 0;
}`:""}

${g?`
::slotted(video[slot="custom-media"]),
::slotted(iframe[slot="custom-media"]){
	pointer-events:none;
}

[part*="media"] iframe {
	pointer-events:none!important;
}

`:`
[part*="media"].image-zoom {
	cursor: -webkit-zoom-in;
	cursor: -moz-zoom-in;
	cursor: zoom-in;
}	
`}

${_.isEditing?`
:host, * {
	-webkit-user-select: text;
	user-select: text;	
}
`:""}

				`}),S(aa,{scrollContext:this.props.scrollContext,uses:st,visibility:s,onLazyLoadChange:this.onlazyLoadChange,adminMode:g,customElementMode:!0,baseNode:D,isLazyLoadable:Y,pageInfo:_,figureElement:this.figureRef.current,sizingFrameElement:this.sizingFrameRef.current,children:S("figure",{draggable:this.props.adminMode?"true":null,part:"figure",ref:this.figureRef,onPointerEnter:this.onFigurePointerEnter,onPointerCancel:this.onFigurePointerCancel,onPointerLeave:this.onFigurePointerLeave,children:[S("div",{part:"frame",className:"frame",children:this.props.href!==void 0?S("a",{ref:this.sizingFrameRef,className:"sizing-frame",part:"link sizing-frame",href:this.props.href,rel:this.props.rel,target:this.props.target,"data-tags":this.props["data-tags"],children:Kt}):S("div",{ref:this.sizingFrameRef,className:"sizing-frame",part:"sizing-frame",children:Kt})}),S("slot",{name:"caption",onSlotChange:this.onCaptionSlotChange})]})},"media-host"),_.isEditing&&g&&Ot(C3,{...this.props,zoomTemporarilyDisabled:this.state.zoomTemporarilyDisabled,fileType:bt,limitBy:Z,width:O,height:M,rotation:f||0,scale:oe,scrollContext:this.props.scrollContext,key:`media-item-editor-${this.uid}`,baseNode:D,nativeMediaDimensions:this.state.nativeMediaDimensions,figCaptionElement:this.figCaptionRef.current,sizingFrameElement:this.sizingFrameRef.current,figureElement:this.figureRef.current,mediaElement:this.mediaRef.current,size:this.props.baseNode._size,uid:this.uid}),g?Ot(I3,{...this.props,key:`placeholder-editor-${this.uid}`,baseNode:D,setPlaceholderUIState:this.setPlaceholderUIState,getPlaceholderUIState:this.getPlaceholderUIState,sizingFrameElement:this.sizingFrameRef.current,figureElement:this.figureRef.current,mediaElement:this.mediaRef.current,size:this.props.baseNode._size,uid:this.uid}):null]},"media-item-fragment");return rt(Ir,D.shadowRoot)}onCaptionSlotChange=e=>{let r=e.target.assignedElements()?.[0];r?(this.figCaptionRef.current=r,this.setState({forceRedraw:Math.random()})):this.figCaptionRef.current=null};onViewportIntersectionChange=e=>{this.state.viewportIntersection?.position!==e.position?this.setState({isVisible:e.position==="inside",viewportIntersection:e}):(this.state.viewportIntersection.hasLayout!==e.hasLayout||this.state.viewportIntersection.visibility!==e.visibility)&&this.setState({viewportIntersection:e})};onLazyloadIntersectionChange=e=>{let r=e.position==="inside";this.state.isLazyLoadable!==r&&this.setState({isLazyLoadable:r})};onMediaSlotChange=e=>{let r=e.target.assignedNodes();r[0]?(this.setState({nativeMediaDimensions:{width:parseFloat(r[0].getAttribute("width"))||null,height:parseFloat(r[0].getAttribute("height"))||null},slottedMediaNode:r[0]}),this.mediaRef.current=r[0]):this.setState({nativeMediaDimensions:{width:null,height:null},slottedMediaNode:null})};bindMediaListeners=e=>{if(!e)return;let r=parseFloat(e.getAttribute("width"))||null,i=parseFloat(e.getAttribute("height"))||null;r&&i&&this.state.nativeMediaDimensions.width!==r&&this.state.nativeMediaDimensions.height!==i&&this.setState({nativeMediaDimensions:{width:r,height:i}}),Mt(e,"elementResize",this.onMediaResize),hp.observe(e)};unbindMediaListeners=e=>{e&&(this.setState({nativeMediaDimensions:{width:null,height:null}}),kt(e,"elementResize",this.onMediaResize),hp.unobserve(e))};setPlaceholderUIState=e=>{this.setState(r=>({placeholderUI:{...{visible:r.placeholderUI?.visible??!1,is_target:r.placeholderUI?.is_target??!1,skipOpacityTransition:r.placeholderUI?.skipOpacityTransition??!1},...e}}))};getPlaceholderUIState=()=>this.state.placeholderUI?this.state.placeholderUI:{};componentDidMount(){if(he)return;this.props.adminMode||(this.isZoomable()?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable"),this.props.href!==void 0?this.props.baseNode.classList.add("linked"):this.props.baseNode.classList.remove("linked"));let e=this.props["dynamic-src"]||this.props.modelSrc||this.props.src;this.props.hash==="placeholder"&&!e&&!this.props.baseNode.hasAttribute("hash")&&this.onLoad(),Mt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),Mt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),Mt(this.props.baseNode,"elementResize",this.onResize),this.props.baseNode.addEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.addEventListener("click",this.handleClick),this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.bindMediaListeners(this.mediaRef.current),this.lastMediaRef.current=this.mediaRef.current,hp.observe(this.props.baseNode)}componentWillUnmount(){he||(cancelAnimationFrame(this.itemResizeAfterModelChange),kt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),kt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),kt(this.props.baseNode,"elementResize",this.onResize),this.props.baseNode.removeEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.removeEventListener("dragstart",this.onDragStart),this.props.baseNode.removeEventListener("click",this.handleClick),hp.unobserve(this.props.baseNode),this.unbindMediaListeners(this.mediaRef.current))}componentDidUpdate(e,r){(this.props.hash!==e.hash||this.props.src!==e.src)&&this.setState({nativeMediaDimensions:{width:null,height:null}});let i=this.getFileType();(i.startsWith("vimeo")||i.startsWith("youtube"))&&(e.src!==this.props.src||e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"]||e.loop!==this.props.loop||e.muted!==this.props.muted)&&this.setState({loaded:!1}),(this.props.imageSettings.image_zoom!==e.imageSettings.image_zoom||this.props["disable-zoom"]!==e["disable-zoom"]||this.state.zoomTemporarilyDisabled!==r.zoomTemporarilyDisabled)&&(this.isZoomable()?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable")),this.props.href!==e.href&&(this.props.href!==void 0?this.props.baseNode.classList.add("linked"):this.props.baseNode.classList.remove("linked")),this.props.itemLoad!==e.itemLoad&&this.props.itemLoad&&this.state.loaded&&this.onLoad(),this.props.itemResize&&!(this.props.baseNode.slot&&!this.props.baseNode.assignedSlot)&&(this.props.model&&e.model&&e.model.hash!==this.props.model.hash||this.props.width!==e.width||this.props.height!==e.height||this.props["dynamic-width"]!==e["dynamic-width"]||this.props["dynamic-height"]!==e["dynamic-height"]||this.state.nativeMediaDimensions.width!==r.nativeMediaDimensions.width||this.state.nativeMediaDimensions.height!==r.nativeMediaDimensions.height||this.state.dimensions.width!=r.dimensions.width||this.state.dimensions.height!=r.dimensions.height||this.state.dimensions.padSize!=r.dimensions.padSize||this.state.mediaDimensions.padSize!=r.mediaDimensions.padSize)&&this.props.itemResize(this.props.baseNode._size,this.props.baseNode),e.hash!=="placeholder"&&this.props.hash==="placeholder"&&this.onLoad(),this.lastMediaRef.current!==this.mediaRef.current&&(this.unbindMediaListeners(this.lastMediaRef.current),this.bindMediaListeners(this.mediaRef.current),this.lastMediaRef.current=this.mediaRef.current)}onResize=e=>{this.setState({dimensions:{...e}})};onMediaResize=e=>{(e.width!==this.state.mediaDimensions.width||e.horizPadSize!==this.state.mediaDimensions.horizPadSize||e.vertPadSize!==this.state.mediaDimensions.vertPadSize||e.height!==this.state.mediaDimensions.height)&&this.setState({mediaDimensions:{...e}})};onPointerEnter=e=>{if(this.props.adminMode)return;let r=getComputedStyle(this.props.baseNode),i=r.getPropertyValue("background-image"),n=!1;if(i!="none")n=!0;else switch(r.getPropertyValue("background-color")){case"rgba(0, 0, 0, 0)":case"rgba(0 0 0 0)":case"none":case"transparent":n=!1;break;default:n=!0;break}this.setState({hasOpaqueBG:n})};onFigurePointerEnter=e=>{this.pointerInteractionType=e.pointerType,this.setState({hoveringOverFigure:!0})};onFigurePointerCancel=e=>{this.setState({hoveringOverFigure:!1})};onFigurePointerLeave=e=>{this.setState({hoveringOverFigure:!1})};onDragStart=e=>{typeof this.props.itemDragStart=="function"&&this.props.itemDragStart(e);let r=this.props.baseNode.querySelector("figcaption");this.props.baseNode.contains(e.target)&&(r&&!r.contains(e.target)||!r)&&this.props.adminMode&&this.props.pageInfo.isEditing&&e.dataTransfer.setData("media-drag","true")};onLoad=e=>{this.setState(r=>e&&(e.width!==r.nativeMediaDimensions.width||e.height!==r.nativeMediaDimensions.height)?{nativeMediaDimensions:{...e},loaded:!0}:{loaded:!0},()=>{this.onloadCallback&&this.onloadCallback(this.props.baseNode),this.props.itemLoad&&this.props.itemLoad(this.props.baseNode)})}};Lg.defaultProps={scale:void 0,"limit-by":void 0,"force-quick-view":!1,"disable-zoom":!1,"disable-scroll-animation":!1,width:void 0,height:void 0,hash:"placeholder",src:void 0,rotation:0,model:null,"image-fit":"fill","play-on":"click",autoplay:!1,muted:!1,loop:!1,"browser-default":!1,"playback-rate":1};_le=qt(Ue((t,e)=>{let r=e["dynamic-hash"]||e.hash||null,i=r?$e.getMediaByHash(t)[r]:null;e.model&&(i=e.model,r=i.hash),!r&&e["dynamic-src"]==null&&e.src==null&&(r="placeholder");let n=e.poster||null,o=null,s;return e.posterModel?o=e.posterModel:n&&!n.includes?.(".")&&(o=$e.getMediaByHash(t)[n]||null),{hash:r,posterModel:o,model:i,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,imageSettings:{limit_by:"width",scale:"100%",...t.siteDesign.images}}},null)(Lg)),Ele=["itemResize","itemLoad","itemDragStart","model","dynamic-hash","dynamic-filetype","dynamic-src","dynamic-width","dynamic-height","rotation","limit-by","disable-zoom","disable-scroll-animation","scale","hash","src","force-visible","alt","href","rel","target","tag-text","autoplay","muted","loop","poster","play","browser-default","playback-rate","image-fit","width","height"];ar(_le,"media-item",Ele)});var Cle,ju,Fg=$(()=>{Cle=ve(Ie(),1);Fe();ju=(t,e,r)=>{let i=(he?1:window.devicePixelRatio)>1,n=r/t-e*((t-1)/t),o=[],s=i?Math.round(e*2)/2:Math.round(e);for(let a=0;a<t;a++){let l={left:n*a+e*a,right:n*a+e*a+n};a<t-1?l.right=i?Math.round(l.right*2)/2:Math.round(l.right):l.right=r,a>0&&(l.left=o[a-1].right+s),o.push(l)}return{columnAndGutterMap:o,columnWidth:n,gutterPixelWidth:s,halfPixels:i}}});var dDe,M1,R3,k3=$(()=>{ke();dDe=ve(Ie(),1);Dt();Bu();fe();M1=class extends me{constructor(e){super(e)}render(e,r){let{galleryInstance:i,"vertical-align":n}=e,o=!!e?.["blog-gallery"],s=o?!0:!!this.props.disableResize,a=o?!0:!!e?.["disable-button"];return S(ko,{...e,disabledFigureOptions:["scale"],gallerySpecificAttributes:this.props.gallerySpecificAttributes,mediaItemEditorInfo:{disableResize:s,disableButton:a,afterScaleChange:this.afterScaleChange,beforeScaleChange:this.spanResize,whileScaleChange:this.spanResize},galleryInstance:i,onCleanUp:(l,p,f,c,m,v)=>{f.forEach(g=>{g.getAttribute("grid-vertical-align")===n&&g.removeAttribute("grid-vertical-align"),g.getAttribute("grid-span")===1&&g.removeAttribute("grid-span")}),p.forEach(g=>{g&&(g.classList.remove("last-column"),g.classList.remove("last-row"),g.classList.remove("orphaned-item"))}),this.props.onCleanUp&&this.props.onCleanUp(l,p,f,c,m,v)}})}spanResize=(e,r)=>{let i=this.convertWidthToSpans(r);return{...r,displayScale:i>1?i+" columns":i+" column"}};afterScaleChange=(e,r)=>{let i=this.convertWidthToSpans(r);i===1?e.removeAttribute("grid-span"):e.setAttribute("grid-span",i),this.props.galleryComponent.onItemResize()};convertWidthToSpans=e=>{let{columnAndGutterMap:r}=this.props,i=r.findIndex((n,o)=>{let s=r[o+1]?.left||9e9,a=n.right-n.left;return e.width>=n.left+a*.5&&e.width<=s+a*.5})+1;return Math.max(1,i)}},R3=M1});var zg,oo,Bg,R1,Ug=$(()=>{ke();Ze();mt();la();qu();Fe();Fg();Uu();Ur();qr();k3();zg=ve(Ie(),1);Zr();fe();oo={name:"grid",displayName:"Grid",tagName:"GALLERY-GRID",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"Spans",name:"grid-span",type:"scrubber",allowUnclampedTextEntry:!1,value:1,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Vertical Align",name:"grid-vertical-align",type:"radio",value:"inherit",inheritsFrom:"vertical-align",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]}],options:[{labelName:"Columns",name:"columns",type:"scrubber",allowUnclampedTextEntry:!1,value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{vw:30,vh:30,vmax:30,vmin:30,rem:20,em:20,px:300,etc:100},step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Vertical Align",name:"vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Horizontal Align",name:"horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]}],mobileOptions:[{labelName:"Columns",name:"mobile-columns",allowUnclampedTextEntry:!1,type:"scrubber",value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]}]};oo.mediaItemDefaults=ht(oo.mediaItemOptions);oo.defaults=ht(oo.options);oo.mobileDefaults=ht(oo.mobileOptions);Bg=class extends me{constructor(e){super(e),this.state={isMobile:nt.data.mobile.active,sizeIncrement:0,elWidth:1e3,gutterWidth:0,gutterHeight:0,hasSizes:!1,renderLimit:250},this.uid=zg.default.uniqueId(),this.paginationWatcherRef=_e(),this.paginationObserver=new IntersectionObserver(this.requestPagination,{root:this.props.scrollContext.scrollingElement===window?document:this.props.scrollContext.scrollingElement,rootMargin:screen.height*2+"px",threshold:[0,1]})}requestPagination=async e=>{if(this.isIntersecting=e[0].isIntersecting,!(this.isPaginating||this.state.renderLimit>=this.getMediaItems().length)){for(this.isPaginating=!0;this.isIntersecting;){let r=this.state.renderLimit+100;if(this.setState({renderLimit:r}),r>=this.getMediaItems().length)break;await new Promise(i=>setTimeout(i,250))}this.isPaginating=!1}};getMediaItems(){return Array.from(this.props.baseNode.children).filter(e=>e.nodeName=="MEDIA-ITEM")}render(e,r){let{adminMode:i,baseNode:n,pageInfo:o}=e,{isMobile:s,gutterWidth:a,gutterHeight:l,hasSizes:p}=r,{elWidth:f}=r;p||(f=this.props.baseNode.offsetWidth);let c=this.state.isMobile&&this.props["mobile-vertical-align"]!==void 0?this.props["mobile-vertical-align"]:this.props["vertical-align"];this.props.verticalAlign&&(c=this.props.verticalAlign);let m=this.state.isMobile&&this.props["mobile-columns"]!==void 0?this.props["mobile-columns"]:this.props.columns;m=Math.max(1,parseInt(m))||1;let g=(this.state.isMobile&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter).split(" "),x=(g.length>1,g[0]);x=ur(x,"rem"),x[1]=="rem"&&s&&(x=["","calc( var(--mobile-padding-offset, 1) * "+x.join("")+" )"]);let _=g.length>1?g[1]:g[0];_=ur(_,"rem"),_[1]=="rem"&&s&&(_=["","calc( var(--mobile-padding-offset, 1) * "+_.join("")+" )"]);let{columnAndGutterMap:E,columnWidth:L,gutterPixelWidth:O}=ju(m,a,f),M=this.getMediaItems(),D=[],P=0,U=0,N=s&&!isNaN(parseInt(this.props["mobile-columns"]))&&parseInt(this.props["mobile-columns"])!==parseInt(this.props.columns);M.forEach((Y,ie)=>{if(ie>this.state.renderLimit)return;D[P]||(D[P]=[]);let oe=N?1:parseInt(Y.getAttribute("grid-span"))||1;U%m+oe>m&&(oe=m-U%m);let Z=Y.getAttribute("grid-vertical-align")||null;D[P].push({index:ie,spans:oe,hasOrphans:!1,verticalAlign:Z,el:Y}),U=U+oe,U%m==0&&P++,U%m!=0&&ie==M.length-1&&(D[D.length-1].hasOrphans=!0)});let F=M.length%m,V=[],q=[];D.forEach((Y,ie)=>{let oe=zg.default.sumBy(Y,ue=>ue.spans),Z=0,K=[],Q=0,te=0,ee=Y.map((ue,le)=>{let xe=ue.spans,Re=ue.el._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0,horizPadSize:0,vertPadSize:0},mediaItemSize:{width:0,height:0,padSize:0,vertPadSize:0,horizPadSize:0}},be=Z,Me=Z+xe+-1,We=L*xe+a*(xe-1),Pe=(We+-Re.mediaItemSize.horizPadSize+-Re.mediaSize.horizPadSize)/Re.width||1,Ve=Math.round(Re.height*Pe+Re.mediaSize.vertPadSize)||0;We=E[Me].right-E[be].left,Z+=xe,Q=Math.max(Q,Ve);let Le={},He="";return We<0?(Ve=0,O=0,He+=`
					--grid-width: 0px;
					--grid-gutter-width: ${We+O}px;`):He+=` --grid-width: ${We}px;`,Le.orphanedItem=Y.hasOrphans,le===Y.length-1?(Le.lastColumn=!0,ue.index<M.length-1&&(He=` --grid-width: ${f-te}px;`),te=0):(le==0&&(Le.firstColumn=!0),te=te+We+a),ie==D.length-1&&(Le.lastRow=!0),Le.gridItemPixelHeight=Ve,Le.gridItemPixelWidth=We,Le.gridWidthStyle=He,Le});var ae=zg.default.maxBy(ee,ue=>ue.gridItemPixelHeight);Q=ae.gridItemPixelHeight,Y.forEach((ue,le)=>{let xe=ee[le],Re=0,be=c;switch(ue.verticalAlign){case"top":case"center":case"bottom":be=ue.verticalAlign;break}switch(be){case"top":Re=0;break;case"center":Re=(Q-xe.gridItemPixelHeight)*.5;break;case"bottom":Re=Q-xe.gridItemPixelHeight;break}let Me=`margin-top: ${Re}px; --frame-padding: ${xe.gridItemPixelHeight}px; ${xe.gridWidthStyle}`,We=ie==0?" first-row":xe.lastRow?" last-row":"",Pe=xe.firstColumn?" first-in-row":xe.lastColumn?" last-in-row":"",Ve="row-"+ie+"-"+ue.index+We+Pe;V.push({slot:Ve,itemResize:this.onItemResize,drag:void 0,itemDragStart:void 0,"limit-by":null}),q.push({slot:Ve,style:Me,itemStatuses:xe})})}),M.forEach((Y,ie)=>{let oe=V[ie]||{slot:null},Z=Y._props||{};No(Y,{...Z,...oe},Z,!1,!1)});let J=[];return D.forEach((Y,ie)=>{J.push(S("div",{part:ie==0?"first-row":ie===D.length-1?"last-row":"row",className:`row ${Y.hasOrphans?"has-orphans":""}`,children:Y.map(oe=>S("slot",{name:V[oe.index].slot},"slot-"+ie+"-"+oe.index))},"row-"+ie))}),S(de,{children:[this.props.children,rt(S(de,{children:[S("style",{children:`
						:host {
							display: block;
							width: var(--resize-parent-width, 100%);
							max-width: 100%;
							position: relative;							
			 				--grid-gutter-width: ${O}px;
							--grid-gutter-height: ${l}px;
							--grid-columns: ${m};
							margin-top: calc(var(--gutter-expand, 0) * ${l}px );	
						}				

						* {
							box-sizing: border-box;
						}

						${q.map((Y,ie)=>`::slotted(media-item[slot="${Y.slot}"]) {
								${Y.style}
								${Y.itemStatuses.lastColumn&&!Y.itemStatuses.orphanedItem?"flex-grow: 1; --object-fit: fill;":""}
								${Y.itemStatuses.lastColumn?"":"margin-right: var(--grid-gutter-width);"}
								${Y.itemStatuses.lastRow?"":"margin-bottom: var(--grid-gutter-height);"}
							} `).join("")}
								

						.row {
							max-width: ${f}px;
						    align-items: flex-start;
						    justify-content: flex-start;
							position: relative;
							display: flex;
							flex-direction: row;
							flex-wrap: nowrap;					
							width: 100%;
							clear: both;
						}				
		
						.row.has-orphans {
						    justify-content: flex-start;
						}

						${s&&e["mobile-horizontal-align"]?`
							:host([mobile-horizontal-align="left"]) .row.has-orphans {
								justify-content: flex-start;
							}
			
							:host([mobile-horizontal-align="center"]) .row.has-orphans {
								justify-content: center;
							}
			
							:host([mobile-horizontal-align="right"]) .row.has-orphans {
								justify-content: flex-end;
							}
						`:`
							:host([horizontal-align="left"]) .row.has-orphans {
								justify-content: flex-start;
							}
			
							:host([horizontal-align="center"]) .row.has-orphans {
								justify-content: center;
							}
			
							:host([horizontal-align="right"]) .row.has-orphans {
								justify-content: flex-end;
							}
						`}
		
						:host([hidden]) {
							display: none;
						}
		
						::slotted(media-item) {
							${i?"pointer-events: auto;":""}
							position: relative;
						    display: flex;
						    max-width: 100%;   
						    flex-grow: 0;
						    flex-shrink: 0;
						    flex-basis: var(--grid-width);
						    width: var(--grid-width);
						}
		

		
					`}),S(Ji,{values:{elWidth:"100%",gutterWidth:x.join(""),gutterHeight:_.join("")},onResize:this.onResize}),i&&o.isEditing&&!he&&S(R3,{...e,disableResize:N,gallerySpecificAttributes:["grid-span","grid-vertical-align"],galleryInstance:n,galleryComponent:this,columnAndGutterMap:E}),J,S("div",{ref:this.paginationWatcherRef,class:"pagination-watcher"})]}),this.props.baseNode.shadowRoot)]})}onMobileChange=e=>{this.setState({isMobile:e})};componentDidMount(){nt.on("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.observe(this.paginationWatcherRef.current)}componentWillUnmount(){nt.off("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.unobserve(this.paginationWatcherRef.current)}onItemResize=e=>{this.setState(r=>({sizeIncrement:r.sizeIncrement+1}))};onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n.hasSizes=!0,n})}};Bg.defaultProps={"show-tags":!0,"show-title":!0,columns:oo.defaults.columns.value,gutter:"2rem","vertical-align":oo.defaults["vertical-align"].value,"horizontal-align":oo.defaults["horizontal-align"].value};R1=qt(Oo(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Bg)));ar(R1,"gallery-grid",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","columns","gutter","mobile-columns","mobile-gutter","vertical-align","horizontal-align","mobile-horizontal-align","mobile-vertical-align"])});var DDe,k1,N3,O3=$(()=>{ke();DDe=ve(Ie(),1);Dt();Bu();fe();k1=class extends me{constructor(e){super(e)}render(e,r){let{galleryInstance:i,gutterWidth:n,elWidth:o,elHeight:s,disabledAttributes:a}=e;return S(ko,{...e,dragIndicationType:"columns",gallerySpecificAttributes:this.props.gallerySpecificAttributes,galleryInstance:i,mediaItemEditorInfo:{disableResize:this.props.disableResize,disableButton:!1,afterScaleChange:this.afterScaleChange,beforeScaleChange:this.spanResize,whileScaleChange:this.spanResize},disabledAttributes:a})}spanResize=(e,r)=>{let i=this.convertWidthToSpans(r);return{...r,displayScale:i>1?i+" columns":i+" column"}};afterScaleChange=(e,r)=>{let i=this.convertWidthToSpans(r);i===1?e.removeAttribute("columnized-span"):e.setAttribute("columnized-span",i),this.props.galleryComponent.onItemResize()};convertWidthToSpans=e=>{let{columnAndGutterMap:r}=this.props,i=r.findIndex((n,o)=>{let s=r[o+1]?.left||9e9,a=n.right-n.left;return e.width>=n.left+a*.5&&e.width<=s+a*.5})+1;return Math.max(1,i)}},N3=k1});var N1,ws,qg,Ple,O1=$(()=>{ke();Ze();mt();la();Fe();Fg();Uu();qu();Ur();O3();qr();N1=ve(Ie(),1);Zr();fe();ws={name:"columnized",displayName:"Columnized",tagName:"GALLERY-COLUMNIZED",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"Column Span",name:"columnized-span",allowUnclampedTextEntry:!1,type:"scrubber",value:1,min:1,max:11,step:1,numberOnlyMode:!0}],options:[{labelName:"Columns",name:"columns",type:"scrubber",allowUnclampedTextEntry:!1,value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{vw:30,vh:30,vmax:30,vmin:30,rem:20,em:20,px:300,etc:100},step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]}],mobileOptions:[{labelName:"Columns",name:"mobile-columns",allowUnclampedTextEntry:!1,type:"scrubber",value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]}]};ws.mediaItemDefaults=ht(ws.mediaItemOptions);ws.defaults=ht(ws.options);ws.mobileDefaults=ht(ws.mobileOptions);qg=class extends me{constructor(e){super(e),this.state={elWidth:1e3,gutterWidth:0,gutterHeight:0,isMobile:nt.data.mobile.active,sizeIncrement:0,hasSizes:!1}}render(e,r){let{gutterWidth:i,gutterHeight:n,isMobile:o,hasSizes:s}=r,{baseNode:a,adminMode:l,pageInfo:p}=e,{elWidth:f}=r;s||(f=this.props.baseNode.offsetWidth);let m=(this.state.isMobile&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter).split(" "),v=(m.length>1,m[0]);v.includes("rem")&&o&&(v="calc( var(--mobile-padding-offset, 1) * "+v+" )");let g=m.length>1?m[1]:m[0];g.includes("rem")&&o&&(g="calc( var(--mobile-padding-offset, 1) * "+g+" )");let x=this.state.isMobile&&this.props["mobile-columns"]!==void 0?this.props["mobile-columns"]:this.props.columns;x=Math.max(1,parseInt(x))||1;let{columnAndGutterMap:_,columnWidth:E,gutterPixelWidth:L,halfPixels:O}=ju(x,i,f),M=Array.from(a.children).filter(Z=>Z.tagName=="MEDIA-ITEM"),D=[],P=[],U=[],N=[],F=0;F=(f-(x-1)*i)/x;for(let Z=0;Z<Math.min(M.length,x);Z++)D[Z]=[],N[Z]=[];for(let Z=0;Z<x;Z++)P[Z]={height:0,marginTop:-i,index:Z};let V=!0,q=0,J=0;for(q=0;q<12;){let Z=parseInt(M[J]?.getAttribute("columnized-span"))||1;if(q=q+Z,q>=x){q=x,V=!1;break}J++}let Y=[],ie=o&&!isNaN(parseInt(this.props["mobile-columns"]))&&parseInt(this.props["mobile-columns"])!==parseInt(this.props.columns),oe=[];M.forEach((Z,K)=>{let Q=ie?1:Math.min(parseInt(Z.getAttribute("columnized-span"))||1,x);Q=Math.min(Q,M.length);let te=-1,ee=N1.default.minBy(P,ot=>{te++;let vt=P.slice(te+1,te+Q).map(je=>je.height);if(vt.length+1<Q)return 9e9;let bt=ot.height==0?0:Math.abs((te+(te%2==0?.25:.75))*2-x);return N1.default.mean([ot.height,...vt])+bt}),ae=`column-${ee.index}-slot-${K}`,ue=ee.height;ee.index+Q>x&&(Q=x-ee.index),U[ee.index]=K;let le=0,xe=null,Re=E*Q+i*(Q-1),be=Z._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};le=be.mediaItemSize.height+be.mediaItemSize.padSize;let Me=ee.index,We=ee.index+Q+-1;Re=_[We].right-_[Me].left,Re=Math.max(0,Re);let Pe=(Re+-be.mediaItemSize.padSize+-be.mediaSize.padSize)/be.width;xe=O?Math.round((be.height*Pe+be.mediaSize.padSize)*2)/2||0:Math.round(be.height*Pe+be.mediaSize.padSize)||0;let Ve=ee,Le=ee.height;for(let ot=1;ot<Q;ot++){let vt=ee.index+ot;P[vt].height>=Le&&(Ve=P[vt],Le=P[vt].height)}let He=Ve.height,it=Ve.height+be.mediaItemSize.height+be.mediaItemSize.padSize+i;for(let ot=0;ot<Q;ot++){let vt=ee.index+ot;ot===0?(P[vt].marginTop=P[vt].marginTop+(He-P[vt].height),P[vt].height=it):(P[vt].marginTop=P[vt].marginTop+(it-P[vt].height),P[vt].height=it)}let Je={},st=P[ee.index].marginTop;P[ee.index].marginTop=0,Je.styleString="",st!==n&&(Je.styleString+=` --column-gutter-height: ${st+n}px;`),Q>1&&(Je.styleString+=` --resize-parent-width:${Re}px; min-width: ${Re}px;`),xe!==null&&(Je.styleString+=` --frame-padding: ${xe}px;`),ue===0&&(Je.firstColumnItem=!0),Je.slotName=ae,oe.push(Je),D[ee.index]||(D[ee.index]=[]),D[ee.index].push(S("slot",{name:ae},ae)),Y.push({slot:ae})});for(let Z=0;Z<q;Z++)D[Z]||(D[Z]=[]);return U.forEach(Z=>{oe[Z].lastInColumn=!0}),M.forEach((Z,K)=>{let Q=Y[K]||{};Q.itemResize=this.onItemResize,Q.drag=void 0,Q.itemDragStart=void 0;let te=Z._props||{};No(Z,{...te,...Q},te,!1,!1)}),S(de,{children:[this.props.children,rt(S(de,{children:[S("style",{children:`
				:host {
					width: var(--resize-parent-width, 100%);
					max-width: 100%;
					${V?"display: block;":`display: flex;
					    flex-direction: row;
					    flex-wrap: wrap;
					    align-content: flex-start;
					    justify-content: center;`}
				    position: relative;					
					--column-gutter-width: ${L}px;
					--column-gutter-height: ${n}px;
					margin-top: calc(var(--gutter-expand, 0) * ${n}px);
				}

				${oe.map((Z,K)=>`::slotted(media-item[slot="${Z.slotName}"]){
						margin-top: ${Z.firstColumnItem?"0;":"var(--column-gutter-height, 0px);"}
						${Z.lastInColumn?`
						    flex-grow: 1;
						    flex-shrink: 1;
						    flex-basis: ${x===1?"100%":0};						
						`:""}
						${Z.styleString}
					} `).join("")}

				* {
					box-sizing: border-box;
				}	

				:host[hidden] {
					display:none;
				}

				:host .columns-column {
					${V?`
						display: inline-flex;
						vertical-align: top;
					`:`
					    max-width: ${Math.ceil(f/x)}px;
					`}
					min-height: 10px;			
					flex-grow: 0;
					flex-shrink: 0;
				}

				:host .columns-column.last-column {
				    flex-grow: 1;
				    flex-shrink: 1;
				    flex-basis: ${x===1?"100%":0};
				}
				

				:host .columns-column:not(:last-child){
				    margin-right: var(--column-gutter-width, 0px);
				}

				::slotted(media-item) {
					position: relative;
				    width: 100%;
				    max-width: none;
				    display: flex;
				}




				`}),S(Ji,{values:{gutterWidth:v,gutterHeight:g,elWidth:"100%"},onResize:this.onResize}),l&&p.isEditing&&!he&&S(N3,{...this.props,disableResize:ie,isMobile:o,gallerySpecificAttributes:["columnized-span"],columnAndGutterMap:_,galleryInstance:a,galleryComponent:this}),D.map((Z,K)=>{let Q=_[K];return S("div",{className:`columns-column${K===x-1?" last-column":""}`,style:{width:Q.right-Q.left+"px"},children:Z},`columns-column-${K}`)})]}),this.props.baseNode.shadowRoot)]})}componentDidMount(){nt.on("mobile-change",this.onMobileChange)}componentWillUnmount(){nt.off("mobile-change",this.onMobileChange)}onMobileChange=e=>{this.setState({isMobile:e})};onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n.hasSizes=!0,n})};onItemResize=(e,r)=>{this.setState(i=>({sizeIncrement:i.sizeIncrement+1}))}};qg.defaultProps={"show-tags":!0,"show-title":!0,columns:ws.defaults.columns.value,gutter:"2rem","mobile-gutter":"2rem"};Ple=qt(Oo(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(qg)));ar(Ple,"gallery-columnized",["thumbnail-index","links-filter-index","show-tags","show-title","thumbnail-index-metadata","columns","gutter","mobile-columns","mobile-gutter"],{renderIntoShadow:!0})});var tn,D1,D3,L3=$(()=>{ke();tn=ve(Ie(),1);Bu();Rr();Dt();Fe();fe();D1=class extends me{constructor(e){super(e),this.state={pauseRealignment:!1,waitingForRealignment:!1,currentZoom:100,currentHorizontalShift:0,transform:{x:0,y:0},previewShifts:[],previewingTransform:!1,dragStartPosition:{x:0,y:0},scrollDelta:{x:0,y:0},dragDelta:{x:0,y:0},initialPosition:{x:0,y:0},ghostRect:{significantShift:!1,width:0,height:0,x:0,y:0},minHeight:0,overrideHeight:!1,dragSrcIndex:-1,UIWindow:!1,draggedItemIndex:-1,isDragging:!1,showDropTarget:!1,breakOutOfGallery:!1,draggedMediaItem:null,timer:0},this.draggedItem=_e(),this.dragGhostRef=_e(),this.lastPosition=null,this.debouncedCommitTransform=tn.default.debounce(this.commitTransform,500)}render(e,r){let{showDropTarget:i,draggedMediaItem:n,isDragging:o,dragDelta:s,draggedItemIndex:a,initialPosition:l,dragSrcIndex:p,ghostRect:f}=r,{galleryInstance:c}=e;return S(de,{children:[S("style",{id:"freeform-editor",children:[p>-1&&o?`
			::slotted(media-item:nth-child(${p+1})){
				pointer-events:none;
				opacity: 0;
			}

			.drag-ghost {
				position: absolute;
				top: 0;
				left: 0;
				z-index: 1001;	
				pointer-events: none;
				outline: 1px solid #ccc;
			}

			.drag-ghost.snapping {
				outline: 1px solid var(--baseColor-accent);
			}

			.drag-ghost img {
				position: absolute;
				inset: 0;
				width: 100%;
				height: 100%;
				opacity: 0.5;
				transition: none;
				object-fit: cover;
				transform:translateZ(0);
			}

			`:`

			#freeform-holder {
				transform: scale(${this.state.currentZoom}%) translateX(${this.state.currentHorizontalShift}%);
				transform-origin: center top;
			}

			`,this.state.overrideHeight?`
				:host {
					min-height: ${this.state.minHeight}px;
				}
			`:"",this.state.previewingTransform?this.state.previewShifts.map(m=>`::slotted(media-item[slot="${m.slot}"]){
						--base-translate: translate(${m.x}px , ${m.y}px)!important;
					} `):""]}),S(ko,{...e,gallerySpecificAttributes:this.props.gallerySpecificAttributes,galleryInstance:c,mediaItemEditorInfo:{disableResize:!1,disableButton:!1,afterScaleChange:this.afterScaleChange,whileScaleChange:this.whileScaling,beforeScaleChange:this.beforeScaleChange},onScrollWhileHovered:this.onScrollWhileHovered,onUIWindowSet:this.getUIWindow,onUIWindowRelease:this.releaseUIWindow,disableDragOver:!0,onCleanUp:this.onCleanUp}),S("div",{className:`drag-ghost ${f.significantShift?"snapping":""}`,style:{display:o&&f.width>0&&f.height>0?"block":"none",transform:`translate3d(${f.x}px, ${f.y}px, 1001px)`,width:f.width+"px",height:f.height+"px"},dangerouslySetInnerHTML:{__html:""},ref:this.dragGhostRef})]})}onScrollWhileHovered=e=>{this.setState(r=>r.isDragging?{scrollDelta:{x:0,y:r.scrollDelta.y+e}}:null)};getUIWindow=e=>{this.setState({UIWindow:e})};releaseUIWindow=e=>{this.setState({UIWindow:!1})};beforeScaleChange=(e,r)=>{let i=e.hasAttribute("freeform-scale")?e.getAttribute("freeform-scale"):20;return{...r,scaleArray:[parseFloat(i),"%"],scale:i+""}};whileScaling=(e,r)=>{let{magneticSnap:i,magneticSnapMargin:n}=this.props,o=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};if(!i)return r;let{width:s,height:a,scaleArray:l,overSize:p,atLimit:f,scale:c}=r,{elWidth:m,attributeMap:v}=this.props;m=m+-o.mediaItemSize.padSize+-o.mediaSize.padSize;let g=n*.01*m,x=s/a,_={width:!1,height:!1},E=Array.from(this.props.galleryInstance.children).filter(P=>P.tagName==="MEDIA-ITEM").indexOf(e),L=v[E],O={x1:L.xPx,y1:L.yPx,x2:L.xPx+s,y2:L.yPx+a},M={top:!0,left:!0,right:!1,bottom:!1},D=this.calculateMagnetism(e,O,M);return Math.abs(D.x)<Math.abs(D.y)&&Math.abs(D.x)>.1?_.width=!0:Math.abs(D.y)>.1&&(_.height=!0),Math.abs(D.x)>15&&(_.width=!1,D.x=0),Math.abs(D.y)>15&&(_.height=!1,D.y=0),_.width?(s=s+D.x,a=s/x):_.height&&(a=a+D.y,s=a*x),l[0]=s/m*100,{...r,scale:l.join(""),width:s,height:a,scaleArray:l,overSize:p,atLimit:f}};afterScaleChange=(e,r)=>{let{elWidth:i}=this.props,n=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};i=i+-n.mediaItemSize.padSize+-n.mediaSize.padSize;let o=(100*(r.width/i)).toFixed(2);e.setAttribute("limit-by","width"),e.setAttribute("scale",o),e.setAttribute("freeform-scale",o),this.props.galleryComponent.onItemResize()};onDragStart=(e,r,i)=>{let n=i.draggedMediaItems?.find(g=>this.props.galleryInstance.contains(g))||null;if(!n){this.setState({draggedItemIsInsideGallery:!1});return}let{attributeMap:o,elWidth:s}=this.props;this.draggedItem.current=n,Array.from(this.dragGhostRef.current?.children).forEach(g=>{g.remove()});let a=this.draggedItem.current?.shadowRoot?.querySelector('.sizing-frame [part="media"]'),l=Array.from(this.props.galleryInstance.children),p=l.indexOf(n),f=l.filter(g=>g.tagName==="MEDIA-ITEM").indexOf(n),c=o[f],m={x:c?.xPx??0,y:c?.yPx??0},v=this.props.galleryInstance.offsetHeight;this.setState(g=>(ye.globalDragEventController.setCustomDropTarget(this.props.galleryInstance),{dragDelta:{x:0,y:0},draggedItemIsInsideGallery:!0,initialPosition:m,dragStartPosition:{x:i.cursorPosition.x,y:i.cursorPosition.y},scrollDelta:{x:0,y:0},ghostRect:{x:0,y:0,width:0,height:0},dragSrcIndex:p,overrideHeight:!0,minHeight:v,isDragging:!0}))};onDragOver=(e,r,i)=>{if(this.ticking)return;this.ticking=!0,this.dragFrame=requestAnimationFrame(()=>{this.ticking=!1});let{elWidth:n,elHeight:o,mediaItems:s,magneticSnapMargin:a,magneticSnap:l,attributeArray:p}=this.props,f=i.draggedMediaItems.length>0,c=this.props.galleryInstance.contains(i.dropTarget),m=this.props.galleryInstance===i.customDropTarget;i.inAdmin||i.fromOutside||!(c||this.state.draggedItemIsInsideGallery)?ye.globalDragEventController.releaseCustomDropTarget(this.props.galleryInstance):this.setState(v=>{if(ye.globalDragEventController.setCustomDropTarget(this.props.galleryInstance),v.isDragging){let g={x:i.cursorPosition.x+-v.dragStartPosition.x+v.scrollDelta.x,y:i.cursorPosition.y+-v.dragStartPosition.y+v.scrollDelta.y},x={x:v.initialPosition.x+g.x,y:v.initialPosition.y+g.y};this.lastPosition||(this.lastPosition=x);let _={width:0,height:0,x1:x.x,x2:x.x,y1:x.y,y2:x.y};if(this.draggedItem.current){let M=this.draggedItem.current._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};_.x2=_.x1+M.mediaItemSize.padSize+M.mediaSize.padSize+M.mediaItemSize.width,_.y2=_.y1+M.mediaItemSize.padSize+M.mediaItemSize.height,_.width=M.mediaItemSize.padSize+M.mediaSize.padSize+M.mediaItemSize.width,_.height=M.mediaItemSize.padSize+M.mediaItemSize.height}let E=l?this.calculateMagnetism(this.draggedItem.current,_):{x:0,y:0},L=a*.01*n;Math.abs(E.x)>Math.max(L,6)?E.x=0:E.x!==0&&(x.x=(x.x+E.x)*.5+this.lastPosition.x*.5),Math.abs(E.y)>Math.max(L,6)?E.y=0:E.y!==0&&(x.y=(x.y+E.y)*.5+this.lastPosition.y*.5);let O=Math.abs(E.x)>1||Math.abs(E.y)>1;return this.lastPosition=x,{ghostRect:{significantShift:O,x:x.x,y:x.y,width:_.width,height:_.height},dragDelta:{x:g.x+E.x,y:g.y+E.y}}}else{let g=this.props.galleryInstance.getBoundingClientRect(),x={x:i.cursorPosition.x-g.left,y:i.cursorPosition.y-g.top};return this.draggedItem.current=i.draggedMediaItems[0],{dragDelta:{x:0,y:0},scrollDelta:{x:0,y:0},initialPosition:x,dragStartPosition:{x:i.cursorPosition.x,y:i.cursorPosition.y},ghostRect:{x:0,y:0,width:0,height:0},isDragging:!0,dragSrcIndex:-1}}})};calculateMagnetism=(e,r,i={top:!1,right:!1,bottom:!1,left:!1})=>{let{mediaItems:n,galleryInstance:o,elWidth:s,elHeight:a,magneticSnapMargin:l,attributeMap:p}=this.props,f=Math.round(l*.01*s*32)/32,c=[],m=[],v=[],g={};n.forEach((N,F)=>{let V=p[F];if(N===e)return;v.length=0;let q=N._size;g.x1=V.xPx,g.y1=V.yPx,g.x2=q.mediaItemSize.width+q.mediaItemSize.padSize+g.x1,g.y2=q.mediaItemSize.height+q.mediaItemSize.padSize+g.y1,r.x1<g.x2+f*2&&r.x2>g.x1-f*2&&(g.x2<r.x1||g.x1>r.x2?(v.push(g.y1),v.push(g.y2)):(v.push(g.y1-f),v.push(g.y2+f)),v.forEach(J=>{c.indexOf(J)===-1&&c.push(J)})),v.length=0,r.y1<g.y2+f*2&&r.y2>g.y1-f*2&&(g.y2<r.y1||g.y1>r.y2?(v.push(g.x1),v.push(g.x2)):(v.push(g.x1-f),v.push(g.x2+f)),v.forEach(J=>{m.indexOf(J)===-1&&m.push(J)}))}),c.indexOf(0)===-1&&c.push(0),c.indexOf(a)===-1&&c.push(a),m.indexOf(0)===-1&&m.push(0),m.indexOf(s)===-1&&m.push(s);let x=tn.default.minBy(c,N=>Math.abs(N-r.y1)),_=tn.default.minBy(c,N=>Math.abs(N-r.y2)),E=x-r.y1,L=_-r.y2,O=tn.default.minBy(m,N=>Math.abs(N-r.x1)),M=tn.default.minBy(m,N=>Math.abs(N-r.x2)),D=O-r.x1,P=M-r.x2;return{x:tn.default.minBy([i.left?9e9:D,i.right?9e9:P],N=>N!==0?Math.abs(N):9e9),y:tn.default.minBy([i.top?9e9:E,i.bottom?9e9:L],N=>N!==0?Math.abs(N):9e9)}};onDragDrop=(e,r,i)=>{this.setState({isDragging:!1},()=>{this.lastPosition=null;let n=[...i.draggedMediaItems];this.props.galleryInstance.hasAttribute("thumbnail-index")&&i.fromAdmin||!i.inAdmin&&i.customDropTarget===this.props.galleryInstance&&CargoEditor?.mutationManager&&(CargoEditor.rangy.getSelection().removeAllRanges(),Xe.deactivateHoverElement(this.props.galleryInstance),CargoEditor.mutationManager.execute(()=>{let o=Array.from(this.props.galleryInstance.children).filter(c=>c.tagName==="MEDIA-ITEM"),s=tn.default.sortBy(o,c=>parseFloat(c.getAttribute("freeform-y"))||0),a=(this.state.initialPosition.x+this.state.dragDelta.x)/this.props.elWidth*100,l=(this.state.initialPosition.y+this.state.dragDelta.y)/this.props.elWidth*100,p=this.draggedItem.current?.getAttribute("freeform-scale")||20,f=s.find(c=>parseFloat(c.getAttribute("freeform-y"))>l);n.forEach((c,m)=>{r?.metaKey||c.setAttribute("freeform-z",o.length+200+m),c===this.draggedItem.current?(c.setAttribute("freeform-x",a),c.setAttribute("freeform-y",l)):(c.setAttribute("freeform-x",(a+m*5)%80),c.setAttribute("freeform-y",l+m*5)),c.hasAttribute("freeform-scale")||c.setAttribute("freeform-scale",p),this.props.galleryInstance.insertBefore(c,f),c.flushMutationQueue()}),this.stackZ(),this.centerY(),this.alignDomWithY(),this.props.galleryInstance._editorInterface.flushMutationQueue()}))}),this.unsetMinHeight()};unsetMinHeight=tn.default.debounce(()=>{this.setState({overrideHeight:!1})},100);onDragEnd=(e,r,i)=>{if(r&&r.metaKey&&this.props.galleryInstance.contains(r.target)&&!Eb()){this.onDragDrop(e,r,i);return}this.setState({isDragging:!1},()=>{this.lastPosition=null}),this.unsetMinHeight()};onCleanUp=(e,r,i,n)=>{CargoEditor&&Object.keys(CargoEditor).length>0&&(!tn.default.isEqual(e,r)||i.length>0)&&CargoEditor.mutationManager.execute(()=>{this.centerY(),this.alignDomWithY()}),this.props.onCleanUp&&this.props.onCleanUp(e,r,i,n)};stackZ=()=>{let e=Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM");tn.default.sortBy(e,i=>parseFloat(i.getAttribute("freeform-z"))||0).forEach((i,n)=>{i.setAttribute("freeform-z",n+1),i.flushMutationQueue()})};centerY=()=>{let e=Array.from(this.props.galleryInstance.children).filter(n=>n.tagName==="MEDIA-ITEM"),r=tn.default.sortBy(e,n=>n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):0),i=r[0]?.hasAttribute("freeform-y")?parseFloat(r[0].getAttribute("freeform-y")):0;i!==0&&r.forEach((n,o)=>{let s=n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):i;n.setAttribute("freeform-y",s-i),n.flushMutationQueue()})};alignDomWithY=()=>{let e=Array.from(this.props.galleryInstance.children).filter(n=>n.tagName==="MEDIA-ITEM"),r=tn.default.sortBy(e,n=>n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):0),i=e[0];r.forEach((n,o,s)=>{if(n!=i){for(let a=i,l=0;(a=a.nextElementSibling)&&l<s.length&&a!=n;l+=1);this.props.galleryInstance.insertBefore(n,i)}else i=n.nextElementSibling;n.flushMutationQueue()})};zoom=e=>{this.setState({currentZoom:e})};commitZoom=()=>{let{magneticSnapMargin:e,attributeMap:r}=this.props,{currentZoom:i}=this.state;Array.from(this.props.galleryInstance.children).filter(o=>o.tagName==="MEDIA-ITEM").forEach((o,s)=>{let a=r[s],l=a["freeform-x"],p=a["freeform-y"],f=a["freeform-scale"],c=Math.sqrt(Math.pow(l-50,2)+Math.pow(p,2)),m=Math.atan2(p,l-50);o.setAttribute("freeform-x",Math.cos(m)*c*(i*.01)+50),o.setAttribute("freeform-y",Math.sin(m)*c*(i*.01)+50*(i*.01)),o.setAttribute("freeform-scale",i*.01*f)});let n=Math.abs(i*.01*e);if(n>.1)for(;n>5;)n*=.5;this.centerY(),this.state.UIWindow?.onChange?.({zoom:100,"magnetic-snap-margin":n}),this.props.galleryInstance._editorInterface.flushMutationQueue(),this.props.galleryComponent.onItemResize()};previewTransform=(e,r)=>{let i=r.map(n=>{let o=(e.x+parseFloat(n.getAttribute("freeform-x")||0))*this.props.elWidth*.01,s=(e.y+parseFloat(n.getAttribute("freeform-y")||0))*this.props.elWidth*.01;return{slot:n.getAttribute("slot"),x:o,y:s}});this.setState({transform:e,previewShifts:i,previewingTransform:!0})};commitTransform=()=>{CargoEditor.mutationManager.execute(()=>{this.state.previewShifts.forEach(r=>{let i=this.props.galleryInstance.querySelector('[slot="'+r.slot+'"]');if(i){let n=parseFloat(i.getAttribute("freeform-x")||0),o=parseFloat(i.getAttribute("freeform-y")||0),s=Math.round((n+this.state.transform.x)*8)/8,a=Math.round((o+this.state.transform.y)*8)/8;i.setAttribute("freeform-x",s),i.setAttribute("freeform-y",a)}}),this.centerY(),this.alignDomWithY(),this.props.galleryInstance._editorInterface.flushMutationQueue()});let e=Array.from(this.props.galleryInstance.children).find(r=>r._editorInterface)?._editorInterface?.state?.UIWindow||null;e&&e.onChange({"shift-x":0,"shift-y":0}),this.setState({transform:{x:0,y:0},previewShifts:[],previewingTransform:!1},()=>{this.props.galleryInstance._editorInterface.flushMutationQueue(),this.props.galleryComponent.onItemResize()})};horizontalShift=e=>{this.setState({currentHorizontalShift:e})};commitHorizontalShift=()=>{let{currentHorizontalShift:e}=this.state,{attributeMap:r}=this.props;Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM").forEach((i,n)=>{let s=r[n]["freeform-x"];i.setAttribute("freeform-x",s+e)}),this.state.UIWindow?.onChange?.({horizontalShift:0}),this.props.galleryComponent.onItemResize()};fitToWidth=()=>{let{magneticSnapMargin:e,attributeMap:r}=this.props;CargoEditor.mutationManager.execute(()=>{let{elWidth:i,attributeMap:n}=this.props,o=Array.from(this.props.galleryInstance.children).filter(c=>c.tagName==="MEDIA-ITEM"),s=9e9,a=-9e9;o.forEach((c,m)=>{let v=n[m];s=Math.min(s,v["freeform-x"]),a=Math.max(a,v["freeform-x"]+v["freeform-scale"])});let l=100/(a-s),p=s,f=Math.abs(l*e);if(f>.1)for(;f>5;)f*=.5;o.forEach((c,m)=>{let v=n[m],g=v["freeform-scale"]||30,x=v["freeform-x"],_=v["freeform-y"],E=(x+-p)*l,L=_*l;c.setAttribute("freeform-x",E),c.setAttribute("freeform-y",L),c.setAttribute("freeform-scale",l*g)}),this.state.UIWindow?.onChange?.({zoom:100,"magnetic-snap-margin":f})})};componentDidMount(){ye.globalDragEventController.on("dragstart",this.onDragStart),ye.globalDragEventController.on("dragover",this.onDragOver),ye.globalDragEventController.on("drop",this.onDragDrop),ye.globalDragEventController.on("dragend",this.onDragEnd),this.props.galleryInstance._freeformEditor=this}componentWillUnmount(){this.debouncedCommitTransform.cancel(),this.unsetMinHeight.cancel(),cancelAnimationFrame(this.dragFrame),clearTimeout(this.breakOutTimer),delete this.props.galleryInstance._freeformEditor,ye.globalDragEventController.off("dragstart",this.onDragStart),ye.globalDragEventController.off("dragover",this.onDragOver),ye.globalDragEventController.off("drop",this.onDragDrop),ye.globalDragEventController.off("dragend",this.onDragEnd)}componentDidUpdate(e,r){r.pauseRealignment!==this.state.pauseRealignment&&!this.state.pauseRealignment&&this.state.waitingForRealignment}},D3=D1});var F3,Hg,Ile,ei,L1=$(()=>{ke();Ze();Uu();la();Ug();mt();Fe();L3();qu();Ur();qr();F3=ve(Ie(),1);Zr();fe();Hg=class extends me{constructor(e){super(e),this.state={elWidth:1e3,sizeIncrement:0},this.holderRef=_e()}render(e,r){let{adminMode:i,baseNode:n,pageInfo:o,"mobile-grid":s,"mobile-gutter":a,"mobile-columns":l,"mobile-horizontal-align":p,"mobile-vertical-align":f,"hover-pop":c,"magnetic-snap":m,"magnetic-snap-margin":v}=e;if(s&&e.isMobile)return this.renderedMobileGrid=!0,S(R1,{...this.props,columns:l,gutter:a,verticalAlign:f,horizontalAlign:p,baseNode:n,adminMode:i,pageInfo:o});let{elWidth:g}=r,x=0,_=0,E=0,L=Array.from(n.children).filter(F=>F.tagName=="MEDIA-ITEM"),O=[],M=[],D=-1;L.forEach((F,V)=>{let q=!1,J={"freeform-scale":parseFloat(F.getAttribute("freeform-scale")),"freeform-x":parseFloat(F.getAttribute("freeform-x")),"freeform-y":parseFloat(F.getAttribute("freeform-y")),"freeform-z":parseFloat(F.getAttribute("freeform-z"))},Y={slot:"slot-"+V,itemResize:this.onItemResize,drag:void 0,itemDragStart:void 0};(isNaN(J["freeform-scale"])||isNaN(J["freeform-x"])||isNaN(J["freeform-y"])||isNaN(J["freeform-z"]))&&(q=!0,J["freeform-scale"]=Number.isNaN(parseFloat(F.getAttribute("freeform-scale")))?20:parseFloat(F.getAttribute("freeform-scale")),J["freeform-x"]=Number.isNaN(parseFloat(F.getAttribute("freeform-x")))?E*1.5:parseFloat(F.getAttribute("freeform-x")),J["freeform-x"]=J["freeform-x"]%80,J["freeform-y"]=Number.isNaN(parseFloat(F.getAttribute("freeform-y")))?E*1.5:parseFloat(F.getAttribute("freeform-y")),J["freeform-z"]=9999,E++);let ie=parseFloat(J["freeform-x"])*.01*g,oe=parseFloat(J["freeform-y"])*.01*g,Z=parseInt(J["freeform-z"]),K=parseFloat(J["freeform-scale"])*.01*g,Q=K,te=F._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};Q=te.mediaItemSize.height+te.mediaItemSize.padSize,x=Math.max(oe+Q,x),q||(D=V,_=x),J.widthPx=K,J.xPx=ie,J.yPx=oe,J.z=Z,J.writeAttributes=Y,M.push(J)});let P=100*(_/g),U=0;for(var N=D+1;N<M.length;N++){let V=L[N]._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}},q=V.mediaItemSize.height+V.mediaItemSize.padSize,J=U*1.5+P,Y=J*.01*g;M[N]["freeform-y"]=J,M[N].yPx=Y,x=Math.max(M[N].yPx+q,x),U++}return M.forEach((F,V)=>{let q=L[V],{widthPx:J,yPx:Y,xPx:ie,z:oe,writeAttributes:Z}=F,K=q._props||{};this.renderedMobileGrid&&(K.itemResize=null),No(q,{...K,...Z},K,!1,!1),O.push({width:J+"px","--base-translate":`translate(${Math.floor(ie)}px, ${Math.floor(Y)}px)`,"--z-index":oe+1})}),this.renderedMobileGrid=!1,S(de,{children:[this.props.children,rt(S(de,{children:[S("style",{children:`
					* {
						box-sizing: border-box;
					}
									
					:host {
						width: var(--resize-parent-width, 100%);
						max-width: 100%;						
						height: ${x}px;
						display: block;
						position: relative;
						contain: layout;
					}
					
					::slotted(media-item) {
						max-width: none;
						position: absolute;
						top: 0;
						left: 0;
						display: flex;
						flex-shrink: 0;
						flex-grow: 0;
					}

					::slotted(media-item)::part(sizing-frame){
						pointer-events:auto;						
					}

					${O.map((F,V)=>`::slotted(media-item[slot="slot-${V}"]){
							width: ${F.width};
							--base-translate: ${F["--base-translate"]};
							--z-index: ${F["--z-index"]};
						} `).join("")}						
					
					${c?`::slotted(media-item:hover) {
						z-index: 99999;	
					}`:""}
					
					#freeform-holder {
						position: absolute;
						inset: 0;
					}
				`}),S(de,{children:[S("div",{id:"freeform-holder",ref:this.holderRef,children:L.map((F,V)=>S("slot",{name:`slot-${V}`}))}),S(Ji,{values:{elWidth:"100%"},onResize:this.onResize})]}),i&&o.isEditing&&!he&&S(D3,{...e,gallerySpecificAttributes:["freeform-x","freeform-y","freeform-z","freeform-scale"],galleryInstance:n,galleryComponent:this,mediaItemOptions:ei.mediaItemOptions,disabledMediaItemOptions:ei.disabledMediaItemOptions,mediaItems:L,elWidth:g,elHeight:x,hoverPop:c,magneticSnap:m,magneticSnapMargin:v,attributeMap:M})]}),this.props.baseNode.shadowRoot)]})}componentDidUpdate(e,r){this.props.isMobile!==e.isMobile&&this.onItemResize()}onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n})};onItemResize=(e,r)=>{this.setState(i=>({sizeIncrement:i.sizeIncrement+1}))}},Ile=qt(Oo(Ue((t,e)=>({adminMode:t.frontendState.adminMode,isMobile:t.frontendState.isMobile}))(Hg)));ar(Ile,"gallery-freeform",["thumbnail-index","links-filter-index","show-tags","show-title","thumbnail-index-metadata","magnetic-snap","magnetic-snap-margin","hover-pop","mobile-grid","mobile-gutter","mobile-columns","mobile-horizontal-align","mobile-vertical-align"],{renderIntoShadow:!0});ei={name:"freeform",displayName:"Freeform",tagName:"GALLERY-FREEFORM",disabledMediaItemOptions:["limit-by","scale"],nonAttributeValues:["horizontalShift","fitToWidth","zoom","shift-x","shift-y"],mediaItemOptions:[{type:"group",className:"grid-columns-even",children:[{labelName:"X",name:"shift-x",defaultValue:0,type:"scrubber",value:0,step:.05,numberOnlyMode:!0,onScrubEnd:function(){this.state.galleryParent?._freeformEditor?.commitTransform()}},{labelName:"Y",name:"shift-y",defaultValue:0,type:"scrubber",value:0,step:.05,numberOnlyMode:!0,onScrubEnd:function(){this.state.galleryParent?._freeformEditor?.commitTransform()}}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Width",name:"freeform-scale",type:"scrubber",value:20,step:.05,min:0,max:150,numberOnlyMode:!0},{labelName:"Bring to Front",name:"freeform-z",type:"button",onClick:function(t){CargoEditor.mutationManager.execute(()=>{let e=this.state.selectedMediaItems[0].closest("gallery-freeform");if(e){e._freeformEditor?.stackZ();let r=F3.default.sortBy(Array.from(e.querySelectorAll("media-item")),n=>parseInt(n.getAttribute("freeform-z")));this.state.selectedMediaItems.forEach(n=>{n.setAttribute("freeform-z",1+r.length)}),e._freeformEditor?.stackZ()}})}}]}],mobileOptions:[{type:"group",className:"grid-columns-auto",children:[{labelName:"Use Grid",name:"mobile-grid",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-auto",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Magnetic Snap",name:"magnetic-snap-margin",type:"scrubber",value:0,step:.05,suffix:"%",max:10,min:0,numberOnlyMode:!0,requirements:[{option:"magnetic-snap",shouldBe:!0}],renderWhenDisabled:!0},{labelName:"",className:"square",name:"magnetic-snap",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-even",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Pop on Hover",name:"hover-pop",type:"check-box",value:!1},{labelName:"Fit to Width",name:"fitToWidth",type:"button",onClick:function(t){t.preventDefault();let e=this.state.activeGallery;e&&e._freeformEditor?.setState({currentZoom:100},()=>{e._freeformEditor?.fitToWidth()})}}]},{type:"group",className:"grid-columns-even",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Shift",name:"horizontalShift",type:"scrubber",value:0,step:.05,suffix:"%",max:50,min:-50,numberOnlyMode:!0,onScrubEnd:function(t){this.state.activeGallery?._freeformEditor?.commitHorizontalShift()}},{labelName:"Zoom",name:"zoom",type:"scrubber",value:100,step:.1,suffix:"%",max:200,min:50,numberOnlyMode:!0,onScrubEnd:function(t){this.state.activeGallery?._freeformEditor?.commitZoom()}}]},{labelName:"Columns",name:"mobile-columns",type:"scrubber",value:2,min:1,max:12,step:1,allowUnclampedTextEntry:!1,numberOnlyMode:!0,requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Gutter",name:"mobile-gutter",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1}],options:[{type:"group",className:"grid-columns-auto",children:[{labelName:"Magnetic Snap",name:"magnetic-snap-margin",type:"scrubber",value:0,step:.05,suffix:"%",max:10,min:0,numberOnlyMode:!0,requirements:[{option:"magnetic-snap",shouldBe:!0}],renderWhenDisabled:!0},{labelName:"",className:"square",name:"magnetic-snap",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Pop on Hover",name:"hover-pop",type:"check-box",value:!1},{labelName:"Fit to Width",name:"fitToWidth",type:"button",onClick:function(t){t.preventDefault();let e=this.state.activeGallery;e&&e._freeformEditor?.setState({currentZoom:100},()=>{e._freeformEditor?.fitToWidth()})}}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Shift",name:"horizontalShift",type:"scrubber",value:0,step:.05,suffix:"%",max:50,min:-50,numberOnlyMode:!0,onScrubEnd:function(t){this.state?.activeGallery?._freeformEditor?.commitHorizontalShift()}},{labelName:"Zoom",name:"zoom",type:"scrubber",value:100,step:.1,suffix:"%",max:200,min:50,numberOnlyMode:!0,onScrubEnd:function(t){this.state?.activeGallery?._freeformEditor?.commitZoom()}}]}],onMediaItemChange:function(t){let e=this.state.galleryParent;return e?(Object.keys(t).forEach(r=>{let i=t[r];switch(r){case"shift-x":e._freeformEditor?.previewTransform({x:i,y:0},this.state.selectedMediaItems);break;case"shift-y":e._freeformEditor?.previewTransform({x:0,y:i},this.state.selectedMediaItems);break}}),{...t}):{...t}},onChange:function(t){let e=this.state.activeGallery;e&&Object.keys(t).forEach(r=>{let i=t[r];switch(r){case"horizontalShift":e._freeformEditor?.horizontalShift(i);break;case"zoom":e._freeformEditor?.zoom(i);break}})}};ei.mediaItemDefaults=ht(ei.mediaItemOptions);ei.defaults=ht(ei.options);ei.mobileDefaults=ht(ei.mobileOptions);Hg.defaultProps={"show-tags":!0,"show-title":!0,"thumbnail-index":void 0,"magnetic-snap":ei.defaults["magnetic-snap"].value,"magnetic-snap-margin":ei.defaults["magnetic-snap-margin"].value,"hover-pop":ei.defaults["hover-pop"].value,"mobile-grid":ei.mobileDefaults["mobile-grid"].value,"mobile-gutter":ei.mobileDefaults["mobile-gutter"].value,"mobile-columns":ei.mobileDefaults["mobile-columns"].value,"mobile-horizontal-align":ei.mobileDefaults["mobile-horizontal-align"].value,"mobile-vertical-align":ei.mobileDefaults["mobile-vertical-align"].value}});var z3,F1,B3,U3=$(()=>{ke();z3=ve(Ie(),1);Dt();Rr();Bu();fe();F1=class extends me{constructor(e){super(e),this.state={}}render(e,r){let{galleryInstance:i,gutterWidth:n,elWidth:o,mediaItems:s}=e;return S(ko,{...e,gallerySpecificAttributes:this.props.gallerySpecificAttributes,onAfterDrop:this.onAfterDrop,galleryInstance:i,disabledMediaItemOptions:["scale"],mediaItemEditorInfo:{disableResize:!0,disableButton:!1,additionalUI:this.props.isMobile?null:this.renderBracket}})}onBracketClick=(e,r,i)=>{this.dragStarted||(i&&(i.preventDefault(),Xe.setHoveredElements([this.props.galleryInstance])),CargoEditor.mutationManager.execute(()=>{if(e)r.removeAttribute("justify-row-end");else{let n=r.previousSibling,o=1;for(;n;)n.nodeName==="MEDIA-ITEM"&&n.assignedSlot&&n.assignedSlot.parentElement.lastChild==n.assignedSlot&&n.setAttribute("justify-row-end","true"),n=n.previousSibling;r.setAttribute("justify-row-end","true")}}),this.props.incrementLayout&&this.props.incrementLayout())};renderBracket=(e,r)=>{let{gutterWidth:i,gutterHeight:n}=this.props,o=r.assignedSlot;if(!o)return null;let s=o.parentElement.lastChild==o,a=r.getAttribute("justify-row-end")==="true",l="pointer";return a||(l="e-resize"),S("div",{className:`justify-bracket${a?" row-end":""}`,style:{"--media-item-pad":-r._size.mediaItemSize.padSize*.5+-1+"px"},onClick:p=>{this.onBracketClick(a,r,p)},onMouseDown:p=>{this.onMouseDown(r,p)}})};componentWillUnmount(){this.setRow.cancel()}onMouseDown=(e,r)=>{let i=e.assignedSlot;if(!i)return;let{mediaItems:n}=this.props;r.preventDefault();let o=i.parentElement,s=Array.from(o.children);this.delta=0,this.initialPoint=r.clientX,this.rowItems=s,this.indexOfFirstInRow=n.indexOf(this.rowItems[0].assignedNodes()[0]),this.dragStarted=!1,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)};onPointerMove=e=>{let{mediaItems:r}=this.props;if(this.delta=e.clientX-this.initialPoint,!(Math.abs(this.delta)<3)){if(!this.dragStarted){Xe.setHoveredElements([this.props.galleryInstance]),Xe.lock(),document.body.classList.add("dragging");let i=r[this.indexOfFirstInRow-1];i&&this.onBracketClick(!1,i,null),this.attrCache=r.map(n=>n.getAttribute("justify-row-end")==="true")}this.dragStarted=!0,this.setRow()}};setRow=z3.default.throttle(()=>{CargoEditor.mutationManager.execute(()=>{let{elWidth:e,mediaItems:r,rowAlign:i}=this.props,n=e/12,o=Math.round(this.delta/n);(i=="fill"||i=="right")&&(o=o*-1);let s=Math.max(o+this.rowItems.length,1);Xe.setHoveredElements([this.props.galleryInstance]),Xe.lock(),this.attrCache.forEach((a,l)=>{l>=this.indexOfFirstInRow&&l<=this.indexOfFirstInRow+s&&(a=!1,(l==this.attrCache.length-1||l==this.indexOfFirstInRow+s+-1)&&(a=!0));let p=r[l],f=p.getAttribute("justify-row-end");a&&f!=="true"?p.setAttribute("justify-row-end",a):!a&&p.hasAttribute("justify-row-end")&&p.removeAttribute("justify-row-end")})}),this.props.incrementLayout&&this.props.incrementLayout()},80);onPointerUp=e=>{Xe.unlock(),Xe.testHover(),document.body.classList.remove("dragging"),this.setRow.cancel(),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp)};onAfterDrop=(e,r,i)=>{let n=!1,o=r,s=e[e.length-1],a=e[0];for(;s&&e.indexOf(s)>-1;)s=s.nextElementSibling;for(;a&&e.indexOf(a)>-1;)a=a.previousElementSibling;i.left>-1&&i.right>-1?(r===e[e.length-1]&&(s=e[e.length-1]),r===e[0].nextElementSibling&&(a=e[0])):i.left>-1&&i.right==-1?s=null:i.right>-1&&i.left==-1&&(a=null),a&&i.left>-1&&(a.getAttribute("justify-row-end")=="true"||a.getAttribute("justify-row-end")==!0)&&(a.removeAttribute("justify-row-end"),e[e.length-1].setAttribute("justify-row-end",!0))}},B3=F1});var z1,Wg,so,Ale,B1=$(()=>{ke();Ze();Uu();Ze();la();mt();qu();Fe();Zr();U3();qr();Ur();z1=ve(Ie(),1);fe();Wg=class extends Mr{constructor(e){super(e),this.state={isMobile:nt.data.mobile.active,elWidth:0,gutterPixelWidth:0,gutterHeight:0,targetPxHeight:0,sizeIncrement:0,hasSizes:!1,renderLimit:150},this.paginationWatcherRef=_e(),this.paginationObserver=new IntersectionObserver(this.requestPagination,{root:this.props.scrollContext.scrollingElement===window?document:this.props.scrollContext.scrollingElement,rootMargin:screen.height*2+"px",threshold:[0,1]})}requestPagination=async e=>{if(this.isIntersecting=e[0].isIntersecting,!(this.isPaginating||this.state.renderLimit>=this.getMediaItems().length)){for(this.isPaginating=!0;this.isIntersecting;){let r=this.state.renderLimit+150;if(this.setState({renderLimit:r}),r>=this.getMediaItems().length)break;await new Promise(i=>setTimeout(i,200))}this.isPaginating=!1}};getMediaItems(){return Array.from(this.props.baseNode.children).filter(e=>e.nodeName=="MEDIA-ITEM")}render(e,r){let{gutterPixelWidth:i,gutterHeight:n,targetPxHeight:o,elHeight:s,isMobile:a,hasSizes:l}=r,{children:p,adminMode:f,pageInfo:c,baseNode:m}=e,{elWidth:v}=r;l||(v=this.props.baseNode.offsetWidth);let{"row-align":g,"row-height":x,gutter:_}=e;_=a&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter;let E="";a&&this.props["mobile-row-align"]!==void 0&&(g=this.props["mobile-row-align"],E="mobile-"),a&&this.props["mobile-row-height"]!==void 0&&(x=this.props["mobile-row-height"]);let L=_.split(" "),O=(L.length>1,L[0]);O.includes("rem")&&a&&(O="calc( var(--mobile-padding-offset, 1) * "+O+" )");let M=L.length>1?L[1]:L[0];M.includes("rem")&&a&&(M="calc( var(--mobile-padding-offset, 1) * "+M+" )");let D=ur(x,"%").join(""),P=this.getMediaItems(),U=P.slice(0,this.state.renderLimit),N=this.brickLayout(U),F=[];return P.forEach((V,q)=>{let J=N.attributes[q]||{slot:null},Y=V._props||{};No(V,{...Y,...J},Y,!1,!1)}),S(de,{children:[S(de,{children:this.props.children}),rt(S(de,{children:[S("style",{children:`
* {
	box-sizing: border-box;
}

:host {
	width: var(--resize-parent-width, 100%);
	max-width: 100%;	
	position: relative;
	display: block;
	--gutter-width: ${i}px;
	--gutter-height: ${n}px;
	margin-top: calc(var(--gutter-expand, 0) * ${n}px );	
}

${N.shadowStyleMap.map((V,q)=>`::slotted(media-item[slot="slot-${q}"]){
		${V.style};
		${V.itemStatuses.lastRow?"":"margin-bottom: var(--gutter-height);"}
		${V.itemStatuses.lastChild?"":"margin-right: var(--gutter-width);"}
		${V.itemStatuses.lastChild&&!V.itemStatuses.orphanRow&&g==="fill"?`
			flex-grow: 1;
			--object-fit: fill;
		`:""}
	}`).join("")}

:host .justify-row {
	max-width: ${v+3}px;
	width: 100%;
	display:flex;
	flex-shrink: 0;
	align-items: stretch;
	justify-content: flex-start;
	position: relative;
	flex-wrap: nowrap;
}

:host .justify-row.orphan-row {
	width: ${N.orphanRowWidth}px;
	display: inline-flex;
}

::slotted(media-item) {
	position: relative;
	max-width: 100%;
	display: flex;
	flex-shrink: 0;
	flex-grow: 0;
}    


:host([${E}row-align="left"]) .justify-row {
	justify-content: flex-start;
}

:host([${E}row-align="right"]) .justify-row {
	justify-content: flex-end;
}

:host([${E}row-align="center"]) .justify-row {
	justify-content: center;
}

:host ::slotted(media-item.last-child), :host([${E}row-align="fill"]) ::slotted(media-item.last-child) {
	flex-grow: 1;
}

:host([${E}row-align="center"]) ::slotted(media-item.last-child),
:host([${E}row-align="left"]) ::slotted(media-item.last-child),
:host([${E}row-align="right"]) ::slotted(media-item.last-child) {
	flex-grow: 0;
}

					`}),S(Ji,{values:{targetPxHeight:D,gutterPixelWidth:O,gutterHeight:M,elWidth:"100%"},onResize:this.onResize}),N.shadow,f&&c.isEditing&&!he&&S(B3,{...e,isMobile:a,gallerySpecificAttributes:["justify-row-end"],galleryInstance:m,gutterWidth:i,gutterHeight:n,elWidth:v,rowHeight:D,rowAlign:g,mediaItems:P,incrementLayout:this.onItemResize}),S("div",{ref:this.paginationWatcherRef,class:"pagination-watcher"})]}),this.props.baseNode.shadowRoot)]})}onResize=(e,r)=>{e==="targetPxHeight"&&(r=Math.max(r,10)),this.setState({[e]:r,hasSizes:!0})};onMobileChange=e=>{this.setState({isMobile:e})};componentDidMount(){nt.on("mobile-change",this.onMobileChange),this.props.baseNode._figureEditorInfo={disabledMediaItemOptions:so.disabledMediaItemOptions,galleryParent:this.props.baseNode,galleryWidth:this.state.elWidth},this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.observe(this.paginationWatcherRef.current),this.props.onMount&&this.props.onMount()}componentWillUnmount(){nt.off("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.unobserve(this.paginationWatcherRef.current)}onItemResize=e=>{this.setState(r=>({sizeIncrement:r.sizeIncrement+1}))};brickLayout=e=>{let r=window.devicePixelRatio>1?2:1,{isMobile:i}=this.state,{"row-align":n}=this.props;i&&this.props["mobile-row-align"]!==void 0&&(n=this.props["mobile-row-align"]);let o={},s=i&&this.props["mobile-row-height"]!==void 0&&this.props["mobile-row-height"]!==this.props["row-height"],a=!1,l=e.map((O,M)=>{let D=this.getItemSize(O,s);return this.getItemSize(O,s)});for(let O=l.length-1;O>=0;O--){let M=l[O];M.rowEnd||a?(M.inDesignatedRow=!0,a=!0):M.inDesignatedRow=!1}this.findValidRowCache={},this.makeNodes(0,0,null,o,l),this.findValidRowCache=null;let p=[],f=z1.default.keys(o).sort(function(O,M){return parseInt(O)-parseInt(M)}),c=f[f.length-1];for(;c!=null;){let O=o[c];o[O.parent]&&(o[O.parent].path=o[O.parent].edges[c]),p.unshift(O),c=O.parent}let m=[],v=[],g=[],x=this.state.targetPxHeight,_=this.state.elWidth,E=this.state.gutterPixelWidth,L=0;return p.forEach((O,M)=>{let D=O.path,P=[];if(!D)return;let U=0,N=!1;for(let F=D.startIndex;F<D.breakBefore;F++){let V=e[F],q=D.breakBefore-D.startIndex,J=F+1==D.breakBefore,Y=this.getItemSize(V,!1),ie=Y.mediaSize.padSize+Y.mediaItemSize.padSize,oe=(x+-ie)/Y.height||1,Z,K;Z=Y.width*oe+ie,K=Y.height*oe+Y.mediaSize.padSize;let Q=_+-D.rowWidth;if(n!=="fill"||N)Q=Math.min(0,Q),L=D.rowWidth;else if(Q/_>.5&&J&&M==0&&!D.position=="forcebreak"){N=!0,F=D.startIndex-1;continue}if(Q!==0){let ue=(Z+-ie)/D.contentWidth,le=D.rowWidth-D.contentWidth,xe=_-le;Z=ue*xe,K=Z*(Y.height/Y.width)+Y.mediaSize.padSize,Z=Z+ie}Z=Math.floor(Z*r)/r,U=K;let te={},ee="";F==D.startIndex&&(te.firstChild=!0),F+1==D.breakBefore&&(te.lastChild=!0),M+2==p.length&&(te.lastRow=!0),te.orphanRow=N,g[F]={style:`width: ${Z}px`,itemStatuses:te},v[F]={slot:`slot-${F}`,drag:void 0,itemDragStart:void 0,itemResize:this.onItemResize},P[F]=S("slot",{name:`slot-${F}`},`slot-${F}`)}U=Math.floor(U*r)/r,m.push(S("div",{className:`justify-row${N?" orphan-row":""}`,style:{"--frame-padding":U+"px"},children:P},`justify-row-${M}`))}),{shadow:m,attributes:v,shadowStyleMap:g,orphanRowWidth:L}};findValidRows=(e,r)=>{if(this.findValidRowCache[e])return this.findValidRowCache[e];e=parseInt(e);let i=e,n=0,o=0,s=0,a=0,l=0,p={},f=this.props["row-align"];this.state.isMobile&&this.props["mobile-row-align"]!==void 0&&(f=this.props["mobile-row-align"]);for(let c=e;c<r.length;c++){let m=s,v=a,g=r[c],x=g.mediaSize.padSize+g.mediaItemSize.padSize,_=(this.state.targetPxHeight+-x)/g.height;if(a=g.width*_,s=a+x,c===e?(l=1,n=s,o=s+-x):(n=n+this.state.gutterPixelWidth+s,o=o+a,l++),g.rowEnd){p[c+1]={position:"forcebreak",penalty:-9e9,itemCount:l,startIndex:e,breakBefore:c+1,rowWidth:n,contentWidth:o};break}else if(n>this.state.elWidth){if(g.inDesignatedRow)continue;p[c]={position:"under",itemCount:l+-1,penalty:0,startIndex:e,breakBefore:c,rowWidth:n+-(this.state.gutterPixelWidth+s),contentWidth:o-a},f==="fill"||c===e?p[c+1]={position:"over",penalty:0,itemCount:l,startIndex:e,breakBefore:c+1,rowWidth:n,contentWidth:o}:c-1>-1&&(p[c-1]={position:"oneunder",penalty:.11,itemCount:l+-2,startIndex:e,breakBefore:c-1,rowWidth:n+-(this.state.gutterPixelWidth*2+s+m),contentWidth:o-(a+v)});break}else if(c==r.length-1){f!=="fill"&&c==e?p[c+1]={position:"orphan",penalty:.5,itemCount:l,startIndex:e,breakBefore:c+1,rowWidth:n,contentWidth:o}:p[c+1]={position:"last",penalty:.06,itemCount:l,startIndex:e,breakBefore:c+1,rowWidth:n,contentWidth:o};break}else l+-2>0&&!g.inDesignatedRow&&f==="fill"&&(p.mid={position:"mid",penalty:.06,itemCount:l+-2,startIndex:e,breakBefore:c-1,rowWidth:n+-(this.state.gutterPixelWidth*2+s+m),contentWidth:o-(a+v)})}if(p.hasOwnProperty("mid")){let c=p.mid.breakBefore;!p.hasOwnProperty(c)&&r.length<15&&(p[p.mid.breakBefore]=p.mid),delete p.mid}for(let c in p){let m=p[c],v=m.rowWidth/this.state.elWidth;m.distance=Math.abs(1-v)*Math.abs(1-v)*Math.abs(1-v),isNaN(m.penalty)||(m.distance=m.distance+m.penalty)}return this.findValidRowCache[e]=p,p};makeNodes=(e,r,i,n,o)=>{if(e===-1)return;let s={index:parseInt(e),edges:this.findValidRows(e,o),distanceToFirstNode:r,parent:i},a=!1;if(n[e]?s.distanceToFirstNode<n[e].distanceToFirstNode&&(n[e]=s,a=!0):(n[e]=s,a=!0),a){let l=z1.default.keys(s.edges);for(let p=0;p<l.length;p++){let f=s.edges[l[p]];this.makeNodes(parseInt(l[p]),f.distance+s.distanceToFirstNode,s.index,n,o)}}};getItemSize=(e,r)=>{let i=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};isNaN(i.width)&&(i.width=300),isNaN(i.height)&&(i.height=300);let n=e.getAttribute("justify-row-end")==="true"&&!r;return{...i,rowEnd:n}}},so={name:"justify",displayName:"Justify",tagName:"GALLERY-JUSTIFY",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"End Row Here",name:"justify-row-end",type:"check-box",value:!0}],options:[{labelName:"Row Height",name:"row-height",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,allowCalc:!0,allowVar:!0,value:"20%",min:1,defaultUnit:"%",step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowedUnits:["px","%","rem","vmin","vmax","vw","vh","em"]},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{vw:30,vh:30,vmax:30,vmin:30,rem:20,em:20,px:300,etc:100},step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Row Align",name:"row-align",type:"radio",value:"fill",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"},{labelName:"Fill",iconName:"alignContentFill",value:"fill"}]},{type:"more-actions",children:[{labelName:"Clear Designated Rows",name:"clear-designated-rows",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),t.stopPropagation();let e=Array.from(this.state.activeGallery.children).filter(r=>r.hasAttribute("justify-row-end")||r.hasAttribute("justify-row-start"));CargoEditor.mutationManager.execute(()=>{e.forEach(r=>{r.removeAttribute("justify-row-end")})}),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor())}}]}],mobileOptions:[{labelName:"Row Height",name:"mobile-row-height",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,allowCalc:!0,allowVar:!0,value:"20%",min:1,defaultUnit:"%",allowedUnits:["px","%","rem","vmin","vmax","vw","vh","em"]},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Row Align",name:"mobile-row-align",type:"radio",value:"fill",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"},{labelName:"Fill",iconName:"alignContentFill",value:"fill"}]}]};so.mediaItemDefaults=ht(so.mediaItemOptions);so.defaults=ht(so.options);so.mobileDefaults=ht(so.mobileOptions);Wg.defaultProps={"show-tags":!0,"show-title":!0,"row-align":so.defaults["row-align"].value,"row-height":so.defaults["row-height"].value,gutter:"1rem","mobile-gutter":void 0,"mobile-row-height":void 0,"mobile-row-align":void 0};Ale=qt(Oo(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Wg)));ar(Ale,"gallery-justify",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","row-align","row-height","gutter","mobile-gutter","mobile-row-height","mobile-row-align"],{renderIntoShadow:!0})});function Tle(t,e){let r=e.pid;return{isMobileOnly:t.site.mobile_homepage_id==r||t.pages.byId[r]&&t.pages.byId[r].pin&&t.pages.byId[r].pin_options.screen_visibility==="mobile"}}var Pi,Vg,U1,q3,H3=$(()=>{ke();mt();Ur();Ze();Dt();Rr();ms();Xn();qr();Fe();Pi=ve(Ie(),1);fe();Vg=new Set;he||(window.addEventListener("mousedown",t=>{Vg.forEach(e=>{e.setState({noPointerEvents:!0})})}),window.addEventListener("mouseup",t=>{Vg.forEach(e=>{e.setState({noPointerEvents:!1})})}));U1=class extends me{constructor(e){super(e),this.handleWidth=20,this.minHandleOverlap=3,this.maxColumns=12,this.state={columnSetAbove:!1,noPointerEvents:!1,buttonHovered:!1,focused:!1,loaded:!1,adminWindow:!1,showGhost:!1,isDraggingHandle:!1,isDragging:!1,activeIndex:-1,pointerStart:{x:0,y:0},delta:{x:0,y:0},instanceRect:{width:100,height:100,left:-999,top:-999},referenceColumnSpans:[]},this.columnAddOrRemoveObserver=new MutationObserver(this.onColumnAddOrRemove),this.columnAddOrRemoveObserverConfig={attributes:!0,childList:!0,subtree:!1},this.columnObserver=new MutationObserver(this.onColumnChange),this.columnObserverConfig={attributeFilter:["span"],childList:!1,subtree:!1},this.columnCache=[],this.columnOutlineRef=_e(),this.gearReaf=_e(),this.addThreshold=0,this.removeThreshold=0,this.saveColumnSettings=Pi.default.debounce(this.saveColumnSettings,150),this.updateColumns=Pi.default.throttle(this.updateColumns,40)}render(e,r){let{emptyColumns:i,gutter:n,columnSpans:o,displaySpans:s,layoutColumns:a,unitsToRemove:l,isMobile:p,mobileStack:f,mobileHideEmpty:c,elWidth:m,gutterWidth:v}=e,{activeIndex:g,delta:x,isDraggingHandle:_,adminWindow:E,showGhost:L,loaded:O,buttonHovered:M,focused:D,noPointerEvents:P,columnSetAbove:U}=r,N=Pi.default.uniq(i).length==1&&i[0]==!0,F=Pi.default.uniq(o).length==1&&o[0]==null,V=(m-v*(a-1))/a,q=o.length<a,J=[],ie=a%o.length==0||!F?a:o.length-l;p&&f&&(ie=1);let oe=Math.max(0,(m-v*(ie-1))/ie),Z=Math.max(1,v);oe=oe-(Z-v);let K=23;for(let Q=0;Q<ie;Q++){let te=(oe+Z)*Q;J.push(S("div",{className:"ghost-span",style:{transform:`translateX(${te}px)`,opacity:L?.04:0,width:oe+"px"}},`ghost-${Q}`))}return S(de,{children:[S(Jr,{baseNode:this.props.columnInstance}),S("style",{children:i.map((Q,te)=>Q?`
				::slotted(column-unit:nth-child(${te+1})){
					min-height: 1em;
				}`:"").join(`
`)}),S(Ei,{onPointerIn:this.checkForColumnSetAbove,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,buttonHeight:K,buttonMode:"outside",baseNode:this.props.columnInstance,el:this.props.columnInstance,render:Q=>{let{pointerAttention:te,overlayPosition:ee}=Q,ae=0,ue=0,le=-K,xe=2;return(ee.y<=K||U)&&(le=ee.height+1,ee.height+ee.y>nt.data.window.h+-K&&(le=-ee.y+nt.data.window.h+-K+1,xe=0)),S("div",{ref:this.columnOutlineRef,className:`editor-overlay editor-outline columns-outline${te?" hover":""}${te?" button-hover":""}${D?" focus":""}`,style:{transform:`translate3d(${ee.x}px, ${ee.y}px, 0)`,width:ee.width+"px",height:ee.height+"px",display:te||M||D?"block":"none"},children:[(te||D||M)&&J,(te||D||M)&&!(p&&f)?o.map((Re,be)=>{let Me=s[be];if(Re||(Re=a/o.length),be==o.length-1||Me=="hide"||(ae+=Re,ae>=a))return null;ue+=V*Re+(Re-1)*v+v;let We=`${ue+-v*.5}px`,Pe=this.handleWidth*-.5;return v<=this.handleWidth-this.minHandleOverlap&&(Pe=v*-.5+-this.minHandleOverlap),S(de,{children:[q&&be<a&&S("div",{style:{pointerEvents:P?"none":"auto",display:te||D||M?"block":"none",transform:`translateX(${We})`,width:this.handleWidth+"px",marginLeft:`${Pe}px`},className:"column-divider-handle",onMouseDown:Ve=>this.onMouseDown(Ve,be)}),S("div",{style:{display:te||D||M?"block":"none",transform:`translateX(${We})`,transition:_?"transform .08s cubic-bezier(0, 0, 0.2, 1)":""},className:"column-divider"},`col-${be}`)]})}):null,S("div",{className:"in-editor-buttons",style:{pointerEvents:P?"none":"auto",transform:`translate(${xe}px, ${le}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:S("div",{className:"pointer-mask",children:[S("button",{className:"columns text",ref:this.gearReaf,onMouseDown:this.launchUIWindow,children:"Columns"}),(!p||this.props.isMobileOnly)&&S(de,{children:[S("button",{onMouseDown:this.removeColumn,className:"remove",children:S("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:S("rect",{x:"4",y:"9.5",width:"12",height:"1",class:"button-fill"})})}),S("button",{onMouseDown:this.addColumn,className:`add ${o.length>=this.maxColumns?"disabled":""}`,children:S("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[S("rect",{x:"4",y:"9.5",width:"12",height:"1",class:"button-fill"}),S("rect",{x:"9.5",y:"4",width:"1",height:"12",class:"button-fill"})]})})]})]})})]})}})]})}checkForColumnSetAbove=()=>{let e=this.props.columnInstance.getBoundingClientRect();document.getElementById("editor-overlay").style.display="none";let r=document.elementFromPoint(e.right-10,e.top-15);document.getElementById("editor-overlay").style.display="",this.setState({columnSetAbove:r?.tagName?.startsWith("COLUMN-")})};launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.gearReaf.current.getBoundingClientRect(),i=this.props.columnInstance.getBoundingClientRect(),n={x:r.x+0,y:i.y+-190,left:r.left+0,right:r.right+0,top:i.top+0+-190,bottom:i.top+27+-190,width:r.width,height:r.height};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"columns-ineditor",windowAlias:"columns",supportsMobile:!0,positionRect:n,closeButton:!1,closeOnAllClickout:!0,props:{columnNodes:[this.props.columnInstance]}})};addColumn=e=>{e?.preventDefault(),e?.stopPropagation(),!(this.props.columnSpans.length>=this.maxColumns)&&(CargoEditor.mutationManager.execute(()=>{let r=this.columnCache.pop()||document.createElement("column-unit");r.removeAttribute("span"),r.removeAttribute("slot"),r.removeAttribute("data-discarded-column"),this.props.columnInstance.appendChild(r),this.addThreshold>1&&this.updateColumns(this.props.columnSpans.map(i=>{})),this.addThreshold++,clearTimeout(this.addTimeout),this.addTimeout=setTimeout(()=>{this.addThreshold=0},500)}),this.props.columnInstance.render(),this.saveColumnSettings())};removeColumn=e=>{e?.preventDefault(),e?.stopPropagation();let r=e?.altKey||!1,i=Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT");i.length!=0&&(CargoEditor.mutationManager.execute(()=>{if(this.props.columnSpans.length==1)Array.from(i[0].childNodes).forEach(n=>{this.props.columnInstance.parentNode.insertBefore(n,this.props.columnInstance)}),this.props.columnInstance.parentNode.insertBefore(document.createElement("br"),this.props.columnInstance),this.props.columnInstance.remove();else{let n=i[i.length-1];if(r){let o=i[i.length-2];Array.from(n.childNodes).forEach(s=>{o.appendChild(s)})}this.columnCache.push(n.cloneNode(!0)),this.waiting=!0,n.remove(),n.setAttribute("data-discarded-column",!0),this.removeThreshold>1&&this.updateColumns(this.props.columnSpans.map(o=>{})),this.removeThreshold++,clearTimeout(this.removeTimeout),this.removeTimeout=setTimeout(()=>{this.removeThreshold=0},500)}}),this.props.columnInstance.render())};updateUIWindowPosition=e=>{!this.state.focused||!this.state.UIWindow||(this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow.props.superBadScrollHack.scroll(e))};onMouseDown=(e,r)=>{e.button!=2&&(this.props.columnSpans.length<2||(e.preventDefault(),e.stopPropagation(),this.setState({showGhost:!0,isDraggingHandle:!0,activeIndex:r,pointerStart:{x:e.clientX,y:e.clientY},referenceColumnSpans:this.props.columnSpans,instanceRect:this.props.columnInstance.getBoundingClientRect()},()=>{this.dragTimeout=setTimeout(()=>{document.body.classList.add("dragging")},100),ye.adminWindow.addEventListener("pointermove",this.onPointerMove),ye.adminWindow.addEventListener("pointercancel",this.onPointerUp),ye.adminWindow.addEventListener("mouseup",this.onPointerUp),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointercancel",this.onPointerUp),window.addEventListener("mouseup",this.onPointerUp)})))};onPointerUp=e=>{clearTimeout(this.dragTimeout),ye.adminWindow.removeEventListener("pointermove",this.onPointerMove),ye.adminWindow.removeEventListener("pointercancel",this.onPointerUp),ye.adminWindow.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerUp),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),this.setState({showGhost:!1,isDraggingHandle:!1,activeIndex:-1,delta:{x:0,y:0}}),document.body.classList.remove("dragging")};onPointerMove=e=>{e.preventDefault();let{activeIndex:r,pointerStart:i,instanceRect:n,referenceColumnSpans:o,isDraggingHandle:s}=this.state,{gutterWidth:a,displaySpans:l,unitsToRemove:p,layoutColumns:f,units:c}=this.props;if(s){let m=[...o];if(Pi.default.uniq(o).length==1&&o[0]==null){let N=0,F=0,V=0,q=c/m.length-Math.floor(c/m.length),J=Math.floor(c/m.length),Y=m.map((ie,oe)=>{F=F+q;let Z=J;return F>1&&(Z=Z+1,F=F-1),oe==m.length-1&&(Z=c-N),N=N+Z,Z});this.setState({referenceColumnSpans:Y});return}let g=(n.width-a*(f-1))/f,x=0,_=[];m.forEach((N,F)=>{N||(N=f/m.length);let V=g*N+(N-1)*a;(F==r||F==r+1)&&_.push({x,width:V}),l[F]!="hide"&&(x+=V+a)});let E=20,{left:L}=n,O={x:e.clientX-(_[1].x+L+-a*.5),y:e.clientY-i.y},M=m.map((N,F)=>{let V=N,q=g*N+(N-1)*a;return F==r?(V=(q+O.x+a)/(g+a),Math.round(Math.max(Math.min(V,c-1),1))):l[F]=="hide"?N:Math.round(Math.max(Math.min(V,c-1),1))}),D=r+1;for(;l[D]=="hide";)D++;let P=Pi.default.sum(M)-M[D];M[D]=c-P,M[D]==0&&(M[D]+=1,M[r]-=1),Pi.default.uniq(M).length==1&&Pi.default.sum(M)==c&&(M=M.map(N=>{})),Math.abs(O.x)>4&&this.updateColumns(M),this.setState({delta:O})}};checkColumns=()=>{let{layoutColumns:e,columnSpans:r,units:i}=this.props;if(r.length==0||Pi.default.uniq(r).length==1&&r[0]==null)return;let o=r.includes(void 0),s=Pi.default.sum(r),a=[...r],l=!1;if(s!=i||o){if(s>i)l=!0;else if(s<=i)if(o){let f=i-s,c=r.filter(v=>v==null).length,m=Math.floor(f/c);r.forEach((v,g)=>{if(g==r.length-1&&f>0)a[g]=f;else if(v==null&&f==0){let x=g;for(;x>=0&&(r[x]<2||r[x]==null);)x--;r[x]>1?(a[g]=Math.floor(r[x]/2),a[x]=r[x]-a[g]):l=!0}else v==null?(a[g]=m,f-=m):a[g]=v})}else{let f=i-s;a[a.length-1]=f+a[a.length-1]}(Pi.default.uniq(a).length==1&&Pi.default.sum(a)==i||l)&&(a=a.map(f=>{})),this.updateColumns(a)}else this.updateColumns(r)};updateColumns=e=>{let r=Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT"),i=[];r.forEach((n,o)=>{e[o]==null?i.push([n,null]):parseInt(n.getAttribute("span"))!=e[o]&&i.push([n,e[o]])}),i.length>0&&(CargoEditor?.mutationManager?.execute(()=>{i.forEach(([n,o])=>{o===null?n.removeAttribute("span"):n.setAttribute("span",o)})}),this.saveColumnSettings(),this.props.columnInstance.render())};saveColumnSettings=()=>{ye.adminWindow.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{session:{"last-column-settings":this.getColumnInfo()}}})};onDragOver=(e,r,i)=>{i.fromOutside&&!i.inAdmin?(Xe.activateHoverElement(this.props.columnInstance),Xe.lockItem(this.props.columnInstance)):(Xe.unlockItem(this.props.columnInstance),Xe.deactivateHoverElement(this.props.columnInstance))};onDragStart=(e,r,i)=>{Xe.activateHoverElement(this.props.columnInstance),Xe.lockItem(this.props.columnInstance)};onDragEnd=(e,r)=>{Xe.unlockItem(this.props.columnInstance),Xe.testHover()};componentDidUpdate(e,r){(!Pi.default.isEqual(e.columnSpans,this.props.columnSpans)||e.layoutColumns+e.unitsToRemove!=this.props.layoutColumns+this.props.unitsToRemove)&&(Math.abs(e.layoutColumns+e.unitsToRemove-(this.props.layoutColumns+this.props.unitsToRemove))>2?this.updateColumns(this.props.columnSpans.map(i=>{})):this.checkColumns()),(e.gutter!==this.props.gutter||e["mobile-gutter"]!==this.props["mobile-gutter"])&&this.updateEditorRect()}updateEditorRect=Pi.default.throttle(()=>{Xe.updateElementRect(this.props.columnInstance)},120,{leading:!0,trailing:!0});getColumnInfo=()=>({columnSizes:this.props.columnSpans.map(e=>e??0),units:this.props.units,columns:this.props.columnSpans.length,emptySet:Pi.default.uniq(this.props.emptyColumns).length==1&&this.props.emptyColumns[0]==!0});onColumnAddOrRemove=e=>{let r=!1;e.forEach(i=>{Array.from(i.addedNodes).find(n=>n.tagName=="COLUMN-UNIT")&&(r=!0),Array.from(i.removedNodes).find(n=>n.tagName=="COLUMN-UNIT")&&(r=!0)}),r&&(this.columnObserver.disconnect(),r&&(Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT").forEach(n=>{this.columnObserver.observe(n,this.columnObserverConfig)}),this.state.UIWindow?.setState?.({activeSettings:this.state.UIWindow.getColumnSettingsFromNodes()}))),this.state.UIWindow?.onMutation?.(),this.props.columnInstance.render()};onColumnChange=e=>{let r=!0;e.forEach(i=>{i.type=="attributes"&&i.attributeName==="span"&&(r=!0)}),r&&(this.props.columnInstance.render(),this.state.UIWindow?.onMutation?.())};setColumns=e=>{let r=Array.from(this.props.columnInstance.children).filter(o=>o.tagName=="COLUMN-UNIT"),i=r.length;if(i!=e){if(i<e)for(var n=0;n<e-i;n++){let o=this.columnCache.pop()||document.createElement("column-unit");o.removeAttribute("span"),this.props.columnInstance.appendChild(o)}else if(e<i)for(var n=i-1;n>=e;n--){let s=r[n];this.columnCache.push(s.cloneNode(!0)),s.setAttribute("data-discarded-column",!0),s.remove()}this.saveColumnSettings()}};resetColumns=()=>{this.updateColumns(this.props.columnSpans.map(e=>{}))};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount(){Vg.add(this),ye.globalDragEventController.on("dragover",this.onDragOver),ye.globalDragEventController.on("dragstart",this.onDragStart),ye.globalDragEventController.on("dragend",this.onDragEnd),ye.globalDragEventController.on("drop",this.onDragEnd),this.columnAddOrRemoveObserver.observe(this.props.columnInstance,this.columnAddOrRemoveObserverConfig),Array.from(this.props.columnInstance.children).filter(i=>i.tagName=="COLUMN-UNIT").forEach(i=>{this.columnObserver.observe(i,this.columnObserverConfig)}),this.checkColumns(),this.props.columnInstance._editorInterface=this;let r=[];if(Array.from(this.props.columnInstance.childNodes).forEach((i,n)=>{i.tagName!=="COLUMN-UNIT"&&(this.props.columnInstance.removeChild(i),r.push(i))}),r.length>0&&console.warn("removed stray elements from column set",r),this.props.columnInstance._newColumnSet){delete this.props.columnInstance._newColumnSet,Xe.activateHoverElement(this.props.columnInstance),Xe.lockItem(this.props.columnInstance);let i=n=>{this.showOutlinesTimeout=setTimeout(()=>{Xe.unlockItem(this.props.columnInstance),Xe.testHover()},500),window.removeEventListener("mousedown",i)};window.addEventListener("mousedown",i)}this.testHoverTimeout=setTimeout(()=>{Xe.testHover()},300)}componentWillUnmount(){Vg.delete(this),clearTimeout(this.testHoverTimeout),this.state.UIWindow?.closeWindow?.(),clearTimeout(this.showOutlinesTimeout),this.updateColumns.cancel(),this.columnAddOrRemoveObserver.disconnect(),this.columnObserver.disconnect(),ye.globalDragEventController.off("dragover",this.onDragOver),ye.globalDragEventController.off("dragstart",this.onDragStart),ye.globalDragEventController.off("dragend",this.onDragEnd),ye.globalDragEventController.off("drop",this.onDragEnd),delete this.props.columnInstance._editorInterface}};q3=qt(Ue(Tle,null)(U1))});var W3,$g,Mle,V3=$(()=>{ke();Ze();mt();Fe();la();qr();Fg();W3=ve(Ie(),1);Zr();Ur();sl();H3();fe();$g=class extends me{constructor(e){super(e),this.state={mobileActive:nt.data.mobile.active,elWidth:0,gutterWidth:0,hasSizes:!1,incrementLayout:0},this.props.baseNode.render=()=>{this.setState({incrementLayout:this.state.incrementLayout++})}}render(e,r){let{adminMode:i,baseNode:n,pageInfo:o,"mobile-stack":s,"mobile-hide-empty":a,"mobile-gutter":l,units:p}=e,{gutterWidth:f,mobileActive:c,hasSizes:m}=r,{elWidth:v}=r;m||(v=this.props.baseNode.offsetWidth);let g=[],x="";c?l===void 0?(g=ur(e.gutter,"rem"),g[1].indexOf("calc(")>-1?x=g[1].replace("calc(","("):x=g.join(""),x="calc( var(--mobile-padding-offset, 1) * "+x+" )"):(g=ur(l,"rem"),x=g.join(""),x.includes("rem")&&(x="calc( var(--mobile-padding-offset, 1) * "+x+" )")):(g=ur(e.gutter,"rem"),x=g.join(""));let _=Array.from(n.children).filter(V=>V.nodeName==="COLUMN-UNIT"&&!V.hasAttribute("data-discarded-column"));Array.from(n.children).filter(V=>V.nodeName==="COLUMN-UNIT"&&V.hasAttribute("data-discarded-column")).forEach(V=>{V.remove()});let L=_.map(V=>!Array.from(V.childNodes).some(q=>q.nodeType===Node.ELEMENT_NODE||q.nodeType===Node.TEXT_NODE&&q.nodeValue.trim().length>0)),O=_.map(V=>parseInt(V.getAttribute("span"))||void 0),M=0,D=O.map((V,q)=>(c&&L[q]&&(a||s)?(M=M+(parseInt(V)||1),V="hide"):V=V||"uniform",V)),P=D.filter(V=>V=="uniform"||V=="hide").length==D.length,U=Math.max(_.length,this.props.units);P&&(M=D.filter(V=>V=="hide").length),U=U-M;let N=f,F="";if(c&&s){F=`::slotted(column-unit){
				--column-width: ${v}px;
				--resize-parent-width: ${v}px;

			}`;let V=W3.default.findLastIndex(D,q=>q!=="hide");D.forEach((q,J)=>{q=="hide"?F+=`
					::slotted(column-unit[slot="${J}"]) {
						display: none;
					}`:J<V&&(F+=`
					::slotted(column-unit[slot="${J}"]) {
						margin-bottom: ${f}px;
					}`)})}else{let V=ju(P?_.length-M:U,f,v),q=V.columnAndGutterMap;N=V.gutterPixelWidth;let J=V.columnWidth,Y=0;F=D.map((ie,oe)=>{let Z;switch(ie){case"uniform":return Z=q[Y]?.right-q[Y]?.left||10,Y+=1,`::slotted(column-unit[slot="${oe}"]) {
							--column-width: ${Z}px;
							--resize-parent-width: ${Z}px;
						}`;case"hide":return`::slotted(column-unit[slot="${oe}"]) {
							display: none;
						}`;default:return Z=q[Y+(ie+-1)]?.right-q[Y]?.left||10,Y+=ie,`::slotted(column-unit[slot="${oe}"]) {
							${Z<0?`
								margin-right: ${Z+N}px;
								--column-width: 0px;
								--resize-parent-width: 0px;
							`:`
								--column-width: ${Z}px;
								--resize-parent-width: ${Z}px;							
							`}

						}`}}).join(`
				`)}return _.forEach((V,q)=>{V.setAttribute("slot",q)}),rt(S(de,{children:[S(aa,{adminMode:i,baseNode:n,customElementMode:!0,scrollContext:this.props.scrollContext,children:[S("style",{children:`
						:host{
							visibility: ${m?"visible":"hidden"};
			 				--columns-gutter: ${N}px;
							margin-top: calc(var(--gutter-expand, 0) * ${N}px);
		
							width: 100%;
							position: relative;
							contain: layout;
							clear: both;							

							${c&&s?`
									display: flex;
									align-items: start;
									justify-content: flex-start;
									flex-direction: column;
									flex-wrap: nowrap;
									height: auto;
								`:`
									display: flex;
								    align-items: stretch;
								    justify-content: flex-start;							
									flex-direction: row;
									flex-wrap: nowrap;							
								`}
						}
		
					`}),S("style",{children:`
		
						::slotted(column-unit:not(:last-child)) {
						    margin-right: ${c&&s?0:N+"px"};
						}
		
						::slotted(column-unit) {
							display: block;
							word-wrap: break-word;
							position: relative;
						    max-width: 100%;   
						    flex-grow: 0;
						    flex-shrink: 0;
						    flex-basis: ${c&&s?"auto":"var(--column-width)"};
						    width: var(--column-width);
						}
		
						::slotted(column-unit:last-child) {
						    flex-grow: 1;
						}
		
						${F}				
					`}),S(Ji,{values:{elWidth:"100%",gutterWidth:x},style:{position:"absolute",inset:"0 auto"},onResize:this.onResize}),_.map((V,q)=>S("slot",{name:q}))]}),i&&o.isEditing&&!he&&S(q3,{elWidth:v,gutterWidth:f,emptyColumns:L,isMobile:c,mobileStack:s,mobileHideEmpty:a,layoutColumns:U,units:p,columnSpans:O,unitsToRemove:M,displaySpans:D,gutter:x,columnInstance:n})]}),this.props.baseNode.shadowRoot)}onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n.hasSizes=!0,n})};onMobileChange=e=>{this.setState({mobileActive:e})};componentDidMount(){nt.on("mobile-change",this.onMobileChange)}componentWillUnmount(){nt.off("mobile-change",this.onMobileChange)}};$g.defaultProps={units:12,gutter:"1rem","mobile-stack":!0,"mobile-hide-empty":!1,"mobile-gutter":void 0};Mle=qt(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))($g));ar(Mle,"column-set",["units","gutter","mobile-gutter","mobile-stack","mobile-hide-empty"])});var U2e,q1,$3,j3=$(()=>{ke();Ze();Dt();ms();Rr();U2e=ve(Ie(),1);Xn();fe();q1=class extends me{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1}}render(e,r){let{audioPlayerInstance:i}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:a}=r,l=23;return S(de,{children:[S("style",{id:"audio-player-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),S(Ei,{hasFocus:a,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.audioPlayerInstance,render:p=>{let{pointerAttention:f,overlayPosition:c}=p,m=0;return c.y<=1&&(m=Math.min(-c.y+1,c.height+-l+1)),S(de,{children:[S(Jr,{baseNode:i,overlayPosition:c,inFront:!1,overlayMode:!0}),S("div",{className:`editor-overlay editor-outline${f?" hover":""}${f?" button-hover":""}${a?" focus":""}`,style:{transform:`translate3d(${c.x}px, ${c.y}px, 0)`,width:c.width+"px",height:c.height+"px",display:f||s||a?"block":"none",minHeight:"27px"},children:[S("div",{className:"in-editor-buttons audio-player",style:{transform:`translateY(${m}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[S("button",{onMouseDown:v=>{this.launchUIWindow(v)},ref:this.AudioPlayerButtonRef,className:"text",children:"Audio Player"}),e.children]}),e.otherUI]})]})}})]})}launchUIWindow=(e,r)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.audioPlayerInstance.getBoundingClientRect(),n={x:i.x,y:i.y,left:i.right,right:i.right,top:i.top-10,bottom:i.top+27,width:i.width,height:10};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"audioplayer-ineditor",windowAlias:"audioplayer",positionRect:n,closeButton:!1,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,closeOnSingleClickout:!0,supportsMobile:!1,props:{audioPlayerNode:this.props.audioPlayerInstance}})};scrollIntoView=()=>{let e=this.props.audioPlayerInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.audioPlayerInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount=()=>{this.props.audioPlayerInstance._editorInterface=this};componentWillUnmount=()=>{this.state.UIWindow?.closeWindow?.(),delete this.props.audioPlayerInstance._editorInterface}},$3=q1});var X2e,H1,fp,W1,Rle,G3=$(()=>{ke();Ze();Hs();X2e=ve(Ie(),1);Fe();mt();Zr();Ur();j3();fe();he||(H1=new ResizeObserver(t=>{t.forEach(e=>{if(fp.has(e.target)){let r=fp.get(e.target),i=e.borderBoxSize[0]||e.borderBoxSize;r.setState({size:{width:i.inlineSize,height:i.blockSize}})}})}));fp=new Map,W1=class extends me{constructor(e){super(e);let r=this.getFiletype(e.src);this.audio_track=_e(),this.bar=_e(),this.track_buffer=_e(),this.current_time=_e(),this.progressIndicator=_e(),this.state={size:{width:100,height:100},mounted:r!=="stream",filetype:r,seeking:!1,mouseInteractionDisabled:!1,mouseMoveActive:!1,dragging:!1,streaming:!1,paused:!0,playing:!1,started:!1,ended:!1,preventTransition:!1,currentProgress:0,currentBuffer:0,remainingBuffer:0,currentTime:"0:00",rawTimeStamp:0,totalTime:"0:00",progress:0,hasError:!1,hasMetadata:!1}}render(e,r){let{baseNode:i,adminMode:n,label:o,loop:s,"total-time":a,"playback-time":l,"seek-controls":p,"browser-default":f,pageInfo:c}=e,{visible:m}=r,v=!this.state.paused||this.state.started,g=this.props.src?this.props.src:null;return rt(S(de,{children:[n&&c.isEditing&&S($3,{audioPlayerInstance:i}),S("style",{children:`
					* {
				    	box-sizing: border-box;						
					}

					:host {
						--audio-player-progress: ${this.state.currentProgress/100||0};
						--audio-player-buffer-progress: ${this.state.currentBuffer/100||0};
						--audio-player-buffer-remaining: ${this.state.remainingBuffer/100||0};
						max-width: 100%;
						${f?`
						    width: 400px;
						    `:`
						    position: relative;
						    display: inline-flex;
						    align-items: stretch;
						    width: 100%;`}
					}

					${f&&`
					audio {
						width: 100%;
					}

					[part="time-bar"], 
					[part="button"],
					[part="separator"]{
						display:none!important;
					}						
					`}



					[part="buffer"],
					[part="progress"] {
						display: ${v&&!this.state.streaming?"block":"none"};
					}

					[part="label"] {
						display: ${this.state.paused&&!this.state.started?"block":"none"};
					}

					[part="current-time"] {
						display: ${!this.state.streaming&&this.state.started?"block":"none"};
					}

					[part="stream-anim"] {
						display: ${v&&this.state.streaming?"block":"none"};
					}

					[part="total-time"] {
						display: ${v&&!this.state.streaming?"block":"none"};
					}

					[part="buffer"]{
						left: calc( var(--audio-player-buffer-progress, 0) * 100% );
						width: calc( var(--audio-player-buffer-remaining, 0) * 100% );
					}

					[part="progress"]{
						width: calc( var(--audio-player-progress, 0) * 100% );
					}

					[part="stream-anim"] > span {
					  animation-name: period;
					  animation-duration: 1.5s;
					  animation-iteration-count: infinite;
					  animation-timing-function: steps(2, end);  
					}

					[part="stream-anim"] > span:before {
						content: '.';
					}

					[part="stream-anim"] > span:nth-child(1){
					  animation-delay: -.4s;
					}

					[part="stream-anim"] > span:nth-child(2){
					  animation-delay: -.2s;
					}

					[part="stream-anim"] > span:nth-child(3){
					  animation-delay: 0s;
					}

					@keyframes period {
					  from {
					    visibility: hidden;
					  }
					  to {
					    visibility: visible;
					  }
					   
					}					
				
					`}),S("div",{part:"button",onClick:x=>this.togglePlay(x),children:S("svg",{"vector-effect":"non-scaling-stroke",part:this.state.paused?"play-icon icon":"pause-icon icon",x:"0px",y:"0px",viewBox:this.state.paused?"0 0 11.3 12":"0 0 10 12",children:this.state.paused?S("polygon",{points:"0 0 0 12 11.3 6 0 0",part:"play-icon-path icon-path"}):S(de,{children:[S("polygon",{part:"pause-icon-path icon-path",points:"0 0 0 12 1 12 4 12 4 0 1 0 0 0"}),S("polygon",{part:"pause-icon-path icon-path",points:"9 0 6 0 6 12 9 12 10 12 10 0 9 0"})]})})}),S("div",{part:"separator",children:"\xA0"}),S("div",{draggable:this.props.adminMode?"true":null,part:"time-bar",ref:this.bar,onMouseDown:x=>this.onMouseDown(x),onTouchStart:x=>this.onMouseDown(x),onTouchEnd:x=>this.onMouseUp(x),children:[S("div",{ref:this.track_buffer,part:"buffer",children:" "}),S("div",{part:"progress",children:S("div",{ref:this.progressIndicator,part:"progress-indicator"})}),S("div",{part:"label",children:this.state.hasError?"Unable to load file":S(de,{children:this.props.label})}),S("div",{part:"current-time",ref:this.current_time,children:this.state.currentTime}),S("div",{part:"stream-anim",children:[S("span",{part:"animated-period period-one"}),S("span",{part:"animated-period period-two"}),S("span",{part:"animated-period period-three"})]}),S("div",{part:"total-time",children:this.state.totalTime})]}),S("audio",{draggable:this.props.adminMode?"true":null,part:"audio-element",controls:f===!0,src:this.state.mounted?g:null,ref:this.audio_track,loop:this.props.loop===!0||this.props.loop==="true"?!0:void 0,preload:this.state.filetype==="file"?"metadata":null,onProgress:x=>this.onProgress(x),onLoadedMetaData:x=>this.onLoadedMetadata(x),onTimeUpdate:x=>this.updatePlayerTime(x),onSeeking:x=>this.onSeekStart(x),onSeeked:x=>this.onSeekEnd(x),onEnded:x=>this.onTrackEnd(x),onError:x=>this.onError(x),onCanPlay:x=>this.clearError(x)})]}),i.shadowRoot)}disableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!0})};enableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!1})};setPlayState=e=>{this.setState({playing:!0,paused:!1,started:!0,streaming:this.state.filetype==="stream"},()=>{this.props.baseNode.setAttribute("status",this.state.filetype==="stream"?"streaming":"playing")})};setPauseState=e=>{this.setState({paused:!0},()=>{this.props.baseNode.setAttribute("status","stopped")}),this.state.streaming&&this.setInitialState()};setInitialState=(e,r)=>{this.state.streaming&&this.setState({started:!1}),this.setState({playing:!1,paused:!0,animIndex:0,currentTime:0,currentProgress:0,currentBuffer:0,remainingBuffer:0,rawTimeStamp:0},()=>{this.props.baseNode.setAttribute("status",r?.error===!0?"error":"stopped")})};onMouseDown=e=>{this.state.mouseInteractionDisabled||this.state.streaming||e.button===2||this.state.started===!1||(e.preventDefault(),document.body.classList.add("audio-player-dragging"),this.calculateProgressPosition(e),this.setState({mouseMoveActive:!0,preventTransition:!0,dragging:!1}),this.bar.current.addEventListener("mousemove",this.onMouseInteraction),this.bar.current.addEventListener("touchmove",this.onMouseInteraction),window.addEventListener("mousemove",this.onMouseInteraction),window.addEventListener("mouseup",this.onMouseUp))};calculateProgressPosition=e=>{let r=this.bar.current.getBoundingClientRect(),i=e.clientX||e.touches[0].clientX;i<r.left?this.audio_track.current.currentTime=0:i>r.right?this.audio_track.current.currentTime=this.audio_track.current.duration:this.audio_track.current.currentTime=this.audio_track.current.duration*((i-r.left)/this.state.size.width),this.updatePlayerTime()};onMouseInteraction=e=>{this.state.mouseInteractionDisabled||this.state.streaming||!this.state.started||!this.state.mouseMoveActive||this.audio_track.current.readyState===this.audio_track.current.HAVE_NOTHING||(this.calculateProgressPosition(e),this.setState({dragging:!0}))};onMouseUp=e=>{document.body.classList.remove("audio-player-dragging"),this.state.dragging===!0&&(!this.state.mouseInteractionDisabled&&!this.state.streaming&&this.state.started&&this.state.mouseMoveActive&&this.audio_track.current.readyState!==this.audio_track.current.HAVE_NOTHING&&this.calculateProgressPosition(e),this.state.paused===!1&&this.state.started===!0&&(this.audio_track.current.currentTime>=this.audio_track.current.duration-.001?this.setPauseState():this.audio_track.current.play())),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseInteraction),this.bar.current.removeEventListener("mousemove",this.onMouseInteraction),this.bar.current.removeEventListener("touchmove",this.onMouseInteraction),this.setState({dragging:!1,mouseMoveActive:!1})};onSeekStart=e=>{this.setState({seeking:!0})};onSeekEnd=e=>{this.setState({seeking:!1})};togglePlay=e=>{if(!(this.state.mouseInteractionDisabled||!this.state.mounted))if(this.audio_track.current.paused){let r=this.audio_track.current.play();fp.forEach((i,n)=>{i!==this&&(i.audio_track.current.pause(),i.setPauseState())}),r?r.then(function(){this.setPlayState(),this.setState({preventTransition:!1})}.bind(this)).catch(this.onError).finally(function(){this.setState({preventTransition:!0})}.bind(this)):this.setPlayState()}else this.audio_track.current.pause(),this.setPauseState()};onError=e=>{this.props.adminMode||(this.setState({hasError:!0},()=>{this.setInitialState(null,{error:!0})}),e instanceof DOMException&&console.error(e))};clearError=e=>{this.state.hasError&&this.setState({hasError:!1},()=>{this.setInitialState(null,{error:!1})})};onTrackEnd=e=>{this.state.dragging!==!0&&(this.setState({ended:!0}),this.setPauseState())};onLoadedMetadata=e=>{if(!this.audio_track.current)return;let r=this.timestampToHumanReadable(this.audio_track.current.duration);this.setState({totalTime:r,streaming:!1,hasMetadata:!0},()=>{this.props.baseNode.setAttribute("status","stopped")})};onProgress=e=>{this.audio_track.current&&(this.state.filetype==="stream"?this.setState({totalTime:0,streaming:!0,hasMetadata:!0},()=>{this.props.baseNode.setAttribute("status","streaming")}):this.setState({streaming:!1},()=>{this.props.baseNode.setAttribute("status","playing")}),this.updateBufferSize())};updatePlayerTime=e=>{if(cancelAnimationFrame(this.updateFrame),!this.state.started||!this.audio_track.current||this.audio_track.current.readyState===this.audio_track.current.HAVE_NOTHING)return;this.setState({rawTimeStamp:this.audio_track.current.currentTime});let{"browser-default":r}=this.props;if(r)return;let i=!1,n=this.audio_track.current.currentTime,o=this.timestampToHumanReadable(n),s=n/this.audio_track.current.duration*100,a=this.state.size.width,l=parseInt(window.getComputedStyle(this.progressIndicator.current).width);(this.props.loop==="true"||this.props.loop===!0)&&(s>=99.5||s===0)&&(i=!0),a*(s/100)<l&&(s=(100-s)*(l/a)),this.setState(p=>{let f=s;return p.dragging&&Math.abs(p.currentProgress-s)>1&&(f=s*.1+p.currentProgress*.9),this.updateBufferSize(.01*f*this.audio_track.current.duration),{currentTime:o,currentBuffer:f,currentProgress:f,preventTransition:i}}),this.state.dragging&&(this.updateFrame=requestAnimationFrame(this.updatePlayerTime))};getFiletype=(e="")=>{let r=!1;try{r=new URL(e).pathname.split("/").pop()?.indexOf(".")>-1}catch(n){console.error(n)}return r&&["m3u","pls","m3u8","asx"].some(n=>e.toLowerCase().endsWith(n))?"playlist":r?"file":"stream"};updateBufferSize=e=>{if(!this.audio_track.current)return;let r,i=e||this.audio_track.current.currentTime,n=0;for(var o=0;o<this.audio_track.current.buffered.length;o++)if(i>=this.audio_track.current.buffered.start(o)&&i<=this.audio_track.current.buffered.end(o)){r=Math.max(this.audio_track.current.buffered.end(o)-i,0),n=r/this.audio_track.current.duration*100;break}n!==0&&(n+=1),this.setState({remainingBuffer:n})};timestampToHumanReadable=e=>{if(isNaN(e))return"0:00";var r=Math.floor(e%60),i=Math.floor(e/60),n=Math.floor(i/60);return r<10&&(r="0"+r),n>0?(i=i-n*60,i<10&&(i="0"+i),n+":"+i+":"+r):i+":"+r};onDragStart=e=>{this.setState({started:!1}),this.audio_track.current.pause(),this.setInitialState(),e.dataTransfer.setData("audio-player-drag","true")};componentDidMount(){this.setPauseState(),this.state.mounted||setTimeout(()=>{this.setState({mounted:!0})},this.state.filetype==="stream"?2e3:0),he||(this.props.baseNode.addEventListener("dragstart",this.onDragStart),fp.set(this.bar.current,this),H1.observe(this.bar.current))}componentDidUpdate(e){e.src!==this.props.src&&(this.setState({filetype:this.getFiletype(this.props.src)}),e.src&&e.src.substring(0,5)==="blob:"&&(this.state.rawTimeStamp!==0&&(this.audio_track.current.currentTime=this.state.rawTimeStamp),this.state.paused===!1&&this.audio_track.current.play()))}componentWillUnmount(){he||(this.props.baseNode.removeEventListener("dragstart",this.onDragStart),fp.delete(this.bar.current),H1.unobserve(this.bar.current)),window.removeEventListener("mouseup",this.onMouseUp)}},Rle=qt(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(W1));ar(Rle,"audio-player",["src","label","loop","total-time","playback-time","seek-controls","browser-default"])});var Y3=se((nFe,K3)=>{"use strict";K3.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,n,o;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(n=i;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(r).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=i;n--!==0;){var s=o[n];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}});function Lo(){return Lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Lo.apply(null,arguments)}function Ku(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;r[i]=t[i]}return r}function kle(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nle(t){var e=kle(t,"string");return typeof e=="symbol"?e:e+""}function zle(){let[t,e]=wi({});return{mapInstances:t,addMapInstance:(o,s="default")=>{e(a=>Lo({},a,{[s]:o}))},removeMapInstance:(o="default")=>{e(s=>Ku(s,[o].map(Nle)))},clearMapInstances:()=>{e({})}}}function Ble(t){let{onLoad:e,apiKey:r,version:i,libraries:n=[]}=t,o=Ku(t,Dle),[s,a]=wi(fl.loadingStatus),[l,p]=Hn((v,g)=>Lo({},v,{[g.name]:g.value}),{}),f=Qt(()=>n?.join(","),[n]),c=Qt(()=>JSON.stringify(Lo({apiKey:r,version:i},o)),[r,i,o]),m=qs(async v=>{var g;if(l[v])return l[v];if(!((g=google)!=null&&(g=g.maps)!=null&&g.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");let x=await window.google.maps.importLibrary(v);return p({name:v,value:x}),x},[l]);return zt(()=>{(async()=>{try{let v=Lo({key:r},o);i&&(v.v=i),f?.length>0&&(v.libraries=f),v.solutionChannel===void 0?v.solutionChannel=Fle:v.solutionChannel===""&&delete v.solutionChannel,await fl.load(v,g=>a(g));for(let g of["core","maps",...n])await m(g);e&&e()}catch(v){console.error("<ApiProvider> failed to load the Google Maps JavaScript API",v)}})()},[r,f,c]),{status:s,loadedLibraries:l,importLibrary:m}}function Ule(t,e){for(let r of Vle){let i=e[r],n=eB[r];zt(()=>{if(!t||!i)return;let o=google.maps.event.addListener(t,n,s=>{i(qle(n,t,s))});return()=>o.remove()},[t,n,i])}}function qle(t,e,r){let i={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(Hle.includes(t)){let o=i,s=e.getCenter(),a=e.getZoom(),l=e.getHeading()||0,p=e.getTilt()||0,f=e.getBounds();return(!s||!f||!Number.isFinite(a))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),o.detail={center:s?.toJSON()||{lat:0,lng:0},zoom:a||0,heading:l,tilt:p,bounds:f?.toJSON()||{north:90,east:180,south:-90,west:-180}},o}else if(Wle.includes(t)){var n;if(!r)throw new Error("[createEvent] mouse events must provide a srcEvent");let o=i;return o.domEvent=r.domEvent,o.stoppable=!0,o.stop=()=>r.stop(),o.detail={latLng:((n=r.latLng)==null?void 0:n.toJSON())||null,placeId:r.placeId},o}return i}function $le(t,e){let r=xi(void 0);(!r.current||!(0,J3.default)(e,r.current))&&(r.current=e),zt(t,r.current)}function Gle(t,e){let r={},i=Object.keys(e);for(let n of i)jle.has(n)&&(r[n]=e[n]);$le(()=>{t&&t.setOptions(r)},[r])}function tB(){var t;return((t=Fr(gp))==null?void 0:t.status)||xs.NOT_LOADED}function Kle(t,e){let{viewport:r,viewState:i}=e,n=!!r;return Li(()=>{if(!t||!i)return;let{latitude:o,longitude:s,bearing:a,pitch:l,zoom:p}=i;t.moveCamera({center:{lat:o,lng:s},heading:a,tilt:l,zoom:p+1})},[t,i]),n}function Yle(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function rB(t){return Yle(t)?t:t.toJSON()}function Xle(t,e,r){let i=r.center?rB(r.center):null,n=null,o=null;i&&Number.isFinite(i.lat)&&Number.isFinite(i.lng)&&(n=i.lat,o=i.lng);let s=Number.isFinite(r.zoom)?r.zoom:null,a=Number.isFinite(r.heading)?r.heading:null,l=Number.isFinite(r.tilt)?r.tilt:null;Li(()=>{if(!t)return;let p={},f=!1;n!==null&&o!==null&&(e.current.center.lat!==n||e.current.center.lng!==o)&&(p.center={lat:n,lng:o},f=!0),s!==null&&e.current.zoom!==s&&(p.zoom=s,f=!0),a!==null&&e.current.heading!==a&&(p.heading=a,f=!0),l!==null&&e.current.tilt!==l&&(p.tilt=l,f=!0),f&&t.moveCamera(p)})}function Jle(){let[t,e]=wi(null),r=qs(i=>e(i),[e]);return[t,r]}function iB(){return tB()===xs.LOADED}function Qle(){let[,t]=Hn(e=>e+1,0);return t}function eue(t,e){let r=t.getCenter(),i=t.getZoom(),n=t.getHeading()||0,o=t.getTilt()||0,s=t.getBounds();(!r||!s||!Number.isFinite(i))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:r?.toJSON()||{lat:0,lng:0},zoom:i||0,heading:n,tilt:o})}function tue(t){let e=Qle(),r=xi({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return zt(()=>{if(!t)return;let i=google.maps.event.addListener(t,"bounds_changed",()=>{eue(t,r),e()});return()=>i.remove()},[t,e]),r}function nue(t,e){let r=iB(),[i,n]=wi(null),[o,s]=Jle(),a=tue(i),{id:l,defaultBounds:p,defaultCenter:f,defaultZoom:c,defaultHeading:m,defaultTilt:v,reuseMaps:g,renderingType:x,colorScheme:_}=t,E=Ku(t,rue),L=t.zoom!==void 0||t.defaultZoom!==void 0,O=t.center!==void 0||t.defaultCenter!==void 0;!p&&(!L||!O)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!E.center&&f&&(E.center=f),!E.zoom&&Number.isFinite(c)&&(E.zoom=c),!E.heading&&Number.isFinite(m)&&(E.heading=m),!E.tilt&&Number.isFinite(v)&&(E.tilt=v);for(let D of Object.keys(E))E[D]===void 0&&delete E[D];let M=xi();return zt(()=>{if(!o||!r)return;let{addMapInstance:D,removeMapInstance:P}=e,{mapId:U}=t,N=`${U||"default"}:${x||"default"}:${_||"LIGHT"}`,F,V;if(g&&Gu.has(N)?(V=Gu.pop(N),F=V.getDiv(),o.appendChild(F),V.setOptions(E),setTimeout(()=>V.setCenter(V.getCenter()),0)):(F=document.createElement("div"),F.style.height="100%",o.appendChild(F),V=new google.maps.Map(F,Lo({},E,x?{renderingType:x}:{},_?{colorScheme:_}:{}))),n(V),D(V,l),p){let{padding:q}=p,J=Ku(p,iue);V.fitBounds(J,q)}else(!L||!O)&&V.fitBounds({east:180,west:-180,south:-90,north:90});if(M.current){let{mapId:q,cameraState:J}=M.current;q!==U&&V.setOptions(J)}return()=>{M.current={mapId:U,cameraState:a.current},F.remove(),g?Gu.push(N,V):google.maps.event.clearInstanceListeners(V),n(null),P(l)}},[o,r,l,t.mapId,t.renderingType,t.colorScheme]),[i,s,a]}function oue(...t){let e=JSON.stringify(t);X3.has(e)||(X3.add(e),console.error(...t))}function sue(t){let e=iB(),r=Fr(gp);return zt(()=>{!e||!r||r.importLibrary(t)},[e,r,t]),r?.loadedLibraries[t]||null}function aue(t,e,r){if(e!=null&&typeof e!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");let i=t.style;if(r==null){if(e==null)return;for(let n in e)e.hasOwnProperty(n)&&Z3(i,n,e[n]);return}for(let n in r)r.hasOwnProperty(n)&&(e==null||!e.hasOwnProperty(n))&&(n.indexOf("--")===0?i.setProperty(n,""):n==="float"?i.cssFloat="":i[n]="");if(e!=null)for(let n in e){let o=e[n];e.hasOwnProperty(n)&&r[n]!==o&&Z3(i,n,o)}}function Z3(t,e,r){let i=e.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,r):typeof r=="number"&&r!==0&&!uue(e)?t[e]=r+"px":e==="float"?t.cssFloat=r:t[e]=(""+r).trim()}function uue(t){return lue.has(t)}function jg(t,e,r){zt(()=>{if(!t||!e||!r)return;let i=google.maps.event.addListener(t,e,r);return()=>i.remove()},[t,e,r])}function mp(t,e,r){zt(()=>{t&&(t[e]=r)},[t,e,r])}function due(t){let[e,r]=wi(null),[i,n]=wi(null),o=xi(null),s=Gg(),a=sue("marker"),{children:l,className:p,style:f,onClick:c,onDrag:m,onDragStart:v,onDragEnd:g,collisionBehavior:x,clickable:_,draggable:E,position:L,title:O,zIndex:M}=t,D=Fa.count(l);return zt(()=>{if(!s||!a)return;let P=new a.AdvancedMarkerElement;P.map=s,r(P);let U=null;return D>0&&(U=document.createElement("div"),P.content=U,n(U)),()=>{var N;P.map=null,(N=U)==null||N.remove(),r(null),n(null)}},[s,a,D]),zt(()=>{!e||!e.content||(e.content.className=p||"")},[e,p]),mp(i,"className",p??""),zt(()=>{i&&(aue(i,f||null,o.current),o.current=f||null)},[i,p,f]),mp(e,"position",L),mp(e,"title",O??""),mp(e,"zIndex",M),mp(e,"collisionBehavior",x),zt(()=>{e&&(E!==void 0?e.gmpDraggable=E:m||v||g?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,E,m,g,v]),zt(()=>{e&&(_!==void 0?e.gmpClickable=_:c?e.gmpClickable=!0:e.gmpClickable=!1)},[e,_,c]),jg(e,"click",c),jg(e,"drag",m),jg(e,"dragstart",v),jg(e,"dragend",g),[e,i]}function hue(t){let[e,r]=wi(null),i=Gg(),{onClick:n,onDrag:o,onDragStart:s,onDragEnd:a,onMouseOver:l,onMouseOut:p}=t,f=Ku(t,pue),{position:c,draggable:m}=f;return zt(()=>{if(!i){i===void 0&&console.error("<Marker> has to be inside a Map component.");return}let v=new google.maps.Marker(f);return v.setMap(i),r(v),()=>{v.setMap(null),r(null)}},[i]),zt(()=>{if(!e)return;let v=e,g=google.maps.event;return n&&g.addListener(v,"click",n),o&&g.addListener(v,"drag",o),s&&g.addListener(v,"dragstart",s),a&&g.addListener(v,"dragend",a),l&&g.addListener(v,"mouseover",l),p&&g.addListener(v,"mouseout",p),e.setDraggable(!!m),()=>{g.clearInstanceListeners(v)}},[e,m,n,o,s,a,l,p]),zt(()=>{e&&f&&e.setOptions(f)},[e,f]),zt(()=>{m||!c||!e||e.setPosition(c)},[m,c,e]),e}var J3,xs,Ole,fl,Dle,Lle,Fle,gp,Q3,eB,Hle,Wle,Vle,jle,Zle,rue,iue,Gu,nB,V1,X3,Gg,lue,cue,oB,pue,aFe,sB=$(()=>{Ze();Ze();J3=ve(Y3(),1);xs={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},Ole="https://maps.googleapis.com/maps/api/js",fl=class{static async load(e,r){var i;let n=e.libraries?e.libraries.split(","):[],o=this.serializeParams(e);this.listeners.push(r),(i=window.google)!=null&&(i=i.maps)!=null&&i.importLibrary?(this.serializedApiParams||(this.loadingStatus=xs.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=o,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==o&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");let s=["maps",...n];await Promise.all(s.map(a=>google.maps.importLibrary(a)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let r=null,i=()=>r||(r=new Promise((n,o)=>{var s;let a=document.createElement("script"),l=new URLSearchParams;for(let[p,f]of Object.entries(e)){let c=p.replace(/[A-Z]/g,m=>"_"+m[0].toLowerCase());l.set(c,f)}l.set("loading","async"),l.set("callback","__googleMapsCallback__"),a.async=!0,a.src=Ole+"?"+l.toString(),a.nonce=((s=document.querySelector("script[nonce]"))==null?void 0:s.nonce)||"",a.onerror=()=>{this.loadingStatus=xs.FAILED,this.notifyLoadingStatusListeners(),o(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=xs.LOADED,this.notifyLoadingStatusListeners(),n()},window.gm_authFailure=()=>{this.loadingStatus=xs.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=xs.LOADING,this.notifyLoadingStatusListeners(),document.head.append(a)}),r);google.maps.importLibrary=n=>i().then(()=>google.maps.importLibrary(n))}static notifyLoadingStatusListeners(){for(let e of this.listeners)e(this.loadingStatus)}};fl.loadingStatus=xs.NOT_LOADED;fl.serializedApiParams=void 0;fl.listeners=[];Dle=["onLoad","apiKey","version","libraries"],Lle=["children"],Fle="GMP_visgl_rgmlibrary_v1_default",gp=ze.createContext(null);Q3=t=>{let{children:e}=t,r=Ku(t,Lle),{mapInstances:i,addMapInstance:n,removeMapInstance:o,clearMapInstances:s}=zle(),{status:a,loadedLibraries:l,importLibrary:p}=Ble(r),f=Qt(()=>({mapInstances:i,addMapInstance:n,removeMapInstance:o,clearMapInstances:s,status:a,loadedLibraries:l,importLibrary:p}),[i,n,o,s,a,l,p]);return ze.createElement(gp.Provider,{value:f},e)};eB={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Hle=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],Wle=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],Vle=Object.keys(eB);jle=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);Zle=()=>{let t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return ze.createElement("div",{style:t},ze.createElement("h2",null,"Error: AuthFailure"),ze.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",ze.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};rue=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"],iue=["padding"],Gu=class{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,r){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(r)}};Gu.entries={};nB=ze.createContext(null),V1=t=>{let{children:e,id:r,className:i,style:n}=t,o=Fr(gp),s=tB();if(!o)throw new Error("<Map> can only be used inside an <ApiProvider> component.");let[a,l,p]=nue(t,o);Xle(a,p,t),Ule(a,t),Gle(a,t);let f=Kle(a,t),c=!!t.controlled;zt(()=>{if(a)return f&&a.setOptions({disableDefaultUI:!0}),(f||c)&&a.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{a.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[a,f,c,t.gestureHandling,t.keyboardShortcuts]);let m=t.center?rB(t.center):null,v=null,g=null;m&&Number.isFinite(m.lat)&&Number.isFinite(m.lng)&&(v=m.lat,g=m.lng);let x=Qt(()=>{var L,O,M,D,P;return{center:{lat:(L=v)!=null?L:0,lng:(O=g)!=null?O:0},zoom:(M=t.zoom)!=null?M:0,heading:(D=t.heading)!=null?D:0,tilt:(P=t.tilt)!=null?P:0}},[v,g,t.zoom,t.heading,t.tilt]);Li(()=>{if(!a||!c)return;a.moveCamera(x);let L=a.addListener("bounds_changed",()=>{a.moveCamera(x)});return()=>L.remove()},[a,c,x]);let _=Qt(()=>Lo({width:"100%",height:"100%",position:"relative",zIndex:f?-1:0},n),[n,f]),E=Qt(()=>({map:a}),[a]);return s===xs.AUTH_FAILURE?ze.createElement("div",{style:Lo({position:"relative"},i?{}:_),className:i},ze.createElement(Zle,null)):ze.createElement("div",Lo({ref:l,"data-testid":"map",style:i?void 0:_,className:i},r?{id:r}:{}),a?ze.createElement(nB.Provider,{value:E},e):null)};V1.deckGLViewProps=!0;X3=new Set;Gg=(t=null)=>{let e=Fr(gp),{map:r}=Fr(nB)||{};if(e===null)return oue("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;let{mapInstances:i}=e;return t!==null?i[t]||null:r||i.default||null};lue=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);cue=ze.createContext(null);oB=Fi((t,e)=>{let{children:r}=t,[i,n]=due(t),o=Qt(()=>i?{marker:i}:null,[i]);return Us(e,()=>i,[i]),n?ze.createElement(cue.Provider,{value:o},rt(r,n)):null}),pue=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];aFe=Fi((t,e)=>{let r=hue(t);return Us(e,()=>r,[r]),ze.createElement(ze.Fragment,null)})});var yp,vp,fue,Yu,aB,$1,uFe,cFe,Fo,dFe,pFe,hFe,fFe,mFe,lB=$(()=>{yp=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-yp.Bounce.Out(1-t)},Out:function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375},InOut:function(t){return t<.5?yp.Bounce.In(t*2)*.5:yp.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),vp=function(){return performance.now()},fue=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var n=0,o=r;n<o.length;n++){var s=o[n];(e=s._group)===null||e===void 0||e.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},t.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,n=e;i<n.length;i++){var o=n[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},t.prototype.update=function(e,r){e===void 0&&(e=vp()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var o=this._tweens[i[n]],s=!r;o&&o.update(e,s)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},t}(),Yu={Linear:function(t,e){var r=t.length-1,i=r*e,n=Math.floor(i),o=Yu.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[r],t[r-1],r-i):o(t[n],t[n+1>r?r:n+1],i-n)},Bezier:function(t,e){for(var r=0,i=t.length-1,n=Math.pow,o=Yu.Utils.Bernstein,s=0;s<=i;s++)r+=n(1-e,i-s)*n(e,s)*t[s]*o(i,s);return r},CatmullRom:function(t,e){var r=t.length-1,i=r*e,n=Math.floor(i),o=Yu.Utils.CatmullRom;return t[0]===t[r]?(e<0&&(n=Math.floor(i=r*(1+e))),o(t[(n-1+r)%r],t[n],t[(n+1)%r],t[(n+2)%r],i-n)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[r]-(o(t[r],t[r],t[r-1],t[r-1],i-r)-t[r]):o(t[n?n-1:0],t[n],t[r<n+1?r:n+1],t[r<n+2?r:n+2],i-n)},Utils:{Linear:function(t,e,r){return(e-t)*r+t},Bernstein:function(t,e){var r=Yu.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:function(){var t=[1];return function(e){var r=1;if(t[e])return t[e];for(var i=e;i>1;i--)r*=i;return t[e]=r,r}}(),CatmullRom:function(t,e,r,i,n){var o=(r-t)*.5,s=(i-e)*.5,a=n*n,l=n*a;return(2*e-2*r+o+s)*l+(-3*e+3*r-2*o-s)*a+o*n+e}}},aB=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),$1=new fue,uFe=function(){function t(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=yp.Linear.None,this._interpolationFunction=Yu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=aB.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=$1,$1.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,r){if(e===void 0&&(e=vp()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var n={};for(var o in this._valuesEnd)n[o]=this._valuesEnd[o];this._valuesEnd=n}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,r,i,n,o){for(var s in i){var a=e[s],l=Array.isArray(a),p=l?"array":typeof a,f=!l&&Array.isArray(i[s]);if(!(p==="undefined"||p==="function")){if(f){var c=i[s];if(c.length===0)continue;for(var m=[a],v=0,g=c.length;v<g;v+=1){var x=this._handleRelativeValue(a,c[v]);if(isNaN(x)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(x)}f&&(i[s]=m)}if((p==="object"||l)&&a&&!f){r[s]=l?[]:{};var _=a;for(var E in _)r[s][E]=_[E];n[s]=l?[]:{};var c=i[s];if(!this._isDynamic){var L={};for(var E in c)L[E]=c[E];i[s]=c=L}this._setupProperties(_,r[s],c,n[s],o)}else(typeof r[s]>"u"||o)&&(r[s]=a),l||(r[s]*=1),f?n[s]=i[s].slice().reverse():n[s]=r[s]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(e){return e===void 0&&(e=vp()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},t.prototype.resume=function(e){return e===void 0&&(e=vp()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},t.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},t.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=yp.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=Yu.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,r){var i=this,n;if(e===void 0&&(e=vp()),r===void 0&&(r=t.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,a=this._duration+((n=this._repeatDelayTime)!==null&&n!==void 0?n:this._delayTime),l=this._duration+this._repeat*a,p=function(){if(i._duration===0||s>l)return 1;var x=Math.trunc(s/a),_=s-x*a,E=Math.min(_/i._duration,1);return E===0&&s===i._duration?1:E},f=p(),c=this._easingFunction(f);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),this._duration===0||s>=this._duration)if(this._repeat>0){var m=Math.min(Math.trunc((s-this._duration)/a)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=m);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=a*m,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var v=0,g=this._chainedTweens.length;v<g;v++)this._chainedTweens[v].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,r,i,n){for(var o in i)if(r[o]!==void 0){var s=r[o]||0,a=i[o],l=Array.isArray(e[o]),p=Array.isArray(a),f=!l&&p;f?e[o]=this._interpolationFunction(a,n):typeof a=="object"&&a?this._updateProperties(e[o],s,a,n):(a=this._handleRelativeValue(s,a),typeof a=="number"&&(e[o]=s+(a-s)*n))}},t.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},t.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},t.autoStartOnUpdate=!1,t}(),cFe=aB.nextId,Fo=$1,dFe=Fo.getAll.bind(Fo),pFe=Fo.removeAll.bind(Fo),hFe=Fo.add.bind(Fo),fFe=Fo.remove.bind(Fo),mFe=Fo.update.bind(Fo)});var uB,j1,cB,dB=$(()=>{ke();Ze();Dt();ms();Rr();uB=ve(Ie(),1);Xn();fe();j1=class extends me{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1,map:null,markers:[]},this.onMutate=uB.default.debounce(this.onMutate,0),this.changeObserver=new MutationObserver(this.onMutate)}handleMarkerDragEnd=e=>{let{index:r,lat:i,lng:n}=e.detail;if(isNaN(i)||isNaN(n))return;let o=[...this.state.markers];o[r]={...o[r],lat:i,lng:n},CargoEditor.mutationManager.execute(()=>{this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(o)))})};onChange(e){CargoEditor.mutationManager.execute(()=>{if(Object.keys(e)[0]==="markers")if(!this.state.markers||e.markers.length!==this.state.markers.length)this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(e.markers)));else{let r=this.state.markers.map((i,n)=>e.markers[n]?{...i,...e.markers[n]}:i);console.log("newMarkers",r),this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(r)))}})}render(e,r){let{mapInstance:i}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:a}=r,l=23;return S(de,{children:[S("style",{id:"map-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),S(Ei,{hasFocus:a,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.mapInstance,render:p=>{let{pointerAttention:f,overlayPosition:c}=p,m=0;return c.y<=1&&(m=Math.min(-c.y+1,c.height+-l+1)),S(de,{children:S("div",{className:`editor-overlay ${f?" button-hover":""}${a?" focus":""}`,style:{transform:`translate3d(${c.x}px, ${c.y}px, 0)`,width:c.width+"px",height:c.height+"px",display:f||s||a?"block":"none",minHeight:"27px"},children:[S("div",{className:"in-editor-buttons map",style:{transform:`translateY(${m}px)`,padding:"10px"},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[S("button",{onMouseDown:v=>{let g=this.state.map.map.getCenter(),x="",_=g.lat(),E=g.lng(),L=this.state.markers?[...this.state.markers,{purl:x,scrollToPage:!1,lat:_,lng:E}]:[{purl:x,scrollToPage:!1,lat:_,lng:E}];this.onChange({markers:L});let O=L.length-1;setTimeout(()=>{this.state.map.dispatchEvent(new CustomEvent("marker-click",{detail:{index:L.length-1,clientY:null,clientX:null}}))},200)},ref:this.MapButtonRef,className:"text",children:"Add Marker"}),S("button",{onMouseDown:v=>{this.launchMapUIWindow(v)},ref:this.MapButtonRef,className:"text",children:"Settings"}),e.children]}),e.otherUI]})})}})]})}handleMarkerClick=e=>{this.launchMarkerUIWindow(e.detail)};launchMarkerUIWindow=({clientX:e,clientY:r,index:i})=>{let o=(this.state.map?.shadowRoot?.querySelectorAll(`.marker-${i}`)[0]).getBoundingClientRect(),s={x:o.x,y:o.y,left:o.right,right:o.right,top:o.top-10,bottom:o.top+27,width:o.width,height:10};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"map-ineditor",windowAlias:"map",positionRect:s,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{mapNode:this.props.mapInstance,markerIndex:i}})};launchMapUIWindow=(e,r)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.mapInstance.getBoundingClientRect(),n={x:i.x-10,y:i.y,left:i.right-10,right:i.right-10,top:i.top-10,bottom:i.top+27,width:i.width,height:10};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"map-ineditor",windowAlias:"map",positionRect:n,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{mapNode:this.props.mapInstance}})};scrollIntoView=()=>{let e=this.props.mapInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.mapInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};onMutate=()=>{this.getSettingsFromNodes()};getSettingsFromNodes(){this.setState({...this.state,map:this.props.mapInstance,markers:JSON.parse(decodeURIComponent(this.props.mapInstance.getAttribute("markers")||"[]"))})}componentDidUpdate=(e,r)=>{this.changeObserver.disconnect(),this.changeObserver.observe(this.state.map,{attributes:!0})};componentDidMount=()=>{this.props.mapInstance._editorInterface=this,this.canMutateTimeout=setTimeout(()=>{this.setState({...this.state,canMutate:!0})},300),this.getSettingsFromNodes(),this.props.mapInstance.addEventListener("marker-dragend",this.handleMarkerDragEnd),this.props.mapInstance.addEventListener("marker-click",this.handleMarkerClick)};componentWillUnmount=()=>{this.props.mapInstance.removeEventListener("marker-dragend",this.handleMarkerDragEnd),this.props.mapInstance.removeEventListener("marker-click",this.handleMarkerClick),this.state.UIWindow?.closeWindow?.(),delete this.props.mapInstance._editorInterface,clearTimeout(this.canMutateTimeout),this.onMutate.cancel(),this.changeObserver.disconnect()}},cB=j1});var DFe,G1,mue,Kg,pB,gue,Yg,K1,vue,hB=$(()=>{ke();Ze();DFe=ve(Ie(),1);Fe();mt();Zr();Dt();_r();sB();lB();Hs();Ur();dB();e1();fe();mue=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,Kg=(t,e,r,i={})=>{r=Math.round(r);let{duration:n=1e3,easing:o=mue}=i,s=performance.now(),a=t.getCenter(),l=t.getZoom(),p=t.getProjection(),f=new google.maps.LatLng(e),c=p.fromLatLngToPoint(f),m=p.fromLatLngToPoint(a),v=r-l;function g(_,E,L){return _+(E-_)*L}function x(){let E=performance.now()-s,L=Math.min(E/n,1),O=o(L),M=g(l,r,O),D=new google.maps.Point(g(m.x,c.x,O),g(m.y,c.y,O)),P,U;v>0&&(P=Math.pow(2,Math.abs(M-l)),U=new google.maps.Point(c.x+(D.x-c.x)/P,c.y+(D.y-c.y)/P)),v<0&&(P=Math.pow(2,Math.abs(M-r)),U=new google.maps.Point(m.x+(D.x-m.x)/P,m.y+(D.y-m.y)/P)),v===0&&(Math.sqrt(Math.pow(f.lat()-a.lat(),2)+Math.pow(f.lng()-a.lng(),2))*Math.pow(2,M-l)<4?U=D:U=c);let N=p.fromPointToLatLng(U);t.moveCamera({center:N,zoom:M});let F={x:c.x-U.x,y:c.y-U.y};(v!==0||F.x!==0||F.y!==0)&&L<1&&requestAnimationFrame(x)}x()},pB=()=>S("svg",{width:"58",height:"50",viewBox:"0 0 2 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S("path",{d:"M0.112305 0.460083L28.9258 14.1374L2.10889 24.6191V49.701H0.108887V22.9724H0.112305V0.460083Z",fill:"#FF0026"})}),gue=({targetNode:t,activePurl:e})=>{let r=Gg();return zt(()=>{r&&(google.maps.event.addListenerOnce(r,"idle",()=>{let i=t.hasAttribute("follow-navigation")?t.getAttribute("follow-navigation")==="true":!1;if(e&&i){let o=(t.hasAttribute("markers")?JSON.parse(decodeURIComponent(t.getAttribute("markers"))):[]).find(s=>s.purl===e);o&&r.moveCamera({center:{lat:o.lat,lng:o.lng},zoom:17})}}),t.map=r)},[r]),null};he||(G1=new ResizeObserver(t=>{t.forEach(e=>{if(Yg.has(e.target)){let r=Yg.get(e.target),i=e.borderBoxSize[0]||e.borderBoxSize;r.setState({size:{width:i.inlineSize,height:i.blockSize}})}})}));Yg=new Map,K1=class extends me{constructor(e){super(e),this.state={mounted:!1,tagText:null,isInCrossOriginIFrame:!0,mapId:this.getMobileMapId(e["map-id"])},this.mapRef=_e()}parseMarkersAttr(e){return JSON.parse(decodeURIComponent(e))}encodeMarkersAttr(e){return""}render(e,r){let{baseNode:i,adminMode:n,isEditing:o,pageInfo:s,markers:a,width:l="100%",height:p="50vh","map-id":f="6f83276caebd115a",isMobile:c,"default-bounds":m,"show-zoom-controls":v=!1,"show-street-view-controls":g=!1,"show-map-type-controls":x=!1,"follow-navigation":_=!1}=e,E="AIzaSyAuHt0V0nJ5qTiUoWwsOwDfkTv0n1PJUNA",L=m?JSON.parse(decodeURIComponent(m)):{north:34.199298711595,east:-118.20583547095032,west:34.0103546000496,south:-118.33143248997767,padding:0},O=[];if(a&&(O=this.parseMarkersAttr(a)),this.state.tagText!==null&&_===!0){let D=this.state.tagText.split(",").reduce((P,U)=>{let N=this.props.purlsByTag[U];if(!N||N.length===0)return P;for(let F of N)P.includes(F)||P.push(F);return P},[]);O=O.filter(P=>D.includes(P.purl))}return rt(S(de,{children:[n&&s.isEditing&&S(cB,{mapInstance:i}),S("style",{children:`
					* {
				    	box-sizing: border-box;						
					}

					:host {
                        width: ${l};
                        height: ${p};
                        max-width: 100%;
                        max-height: var(--fit-height);
                        display: inline-block;
                        overflow: hidden;
					}

                    .gm-style iframe + div { border:none!important; }
				
					`}),E?S(Q3,{apiKey:E,children:S(V1,{defaultBounds:L,mapId:this.state.mapId,ref:this.mapRef,fullscreenControl:!1,gestureHandling:"greedy",streetViewControl:g==="true"||g===!0,mapTypeControl:x==="true"||x===!0,zoomControl:v==="true"||v===!0,clickableIcons:!1,children:[O&&O.length?O.map((M,D)=>!M.lat||!M.lng?null:S(oB,{className:`marker-${D} ${M.id?`mid-${M.id}`:""}`,draggable:!!(n&&s.isEditing),onClick:n&&s.isEditing?P=>{this.props.baseNode.dispatchEvent(new CustomEvent("marker-click",{detail:{index:D}}))}:n===!1?()=>{}:null,onDragEnd:P=>{this.props.baseNode.dispatchEvent(new CustomEvent("marker-dragend",{detail:{index:D,lat:P.latLng.lat(),lng:P.latLng.lng()}}))},position:{lat:M.lat,lng:M.lng},children:n||M.purl==="default"||M.purl===""?S(pB,{}):S("a",{href:`${M.scrollToPage?"#":""}${M.purl}`,rel:"history",style:{fontSize:"24px",lineHeight:1,marginBottom:"-4px"},onClick:()=>{Kg(this.props.baseNode.map,{lat:M.lat,lng:M.lng},17)},children:S(pB,{})})},D)):null,S(gue,{targetNode:i,activePurl:this.props.activePurl})]})}):S("div",{style:{width:"100%",height:"100%",background:"gray",color:"red",fontSize:"24px"},children:"API key is required for Google Maps"})]}),i.shadowRoot)}disableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!0})};enableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!1})};getBoundsZoomLevel(e,r){var i={height:256,width:256},n=21;function o(g){var x=Math.sin(g*Math.PI/180),_=Math.log((1+x)/(1-x))/2;return Math.max(Math.min(_,Math.PI),-Math.PI)/2}function s(g,x,_){return Math.floor(Math.log(g/x/_)/Math.LN2)}var a=e.getNorthEast(),l=e.getSouthWest(),p=(o(a.lat())-o(l.lat()))/Math.PI,f=a.lng()-l.lng(),c=(f<0?f+360:f)/360,m=s(r.height,i.height,p),v=s(r.width,i.width,c);return Math.min(m,v,n)}resetMap=()=>{let e=this.props["default-bounds"]?JSON.parse(decodeURIComponent(this.props["default-bounds"])):{north:34.24028483839939,east:-118.16102709664018,west:-118.32410540683625,south:33.994992380212196,padding:0},r=new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.west),new google.maps.LatLng(e.north,e.east)),i=this.getBoundsZoomLevel(r,{width:this.state.size.width,height:this.state.size.height});Kg(this.props.baseNode.map,r.getCenter(),i)};handleGlobalClick=(e,r)=>{if(!this.props.markers||this.props.adminMode===!0)return;let i=JSON.parse(decodeURIComponent(this.props.markers));if(r.getAttribute("rel")==="map-marker"){let s=r.getAttribute("href");if(s){let a=i.find(l=>l.id===s);a&&Kg(this.props.baseNode.map,{lat:a.lat,lng:a.lng},17);return}else return}let n=r.getAttribute("href");if(!n)return;r.hasAttribute("tag-text")?this.setState({tagText:r.getAttribute("tag-text")}):this.setState({tagText:null});let o=null;for(let s of i)if(s.purl===n){o=s;break}o?Kg(this.props.baseNode.map,{lat:o.lat,lng:o.lng},17):this.resetMap()};componentDidMount(){if(he)return;Yg.set(this.props.baseNode,this),G1.observe(this.props.baseNode),this.props.baseNode.handleGlobalClick=this.handleGlobalClick;let e=!1;try{e=!!(window.parent?.location?.host&&window.location.host!==window.parent.location.host)}catch{e=!0}this.setState({mounted:!0,isInCrossOriginIFrame:e})}getMobileMapId=(e="6f83276caebd115a")=>(console.log("getMobileMapId",e),{"6f83276caebd115a":"253a84a7bd441322","88cce47d0e4397ad":"ed1c36f3c0173c73"}[e]||e);componentDidUpdate(e,r){r.mapId!==this.state.mapId&&console.log("Map ID changed",this.state.mapId),!(e.isMobile===this.props.isMobile&&r.isInCrossOriginIFrame===this.state.isInCrossOriginIFrame)&&(e.isMobile!==this.props.isMobile&&(this.props.isMobile?this.setState({mapId:this.getMobileMapId(this.props["map-id"])}):this.setState({mapId:this.props["map-id"]||"6f83276caebd115a"})),r.isInCrossOriginIFrame!==this.state.isInCrossOriginIFrame&&(this.state.isInCrossOriginIFrame&&mapIdMobileLookup[this.props["map-id"]]?this.setState({mapId:this.getMobileMapId(this.props["map-id"])}):this.setState({mapId:this.props["map-id"]||"6f83276caebd115a"})))}componentWillUnmount(){he||(Yg.delete(this.props.baseNode),G1.unobserve(this.props.baseNode))}},vue=qt(Ue((t,e)=>{let r=t.pages.byId,o=(e.markers?JSON.parse(decodeURIComponent(e.markers)).map(a=>a?.purl):[]).map(a=>Object.values(r).find(l=>l.purl===a)).reduce((a,l)=>(l&&l.tags&&l.tags.forEach(p=>{a[p.url]||(a[p.url]=[]),a[p.url].push(l.purl)}),a),{}),s=t.pages.byId[t.frontendState.activePID]?.purl;return{purlsByTag:o,activePurl:s,adminMode:t.frontendState.adminMode,isMobile:t.frontendState.isMobile}})(K1));ar(vue,"cargo-map",["api-key"])});var X1,yue,bue,Xu,Y1,Z1,fB,mB=$(()=>{ke();Ze();Dt();ms();Rr();Xn();Fe();X1=ve(Ie(),1);fe();yue=["{day}, {month-name} {day-of-month}, {year} {hour}:{minute} {period}","{hour}:{minute}:{second} {period}","{hour}:{minute}:{second}","{day-of-month}-{month}-{year}","{day-of-month} {month-name} {year}","{month-name} {day-of-month}, {year}","{month}/{day-of-month}/{year}","{day-of-month}/{month}/{year}","{time-of-day} of the {ordinal}"],bue={day:"Day","day-of-month":"Day of Month",ordinal:"Ordinal Date",month:"Month","month-name":"Name of Month",period:"AM/PM",year:"Year",hour:"Hour",minute:"Minute",second:"Second",centisecond:"Centisecond","roman-year":"Year in Roman Numerals","time-of-day":"Time of Day"},Xu=new Set,Y1=X1.default.debounce(()=>{let t=Array.from(Xu),e=[],r=t.filter(o=>o.state.selected).length>1,i=0;if(r){let o=t.map(a=>{let l;return a.state.selected?l=a.props.baseNode.getBoundingClientRect():l={top:-9e9},{component:a,rect:l}});e=X1.default.sortBy(o,(a,l)=>a.rect.top);let s=e.filter(a=>a.component.state.selected);i=s[s.length-1].rect.bottom+-s[0].rect.top,e=e.map(a=>a.component)}else e=t;let n=!1;e.forEach(o=>{!r||!o.state.selected?o.setState({pointerProxyAttention:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,multiSelectHeight:null}):n?o.setState({partOfMultipleSelection:!0,showMultipleSelectionButton:!1,multiSelectHeight:null}):(o.setState({pointerProxyAttention:!0,partOfMultipleSelection:!0,showMultipleSelectionButton:!0,multiSelectHeight:i}),n=!0)})},100);he||(CargoEditor&&Object.keys(CargoEditor||{}).length>0?CargoEditor.events.on("cursor-activity",Y1):window.addEventListener("CargoEditor-load",function(){CargoEditor.events.on("cursor-activity",Y1)}),document.addEventListener("selectionchange",Y1));Z1=class extends me{constructor(e){super(e),this.state={UIWindow:!1,showMultipleSelectionButton:!1,partOfMultipleSelection:!1,fontSizePx:16,lineHeightPx:24,selected:!1}}render(e,r){let{}=e,{UIWindow:i,showMultipleSelectionButton:n,partOfMultipleSelection:o,pointerProxyAttention:s,fontSizePx:a,lineHeightPx:l}=r,p,f=0,c=this.state.showMultipleSelectionButton&&this.state.multiSelectHeight;return S(de,{children:[S("style",{id:"digital-clock-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),S(Jr,{baseNode:this.props.clockInstance,overlayMode:!1,onSelectionChange:this.onSelectionChange}),S(Ei,{hasFocus:!!i,trackResize:!0,buttonMode:"inside",baseNode:this.props.clockInstance,buttonHeight:0,onPointerIn:this.pointerIn,onPointerOut:this.pointerOut,render:m=>{let{pointerAttention:v,overlayPosition:g}=m,x=0;return g.y<=1&&(x=Math.min(-g.y+1,g.height+-f+1)),n&&o?p=S("button",{style:{transform:`translateY(${x}px)`},"data-editor-overlay":"true",class:`${g.height<30?"small":""} clock-button multiple`,onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,onMouseUp:this.onOptionsButtonContextMenu,children:"Edit Multiple"}):!n&&!o&&(p=S("button",{style:{transform:`translateY(${x}px)`},"data-editor-overlay":"true",class:`${g.height<30?"small":""} clock-button`,onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,children:S("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S("circle",{className:"inner-circle",cx:"8.5",cy:"8.65747",r:"7.5"}),S("circle",{className:"outer-circle",cx:"8.5",cy:"8.65747",r:"8"}),S("circle",{className:"dot",cx:"8.49977",cy:"8.65747",r:"1"}),S("circle",{className:"dot",cx:"5.07",cy:"8.65747",r:"1"}),S("circle",{className:"dot",cx:"11.9295",cy:"8.65747",r:"1"})]})})),S(de,{children:S("div",{className:`editor-overlay ${n?"edit-multiple":""} digital-clock editor-outline${v||i?" hover":""}${v||i?" button-hover":""}${i?" focus":""}`,style:{transform:`translate3d(${g.x}px, ${g.y}px, 0)`,width:g.width+"px",height:c?this.state.multiSelectHeight:g.height+"px"},children:[p,e.children]})})}})]})}onOptionsButtonContextMenu=e=>{e.metaKey||e.preventDefault()};onMouseDown=e=>{e.button==2&&!e.metaKey&&(e.preventDefault(),this.launchUIWindow(e))};onOptionsButtonClick=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation(),this.launchUIWindow()}};launchUIWindow=e=>{let r=this.props.clockInstance.getBoundingClientRect(),i=document.documentElement.clientHeight,n=document.documentElement.clientWidth,o=this.props.clockInstance.getAttribute("value"),a=yue.includes(o)||o?.indexOf?.("{")===-1?270:360,l=220,p=15,f=r.left,c=r.top,m={x:r.left,y:r.top,left:r.left,right:r.left,top:r.top,bottom:r.top+27,width:0,height:10};i-r.bottom>a+p?c=r.top+r.height+p:i-(r.bottom+-r.height*.5)>a+p?c=r.top+r.height*.5+p:r.top>a+-p&&(c=r.top+-a+-p),n-r.left<l&&(f=r.left-l),m.x=f,m.left=f,m.right=f,m.width=0,m.height=0,m.y=c,m.top=c,m.bottom=c,ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"digital-clock",positionRect:m,closeButton:!1,closeOnSingleClickout:!0,ignoreEditorWindowClickout:!1,supportsMobile:!1,props:{clickedElement:this.props.clockInstance,elements:Array.from(Xu).filter(v=>v.state.selected||v.props.clockInstance===this.props.clockInstance).map(v=>v.props.clockInstance)}})};pointerIn=()=>{this.state.selected&&Xu.forEach(r=>{r.state.showMultipleSelectionButton&&r.setState({pointerProxyAttention:!0})});let e=window.getComputedStyle(this.props.clockInstance);this.setState({fontSizePx:e.getPropertyValue("font-size"),lineHeightPx:e.getPropertyValue("line-height"),pointerAttention:!0})};pointerOut=()=>{this.state.selected&&Xu.forEach(e=>{e.state.pointerProxyAttention&&e.setState({pointerProxyAttention:!1})}),this.setState({pointerAttention:!1})};onSelectionChange=e=>{!e&&this.state.showMultipleSelectionButton&&this.setState({pointerProxyAttention:!1,showMultipleSelectionButton:!1}),this.setState({selected:e})};setUIWindow=e=>{this.setState({UIWindow:e})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidMount(){Xu.add(this),this.props.clockInstance._editorInterface=this,this.props.clockInstance._newClock&&(delete this.props.clockInstance._newClock,setTimeout(()=>{this.launchUIWindow()},10)),this.props.clockInstance.addEventListener("contextmenu",this.onMouseDown)}componentWillUnmount(){this.props.clockInstance.removeEventListener("contextmenu",this.onMouseDown),Xu.delete(this),this.state.UIWindow?.closeWindow?.(),delete this.props.clockInstance._editorInterface}componentDidUpdate(e,r){this.props.value!==e.value&&this.props.clockInstance.getAttribute("value")&&this.state.UIWindow?.setState?.({customVal:bue.hasOwnProperty(this.props.value)?"{"+this.props.value+"}":this.props.value})}},fB=Z1});var A5e,bp,Xg,wue,xue,Sue,gB,Zg,_ue,vB=$(()=>{ke();Ze();Fe();mt();Fe();Ur();Br();mB();A5e=ve(Ie(),1);Zr();fe();bp=new Set,Xg=null,wue=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],xue=["january","february","march","april","may","june","july","august","september","october","november","december"],Sue=["time-of-day","day","day-of-month","ordinal","month","month-name","period","roman-year","year","hour","minute","second","centisecond"],gB=t=>{bp.forEach(e=>{let r=new Date;e.updateTime(r)}),Xg=requestAnimationFrame(gB)},Zg=class extends me{constructor(e){super(e),this.state={}}romanize(e){if(isNaN(e))return NaN;for(var r=String(+e).split(""),i=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],n="",o=3;o--;)n=(i[+r.pop()+o*10]||"")+n;return Array(+r.join("")+1).join("M")+n}pad=e=>e<10?"0"+e:e.toString();dateTerms=(e,r)=>{switch(e){case"{time-of-day}":return S("span",{part:"time-of-day section"},"time-of-day-"+r);case"{day-of-month}":return S("span",{part:"day-of-month section",children:this.state["day-of-month"]},"day-of-month-"+r);case"{ordinal}":return S("span",{part:"ordinal section"},"ordinal"+r);case"{month}":return S("span",{part:"month section",children:this.state.month},"month-"+r);case"{day}":return S("span",{part:"day section"},"day-"+r);case"{roman-year}":return S("span",{part:"roman-year section",children:this.state.romanYear},"roman-year-"+r);case"{centisecond}":return S("span",{part:"centisecond section",children:this.state.centisecond},"roman-year-"+r);case"{year}":return S("span",{part:"year section",children:this.state.year},"year-"+r);case"{month-name}":return S("span",{part:"month-name section"},"month-name-"+r);case"{hour}":return S("span",{part:"hour section",children:this.props["twentyfour-hour"]?this.state["24hour"]:this.state["12hour"]},"hour-"+r);case"{minute}":return S("span",{part:"minute section",children:this.state.minute},"minute-"+r);case"{second}":return S("span",{part:"second section",children:this.state.second},"second-"+r);case"{period}":return S("span",{part:"period section"},"period-"+r)}return null};updateTime=e=>{let r=this.props["pad-hour"]||this.props.pad,i=this.props["pad-minute"]||this.props.pad,n=this.props["pad-second"]||this.props.pad,o=this.props["pad-day-of-month"]||this.props.pad,s=this.props["pad-month"]||this.props.pad;if(this.props.timezone!=="local"){let _=e.getTimezoneOffset(),E=this.props.timezone;if(this.props.timezone.indexOf(":")>-1){let M=this.props.timezone.split(":");M.length=2,E=parseFloat(M[0])+parseFloat(M[1]||0)/60}let L=-(-_-parseFloat(E*60))||0,O=Date.now();e=new Date(O+L*6e4)}let a=o?this.pad(e.getDate()):e.getDate(),l=wue[e.getDay()],p=e.getMonth(),f=e.getFullYear(),c=e.getHours(),m=e.getMinutes(),v=e.getSeconds(),g=e.getMilliseconds(),x=Math.floor(c/3)*3;this.setState({day:l,"day-of-month":a,"time-of-day":x+"-"+(parseInt(x)+3),ordinal:a,"month-name":xue[p],month:s?this.pad(p+1):p+1,romanYear:this.romanize(f),year:this.props["truncate-year"]?f.toString().substring(2,4):f,period:c>=12?"pm":"am","12hour":r?this.pad(c%12==0?12:c%12):c%12==0?12:c%12,"24hour":r?this.pad(c):c,minute:i?this.pad(m):m,second:n?this.pad(v):v,centisecond:this.pad(Math.floor(g/10))})};render(e,r){let{pageInfo:i,adminMode:n,value:o}=this.props,s=[],a;if(o.indexOf("{")==-1&&(a=this.dateTerms("{"+o+"}")),a)s.push(a);else{let l=new RegExp("{"+Sue.join("}|{")+"}","gi"),p=[...o.matchAll(l)],f=0;p.length==0?s.push(this.dateTerms("{second}")):p.forEach((c,m)=>{let v=this.dateTerms(c[0],c.index);v&&(f!=c.index&&s.push(S("span",{part:"text",children:o.substring(f,c.index)},c.index)),f=c.index+c[0].length,s.push(v)),m===p.length-1&&s.push(S("span",{part:"text",children:o.substring(f,o.length)},c.index+"-last"))})}return rt(S(de,{children:[n&&i.isEditing&&!he&&S(fB,{...this.props,clockInstance:this.props.baseNode}),S("style",{children:`

					:host {

						--0-3: "late night";
						--3-6: "early morning";
						--6-9: "morning";
						--9-12: "late morning";
						--12-15: "afternoon";
						--15-18: "late afternoon";
						--18-21: "evening";
						--21-24: "late evening";

						--am: "AM";
						--pm: "PM";

						--sunday: "Sunday";
						--monday: "Monday";
						--tuesday: "Tuesday";
						--wednesday: "Wednesday";
						--thursday: "Thursday";
						--friday: "Friday";
						--saturday: "Saturday";

						--january: "January";
						--february: "February";
						--march: "March";
						--april: "April";
						--may: "May";
						--june: "June";
						--july: "July";
						--august: "August";
						--september: "September";
						--october: "October";
						--november: "November";
						--december: "December";

						--ordinal-1: "first";
						--ordinal-2: "second";
						--ordinal-3: "third";
						--ordinal-4: "fourth";
						--ordinal-5: "fifth";
						--ordinal-6: "sixth";
						--ordinal-7: "seventh";
						--ordinal-8: "eighth";
						--ordinal-9: "ninth";
						--ordinal-10: "tenth";
						--ordinal-11: "eleventh";
						--ordinal-12: "twelfth";
						--ordinal-13: "thirteenth";
						--ordinal-14: "fourteenth";
						--ordinal-15: "fifteenth";
						--ordinal-16: "sixteenth";
						--ordinal-17: "seventeenth";
						--ordinal-18: "eighteenth";
						--ordinal-19: "nineteenth";
						--ordinal-20: "twentieth";
						--ordinal-21: "twenty-first";
						--ordinal-22: "twenty-second";
						--ordinal-23: "twenty-third";
						--ordinal-24: "twenty-fourth";
						--ordinal-25: "twenty-fifth";
						--ordinal-26: "twenty-sixth";
						--ordinal-27: "twenty-seventh";
						--ordinal-28: "twenty-eighth";
						--ordinal-29: "twenty-ninth";
						--ordinal-30: "thirtieth";
						--ordinal-31: "thirty-first";

						cursor: inherit;
					    display: inline-block;
					    position: relative;
					}

					[part*="section"]{
						font-variant: tabular-nums;
					}

					[part="ordinal section"]:after {
						content: var(--ordinal-${this.state["day-of-month"]}, "${this.state["day-of-month"]}");
					}

					[part="time-of-day section"]:before {
						content: var(--${this.state["time-of-day"]});
					}

					[part="period section"]:before {
						content: var(--${this.state.period});
					}				

					[part="day section"]:before {
						content: var(--${this.state.day});
					}

					[part="time-of-day section"]:before {
						content: var(--${this.state["time-of-day"]});
					}

					span[part="month-name section"]:before {
						content: var(--${this.state["month-name"]});
					}

					
				`}),s]}),this.props.baseNode.shadowRoot)}onViewportIntersectionChange=e=>{let r=e.position==="inside";this.setState({visible:r})};componentDidMount(){if(Mt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),bp.size==0&&(cancelAnimationFrame(Xg),Xg=requestAnimationFrame(gB),Ui)){let e=this.props.baseNode.parentElement;e.tagName==="SPAN"&&Array.from(e.childNodes).filter(i=>i!==this.props.baseNode).length>0&&(e.style.display="inline-block",requestAnimationFrame(()=>{e.style.display=""}))}this.updateTime(new Date),bp.add(this)}componentDidUpdate(e,r){}componentWillUnmount(){kt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),bp.delete(this),bp.size==0&&cancelAnimationFrame(Xg)}};Zg.defaultProps={pad:!1,"pad-day-of-month":!1,"pad-hour":!1,"pad-month":!1,"pad-minute":!0,"pad-second":!0,"twentyfour-hour":!1,"truncate-year":!1,timezone:"local",value:"second"};_ue=qt(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Zg));ar(_ue,"digital-clock",["pad-day-of-month","pad-hour","pad-month","pad-minute","pad-second","twentyfour-hour","truncate-year","pad","timezone","analogue","value"],{renderIntoShadow:!0})});var W5e,J1,Q1,yB=$(()=>{ke();Ze();Dt();ms();Rr();W5e=ve(Ie(),1);Xn();fe();J1=class extends me{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1}}render(e,r){let{shopProductInstance:i}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:a}=r;return S(de,{children:S(Ei,{hasFocus:a,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.shopProductInstance,render:l=>{let{pointerAttention:p,overlayPosition:f}=l;return S(de,{children:[S(Jr,{baseNode:i,overlayPosition:f,inFront:!1,overlayMode:!0}),S("div",{className:`editor-overlay editor-outline${p?" hover":""}${p?" button-hover":""}${a?" focus":""}`,style:{transform:`translate3d(${f.x}px, ${f.y}px, 0)`,width:f.width+"px",height:f.height+"px",display:p||s||a?"block":"none",minHeight:"27px"},children:[S("div",{className:"in-editor-buttons audio-player",style:{transform:`translateY(${f.dip}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[S("button",{onMouseDown:c=>{this.launchUIWindow(c)},ref:this.AudioPlayerButtonRef,className:"text",children:"Product"}),e.children]}),e.otherUI]})]})}})})}launchUIWindow=(e,r)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.shopProductInstance.getBoundingClientRect(),n={x:i.x,y:i.y,left:i.right,right:i.right,top:i.top-10,bottom:i.top+27,width:i.width,height:20};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"shopproduct-ineditor",windowAlias:"commerce",positionRect:n,closeButton:!1,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,closeOnSingleClickout:!0,supportsMobile:!0,props:{shopProductNode:this.props.shopProductInstance}})};scrollIntoView=()=>{let e=this.props.shopProductInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.shopProductInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount=()=>{this.props.shopProductInstance._editorInterface=this};componentWillUnmount=()=>{this.state.UIWindow?.closeWindow?.(),delete this.props.shopProductInstance._editorInterface}},Q1=J1});function Aue(t,e,r,i){var n;if(i!==void 0&&(t=t*i),typeof e!="string")n=t/100+"";else{var o=["BIF","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","VND","VUV","XAF","XOF","XPF"],s={AED:"\u062F.\u0625",AFN:"\u060B",ALL:"L",AMD:"\u058F",ANG:"\u0192",AOA:"Kz",ARS:"$",AUD:"$",AWG:"\u0192",AZN:"\u20BC",BAM:"KM",BBD:"$",BDT:"\u09F3",BGN:"\u043B\u0432",BHD:".\u062F.\u0628",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BRL:"R$",BSD:"$",BTC:"\u0E3F",BTN:"Nu.",BWP:"P",BYR:"p.",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"\xA5",COP:"$",CRC:"\u20A1",CUC:"$",CUP:"\u20B1",CVE:"$",CZK:"K\u010D",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"\u062F\u062C",EEK:"kr",EGP:"\xA3",ERN:"Nfk",ETB:"Br",ETH:"\u039E",EUR:"\u20AC",FJD:"$",FKP:"\xA3",GBP:"\xA3",GEL:"\u20BE",GGP:"\xA3",GHC:"\u20B5",GHS:"GH\u20B5",GIP:"\xA3",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"\u20AA",IMP:"\xA3",INR:"\u20B9",IQD:"\u0639.\u062F",IRR:"\uFDFC",ISK:"kr",JEP:"\xA3",JMD:"J$",JOD:"JD",JPY:"\xA5",KES:"KSh",KGS:"\u043B\u0432",KHR:"\u17DB",KMF:"CF",KPW:"\u20A9",KRW:"\u20A9",KWD:"KD",KYD:"$",KZT:"\u043B\u0432",LAK:"\u20AD",LBP:"\xA3",LKR:"\u20A8",LRD:"$",LSL:"M",LTC:"\u0141",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"\u0434\u0435\u043D",MMK:"K",MNT:"\u20AE",MOP:"MOP$",MRO:"UM",MUR:"\u20A8",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"\u20A6",NIO:"C$",NOK:"kr",NPR:"\u20A8",NZD:"$",OMR:"\uFDFC",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"\u20B1",PKR:"\u20A8",PLN:"z\u0142",PYG:"Gs",QAR:"\uFDFC",RMB:"\uFFE5",RON:"lei",RSD:"\u0414\u0438\u043D.",RUB:"\u20BD",RWF:"R\u20A3",SAR:"\uFDFC",SBD:"$",SCR:"\u20A8",SDG:"\u062C.\u0633.",SEK:"kr",SGD:"$",SHP:"\xA3",SLL:"Le",SOS:"S",SRD:"$",SSP:"\xA3",STD:"Db",SVC:"$",SYP:"\xA3",SZL:"E",THB:"\u0E3F",TJS:"SM",TMT:"T",TND:"\u062F.\u062A",TOP:"T$",TRL:"\u20A4",TRY:"\u20BA",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"\u20B4",UGX:"USh",USD:"$",UYU:"$U",UZS:"\u043B\u0432",VEF:"Bs",VND:"\u20AB",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"\u0243",XCD:"$",XOF:"CFA",XPF:"\u20A3",YER:"\uFDFC",ZAR:"R",ZWD:"Z$"};e=e.toUpperCase(),o.indexOf(e)===-1&&(t/=100),typeof Intl<"u"?n=new Intl.NumberFormat(r,{style:"currency",currency:e,currencyDisplay:"symbol",useGrouping:!0,minimumFractionDigits:0}).format(t):n=(s.hasOwnProperty(e)?s[e]:e+" ")+""+t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}if(typeof n=="string"&&n.indexOf(".")!==-1){var a=n.split(".");a.length===2&&a[1].length===1&&(a[1]=a[1]+"0",n=a.join("."))}return n}var Ii,bB,Eue,Cue,Pue,ml,eS,Jg,Iue,tS,Tue,wB=$(()=>{ke();Ze();Hs();Ii=ve(Ie(),1);Fe();mt();xr();Zr();Ur();pa();yB();sl();_i();fe();bB="Product not found",Eue="Out of Stock",Cue="Add to Cart",Pue="Unavailable",ml={buttonInStockText:"button-text",showPrice:"show-price",mergevariantdropdowns:"combine-variants",product:"product"},eS=[],Jg=null,Iue=t=>(Jg||(Jg=new Promise((e,r)=>{requestAnimationFrame(()=>{Ht.dispatch(actions.fetchCommerceProducts({idArray:eS})).then(e).catch(r),eS.length=0,Jg=null})})),eS.push(t),Jg);tS=class extends me{constructor(e){super(e),this.uid=Ii.default.uniqueId(),this.state={loading:!0,selectedVariant:null},this.props.fetchShopModel().finally(()=>{this.fetchProduct().finally(()=>{this.setState({loading:!1})})}),this.props.baseNode.__commerce_widget__=this}render(){let e=this.getOptions(),{baseNode:r,adminMode:i}=this.props;if(!this.props.productData)return this.state.loading?null:rt(S(de,{children:[this.props.adminMode&&this.props.pageInfo.isEditing&&S(Q1,{shopProductInstance:this.props.baseNode}),S("div",{draggable:"true",style:{display:"inline-block",width:"100%"},children:bB})]}),this.props.baseNode.shadowRoot);let n=this.state.selectedVariant?.inventory!==null&&this.state.selectedVariant?.inventory<=0,o=this.props.uses||"";return rt(S(aa,{scrollContext:this.props.scrollContext,uses:o,adminMode:i,customElementMode:!0,baseNode:r,children:S("div",{draggable:"true",style:{display:"inline-block",width:"100%"},children:[this.props.adminMode&&S(Q1,{shopProductInstance:this.props.baseNode}),this.props.productData?S(de,{children:[e.showPrice&&this.state.selectedVariant&&S("div",{part:"price",class:"price",children:Aue(this.state.selectedVariant.price,this.props.currency,this.props.locale)}),this.props.productData.attributes?e.mergevariantdropdowns?S("select",{part:"dropdown",class:"dropdown","variant-list":!0,onChange:this.getSelectedVariant,children:this.props.productData.variants.map(s=>s.is_default?null:S("option",{value:s.variant_id,dangerouslySetInnerHTML:{__html:Ii.default.values(s.attributes).join(", ").replace(/</g,"&lt;")}}))}):Ii.default.keys(this.props.productData.attributes).map(s=>S("select",{"variant-option":s,part:"dropdown",class:"dropdown",onChange:this.getSelectedVariant,children:[S("option",{disabled:!0,dangerouslySetInnerHTML:{__html:s?.replace?.(/</g,"&lt;")}}),this.getAttributeVariations(s).map(a=>S("option",{selected:this.state.selectedVariant?.attributes[s]===a,value:a,dangerouslySetInnerHTML:{__html:a?.replace?.(/</g,"&lt;")}}))]})):null,S("a",{part:"button",className:`button${n?" out-of-stock":""}`,onClick:s=>{n||this.addToCart(s)},children:n?Eue:this.state.selectedVariant?e.buttonInStockText:Pue})]}):bB]})},"shop-product-host"),this.props.baseNode.shadowRoot)}onDragStart=e=>{e.dataTransfer.setData("shop-product-drag","true")};getAttributeVariations(e){var r=Ii.default.without(Ii.default.uniq(this.props.productData.variants.map(function(n){if(n.is_available===!0&&n.is_default!==!0)return n.attributes[e]})),void 0),i=this.props.productData.attributes[e];return i&&r.sort(function(n,o){var s=i.indexOf(n),a=i.indexOf(o);return s<a?-1:s==a?0:1}),r}getProduct(){return this.props.productData}getOptions(){if(this.props.baseNode.hasAttribute("data-options"))try{let r=JSON.parse(Ii.default.unescape(this.props.baseNode.getAttribute("data-options")));Ii.default.each(r,(i,n)=>{ml[n]&&!this.props.baseNode.hasAttribute(ml[n])&&this.props.baseNode.setAttribute(ml[n],Ii.default.escape(i))}),this.props.baseNode.removeAttribute("data-options")}catch{console.error("Unable to read old product widget options",this.props.baseNode)}let e=Ii.default.mapValues(ml,(r,i)=>{if(!this.props.baseNode.hasAttribute(r))return;let n=Ii.default.unescape(this.props.baseNode.getAttribute(r));return(i==="showPrice"||i==="mergevariantdropdowns")&&(n=n=="true"),n});return Ii.default.defaults(e,{showPrice:!0,mergevariantdropdowns:!1,buttonInStockText:Cue}),e}setOptions(e){Ii.default.each(e,(r,i)=>{ml.hasOwnProperty(i)&&this.props.baseNode.setAttribute(ml[i],Ii.default.escape(r))})}addToCart=e=>{this.props.adminMode||(this.props.addCommerceProductToCart(this.state.selectedVariant.product_id,this.state.selectedVariant.variant_id),no.push("/cart",{preventScrollReset:!0}))};fetchProduct(){return this.props.productData&&this.props.productData.product_id==this.props.product||!this.props.product||!this.props.shopId?Promise.resolve():Iue(this.props.product)}getSelectedVariant=()=>{let e=null;if(this.props.productData)if(this.props.productData.use_default_variant)e=this.props.productData.variants.find(i=>i.is_default===!0);else if(this.getOptions().mergevariantdropdowns){let i=this.props.baseNode.shadowRoot.querySelector("select[variant-list]")?.value;e=this.props.productData.variants.find(n=>n.variant_id==i)}else{var r=Ii.default.reduce(this.props.baseNode.shadowRoot.querySelectorAll("select[variant-option]"),function(i,n){return i[n.getAttribute("variant-option")]=n.value,i},{});e=this.props.productData.variants.find(i=>Ii.default.isEqual(i.attributes,r))}this.state.selectedVariant!==e&&this.setState({selectedVariant:e})};componentDidUpdate(e,r){this.state.selectedVariant===r.selectedVariant&&this.getSelectedVariant()}componentDidMount(){this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.getSelectedVariant()}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStart)}},Tue=qt(Ue((t,e)=>({adminMode:t.frontendState.adminMode,productData:t.commerce.products[e.product],currency:t.commerce.shop.currency||"USD",locale:t.commerce.shop.locale||"en-US",shopId:t.site.shop_id}),t=>Bt({addCommerceProductToCart:actions.addCommerceProductToCart,fetchShopModel:actions.fetchShopModel},t))(tS));ar(Tue,"shop-product",Object.values(ml),{renderIntoShadow:!0})});var rS,xB,SB=$(()=>{ke();fe();rS=class extends me{constructor(e){super(e),this.caveRef=_e(),this.shadowRef=_e()}render(){return S("div",{"aria-hidden":"true",ref:this.caveRef,tabIndex:"-1","data-nosnippet":!0,style:{position:"absolute",top:"0",left:"50px",right:"50px",margin:"0 auto 0 auto",height:"10px",lineHeight:"0",fontSize:0,pointerEvents:"none",zIndex:-99},children:S("div",{ref:this.shadowRef,tabIndex:"-1","data-nosnippet":!0,style:{display:"inline-block",margin:"0 -20px 0 -50px",width:"40px",height:"10px"}})})}componentDidMount(e,r){this.observer=new IntersectionObserver(i=>{i.forEach(n=>{let o="right";switch(n.intersectionRatio){case 0:o="left";break;case 1:o="center";break}this.props.onTextAlignmentChange?.(o)})},{root:this.caveRef.current,rootMargin:"0px",threshold:[0,.6]}),this.observer.observe(this.shadowRef.current)}componentWillUnmount(){this.observer.disconnect()}},xB=rS});var _B,iS,EB,CB=$(()=>{ke();Ze();Dt();ms();Rr();Xn();Br();_B=ve(Ie(),1);fe();iS=class extends me{constructor(e){super(e),this.state={UIWindow:!1,marqueeIsEmpty:!1,draggingInEditor:!1},this.observer=new MutationObserver(this.onMutation),this.innerObserver=new MutationObserver(this.onInnerMutation)}render(e,r){let{}=e,{UIWindow:i}=r,n=23;return S(de,{children:S(Ei,{hasFocus:!!i,trackResize:!0,buttonMode:"inside",baseNode:this.props.marqueeInstance,buttonHeight:23,render:o=>{let{pointerAttention:s,overlayPosition:a}=o,l=0;return a.y<=1&&(l=Math.min(-a.y+1,a.height+-n+1)),S(de,{children:[S(Jr,{baseNode:this.props.marqueeInstance,overlayPosition:a,overlayMode:!0}),S("div",{className:`editor-overlay editor-outline${s||i?" hover":""}${s||i?" button-hover":""}${i?" focus":""}`,style:{transform:`translate3d(${a.x}px, ${a.y}px, 0)`,width:a.width+"px",height:a.height+"px",display:s||i?"block":"none",minHeight:"27px"},children:[S("div",{className:"in-editor-buttons marquee",style:{transform:`translateY(${l}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[S("button",{onMouseDown:p=>{this.launchUIWindow(p)},className:"text",children:"Marquee"}),e.children]}),e.otherUI]})]})}})})}launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.props.marqueeInstance.getBoundingClientRect(),i={x:r.x+-10,y:r.y,left:r.right+-10,right:r.right+-10,top:r.top+0,bottom:r.top+27,width:r.width,height:20};ye.adminWindow.UIWindowOpener.openUIWindow({windowName:"marquee-ineditor",windowAlias:"marquee",positionRect:i,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{activeMarquee:this.props.marqueeInstance}})};onMouseDown=e=>{if(this.state.UIWindow||e.button===2)return;let r={x:e.clientX,y:e.clientY};this.props.marqueeInstance.built&&(this.mouseDownTimeout=setTimeout(()=>{this.props.isDragging||(this.props.marqueeInstance.built=!1,setTimeout(()=>{let i=this.props.marqueeInstance.querySelector("marquee-inner"),n=CargoEditor.helpers.createRangeAtCoordinates(r.x,r.y);(!n||!i.contains(n.commonAncestorContainer))&&(n=CargoEditor.rangy.createRange(),n.setStart(i,0),n.setEnd(i,0)),CargoEditor.helpers.setActiveRange(n),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor(),e)},20))},120))};onInnerMutation=e=>{if(Array.from(e).filter(s=>{if(s.type==="attributes"){if(s.target.nodeName==="MEDIA-ITEM")return!0;if(s.target.nodeName==="MARQUEE-INNER")return!1}else return!s.target.closest?.("media-item")}).length==0)return;let i=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(s=>!s.hasAttribute("slot")||s.getAttribute("slot")==="contents");if(!i)return;let n=Array.from(i?.childNodes??[])[0],o=!0;for(;n&&o;)(n.nodeName==="IMG"||n.nodeName==="VIDEO"||n.nodeName==="IFRAME"||n.nodeName==="MEDIA-ITEM"||n.textContent.trim()!=="")&&(o=!1),n=n.nextSibling;this.setState({marqueeIsEmpty:o})};dispatchVisibility=_B.default.debounce(()=>{Array.from(this.props.marqueeInstance.querySelectorAll("*")).forEach(e=>{Pt(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1}),Pt(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})},30);onMutation=e=>{this.observer.disconnect(),this.innerObserver.disconnect();let r=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(n=>!n.hasAttribute("slot")||n.getAttribute("slot")==="contents"),i=this.props.marqueeInstance.querySelector('marquee-inner[slot="contents-clone"]');r&&i?Array.from(this.props.marqueeInstance.childNodes).forEach(n=>{n!==r&&n!==i&&n.remove()}):r&&!i&&(this.props.marqueeInstance.dirty=!0),this.observer.observe(this.props.marqueeInstance,{childList:!0,subtree:!1,characterData:!0,attributes:!1}),r&&this.innerObserver.observe(r,{childList:!0,subtree:!0,characterData:!0,attributes:!0})};onDragOver=(e,r,i)=>{this.state.draggingInEditor||(this.setState({draggingInEditor:!0}),Xe.activateHoverElement(this.props.marqueeInstance),this.props.marqueeInstance.built=!1)};onDragStart=(e,r,i)=>{this.setState({draggingInEditor:!0}),Xe.activateHoverElement(this.props.marqueeInstance),this.props.marqueeInstance.built=!1};onDragFinish=()=>{this.dragFinishTimeout=setTimeout(()=>{this.setState({draggingInEditor:!1})},100),this.props.marqueeInstance.built=!0};setUIWindow=e=>{this.setState({UIWindow:e})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidMount(){this.observer.observe(this.props.marqueeInstance,{childList:!0,subtree:!1,characterData:!0,attributes:!1});let e=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(r=>!r.hasAttribute("slot")||r.getAttribute("slot")==="contents");e&&this.innerObserver.observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.props.marqueeInstance.addEventListener("mousedown",this.onMouseDown),ye.globalDragEventController.on("dragover",this.onDragOver),ye.globalDragEventController.on("dragstart",this.onDragStart),ye.globalDragEventController.on("dragend",this.onDragFinish),ye.globalDragEventController.on("drop",this.onDragFinish),this.props.marqueeInstance._editorInterface=this,this.props.marqueeInstance._newMarqueeSet&&(delete this.props.marqueeInstance._newMarqueeSet,setTimeout(()=>{this.launchUIWindow()},120))}componentWillUnmount(){this.dispatchVisibility.cancel(),clearTimeout(this.mouseDownTimeout),clearTimeout(this.dragFinishTimeout),this.observer.disconnect(),this.innerObserver.disconnect(),this.props.marqueeInstance.removeEventListener("mousedown",this.onMouseDown),ye.globalDragEventController.off("dragover",this.onDragOver),ye.globalDragEventController.off("dragstart",this.onDragStart),ye.globalDragEventController.off("dragend",this.onDragFinish),ye.globalDragEventController.off("drop",this.onDragFinish),this.state.UIWindow?.closeWindow?.(),delete this.props.marqueeInstance._editorInterface}componentDidUpdate(e,r){this.props.adminMode!==e.adminMode&&(this.props.marqueeInstance.dirty=!0),this.props.isDragging!==e.isDragging&&clearTimeout(this.mouseDownTimeout),(r.marqueeIsEmpty!==this.state.marqueeIsEmpty||r.draggingInEditor!==this.state.draggingInEditor)&&!this.state.draggingInEditor&&this.state.marqueeIsEmpty&&CargoEditor?.mutationManager?.execute(()=>{this.props.marqueeInstance.remove()})}},EB=iS});var Qg,fa,wp,ev,Zu,nS,PB,tv,Mue,IB=$(()=>{ke();Ze();ng();mt();Fe();Ur();la();SB();qr();CB();Br();Qg=ve(Ie(),1);Zr();fe();fa=new Map,wp=new Map,ev=null;he||(Zu=new ResizeObserver(t=>{t.forEach(e=>{wp.has(e.target)?wp.get(e.target).onMarqueeInnerResize(e):fa.has(e.target)&&fa.get(e.target).onElementResize(e)})}),window.addEventListener("dom-binding-initialized",t=>{fa.forEach((e,r)=>{t.target.contains(r)&&(r.dirty=!0)})}));nS=0,PB=t=>{let e=nS===0?0:t-nS;fa.forEach((r,i)=>{r.animate(e)}),nS=t,ev=requestAnimationFrame(PB)},tv=class extends me{constructor(e){super(e),this.uid=Qg.default.uniqueId(),this.initialSizeSet=!1,this.state={dirty:!0,built:!0,marqueeHeight:100,gutterPixelWidth:0,mediaItemLocations:{},contentRect:{marginLeft:0,width:0,height:0,contentWidth:0},elementRect:{horizPad:0,vertPad:0,width:0,height:0},paused:!1,pointerInfo:{type:"mouse",pointerDown:!1,dragging:!1},marqueeInner:null,visible:!0},this.pointerMovement={start:{x:0,y:0},delta:{x:0,y:0},inertia:{x:0,y:0}},this.marqueePositionerRef=_e(),this.marqueePositionerCloneRef=_e(),this.contentRef=_e(),this.contentsObserver=new MutationObserver(this.onContentsChange),this.resetPosition(),this.pauseCount=0,Object.defineProperty(this.props.baseNode,"dragging",{get:()=>this.state.pointerInfo.dragging,configurable:!0}),Object.defineProperty(this.props.baseNode,"paused",{get:()=>this.state.paused,set:r=>{this.setState({paused:!!r})},configurable:!0}),Object.defineProperty(this.props.baseNode,"built",{get:()=>this.state.built,set:r=>{this.setState({built:!!r})},configurable:!0}),Object.defineProperty(this.props.baseNode,"dirty",{get:()=>this.state.dirty,set:r=>{this.setState({dirty:!!r})},configurable:!0})}render(e,r){let i=e.behavior==="bounce",n=e.behavior==="scroll",o=e.direction==="vertical",s=e.direction==="horizontal",a=e.direction==="diagonal";a&&n&&(a=!1,s=!0);let{adminMode:l,pageInfo:p,baseNode:f,"vertical-height":c,gutter:m=0}=e,{contentRect:v,elementRect:g,built:x,marqueeHeight:_,gutterPixelWidth:E}=r,L=ur(c,""),O=m!==void 0?ur(m,"rem").join(""):"0px",M={marqueeHeight:L[1]===""?`calc( var(--fit-height) * ${L[0]*.01} )`:L.join("")};m!==void 0&&m!==0&&(M.gutterPixelWidth=O);let D=E,P=E;s&&(D=0),o&&(P=0);let U=n&&o?0:2,N=n&&s?0:2;return rt(S(de,{children:[l&&p.isEditing&&S(xB,{onTextAlignmentChange:this.onTextAlignmentChange}),S("style",{children:`

					:host {
						--marquee-vertical-padding: ${U}rem;
						--marquee-horizontal-padding: ${N}rem;
						--marquee-vertical-margin: ${-U}rem;
						--marquee-horizontal-margin: ${-N}rem;
						contain: layout;
						${x?`
							cursor: default;
							min-height: .5em;
							${l&&p.isEditing?`
							-moz-user-select:none;
							-webkit-user-select:none;

							user-select: none;`:""}
						`:`
							min-height: ${i&&!s?_+"px":"auto"};
						`}
						box-sizing: border-box;
						height: ${x?o||a?_+"px":v.height+g.vertPad+"px":"auto"};
					    display: block;
					    
					    position: relative;
						--resize-parent-width: ${g.width}px;				    
					}

					.marquee-margin {
						position: relative;
						${x?`
							pointer-events:none;
							margin-top: var(--marquee-vertical-margin);
							margin-left: var(--marquee-horizontal-margin);
							margin-right: var(--marquee-horizontal-margin);
							margin-bottom: var(--marquee-vertical-margin);
							
							${o||a?"height: "+_+"px;":""}
							padding-top: var(--marquee-vertical-padding);
							padding-bottom: var(--marquee-vertical-padding);
							padding-left: var(--marquee-horizontal-padding);
							padding-right: var(--marquee-horizontal-padding);						
							overflow: hidden;
					
						`:""}
					}

					:host .marquee-contents {
						${x?`
							-moz-user-select:none;
							-webkit-user-select:none;
							user-select: none;
						`:`
							-moz-user-select:text;
							-webkit-user-select:text;
							user-select: text;
						`}
						-webkit-backface-visibility: hidden;
						backface-visibility: hidden;
						will-change: transform;
						position: relative;

					    display: ${x?"block":"none"};
					}

					::slotted(marquee-inner){
						pointer-events:auto;
						white-space:${x&&s?"nowrap":"normal"};					
						display: ${x?"inline-block":"block"};
						${!x&&(o||a)?"min-height: "+_+"px;":""}
						min-width: ${g.width}px;
						${x?`
							-moz-user-select:none;
							-webkit-user-select:none;
							user-select: none;
						`:`
						`}
										
					}

					.marquee-positioner {
						position: relative;		
						white-space:nowrap;
						${n?"min-width: 100%;":""}					
					}

					/** scroll mode css **/	
					.marquee-positioner.clone {
						display: ${i||!x?"none":"block"};
						left: ${s?Math.max(v.contentWidth,g.width)+P:0}px;
						top: ${o?Math.max(v.height,g.height)+D:0}px;			
					    position: absolute;
					}

					
				`}),S("div",{className:"marquee-margin",children:[!x&&S("slot",{name:"contents"}),l&&p.isEditing&&!he&&S(EB,{...this.props,marqueeInstance:f,isDragging:this.state.pointerInfo.dragging}),S(Ji,{values:M,onResize:this.onResize}),S("div",{className:"marquee-contents",style:{willChange:"transform",transform:"translate("+this.lastXClamp+"px, "+(this.lastYClamp+g.vertPad*.5)+"px)"},ref:this.contentRef,children:[S("div",{className:"marquee-positioner",ref:this.marqueePositionerRef,children:x&&S("slot",{name:"contents"})}),S("div",{"aria-hidden":"true",className:"marquee-positioner clone",ref:this.marqueePositionerCloneRef,children:x&&n&&S("slot",{name:"contents-clone"})})]})]})]}),f.shadowRoot)}onClickCapture=e=>{this.dragging&&this.state.built&&e.preventDefault()};onDragStartCapture=e=>{this.state.built&&this.props["pointer-interaction"]==!0&&(e.preventDefault(),e.stopPropagation())};onViewportIntersectionChange=()=>{Array.from(this.props.baseNode.querySelectorAll("*")).forEach(e=>{Pt(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})};onLazyloadIntersectionChange=()=>{Array.from(this.props.baseNode.querySelectorAll("*")).forEach(e=>{Pt(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})};componentDidMount(){this.props.baseNode.addEventListener("click",this.onClickCapture,{capture:!0}),this.props.baseNode.addEventListener("dragstart",this.onDragStartCapture,{capture:!0}),this.props.baseNode.addEventListener("mousedown",this.onMouseDown),this.props.baseNode.addEventListener("touchstart",this.onMouseDown),Mt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),Mt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),fa.size==0&&(cancelAnimationFrame(ev),ev=requestAnimationFrame(PB)),fa.set(this.props.baseNode,this),Zu.observe(this.props.baseNode),this.innerMarqueeChange()}componentDidUpdate(e,r){(this.props.behavior!==e.behavior||this.props.speed!==e.speed||this.props["vertical-height"]!==e["vertical-height"])&&(this.resetPosition(),this.setState({built:!0})),this.state.dirty!==r.dirty&&this.state.dirty&&this.innerMarqueeChange(),this.state.built!==r.built&&this.state.built&&(this.state.dirty&&this.innerMarqueeChange(),this.resetPosition()),e.adminMode!==this.props.adminMode&&this.setState({built:!0})}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStartCapture,{capture:!0}),this.props.baseNode.removeEventListener("mousedown",this.onMouseDown),this.props.baseNode.removeEventListener("touchstart",this.onMouseDown),this.props.baseNode.removeEventListener("click",this.onClickCapture,{capture:!0}),kt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),kt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),Zu.unobserve(this.props.baseNode),fa.delete(this.props.baseNode),cancelAnimationFrame(this.resizeFrame),clearTimeout(this.afterPointerUp);let e=this.props.baseNode.querySelector("marquee-inner");e&&(wp.delete(e),Zu.unobserve(e)),this.contentsObserver.disconnect(),fa.size==0&&cancelAnimationFrame(ev)}innerMarqueeChange=()=>{if(!this.state.dirty||!this.state.built||!this.marqueePositionerRef.current||!this.marqueePositionerCloneRef.current)return;let e=Array.from(this.props.baseNode.querySelectorAll("marquee-inner")).find(i=>!i.hasAttribute("slot")||i.getAttribute("slot")==="contents");e?(wp.delete(e),Zu.unobserve(e),Array.from(e.querySelectorAll("marquee-inner")).forEach(i=>{i.remove()})):(e=document.createElement("marquee-inner"),e.setAttribute("slot","contents"),Array.from(this.props.baseNode.childNodes).forEach(i=>{e.appendChild(i)}),this.props.baseNode.appendChild(e)),e.setAttribute("slot","contents"),e.setSaveable(!0),wp.set(e,this),Zu.observe(e),this.contentsObserver.observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!1});let r=this.props.baseNode.querySelector('marquee-inner[slot="contents-clone"]');for(r||(r=document.createElement("marquee-inner"),r.setAttribute("slot","contents-clone"),this.props.baseNode.appendChild(r));r.lastChild;)r.lastChild.remove();Array.from(e.childNodes).forEach(i=>{r.appendChild(i.cloneNode(!0))}),Array.from(this.props.baseNode.childNodes).forEach(i=>{i!==e&&i!==r&&i.remove()}),this.setState({dirty:!1,marqueeInner:e})};onContentsChange=()=>{this.setState({dirty:!0})};resetPosition=()=>{this.pauseCount=this.props.adminMode?-30:0,this.movingDown=this.props.speed>0,this.movingRight=this.props.speed>0,this.lastXClamp=0,this.lastYClamp=0,this.positionX=0,this.positionY=0,this.translateX=0,this.translateY=0,this.pointerMovement={start:{x:0,y:0},inertia:{x:0,y:0},delta:{x:0,y:0}},this.props.behavior==="bounce"?((this.props.direction==="diagonal"||this.props.direction==="vertical")&&(this.translateY=this.positionY=this.state.elementRect.height*.5+-this.state.contentRect.height*.5),(this.props.direction==="diagonal"||this.props.direction==="horizontal")&&(this.translateX=this.positionX=this.state.elementRect.width*.5+-this.state.contentRect.width*.5+this.state.elementRect.vertPad*.5)):this.translateX=this.positionX=this.translateY=this.positionY=0};onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n})};onTextAlignmentChange=e=>{this.resetPosition(),this.requestTick()};requestTick=()=>{this.ticking||(this.ticking=!0,this.rAf=requestAnimationFrame(()=>{this.getContentWidthAndMargin(),this.ticking=!1}))};getContentWidthAndMargin=Qg.default.debounce(()=>{let{marqueeInner:e}=this.state;if(!e)return;let{contentWidth:r,marginLeft:i,width:n}=this.state.contentRect,o=e.childNodes[0],s=e.childNodes[e.childNodes.length-1];if(o&&s){let a=document.createRange();a.setStartBefore(o),a.setEndAfter(s);let l=a.getBoundingClientRect(),p=e.getBoundingClientRect();i=l.left-p.left,r=l.width}else i=0,r=n;this.setState(a=>({contentRect:{...a.contentRect,marginLeft:i,contentWidth:r}}),()=>{this.initialSizeSet||(this.resetPosition(),this.initialSizeSet=!0)})},this.initialSizeSet?300:0,{leading:!0,trailing:!0});onMarqueeInnerResize=e=>{let r=e.borderBoxSize[0]||e.borderBoxSize,i=r.inlineSize;this.setState(n=>({contentRect:{...n.contentRect,width:r.inlineSize,height:r.blockSize}}),()=>{this.requestTick()})};onElementResize=e=>{let r=e.borderBoxSize[0]||e.borderBoxSize,i=e.contentBoxSize[0]||e.contentBoxSize;this.setState({elementRect:{width:r.inlineSize,height:r.blockSize,vertPad:r.blockSize-i.blockSize,horizPad:r.inlineSize-i.inlineSize}})};onMouseDown=e=>{if(!this.state.built||!this.props["pointer-interaction"]||e.button==2)return;this.dragging=!1;let r=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY,n=e.touches?.length>0;!e.target.closest("a, media-item[href]")&&!n&&e.preventDefault(),this.pointerMovement={start:{x:r,y:i},inertia:{x:0,y:0},delta:{x:0,y:0}},this.setState({pointerInfo:{type:e.touches?.length>0?"touch":"mouse",pointerDown:!0,dragging:!1}}),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerUp)};onPointerMove=e=>{let r={x:e.clientX-this.pointerMovement.start.x+this.pointerMovement.delta.x,y:e.clientY-this.pointerMovement.start.y+this.pointerMovement.delta.y},i=this.state.pointerInfo.dragging||Math.abs(e.clientX-this.pointerMovement.start.x)>3||Math.abs(e.clientY-this.pointerMovement.start.y)>3;this.pointerMovement={start:{x:e.clientX,y:e.clientY},inertia:r,delta:r},this.dragging=i,this.setState({pointerInfo:{type:e.pointerType=="touch"?"touch":"mouse",pointerDown:!0,dragging:i}})};onPointerUp=e=>{this.setState({pointerInfo:{type:e.pointerType=="touch"?"touch":"mouse",dragging:!1,pointerDown:!1}},()=>{document.body.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerUp)})};animate=e=>{let{built:r,paused:i,elementRect:n,contentRect:o,pointerInfo:s,mediaItemLocations:a,gutterPixelWidth:l}=this.state,{positionX:p,positionY:f,movingRight:c,movingDown:m,translateX:v,translateY:g,pointerMovement:x}=this,{speed:_,friction:E}=this.props;if(!r||!this.contentRef.current)return;let L=!1;_=i||s.dragging?0:_,this.pauseCount<0&&(this.pauseCount++,_=0),_=_*(e/16.6667);let O=this.props.behavior==="bounce",M=this.props.behavior==="scroll",D=this.props.direction==="vertical",P=this.props.direction==="horizontal",U=this.props.direction==="diagonal",N=l,F=l;U&&M&&(U=!1,P=!0),E=1-parseFloat(E)*.01,_=parseFloat(_)*.1;let V=_,q=_,J=Math.abs(x.inertia.y)>.01||Math.abs(x.inertia.x)>.01;s.pointerDown||s.dragging?(L=!0,q=x.delta.x,V=x.delta.y):J&&(L=!0,O?(m?V=Math.abs(V)+Math.abs(x.inertia.y):V=-Math.abs(V)+-Math.abs(x.inertia.y),c?q=Math.abs(q)+Math.abs(x.inertia.x):q=-Math.abs(q)+-Math.abs(x.inertia.x)):(q=q+x.inertia.x,V=V+x.inertia.y)),O&&!s.dragging&&(m?V=Math.abs(V):V=-Math.abs(V),c?q=Math.abs(q):q=-Math.abs(q)),V!==0&&(m=V>0),q!==0&&(c=q>0),(D||U)&&(f=V+f),(P||U)&&(p=q+p);let Y=!1;if(O){let Q=o.contentWidth,te=o.height,ee=-o.marginLeft,ae=n.width+-Q+-o.marginLeft,ue=0,le=n.height-te;Q>=n.width&&(ee=n.width-Q,ae=0),te>=n.height&&(ue=n.height-te,le=0),c&&p>ae&&(P||U)?(Y="right",p=ae,c=!1):!c&&p<ee&&(P||U)&&(Y="left",p=ee,c=!0),m&&f>le&&(D||U)?(Y="bottom",f=le,m=!1):!m&&f<ue&&(D||U)&&(Y="top",f=ue,m=!0),P?g=0:g=f,D?v=0:v=p}else if(M){P&&(F=0),D&&(N=0);let Q=Math.max(o.contentWidth,n.width)+N,te=Math.max(o.height,n.height)+F;Q>0&&(p=(p-Q)%Q),te>0&&(f=(f-te)%te),D?(v=0,g=f):P&&(v=p,g=0)}Y&&this.dispatchBounceEvent(Y);let ie=s.dragging?{x:x.delta.x,y:x.delta.y}:{x:x.inertia.x*E,y:x.inertia.y*E};this.positionX=p,this.positionY=f,this.translateX=v,this.translateY=g,this.movingRight=c,this.movingDown=m;let oe=Math.abs(_)>1?2:4,Z=Math.floor(this.translateX*oe)/oe,K=Math.floor(this.translateY*oe)/oe;(Z!==this.lastXClamp||K!==this.lastYClamp)&&(this.contentRef.current.style.transform="translate("+Z+"px, "+(K+this.state.elementRect.vertPad*.5)+"px)"),this.lastXClamp=Z,this.lastYClamp=K,L&&(this.pointerMovement={...this.pointerMovement,inertia:ie,delta:{x:0,y:0}})};dispatchBounceEvent=Qg.default.debounce(e=>{this.props.baseNode.dispatchEvent(new CustomEvent("marquee-bounce",{detail:{edge:e},bubbles:!1,composed:!0}))},40,{leading:!0,tailing:!1})};tv.defaultProps={speed:-10,direction:"horizontal",behavior:"scroll","pointer-interaction":!0,"vertical-height":"100",friction:5};Mue=qt(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(tv));ar(Mue,"marquee-set",["gutter","speed","direction","behavior","pointer-interaction","vertical-height","friction"],{renderIntoShadow:!0})});var i3e,Ju,rv,Rue,AB=$(()=>{ke();Ze();mt();Fe();ng();Xn();i3e=ve(Ie(),1);Zr();Ur();fe();Ju=new Map,rv=class extends me{constructor(){super(),this.state={iconElement:{imgVdom:null,customDimensions:{width:32,height:32}}}}render(e,r){let i=r.iconElement.customDimensions.width/r.iconElement.customDimensions.height;return S(de,{children:rt(S(de,{children:[S("style",{id:"text-icon",children:`
		:host {
			cursor: ${e.adminMode?"text":"unset"};
			aspect-ratio: ${i};
			height: 1.2em;
			width: auto;
		    contain: layout;
		    margin-top: -1em;
		    margin-bottom: -.25em;
		    display: inline-block;
		    vertical-align: baseline;
			position: relative;
		}

		:host, *{
		    -moz-user-select: text;
		    -webkit-user-select: text;
		    -ms-user-select: text;
		    user-select: text; 		
		}

		img {
			pointer-events:none;
		}
		
		svg, img {
			object-fit: cover;
			display: block;
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
			fill: currentColor;
		}
					`}),this.state.iconElement.imgVdom,this.props.adminMode?S(Jr,{baseNode:this.props.baseNode,inFront:!1}):null]}),this.props.baseNode.shadowRoot)})}getIconSVG=()=>{new Promise((e,r)=>{let i=this.props.icon||null;if(i)if(Ju.has(i))e(Ju.get(i));else{let o=i.indexOf("https://")===0?i:"https://build.cargo.site/frontend/da62ba/icon/icons/"+i+".svg",s=o.split(".")?.pop()||"";if(["jpeg","jpg","png","gif","webp"].indexOf(s.toLowerCase())!=-1){let a=document.createElement("img");a.src=o,a.onload=()=>{let l=S("img",{part:"img",src:i,width:a.naturalWidth,height:a.naturalHeight});Ju.set(i,{imgVdom:l,customDimensions:{width:a.naturalWidth,height:a.naturalHeight}}),a.onload=null,e(Ju.get(i))}}else s=="svg"?fetch(o,{mode:"cors"}).then(a=>a.ok?a.text():r("bad response")).then(a=>{let l=document.createElement("div");l.innerHTML=a;let p={width:32,height:32},f=Array.from(l.children).map((c,m)=>{let v=c.tagName.toLowerCase()=="svg";return v&&c.hasAttribute("width")&&c.hasAttribute("height")&&(p.width=c.getAttribute("width"),p.height=c.getAttribute("height")),zu(c,null,{part:v?"svg":m,key:i+"-"+m,draggable:!0})});if(f.length>0){if(Ju.set(i,{imgVdom:f,customDimensions:p}),i!==this.props.icon){r("Icon name mismatch");return}e(Ju.get(i))}else r("Icon not found at ",o)}).catch(a=>{r(a)}):r("Invalid url")}else r("Icon not found",i)}).then(e=>{this.setState({iconElement:e})}).catch(e=>{console.log("icon loading failed:",e)})};onDragStart=e=>{e.dataTransfer.setData("text-icon-drag","true")};componentDidMount(){for(this.props.baseNode.addEventListener("dragstart",this.onDragStart);this.props.baseNode.childNodes[0];)this.props.baseNode.childNodes[0].remove();this.getIconSVG()}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStart)}componentDidUpdate(e){e.icon!==this.props.icon&&this.getIconSVG()}};rv.defaultProps={icon:null};Rue=qt(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(rv));ar(Rue,"text-icon",["icon"],{delegatesFocus:!0})});var oS,TB,MB=$(()=>{Ze();Zm();fe();oS=class extends ze.Component{constructor(e){super(e)}render(){return S(de,{children:[S("div",{className:"colorfilter-color"}),S("div",{className:"colorfilter-base"})]})}componentDidMount(){Qe.isSafari()&&(document.querySelector("#editor-overlay")?.classList.add("safari"),document.querySelector("#cargo-dotsite")?.classList.add("safari"),document.querySelector(".colorfilter-base")?.classList.add("safari"),document.querySelector(".colorfilter-color")?.classList.add("safari"))}componentWillUnmount(){document.querySelector("#editor-overlay")?.classList.remove("safari"),document.querySelector("#cargo-dotsite")?.classList.remove("safari")}},TB=oS});function Nue(t){let e=he?t.site?.is_template:t.site?.is_template&&parent===window;return{hasSitePackage:t.frontendState.hasSitePackage,adminInitialized:t.adminState?.initialized||!1,inAdminFrame:t.frontendState.inAdminFrame,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,showCargoLogo:!e&&t.site?.show_cargo_logo,customHTML:t.site?.custom_html,access_level:t.site?.access_level,website_title:t.site?.website_title,domain_active:t.site?.domain_active,domain:t.site?.domain,site_url:t.site?.site_url,site_id:t.site?.id,fonts:t.site?.fonts,fontsLoaded:t.frontendState.fontsLoaded,stylesheet:t.frontendState.pageNotFound?" ":t.css?.stylesheet,hasAuth:t.auth.authenticated,canDuplicate:e,activePID:t.frontendState.activePID,itemsInCart:ao.default.values(t.commerce.cart).reduce((r,i)=>r+=i?.quantity||0,0),enableColorFilter:!!t.siteDesign.site?.enableColorFilter}}function Oue(t){return Bt({fetchSitePackage:Ye.fetchSitePackage,updateFrontendState:Ye.updateFrontendState,getAuthToken:Ye.getAuthToken},t)}var RB,ao,kB,iv,nv,sS,kue,aS,NB,OB=$(()=>{ke();xr();mt();RB=ve(Hh(),1),ao=ve(Ie(),1);Zs();Fe();xk();tr();Ja();c1();Po();Zz();qr();cg();l3();Hx();f3();Zr();M3();Ug();ug();O1();L1();B1();V3();G3();hB();vB();wB();IB();AB();Rr();_i();MB();fe();kB=!1,iv=!1,nv=!0,sS=(t=!1)=>{(t||kB&&iv&&nv)&&setTimeout(()=>{nv&&window.dispatchEvent(new CustomEvent("initial-content-visible",{detail:{screenshots:{hiddenIds:["dl-duplicate-site"]}}}))},1500)},kue=async t=>{let e=[];if(t.hasSitePackage!==!0&&e.push(t.fetchSitePackage()),he&&t.fonts&&ao.default.isArray(t.fonts)){let r=[...t.fonts].filter(n=>n.provider!=="google"),i=x1({context:"server",families:r});i.then(n=>{t.updateFrontendState({fontsLoaded:ao.default.uniq(t.fontsLoaded.concat(r.map(o=>o.family))),serverRenderedFontCSS:n.filter(o=>o??!1)})}),e.push(i)}await Promise.allSettled(e),kB=!0,sS()},aS=class extends me{constructor(e){if(super(e),this.state={checkedExistingAuth:!!he,checkedCookieAuth:!!he,mobileOffsetsString:null,inheritableFontSizesString:null,linkStylesString:null,fontFeatureSettingsStylesString:null},!he){if(Promise.resolve().then(()=>(lp(),h1)).then(({default:n})=>{this.setState({QuickView:n})}),e.inAdminFrame===!0){let n=document.getElementsByTagName("head")[0],o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href="https://build.cargo.site/frontend/da62ba/css/front-end/frontend-interface.css",o.id="frontend-interface",n.appendChild(o)}this.setMobileClass(this.props.isMobile),this.setOSClass();let r=0,i=0;window.addEventListener("backdrop-load-start",()=>{nv=!1,r++}),window.addEventListener("backdrop-load-complete",()=>{i++,i===r&&(nv=!0,sS())})}this.globalStyleRef=_e(),this.customHTMLRef=_e(),this.scrollingElement={current:he?null:window},this.setWindowTitle()}setWindowTitle=()=>{if(he)return;let e=this.props.store.getState(),r,i="";this.props.activePID&&this.props.activePID!==e.site.homepage_id&&this.props.activePID!==e.site.mobile_homepage_id&&this.props.activePID!=="root"&&(e.pages.byId[this.props.activePID]?r=e.pages.byId[this.props.activePID]:e.sets.byId[this.props.activePID]&&(r=e.sets.byId[this.props.activePID])),this.props.website_title&&(i=`${r?.title?`${r.title} \u2014 `:""}${this.props.website_title}`),i!==document.title&&(document.title=i)};onFirstSiteLoad(){let e=!1;try{e=parent.__c3_admin__===!0}catch{}window.dispatchEvent(new CustomEvent("cargo-site-load",{detail:{editing:e}}))}render(){if(this.props.hasSitePackage!==!0)return null;if(!he&&!zr&&this.props.domain_active===!0&&this.props.domain!==window.location.host&&!Ha)return window.location.hostname=this.props.domain,null;if(this.props.access_level==="password"||this.props.access_level==="private"){let r=null;return this.props.hasAuth&&this.state.checkedExistingAuth===!1?this.fetchingSitePackage||(this.fetchingSitePackage=!0,this.props.fetchSitePackage().finally(()=>{delete this.fetchingSitePackage,this.setState({checkedExistingAuth:!0})})):this.state.checkedCookieAuth===!1?this.checkingAuth||(this.checkingAuth=!0,this.props.getAuthToken({timeout:1500,site_url:this.props.site_url,site_id:this.props.site_id}).then(()=>{this.props.fetchSitePackage().finally(()=>{delete this.checkingAuth,this.setState({checkedCookieAuth:!0})})}).catch(i=>{this.setState({checkedCookieAuth:!0})}).finally(()=>{delete this.checkingAuth})):(this.props.access_level==="password"?r=S(Hu,{target:"site",onSucces:()=>{this.props.fetchSitePackage()}}):this.props.access_level==="private"&&(r=S(gg,{message:"This site is private."})),this.onFontLoad(!0)),S(de,{children:S(g1,{children:r})})}let e=this.props.customHTML;return S(de,{children:[this.props.enableColorFilter?S(TB,{}):null,S("customhtml",{ref:this.customHTMLRef,dangerouslySetInnerHTML:{__html:e}}),S(a3,{}),S(g1,{}),S("style",{ref:this.globalStyleRef,dangerouslySetInnerHTML:{__html:this.props.stylesheet}}),S("style",{id:"mobile-offset-styles",dangerouslySetInnerHTML:{__html:this.state.mobileOffsetsString}}),S("style",{id:"text-style-font-sizes",dangerouslySetInnerHTML:{__html:this.state.inheritableFontSizesString}}),S("style",{id:"link-styles",dangerouslySetInnerHTML:{__html:this.state.linkStylesString}}),S("style",{id:"font-feature-settings-styles",dangerouslySetInnerHTML:{__html:this.state.fontFeatureSettingsStylesString}}),S(du,{scrollingElement:this.scrollingElement,children:[S(Hz,{}),this.state.QuickView&&S(this.state.QuickView,{isMobile:this.props.isMobile}),this.props.inAdminFrame&&S($k,{}),this.state.loginBeforeDuplicatingSite&&S(wk,{loginToUdotCargoOnly:!0,canCreateNewAccount:!this.props.isMobile,animateIn:!0,canClickout:!0,templateID:this.props.site_id,onClickout:()=>{this.setState({loginBeforeDuplicatingSite:!1})},onLoginSuccess:r=>{window.location.href=`${nu}?duplicate=${this.props.site_id}`}}),S(Io,{portalHost:he?null:document.body})]})]})}componentDidMount(){this.loadNewFonts(),this.inPreviewMode=this.props.inAdminFrame&&this.props.adminMode===!1,this.showHideAdminInterface(),nt.on("mobile-change",this.onMobileChange),this.onMobileChange(nt.data.mobile.active&&nt.data.mobile.portrait),this.updateCartCounter(),this.props.hasSitePackage&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.onFirstSiteLoad()})})}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){console.error(e)}onMobileChange=()=>{this.props.updateFrontendState({isMobile:nt.data.mobile.active})};onFontLoad=(e=!1)=>{he||iv||(iv=!0,document.documentElement.classList.remove("wf-initial-load"),sS(e))};componentWillUnmount(){nt.off("mobile-change",this.onMobileChange)}showHideAdminInterface=()=>{this.inPreviewMode?document.querySelector("#frontend-interface")?.setAttribute("disabled",""):document.querySelector("#frontend-interface")?.removeAttribute("disabled")};setOSClass=()=>{!ad()&&!ld()&&document.body.classList.add("f-f")};setMobileClass=e=>{e?(document.body.classList.add("mobile"),document.documentElement.classList.add("mobile")):(document.body.classList.remove("mobile"),document.documentElement.classList.remove("mobile"))};setEditingClass=e=>{e?document.body.classList.add("editing"):document.body.classList.remove("editing")};loadNewFonts=()=>{if(!this.props.fonts)return;let e=this.props.fonts.filter(r=>!this.props.fontsLoaded.includes(r.family));e&&e.length>0?(this.props.updateFrontendState({fontsLoaded:ao.default.uniq(this.props.fontsLoaded.concat(e.map(r=>r.family)))}),x1({families:e}).then(()=>{iv||document.fonts.ready.then(()=>{this.onFontLoad()})})):document.fonts.ready.then(()=>{this.onFontLoad()})};componentDidUpdate(e,r){if(!he){if(this.setWindowTitle(),this.inPreviewMode=this.props.inAdminFrame&&this.props.adminMode===!1,typeof this.props.customHTML=="string"&&this.props.customHTML!==e.customHTML&&this.customHTMLRef.current){let i=document.createRange().createContextualFragment(this.props.customHTML);this.customHTMLRef.current.innerHTML="",this.customHTMLRef.current.appendChild(i)}this.props.stylesheet!==e.stylesheet&&(this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles(),this.setBrokenOPSZValues()),this.props.fonts!==e.fonts&&ao.default.isArray(this.props.fonts)&&this.loadNewFonts(),this.props.inAdminFrame===!0?(this.setEditingClass(this.props.adminMode),this.props.adminInitialized!==e.adminInitialized&&(this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles(),this.setBrokenOPSZValues())):this.setEditingClass(!1),e.isMobile!==this.props.isMobile&&(this.setMobileClass(this.props.isMobile),this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles(),this.setBrokenOPSZValues()),this.props.itemsInCart!==e.itemsInCart&&this.updateCartCounter(),this.showHideAdminInterface(),this.props.hasSitePackage&&!e.hasSitePackage&&requestAnimationFrame(()=>{this.onFirstSiteLoad()})}}updateCartCounter=()=>{document.documentElement.style.setProperty("--cart-item-count",this.props.itemsInCart||""),document.documentElement.style.setProperty("--cart-item-count-display",this.props.itemsInCart?"inline":"")};setBrokenOPSZValues=()=>{if(he||!Ui()||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=e.sheet;if(!r)return;let i=[];for(let n of r.cssRules)if(!(!n||!n.selectorText||!n.style)&&n.type===CSSRule.STYLE_RULE&&n.style.getPropertyValue("font-variation-settings")){let o=n.style.getPropertyValue("font-family")?.replace(/['\"]/g,"").trim(),s=n.style.getPropertyValue("font-weight")?.trim(),a=n.style.getPropertyValue("font-variation-settings");o&&o.includes("Gramercy")&&s==="400"&&a.match(/["']opsz["']\s*12(\D|$)/)&&(i.includes(n.selectorText)||i.push(n.selectorText))}if(i.length){let n="";i.forEach(s=>{n+=`${s} { font-variation-settings: 'opsz' 12.01 !important; }
`});let o=document.getElementById("broken-opsz-override");o||(o=document.createElement("style"),o.id="broken-opsz-override",document.head.appendChild(o)),o.innerHTML=n}else{let n=document.getElementById("broken-opsz-override");n&&document.head.removeChild(n)}};setFontFeatureSettingsStyles=()=>{if(he||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=e.sheet;if(!r)return null;let i=!1;for(let a of r.cssRules)if(a.selectorText==="bodycopy"&&a.style.getPropertyValue("font-feature-settings")){i=!0;break}else continue;if(!i)return;let n="",o=[],s=[];ao.default.each(r.rules,a=>{!a||!a.selectorText||a.selectorText.includes(" ")||((a.style.getPropertyValue("--text-style")||a.selectorText===".caption")&&!a.style.getPropertyValue("font-feature-settings")&&o.push(a.selectorText),a.selectorText.match(/h[1-6]/gi)&&!a.style.getPropertyValue("font-feature-settings")&&s.push(a.selectorText))});for(let a of o)n+=a+" { font-feature-settings: normal; } ";for(let a of s)n+=a+" { font-feature-settings: normal; } ";this.setState({fontFeatureSettingsStylesString:n})};setLinkStyles=()=>{if(he||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=e.sheet;if(!r)return null;let i="",n=[],o=[];ao.default.each(r.rules,s=>{!s||!s.selectorText||((s.style.getPropertyValue("--text-style")||s.selectorText===".caption")&&n.push(s.selectorText),s.selectorText.match(/h[1-6]/gi)&&o.push(s.selectorText))}),ao.default.each(r.rules,s=>{!s||!s.selectorText||(n.forEach(a=>{if(s.selectorText.startsWith(a)&&s.selectorText.includes(" a")){let l=s.selectorText.replace(/^(.*)\s(\a(?:[:.]\S*)?)$/i,(c,m,v)=>v+m);s.selectorText!==l&&(i+=l+" { "+(s.style.cssText||"")+" } ");let p=!!(s.selectorText.includes(" a::")||s.selectorText.includes(" a:")),f=s.style.getPropertyValue("text-decoration-color")===""?" text-decoration-color: unset;":"";f!==""&&!p&&(i+=l+" { "+(s.style.cssText||"")+f+" } ",i+=s.selectorText+" { "+f+" } ")}}),o.forEach(a=>{if(s.selectorText.startsWith(a)&&s.selectorText.includes(" a")){let l=!!(s.selectorText.includes(" a::")||s.selectorText.includes(" a:")),p=s.style.getPropertyValue("text-decoration-color")===""?" text-decoration-color: unset;":"";p!==""&&!l&&(i+=s.selectorText+" { "+p+" } ")}}))}),this.setState({linkStylesString:i})};setInheritableFontSizes=()=>{if(he||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=e.sheet;if(!r)return null;let i="";ao.default.each(r.rules,n=>{if(n.style?.fontSize&&n.style?.fontSize!==""){let o=n.style.fontSize,s=n.selectorText==="bodycopy"?", "+n.selectorText+" *":"";i+=n.selectorText+" {--font-size: "+o+`;}
`,i+=n.selectorText+s+` {font-size: calc(var(--font-scale) * var(--font-size));}
`}}),this.setState({inheritableFontSizesString:i})};setMobileOffsets=()=>{if(he)return;if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}if(!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=su(e.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:["ul","ul.lineated","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","blockquote","small-caps","match:audio-player","match:cargo-map","match:shop-product",".quick-view",".quick-view .caption",".quick-view .caption-background",".mobile .quick-view",".mobile .quick-view .caption"]},{properties:["margin-top","margin-right","margin-bottom","margin-left"],allowList:[".content",".mobile .content"]}]);this.setState({mobileOffsetsString:r})};getIsolatedStyleSheet=ao.default.once(()=>{let e=document.implementation.createDocument("http://www.w3.org/1999/xhtml","body",null),r=document.createElement("style");return e.children[0].appendChild(r),r})};NB=Nn(Ue(Nue,Oue)((0,RB.frontloadConnect)(kue,{onMount:!0,onUpdate:!1})(aS)))});var DB,LB=$(()=>{DB=ve(kn(),1);DB.default.defaults.validateStatus=function(t){return t>=200&&t<300}});var ov,sv,FB,zB=$(()=>{ov=ve(kn(),1);Fe();pa();sv=new Map,FB=t=>{let e;t.subscribe(()=>{let r=t.getState();if(!r.adminState||!r.adminState.crdt)return;let i=r.adminState.crdt.publishedAt;i!==e&&sv.clear(),e=i})};he||(ov.default.interceptors.request.use(async t=>{if(t.use_cache===!0){let e=ov.default.getUri(t);sv.has(e)?t.adapter=function(r){return sv.get(e).cachedResponsePromise}:(t.cachedResponsePromise=new Promise((r,i)=>{t.resolveCachedResponsePromise=r,t.rejectCachedResponsePromise=i}),t.cachedResponsePromise.catch(r=>r),sv.set(e,t))}return t}),ov.default.interceptors.response.use(t=>(t.config.resolveCachedResponsePromise&&t.config.resolveCachedResponsePromise(t),t),t=>(t.config?.rejectCachedResponsePromise&&t.config.rejectCachedResponsePromise(t),Promise.reject(t))))});var lS,BB=$(()=>{lS=ve(kn(),1);Fe();pa();tr();he||(lS.default.interceptors.request.use(async t=>{if(t.use_auth!==!1){let e=Ht?.getState();t.headers.Authorization===void 0&&e&&e.auth.data&&e.auth.data.access_token&&(t.headers.Authorization=`Bearer ${e.auth.data.access_token}`)}return t}),lS.default.interceptors.response.use(void 0,t=>(t.response?.status===403&&Ht.dispatch({type:Ne.AUTHENTICATE_USER_REJECTED,payload:{}}),Promise.reject(t))))});var UB=$(()=>{});var qB=$(()=>{});var HB,WB=$(()=>{Ug();O1();ug();L1();B1();HB={grid:oo,columnized:ws,slideshow:br,freeform:ei,justify:so}});var Due={};var VB,$B=$(()=>{_r();pa();VB=ve(n0(),1);xr();k0();tr();Dt();WB();Rr();wg();window.getClientAPI=()=>({actions:_0,reducers:R0,selectors:$e,history:no,store:Ht,globals:w0,addReduxMiddleWare:VB.addMiddleware,combineReducers:Gn,galleryData:HB,editorOverlayAPI:Xe,toggleOverlay:Qr.toggleOverlay,openOverlay:Qr.openOverlay,closeOverlay:Qr.closeOverlay})});var jB,GB,gBe,Ht,no,pa=$(()=>{ke();mt();jB=ve(Hh(),1);ns();Fe();Gh();GB=ve(Ie(),1),gBe=ve(kn(),1);fk();tr();mk();OB();qr();_i();LB();zB();BB();UB();qB();fe();!he&&zr&&($B(),Nc(Due));({store:Ht}=hk());if(!he){no=jh(),nt.setupStore(Ht),FB(Ht);let t;try{t=localStorage.getItem("c3-auth")}catch(o){console.log("unable to retrieve stored auth",o)}let e=new URLSearchParams(window.location.search);if(e.has("auth"))try{Ht.dispatch({type:Ne.AUTHENTICATE_USER_FULFILLED,payload:{authenticated:!0,data:JSON.parse(e.get("auth"))}}),e.delete("auth");let o=e.toString();o.length>0&&(o="?"+o),window.history.replaceState({},document.title,window.location.origin+window.location.pathname+o)}catch(o){console.error("unable to use querystring auth",o)}else if(t)try{Ht.dispatch({type:Ne.AUTHENTICATE_USER_FULFILLED,payload:{authenticated:!0,data:JSON.parse(t)}})}catch(o){console.error("unable to retrieve stored auth",o)}window.history.scrollRestoration&&(window.history.scrollRestoration="manual");let r={};no.push=GB.default.wrap(no.push,function(o){r[window.location.pathname]=document.scrollingElement.scrollTop;var s=Array.prototype.slice.call(arguments);let a=s[1]||"";if(!(a.startsWith("#")&&a.length>1||s.some(l=>l.preventScrollReset===!0))){let l=Ht.getState().frontendState.activePID,p=Ht.getState().frontendState.activeTag,f=null,c=Ht.subscribe(()=>{clearTimeout(f);let m=Ht.getState();if(m.frontendState.activePID&&m.frontendState.activePID!==l||m.frontendState.activeTag&&m.frontendState.activeTag.url!==p?.url){document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"});let v=document.scrollingElement.scrollHeight;F0(10,()=>{let g=document.scrollingElement.scrollHeight;v!==g&&(document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"}),v=g)}),c()}else f=setTimeout(()=>{c()},4e3)})}s.shift(),o.apply(this,s)}),window.addEventListener("popstate",o=>{let s=window.location.pathname,a=no.location.pathname;if(window.location.hash.length>1)return;r[a]=document.scrollingElement.scrollTop;let l=Ht.getState().frontendState.activePID,p=Ht.getState().frontendState.activeTag,f=Ht.subscribe(()=>{let c=Ht.getState();if((c.frontendState.activePID&&c.frontendState.activePID!==l||c.frontendState.activeTag&&c.frontendState.activeTag.url!==p?.url)&&r.hasOwnProperty(s)){let m=c.frontendState.activePID;setTimeout(async()=>{let v=0,g=!0;for(;g&&c.frontendState.activePID===m;)v>10&&(g=!1),document.scrollingElement.scrollHeight>=r[s]&&(document.scrollingElement.scrollTo({top:r[s],left:0,behavior:"instant"}),g=!1),v++,await new Promise(x=>setTimeout(x,100))}),f()}})});let i=S(By,{store:Ht,children:S($s,{history:no,children:S(jB.Frontload,{noServerRender:!0,children:S(NB,{})})})}),n=document.body;n.querySelector(".content")!==null?Bc(i,n):Bs(i,n),requestAnimationFrame(()=>{document.body.style.opacity=""})}});pa();export{no as history,Ht as store};
/*! lightbox - v1.0.0 Build date: 2017-10-10
	Wrapper for PhotoSwipe (http://photoswipe.com) Copyright (c) 2015 Dmitry Semenov
	*/
/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
/*! PhotoSwipe Default UI - 4.1.1 - 2015-12-24
 * http://photoswipe.com
 * Copyright (c) 2015 Dmitry Semenov; */
/*! Bundled license information:

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=https://build.cargo.site/frontend/da62ba/index.js.map
